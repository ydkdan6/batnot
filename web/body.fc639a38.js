/*! For license information please see body.fc639a38.js.LICENSE.txt */
(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[489],{69940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(83710),n(41539),n(39714),n(54678),n(74916),n(15306);var r={monthNames:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonthNames:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],dayOfWeekNames:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],shortDayOfWeekNames:["sun","mon","tue","wed","thu","fri","sat"],texts:{at:"at"},getDaysToThisWeekLastWorkingDay:function(e){return r.getDaysToDayOfWeek(e,5)},getDaysToDayOfWeek:function(e,t){return(7+t-e)%7},getDaysToSaturday:function(e){return r.getDaysToDayOfWeek(e,6)},getLongDateFormat:function(e){var t=r.dayOfWeekNames[e.getDay()]+", "+r.monthNames[e.getMonth()]+" "+e.getDate();return e.getFullYear()!=(new Date).getFullYear()&&(t+=", "+e.getFullYear()),t},getShortDateFormat:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+r.shortMonthNames[e.getMonth()]+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())},getDayAndMonthFormat:function(e){return r.monthNames[e.getMonth()]+" "+e.getFullYear()},getTimeOnlyFormat:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t},getShortDateFormatWithTime:function(e){var t=e.getDate().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();1==n.length&&(n="0"+n);var o=e.getHours().toString();return 1==o.length&&(o="0"+o),t+"-"+r.shortMonthNames[e.getMonth()]+"-"+e.getFullYear()+" "+o+":"+n},getOnlyTimeFromDate:function(e,t){var n=e.getMinutes().toString();1!=n.length||t||(n="0"+n);var r,o=e.getHours().toString();return 1!=o.length||t||(o="0"+o),t?(r=o>12?o-12:o,r+=0!=n?":"+n:""):r=(o>12?o-12:o)+":"+n,r+" "+(o>=12?"PM":"AM")},addDaysToDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},equals:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())},equalsWithTime:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes())},getDateDifferenceInDays:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)},getShortDateWithDayNameFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+r.shortMonthNames[e.getMonth()].toUpperCase()+" ("+r.dayOfWeekNames[e.getDay()].substring(0,3)+")"},getOnlyMonthAndDayWithTimeFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),r.shortMonthNames[e.getMonth()]+" "+t+" "+r.texts.at+" "+r.getTimeWithMeridianFromDate(e)},getDateFromTimestamp:function(e){return new Date(1e3*parseFloat(e))},getTimeWithMeridianFromDate:function(e){var t=e.getHours(),n=e.getMinutes(),r=t%12;return(0==r?12:r)+":"+(n>9?n:"0"+n)+(t>=12?"pm":"am")},getStrFTime:function(e,t){return t=t.constructor==Date?t:r.now(),e=(e=(e=e.replace(/%a/g,r.dayOfWeekNames[t.getDay()].substring(0,3))).replace(/%b/g,r.shortMonthNames[t.getMonth()])).replace(/%e/g,t.getDate())},getStrFTimeRange:function(e,t,n){return r.getStrFTime(r.getStrFTime(e,t).replace(/#([abe])/g,"%$1"),n)},getLastDayInMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}};const o=r},38781:(e,t,n)=>{"use strict";n(32564);var r=n(67991),o=(n(41539),(0,r.wT)("SendBeacon",r.$L));o.prototype.send=function(e,t){var n="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return n.open("POST",e,!1),n.setRequestHeader("Accept","*/*"),"string"==typeof t?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text/plain"):"[object Blob]"===Object.prototype.toString.call(t)&&t.type&&n.setRequestHeader("Content-Type",t.type),n.send(t),!0};const i=o;var a,u=n(34039),l={},s=(0,r.wT)("Notifier",r.$L),c=new i;l.TIME_LIMIT=3e5,l.load=function(e,t,n){this.urlLocation=e,this.statusConfirmed=!!t,this.hasError=!!n},u.Z.getEventManager().attachToLoadEvent((function(){var e=document.getElementById("rsvpComment");if(e){var t=l.statusConfirmed?null:e;a=new s(l.TIME_LIMIT,l.urlLocation,l.statusConfirmed,l.hasError,t,c)}})),window.addEventListener("beforeunload",(function(e){a&&a.sendOnClose()})),s.prototype.init=function(e,t,n,r,o,i){this.time=e,this.timer=null,this.url=t,t&&(this.urlLocation=this.getURL(t)),this.params=this.getAllParameters(t),this.commentForm=o,this.sendBeacon=i,this.statusConfirmed=n,this.hasError=r,this.addSubmitListener(o),this.setTimerIfNecessary()},s.prototype.setTimerIfNecessary=function(){this.statusConfirmed||this.hasError||(this.timer=setTimeout(this.caller("sendNotification"),this.time))},s.prototype.clearTimeOutIfNecessary=function(){this.timer&&clearTimeout(this.timer)},s.prototype.sendNotification=function(){this.clearTimeOutIfNecessary(),this.statusConfirmed=!0,this.commentForm.submit()},s.prototype.addSubmitListener=function(e){e&&e.addEventListener("submit",this.caller("formSubmit"))},s.prototype.formSubmit=function(){this.sendNotification()},s.prototype.sendOnClose=function(){if(!this.statusConfirmed){this.clearTimeOutIfNecessary();var e=new FormData;e.append("hash",this.params.hash),e.append("rsvpId",this.params.rsvpId),e.append("recurrent",this.params.recurrent),e.append("statusConfirmed","true"),this.sendBeacon.send(this.urlLocation,e)}},s.prototype.getAllParameters=function(e){var t={};if(e){var n,r,o=e.split("?")[1].split("&amp;");for(r=0;r<o.length;r++)t[(n=o[r].split("="))[0]]=void 0===n[1]||decodeURIComponent(n[1])}return t},s.prototype.getURL=function(e){return e.split("?")[0]};const f=l;n(83710),n(47042),n(74916),n(15306),n(91058);var p=n(69940),d=(0,r.wT)("EventSignupFreeTimePicker",r.$L);d.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},d.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.WN)(new h(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new m(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},d.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},d.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=new Date(this.selectedDate),n=new Date(this.selectedDate);n.setHours(23),n.setSeconds(59),n.setMinutes(59);for(var r=[],o=0;o<availableEvents.length;++o)if(void 0!==availableEvents[o]){var i=new Date(1e3*availableEvents[o].targetDate.timestamp);if(i>=t&&i<=n){var a={eventId:availableEvents[o].id,targetDate:{timestamp:1e3*availableEvents[o].targetDate.timestamp},timezoneOffset:i.getTimezoneOffset(),durationInSeconds:availableEvents[o].durationInSeconds,slotInMinutes:availableEvents[o].durationInSeconds/60,hasTime:availableEvents[o].targetDateHasTime};r.push({targetDate:new Date(1e3*availableEvents[o].targetDate.timestamp),slot:a})}}this.freeTimesForSelectedDate=r,this.datePicker.setDate(this.selectedDate),this.timeSelector.setDate(this.selectedDate,this.freeTimesForSelectedDate)};var y=(0,r.wT)("Toolbar",r.$L);y.prototype.init=function(e){this.content=e,this.drawUI()},y.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var h=(0,r.wT)("DatePicker",r.$L);h.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},h.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},h.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new y(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},h.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[p.Z.shortDayOfWeekNames[0].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[1].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[2].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[3].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[4].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[5].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[6].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[6].slice(1)])])]},h.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.WN)(new v(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},h.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},h.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(p.Z.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=p.Z.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),o=(a=new Date).getFullYear(),i=a.getMonth(),a=a.getDate(),u=!1,l=0;l<6;++l){this.weeks[l].element.style.display=r>n?"none":"";for(var s=0;s<7;++s){var c=new Date(e,t,r);this.weeks[l].days[s].setDay(c),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Past",r<=0||r>n),!u&&r+1>=n&&(u=!0),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Today",c.getDate()==a&&c.getFullYear()==o&&c.getMonth()==i),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==c.getDate()&&this.selectedDate.getFullYear()==c.getFullYear()&&this.selectedDate.getMonth()==c.getMonth()),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(c)),++r}}},h.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},h.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},h.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},h.prototype.changeDate=function(e){var t=new r.uW,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());for(var o=[],i=0;i<availableEvents.length;++i)void 0!==availableEvents[i]&&o.push(new Date(1e3*availableEvents[i].targetDate.timestamp));this.daysWithFreeTime=o,this.dispatchEvent("selectdate",t)},h.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var v=(0,r.wT)("DatePickerWeek",r.$L);v.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.WN)(new b(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var b=(0,r.wT)("DatePickerCell",r.$L);b.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},b.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},b.prototype.onHeaderClick=function(){var e=new r.uW;e.date=this.date,this.dispatchEvent("selectdate",e)};var m=(0,r.wT)("TimeSelector",r.$L);m.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},m.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},m.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new y(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},m.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new g(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},m.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(p.Z.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},m.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var g=(0,r.wT)("TimeSelectorOption",r.$L);g.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},g.prototype.getValueForCheckbox=function(){return this.slot.eventId},g.prototype.drawUI=function(){var e;e=this.slot.hasTime?p.Z.getOnlyTimeFromDate(this.startDate)+" - "+p.Z.getOnlyTimeFromDate(this.endDate):"Full day",this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedEvent",onchange:this.caller("onChange")}),e]),this.input.value=this.getValueForCheckbox()},g.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.uW;t.date=this.date,this.dispatchEvent("selecttime",t)};const _=d;n.g.Invite=f,n.g.EventSignupFreeTimePicker=_},67991:(e,t,n)=>{"use strict";n.d(t,{$L:()=>y,WN:()=>c,uW:()=>d,wT:()=>s});n(91058),n(74916),n(4723),n(82772),n(40561),n(68309),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){var e=parseInt((i.match(/.+ie\s([\d.]+)/i)||[])[1]);return e>7?document.documentMode:e}var i=navigator.userAgent.toLowerCase(),a=-1!=i.indexOf("opera"),u=-1!=i.indexOf("msie")&&!a,l=(u&&o(),u&&o(),u&&o(),u&&o(),u&&o()>=9);function s(e,t){var n=window[e]=function(){this.classRef=n,!s.DO_NOT_RUN_INIT_METHOD&&this.init&&this.init.apply(this,arguments)};if(t){s.DO_NOT_RUN_INIT_METHOD=!0;var r=new t;s.DO_NOT_RUN_INIT_METHOD=!1,r.classRef=t,n.prototype=r}return n.className=n.displayName=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){var t;return s.DO_NOT_RUN_INIT_METHOD=!0,t=new n,s.DO_NOT_RUN_INIT_METHOD=!1,t.init&&t.init.apply(t,e),t},n}function c(e,t){return e.peg(t),e}function f(e,t){return e instanceof t}c.methodName="Peg";var p={addWord:function(e,t){return p.hasWord(e,t)?e:e+" "+t},splitBySpaces:function(e){for(var t,n=[],r=0;;){if(-1==(t=e.indexOf(" ",r)))return e.length>r&&n.push(e.substring(r)),n;t>r&&n.push(e.substring(r,t)),r=t+1}},removeWord:function(e,t){for(var n="",r=0,o=p.splitBySpaces(e),i=0;i<o.length;++i)o[i]!=t&&(r&&(n+=" "),n+=o[i],++r);return n},hasWord:function(e,t){for(var n,r=0;;){if(-1==(n=e.indexOf(" ",r)))return e.length>r&&t==e.substring(r);if(n>r&&t==e.substring(r,n))return!0;r=n+1}}},d=function(){};d.prototype.init=function(){this.prevented=!1},d.prototype.preventDefault=function(){this.prevented=!0},d.prototype.getDefaultPrevented=function(){return this.prevented};var y=function(){};y.prototype.init=function(){},y.prototype.caller=function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=function(e,t,n){var r;return r=n?function(){if(e[t])return e[t].apply(e,n)}:function(){if(e[t])return e[t].apply(e,arguments)},r}(this,e)},y.prototype.dispatchEvent=function(e,t){if(void 0===t&&(t=new d),f(t,d)&&(t.sourceWidget||(t.sourceWidget=this),t.currentWidget=this),this.eventListeners&&this.eventListeners[e])for(var n=function(e){var t,n;for(t in n=e.constructor==Array?[]:{},e)n[t]=e[t];return n}(this.eventListeners[e]),r=0;r<n.length;++r)n[r](t)},y.prototype.dispatcher=function(e){if(this.dispatchers||(this.dispatchers={}),this.dispatchers[e])return this.dispatchers[e];var t=this;return this.dispatchers[e]=function(n){t.dispatchEvent(e,n)}},y.prototype.addDOMListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeDOMListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.addListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.peg=function(e){for(var t in e)null!==e[t]&&this.addListener(t.substr(2),e[t])},y.prototype.appendChildren=function(e,t){for(var n=0;n<t.length;++n)this.appendChild(e,t[n])},y.prototype.appendChild=function(e,t){var n;null!=t&&("string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t)):(n=f(t,y)?t.getDomNode():t,e.appendChild(n)))},y.prototype.removeChild=function(e,t){var n;null!==t&&(n=t.getDomNode?t.getDomNode():t,e.removeChild(n))},y.prototype.removeAllChildren=function(e){for(;e.firstChild;)this.removeChild(e,e.firstChild)},y.prototype.getDomNode=function(){return this.element},y.prototype.e=function(e,t,n){var o,i,a,s;for(var c in o=u&&!l&&"input"==e&&t&&t.type?document.createElement('<input type="'+t.type+'"'+(t.name?' name="'+t.name+'"':"")+(t.id?' id="'+t.id+'"':"")+">"):document.createElement(e),t)if("function"==(s=r(t[c])))this.addDOMListener(o,c.substr(2),t[c]);else if("boolean"==s)o[c]=t[c];else if("style"==c&&"object"==r(t[c]))for(a in i=t[c])null!==i[a]&&(o.style[a]=i[a]);else if("class"==c)o.className=t[c];else if("maxlength"==c)o.maxLength=t[c];else{if(null===t[c])continue;(!u||l||"input"!=e||"type"!=c&&"name"!=c)&&o.setAttribute(c,t[c])}return n&&this.appendChildren(o,n),o},y.prototype.addDOMListener=function(e,t,n,r){u?(r=!!r,e.attachEvent("on"+t,n)):e.addEventListener(t,n,r)},y.prototype.removeDOMListener=function(e,t,n,r){u?(r=!!r,e.detachEvent("on"+t,n)):e.removeEventListener(t,n,r)},y.prototype.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},y.prototype.getPreventDefault=function(e){return"defaultPrevented"in e?e.defaultPrevented:!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()},y.prototype.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},y.prototype.cancelEvent=function(e){e||(e=window.event),this.preventDefault(e),this.stopPropagation(e)},y.prototype.addClass=function(e,t){e.className=p.addWord(e.className,t)},y.prototype.removeClass=function(e,t){e.className=p.removeWord(e.className,t)},y.prototype.setHasClass=function(e,t,n){n?this.addClass(e,t):this.removeClass(e,t)}},24996:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(96649),n(96078),n(82526),n(41817),n(41539),n(9653),n(69070),n(32165),n(66992),n(78783),n(33948);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}const i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"get",value:function(e){var t=document.querySelector('portal-data[id="'+e+'"]');return t?t.dataset:null}},{key:"getAllByDataValue",value:function(e,t){return document.querySelectorAll("portal-data[data-"+e+'="'+t+'"]')}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},16655:e=>{var t=pjQuery.Deferred;function n(){this._initialize()}n.prototype.get=function(e){var n=t();return this.cache[e]?n.resolve(this.cache[e]):n.reject(null),n.promise()},n.prototype.set=function(e,n){var r=t();return this.cache[e]=n,r.resolve(!0),r.promise()},n.prototype.clear=function(e){var n=t();return this.cache.hasOwnProperty(e)?(delete this.cache[e],n.resolve(!0)):n.reject(null),n.promise()},n.prototype.purge=function(){var e=t();return this._initialize(),e.resolve(!0),e.promise()},n.prototype.buildKey=function(e,t){return t=t||{},md5(e+JSON.stringify(t))},n.prototype._initialize=function(){this.cache={}},n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},e.exports=n},89415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(78879);const o=function(){function e(){this.cookieUsageInfo=[],this._setApiUrl()}e.prototype._setApiUrl=function(){var e=new r.Z;this.apiUrl="/"+e.get("avature.portal.id")+"/_portalCookieUserConsent"},e.prototype.init=function(e){this.getAll(e)},e.prototype.getAll=function(e){this._sendGet({method:"getAll"},e)},e.prototype.getCurrentUserConsent=function(e){this._sendGet({method:"getCurrentUserConsent"},e)},e.prototype.acceptAll=function(e){this._sendPost({method:"acceptAll"},e)},e.prototype.getCookieUsage=function(e){return e(this.cookieUsageInfo)},e.prototype.addCookieUsageInfo=function(e,t){e.isInUseOnPage=t,this.cookieUsageInfo[e.variableName]=e},e.prototype.updateTypesConsent=function(e,t){this._sendPost({method:"updateTypesConsent",data:JSON.stringify(e)},t)},e.prototype.shouldRequestUserConsent=function(e){this._sendGet({method:"shouldRequestConsent"},e)},e.prototype._sendPost=function(e,t){pjQuery.post(this.apiUrl,e,t,"json")},e.prototype._sendGet=function(e,t){pjQuery.get(this.apiUrl,e,t,"json")};var t=null;return{getInstance:function(){return null===t&&(t=new e),t}}}()},17532:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(74916),n(15306),n(82772),n(24603),n(39714),n(4723),n(24812),n(82526),n(41817),n(69600),n(89554),n(41539),n(54747),n(32564),n(68309),n(32165),n(66992),n(78783),n(33948),n(93064);var o=function(){var e;function t(){var e={},t={escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(e,t){var n=" ";return 1===e.nodeType&&(n+e.className+n).replace(/[\n\t]/g,n).indexOf(n+t+n)>=0},addClass:function(e,t){e.className=e.className.replace(/^\s+|\s+$/g,"")+" "+t},removeClass:function(e,t){var n=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");e.className=e.className.replace(n,"")},toggle:function(e,t){void 0===t&&(t=""),"none"==e.style.display||"none"==getComputedStyle(e).display?e.style.display=t:e.style.display="none"},interpolateString:function(e,t,n){return e.replace(/{{([a-z][a-z0-9\-_]*)}}/gi,(function(e){return n(t,arguments[1])||""}))},hasInterpolation:function(e,t){var n=new RegExp("{{"+t+"}}","gi");return e.match(n)},deepExtend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(n in e&&this.isPlainObject(e[n])&&this.isPlainObject(t[n])?this.deepExtend(e[n],t[n]):e[n]=t[n]);return e},isPlainObject:function(e){return"object"===r(e)&&null!==e&&e.constructor==Object},traverseDOMPath:function(e,n){return e&&e.parentNode?t.hasClass(e,n)?e:this.traverseDOMPath(e.parentNode,n):null},callback:function(e,t){return t&&void 0!==e[t]?e[t]:""}};return e.transitionEnd=function(){var e=document.createElement("div"),t={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n+"ransition"])return t[n];return""}(),e.hasTransition=!!e.transitionEnd,e.popup=function(){var n={autoOpen:!0,forceOpen:!1,container:null,wrapperClass:"",onPopupOpen:function(){},onPopupClose:function(){location.reload(!0)},content:{description:"This portal protects your privacy by adhering to the European Union General Data Protection Regulation (GDPR). We will not use your data for any purpose that you do not consent to. We request use of anonymized data to improve your experience on our site.",acceptAll:"Accept all",rejectAll:"Reject all",save:"Save and close",cancel:"Cancel",settings:"Advanced settings",showMore:"Show more",showLess:"Show less",ellipsis:"...",cookiesDisabled:"Error: Cookies are blocked or not supported by your browser. You must enable cookies to use this site."},templates:{window:'<div class="cookies {{classes}}"><div class="cookies__wrapper"><div class="cookies__content clearfix">{{children}}</div></div></div>',elements:{error:'<div class="cookies__info"><div class="cookies__info__copy"><p>{{cookiesDisabled}}</p></div></div>',summary:'<div class="cookies__info"><div class="cookies__info__copy"><p>{{description}}</p></div><div class="cookies__info__buttons"><a href="#" class="cookiesButton cookiesButtonAccept" role="button">{{acceptAll}}</a><a href="#" class="cookiesButton cookiesButtonReject" role="button">{{rejectAll}}</a><a href="#" class="cookiesButton cookiesButtonSettings cookiesButtonSettingsIcon" role="button" aria-label="{{settings}}"><i class="avaicon-icon-settings" aria-hidden="true"></i><span>{{settings}}</span></a><a href="#" class="cookiesButton cookiesButtonSettings cookiesButtonSettingsText" role="button">{{settings}}</a></div></div>',noSettingsSummary:'<div class="cookies__info"><div class="cookies__info__copy"><p>{{description}}</p></div><div class="cookies__info__buttons"><a href="#" class="cookiesButton cookiesButtonAccept" role="button">{{acceptAll}}</a><a href="#" class="cookiesButton cookiesButtonReject" role="button">{{rejectAll}}</a></div></div>',settings:'<div class="cookies__settings"><div class="cookies__settings__content">{{detailsLeft}}</div><div class="cookies__settings__content">{{detailsRight}}</div></div>',settingsOneCol:'<div class="cookies__settings cookies__one__column">{{details}}</div>',footer:'<div class="cookies__settings__buttons"><a href="#" class="cookiesButton cookiesButtonSave" role="button">{{save}}</a></div>'},option:{default:'<div class="cookies__settings__option" tabindex="{{tabindex}}"><div class="cookies__settings__option__title" for="cookie-option-{{id}}">{{switch}}<h6 id="cookieLabel{{id}}">{{name}}</h6></div><div class="cookies__settings__option__description"><p id="cookie-description-{{id}}">{{description}}</p></div></div>',switch:'<label class="cookies__settings__option__switch" tabindex="{{tabindex}}"><input type="checkbox" id="cookie-option-{{id}}" data-id="{{id}}" {{checked}} tabindex="0" aria-describedby="cookie-description-{{id}}" aria-labelledby="cookieLabel{{id}}"><span class="cookies__settings__option__slider round"></span></label>',showMore:'{{contentExcert}}<span>{{ellipsis}}</span><span class="cookies__readmore__text"><span>{{contentRest}}</span><a href="javascript:;" class="cookies__readmore__link cookiesButton">{{showMore}}</a></span>'}},layout:"default",layoutCollection:{default:"{{summary}}{{settings}}{{footer}}",noSettings:"{{noSettingsSummary}}{{footer}}",oneCol:"{{summary}}{{settingsOneCol}}{{footer}}",error:"{{error}}"},styles:null,dom:{classes:{invisible:"cookies__invisible",expanded:"cookies__open",btn:"cookiesButton",saveBtn:"cookiesButtonSave",settingsBtn:"cookiesButtonSettings",acceptAllBtn:"cookiesButtonAccept",rejectAllBtn:"cookiesButtonReject",onTop:"cookies__top",showLess:"cookies__readmore__less",toggleText:"cookies__readmore__link",checkbox:"cookies__settings__option__slider",hideAcceptAllBtn:"cookies__acceptbutton__hide",hideRejectAllBtn:"cookies__rejectbutton__hide",hideSettingsIcon:"cookies__settings__icon__hide"},styleSelectors:{".cookies":["background-color: {{background}}","color: {{color}}","font-family: {{fontFamily}}","font-size: {{fontSize}}px","-webkit-transition: {{transition}}","-ms-transition: {{transition}}","transition: {{transition}}"],".cookiesButtonAccept":["background-color: {{highlight}}","font-size: {{fontSize}}px","color: {{color}}"],".cookiesButtonReject":["border-color: {{highlight}}","font-size: {{fontSize}}px","color: {{highlight}}"],".cookiesButtonSettingsText":["background-color: {{highlight}}","font-size: {{fontSize}}px","color: {{color}}"],"input:checked + .cookies__settings__option__slider":["background-color: {{highlight}}"],"input:focus + .cookies__settings__option__slider":["box-shadow: 0 0 1px {{highlight}}"],".cookies__settings__option__description a":["color: {{highlight}}"],".avaicon-icon-settings:before":["color: {{highlight}}"],".cookiesButtonSettings span":["font-size: {{fontSize}}px"],".cookiesButtonSave:hover":["border-color: {{highlight}}","color: {{highlight}}"],".cookiesButtonSave":["color: {{highlight}}","font-size: {{fontSize}}px","border-color: {{highlight}}"],".cookies__open .cookies__info":["border-color: {{lowlight}}"],".cookies__settings, .cookies__settings__buttons":["border-color: {{lowlight}}"]},checkbox:"input[type=checkbox]",idAttribute:"data-id"},transition:!0,hideTextOverflow:!1,maxChars:300,oneCol:!1,showOnTop:!1,showExpanded:!1,initialNonEssentialCookieState:!1,hideRejectButton:!1,hideAcceptButton:!1,settingsIconAsText:!1,settingsEnabled:!0};function r(){this.initialise.apply(this,arguments)}function o(e){this.openingTimeout=null,t.removeClass(e,this.options.dom.classes.invisible)}function i(t,n){t===n.target&&(t.style.display="none",t.removeEventListener(e.transitionEnd,this.afterTransition),this.afterTransition=null)}function a(e){var n=this.options,r=document.createElement("div");cont=n.container&&1===n.container.nodeType?n.container:document.body,r.innerHTML=e;var o=r.children[0];return o.style.display="none",this.onButtonClick=function(e){var r=t.traverseDOMPath(e.target,n.dom.classes.btn)||e.target;t.hasClass(r,n.dom.classes.acceptAllBtn)&&(this.isExpanded&&this.activateSwitches()||this.acceptAll()),t.hasClass(r,n.dom.classes.rejectAllBtn)&&(this.isExpanded&&this.deactivateSwitches()||this.rejectAll()),t.hasClass(r,n.dom.classes.settingsBtn)&&this.toggleSettings(),t.hasClass(r,n.dom.classes.saveBtn)&&this.save(),t.hasClass(r,n.dom.classes.toggleText)&&this.toggleText(r)}.bind(this),o.addEventListener("click",this.onButtonClick),cont.firstChild?cont.insertBefore(o,cont.firstChild):cont.appendChild(o),o}function u(){var e=this.options,n={};e.content.details=e.content.detailsLeft=e.content.detailsRight="",1==e.cookies.length&&(e.oneCol=!0,e.layout="oneCol");for(var r=0;r<e.cookies.length;r++){var o=e.cookies[r];if(o.tabindex=r+1+"",e.hideTextOverflow&&o.description.length>e.maxChars){var i={ellipsis:e.content.ellipsis+"&nbsp;",showMore:e.content.showMore,contentExcert:o.description.substr(0,e.maxChars),contentRest:o.description.substr(e.maxChars,o.description.length-e.maxChars)+"&nbsp;"};o.description=t.interpolateString(e.templates.option.showMore,i,t.callback)}o.canBeDisabled&&(o.checked=null!==e.initialNonEssentialCookieState&&e.askConsent?e.initialNonEssentialCookieState?"checked":"":o.isEnabled?"checked":"",o.switch=t.interpolateString(e.templates.option.switch,o,t.callback));var a=t.interpolateString(e.templates.option.default,o,t.callback);e.oneCol?(e.layout="oneCol",e.content.details+=a):r%2?e.content.detailsRight+=a:e.content.detailsLeft+=a}for(var u in e.settingsEnabled||(e.layout="noSettings"),e.templates.elements)n[u]=t.interpolateString(e.templates.elements[u],e.content,t.callback);var l=window.navigator.cookieEnabled?e.layoutCollection[e.layout]:e.layoutCollection.error;return t.interpolateString(l,n,t.callback)}function l(){var n=this.options;return!0!==n.transition&&(n.styles={transition:"number"==typeof n.transition?"opacity "+n.transition+"s ease":"none"}),function(e,n){t.isPlainObject(e)&&function(e,n){var r={};for(var o in n)for(var i in n[o])for(var a in e)t.hasInterpolation(n[o][i],a)&&(void 0===r[o]&&(r[o]=[]),r[o].push(t.interpolateString(n[o][i],e,t.callback)));for(var o in r)if(r.hasOwnProperty(o)){for(var u=[],l=0;l<r[o].length;l++){var s=r[o][l].split(":");u[s[0]]=s[1]}var c=document.querySelectorAll(o);for(l=0;l<c.length;l++)for(var f in u)c[l].style[f]=u[f]}}(e,n)}.call(this,n.styles,n.dom.styleSelectors),[n.wrapperClass,e.hasTransition?n.dom.classes.invisible:"",n.showExpanded?n.dom.classes.expanded:"",n.showOnTop?n.dom.classes.onTop:"",n.hideRejectButton?n.dom.classes.hideRejectAllBtn:"",n.hideAcceptButton?n.dom.classes.hideAcceptAllBtn:"",n.settingsIconAsText?n.dom.classes.hideSettingsIcon:""].join(" ").replace(/^\s+|\s+$/g,"")}return r.prototype.initialise=function(e){this.options&&this.destroy(),t.deepExtend(this.options={},n),t.isPlainObject(e)&&t.deepExtend(this.options,e),this.isExpanded=this.options.showExpanded,(this.options.forceOpen||this.options.autoOpen&&this.options.askConsent)&&this.build()},r.prototype.destroy=function(){this.element&&(this.onButtonClick&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null),this.options=null},r.prototype.open=function(){this.element&&!this.isOpen()&&(e.hasTransition?this.fadeIn():this.element.style.display="",this.options.onPopupOpen.call(this))},r.prototype.build=function(){var e=this.options.templates.window.replace("{{classes}}",l.call(this)).replace("{{children}}",u.call(this));this.element=a.call(this,e),this.open(),l.call(this)},r.prototype.toggleSettings=function(){this.isExpanded?this.collapseSettings():this.expandSettings()},r.prototype.expandSettings=function(){t.addClass(this.element,this.options.dom.classes.expanded),this.isExpanded=!0},r.prototype.collapseSettings=function(){t.removeClass(this.element,this.options.dom.classes.expanded),this.isExpanded=!1},r.prototype.activateSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=0;t<e.length;t++)e[t].checked=!0},r.prototype.deactivateSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=0;t<e.length;t++)e[t].checked=!1},r.prototype.toggleSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=!1,n=0;n<e.length;n++)!e[n].checked&&(t=!0);for(n=0;n<e.length;n++)e[n].checked=t},r.prototype.save=function(){for(var t={},n=this.element.querySelectorAll(this.options.dom.checkbox),r=0;r<n.length;r++){t[n[r].getAttribute(this.options.dom.idAttribute)]=n[r].checked}e.service.updateTypesConsent(t,this.close.bind(this))},r.prototype.acceptAll=function(){e.service.acceptAll(this.close.bind(this))},r.prototype.rejectAll=function(){var t=this.options,n={};t.cookies.forEach((function(e){1==e.id?n[e.id]=!0:n[e.id]=!1})),e.service.updateTypesConsent(n,this.close.bind(this))},r.prototype.toggleText=function(e){var n=this.options;t.hasClass(e,n.dom.classes.showLess)?(t.removeClass(e,n.dom.classes.showLess),e.innerHTML=n.content.showMore):(t.addClass(e,n.dom.classes.showLess),e.innerHTML=n.content.showLess),t.toggle(e.parentElement.previousElementSibling),t.toggle(e.previousElementSibling,"inline")},r.prototype.close=function(){this.element&&this.isOpen()&&(e.hasTransition?this.fadeOut():this.element.style.display="none",this.options.onPopupClose.call(this))},r.prototype.fadeIn=function(){var n=this.element;e.hasTransition&&n&&(this.afterTransition&&i.call(this,n),t.hasClass(n,this.options.dom.classes.invisible)&&(n.style.display="",this.openingTimeout=setTimeout(o.bind(this,n),20)))},r.prototype.fadeOut=function(){var n=this.element;e.hasTransition&&n&&(this.openingTimeout&&(clearTimeout(this.openingTimeout),o.bind(this,n)),t.hasClass(n,this.options.dom.classes.invisible)||(this.afterTransition=i.bind(this,n),n.addEventListener(e.transitionEnd,this.afterTransition),t.addClass(n,this.options.dom.classes.invisible)))},r.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&!t.hasClass(this.element,this.options.dom.classes.invisible)},r}(),e.service=void 0!==ServiceFactory.getCookieUserConsentService&&ServiceFactory.getCookieUserConsentService(),e.initialise=function(t){e.service?e.service.init((function(n){n.length?e.service.shouldRequestUserConsent((function(r){t?(t.cookies=n,t.askConsent=r):t={cookies:n,askConsent:r},t.openPopupForRejectedCookies&&!r?e.service.getCookieUsage((function(n){var r=n;if(r){var o=t.content.warning||"This page needs the following cookie/s to work:",a=t.content.settingsLink||"Cookies settings",u='<div class="cookies__wrapper"><div class="cookies__content clearfix"><div class="cookies__info"><div class="cookies__info__copy"><p>'+o+"<b> ",l=[];for(i in r)r[i].isInUseOnPage&&!r[i].isEnabled&&(l.push(r[i].name),showCookieAlert=!0);if(showCookieAlert){u+=l.join(", "),u+='</b>. <a href="#" class="link" id="js-openCookieButton">'+a+"</a></p>",u+="</div></div></div>";var s=document.querySelector("body"),c=document.createElement("div");c.classList.add("cookies"),c.classList.add("cookies-warning"),s.prepend(c),c.innerHTML=u,document.querySelector("#js-openCookieButton").addEventListener("click",(function(){t.forceOpen=!0,t.showExpanded=!0,new e.popup(t),document.querySelector(".cookies-warning").setAttribute("style","display: none")}))}}})):new e.popup(t)})):console.warn("CookieUserConsentService has no cookies.")})):console.warn("CookieUserConsentService is not enabled.")},e}return{getInstance:function(){return e||(e=new t),e}}}();e.exports=o},48723:(e,t,n)=>{e=n.nmd(e),function(){var t=window.FilePicker=function(e){this.apiKey=e.apiKey,this.clientId=e.clientId,this.scope=e.scope,this.buttonEl=e.buttonEl,this.onSelect=e.onSelect,this.onCancel=e.onCancel,this.buttonEl&&(this.buttonEl.disabled=!0,this.extensions=e.extensions,this.opened=!1,this.token=null,gapi.load("auth",{callback:pjQuery.proxy(this.open,this)}),gapi.load("client:picker",{callback:pjQuery.proxy(this._pickerApiLoaded,this)}))};t.prototype={open:function(){this.token=gapi.auth.getToken(),this.token?this._showPicker(this.token):this._doAuth(!1,pjQuery.proxy((function(e){this._showPicker(e)}),this))},_showPicker:function(e){if(!this.opened&&e&&!e.error){this.opened=!0;var t=e.access_token;if(null==this.picker){var n=new google.picker.View(google.picker.ViewId.DOCS);n.setMimeTypes(this.extensions),this.picker=(new google.picker.PickerBuilder).addView(n).setAppId(this.clientId).setOAuthToken(t).setCallback(pjQuery.proxy(this._pickerCallback,this)).build(),this.picker.setVisible(!0)}else this.picker.setVisible(!0)}},_pickerCallback:function(e){if(e[google.picker.Response.ACTION]===google.picker.Action.PICKED){var t=e[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID];gapi.client.request({path:"/drive/v2/files/"+t,method:"GET"}).execute(pjQuery.proxy(this._fileGetCallback,this))}else this._cancelCallback()},_fileGetCallback:function(e){this.onSelect&&this.onSelect(e)},_cancelCallback:function(){this.onCancel&&this.onCancel()},_pickerApiLoaded:function(){this.buttonEl.disabled=!1},_driveApiLoaded:function(){this._doAuth(!0,pjQuery.proxy((function(){this._showPicker()}),this))},_doAuth:function(e,t){tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/"+this.scope,callback:t}),this.token?tokenClient.requestAccessToken({prompt:"consent"}):tokenClient.requestAccessToken({prompt:""})}},e&&(e.exports=t)}()},16509:(e,t,n)=>{n(69826),n(41539),n(69070),n(26699),n(68309),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,i,a=0|t,u=Math.max(a>=0?a:r-Math.abs(a),0);for(;u<r;){if((o=n[u])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;u++}return!1}}),void 0===Element.prototype.getAttributeNames&&Object.defineProperty(Element.prototype,"getAttributeNames",{value:function(){for(var e=this.attributes,t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r].name;return n}})},37797:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}n(96649),n(96078),n(82526),n(41817),n(41539),n(9653),n(69070),n(32165),n(66992),n(78783),n(33948);var i=null,a=!1,u=function(){"use strict";function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!a)throw new Error("Constructor is private. Use getInstance() instead");this.callbacks={}}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return i||(a=!0,i=new e,a=!1),i}}],(n=[{key:"setIntegrationCallback",value:function(e,t){this.callbacks[e]=t}},{key:"getIntegrationCallback",value:function(e){return this.callbacks[e]}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=u},75799:(e,t,n)=>{"use strict";var r=n(17532),o=n.n(r),i=n(77250),a=n.n(i),u=(n(41539),n(88674),n(74916),n(68304),n(78011),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(91058),n(26699),n(32023),n(24812),n(68309),n(83710),n(39714),n(82772),n(57327),n(89554),n(54747),n(94986),n(23123),function(e,t,n,r){this.exception=e,this.urlRewriter=t,this.originalStack=e.stack,this.stack=this._getFormatedStack(n,r);var o=this._getConcreteFileName();if(o){var i=this._rewriteUrl(o,this._getConcreteLineNumber());this.fileName=i[0],this.lineNumber=i[1]}else this.fileName=null,this.lineNumber=null});function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}u.prototype.getMessage=function(){return this.exception.message},u.prototype.getName=function(){return this.exception.name},u.prototype.getStack=function(){return this.stack},u.prototype.getOriginalStack=function(){return this.originalStack},u.prototype.getExpectedWindowErrorMessage=function(){var e=navigator.userAgent.toLocaleLowerCase();return-1!==e.indexOf("chrome")?"Uncaught "+this.exception.name+": "+this.exception.message:-1!==e.indexOf("msie")||-1!==e.indexOf("trident")?this.exception.message:this.exception.name+": "+this.exception.message},u.prototype.getFileName=function(){return this.fileName},u.prototype.getLineNumber=function(){return this.lineNumber},u.prototype._getConcreteFileName=function(){return this.stack.length>0?this.stack[0].file:null},u.prototype._getConcreteLineNumber=function(){return this.stack.length>0?this.stack[0].line:null},u.prototype._getLocalFileFromStackUrl=function(e){var t=window.location.protocol+"//"+window.location.host+"/";e.substr(0,t.length)==t&&(e=e.substr(t.length));var n=e.lastIndexOf("?");return-1!=n&&(e=e.substr(0,n)),e},u.prototype._rewriteUrl=function(e,t){if(this.urlRewriter){var n=this.urlRewriter(e,t);if(n)return n}return[e,t]},u.prototype._getFormatedStack=function(e,t){if(this.exception.stack||(this.exception.stack=""),"string"!=typeof this.exception.stack)return this.exception.stack;for(var n,r,o=this.exception.stack.split(/\r\n|\r|\n/),i=[],a=/@(.*?):([0-9]+)(:[0-9]+)?$/,u=/^\s*at .* \((.*):([0-9]+):[0-9]+\)$/,l=/(\S*):(\d+):(\d+)$/,s=0;s<o.length;++s)if((n=o[s])&&(r=a.exec(n)||u.exec(n)||l.exec(n))){var c=this._rewriteUrl(this._getLocalFileFromStackUrl(r[1]),parseInt(r[2],10));i.push({file:c[0],line:c[1]})}return 0===i.length&&e&&null!=t&&i.push({file:e,line:t}),i};var s=function e(){var t=this;if(e.alreadySetUp)throw new Error("cantCreate2ErrorHandlers: ErrorHandler is already set up");window.addEventListener("error",(function(e){var n=e.message,r=e.filename,o=e.lineno,i=e.colno,a=e.error;t.onWindowError(n,r,o,i,a)})),window.addEventListener("unhandledrejection",this.onWindowUnhandledRejection.bind(this)),this.errorReporterCallback=null,this.errorsToReport=[],Error.stackTraceLimit=1/0,this._addGetNameToLogToFunctions(),this._events={},e.alreadySetUp=!0};s.alredySetUp=!1,s.prototype.wrapHandlingErrors=function(e){var t=this;return function(){try{return e.apply(this,arguments)}catch(e){throw t.handleCatchedException(e),e}}},s.prototype.wrapNativeFunctions=function(){var e=this;function t(t){var n=window[t];window[t]=function(){return n(e.wrapHandlingErrors(arguments[0]),arguments[1])}}t("setTimeout"),t("setInterval"),t("requestAnimationFrame")},s.prototype._addGetNameToLogToFunctions=function(){Function.prototype.getNameToLog=function(e){var t;t=this.methodName?this.methodName:this.name;var n=/function[^(]*(\([^)]*\))/.exec(this.toString());return n||t?t?t+(n?n[1]:""):e?"<<"+this.toString()+n[1]+">>":"f"+n[1]:this.toString()}},s.prototype.setReportErrorCallbackAndReportPending=function(e){if(this.errorReporterCallback)throw new Error("errorReporterCallbackAlreadySet");this.errorReporterCallback=e;var t=this.errorsToReport;this.errorsToReport=null;for(var n=0;n<t.length;++n)e(t[n])},s.prototype._createExceptionFromWindowError=function(e,t,n){for(var r=arguments.callee.caller,o=[],i=[];r&&-1==i.indexOf(r);){i.push(r);var a=[];if(r.arguments)for(var u=0;u<r.arguments.length;++u)a.push(this.describeValue(r.arguments[u]));else a.push("can't read arguments");o.push({function:r.getNameToLog?r.getNameToLog(!0):"Anonymous",args:a}),r=r.caller}var l=new Error(e);return l.name="ExternalError",l.stack=o,l.fileName=t,l.lineNumber=n,l},s.prototype._wasJustCatched=function(e){return this.lastCatchedMessage&&this.lastCatchedMessage==e&&new Date-this.lastCatchedDate<100},s.prototype.onWindowError=function(e,t,n,r,o){var i;this._wasJustCatched(e)||(i=o||this._createExceptionFromWindowError(e,t,n),this._notifyExceptionObject(i,t,n));return!1},s.prototype.onWindowUnhandledRejection=function(e){var t=new Error(e.reason);t.name="UnhandledRejection",e.reason&&e.reason.stack&&(t.stack=e.reason.stack),this.notifyError("UnhandledRejection: "+e.reason,t),e.preventDefault()},s.prototype.notifyError=function(e,t,n,r){var o,i={error:e};t&&(o=this._wrapException(t,n,r),i.errorObject=o),this.dispatchEvent("error",i),o&&(this.errorReporterCallback?this.errorReporterCallback(o):this.errorsToReport.push(o))},s.prototype.notifyReportedError=function(e){this.dispatchEvent("errorreportok",{reportUrl:e})},s.prototype.handleTooManyFailedPackageLoads=function(){this.dispatchEvent("toomanyfailedpackageloads")},s.prototype.reportAsException=function(e){try{throw new Error(e)}catch(e){this._notifyExceptionObject(e)}},s.prototype._notifyExceptionObject=function(e,t,n){this.notifyError(e.name+": "+e.message,e,t,n)},s.prototype.setAssetUrlRewriter=function(e){this.urlRewriter=e},s.prototype._wrapException=function(e,t,n){return new u(e,this.urlRewriter,t,n)},s.prototype.handleCatchedException=function(e){this._notifyExceptionObject(e),this.lastCatchedMessage=this._wrapException(e).getExpectedWindowErrorMessage(),this.lastCatchedDate=new Date},s.prototype.setDescriber=function(e){this._valueDescriber=e},s.prototype.describeValue=function(e){return this._valueDescriber?this._valueDescriber(e):this._defaultValueDescriber(e)},s.prototype.addListener=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},s.prototype.removeListener=function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))},s.prototype.dispatchEvent=function(e,t){(this._events[e]||[]).forEach((function(e){e(t)}))},s.prototype._defaultValueDescriber=function(e){try{return"object"===l(e)?JSON.stringify(e):e+""}catch(t){return e}};n(15306),n(47042),n(96649),n(96078),n(9653),n(69070);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(i)?i:String(i)),r)}var o,i}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"describeValue",value:function(t,n){if(n||(n=0),null!=t){if(t.getTypeName)return"<<"+t.getTypeName()+">>";if("function"==typeof t)return"<<func:"+(t.methodName?t.methodName:"Anonymous")+">>";if(9==t.nodeType)return"<<Document>>";if(t.nodeType)return 1==t.nodeType?e.describeElement(t):"<<"+t.nodeName+">>";if(t.self==t&&t==t.window)return"<<Window>>";if("string"==typeof t)return'"'+t.replace(/"/g,'\\"')+'"';if(t instanceof Array||void 0!==t.length&&(t.item||t.slice&&t.pop&&t.push)){if(n<=3){for(var r="[",o=0;o<t.length;++o)o>0&&(r+=", "),r+=e.describeValue(t[o],n+1);return r+="]"}return"Array"}try{if(t.constructor==Object){if(n<=3){for(var i in r="{",o=0,t)o>0&&(r+=", "),r+=i+": "+e.describeValue(t[i],n+1),++o;return r+="}"}return"Object"}}catch(e){try{if(t.length)return"<<Unknown (has .length): "+t+">>"}catch(e){}return"<<Unknown: "+t+">>"}return t.toString?t.toString():"<<unknown>>"}return void 0===t?"undefined":"null"}},{key:"describeElement",value:function(e){var t,n="<"+e.tagName.toLowerCase();e.className&&(n+=' class="'+e.className+'"'),e.getAttribute("href")&&(n+=' href="'+e.getAttribute("href")+'"'),n+=">"+((t=e.textContent).length>20?t.substr(0,17)+"...":t)+"</"+e.tagName.toLowerCase()+">";for(var r=e;r&&!r.parentWidget;)r=r.parentNode;if(r&&r.parentWidget){n+=" in ";for(var o=r.parentWidget,i=0;i<3&&o;++i)i>0&&(n+=" -> "),n+=o.toString(),o=o.parentWidget}return n}}],(n=null)&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(69600),n(73210),n(4723);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(i)?i:String(i)),r)}var o,i}var h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userAgent=t,this.platform=n,this.document=r,this.identifiers=[],this._detectBrowser()}var t,n,r;return t=e,(n=[{key:"is",value:function(t){if(-1!==e.IDENTIFIERS.indexOf(t))return-1!==this.identifiers.indexOf(t);throw new Error("This browser identifier is unknown")}},{key:"isInCompatMode",value:function(){return!!(this.is("ie")&&this.document&&this.document.documentMode)&&this.document.documentMode!==this._getIEVersionFromUserAgent()}},{key:"getIdentifiers",value:function(){return this.identifiers}},{key:"getIEVersion",value:function(){if(!this.is("ie"))return!1;if(!this.IEVersion){var e=this._getIEVersionFromUserAgent();this.IEVersion=e>7&&this.document&&this.document.documentMode?this.document.documentMode:e}return this.IEVersion}},{key:"_getIEVersionFromUserAgent",value:function(){return this.IEAgentVersion||(this.IEAgentVersion=this.userAgent.toLowerCase().indexOf("trident/7.0")>-1?11:parseInt((this.userAgent.toLowerCase().match(/.+ie\s([\d.]+)/i)||[])[1],10)),this.IEAgentVersion}},{key:"_detectBrowser",value:function(){var t=this.userAgent.toLowerCase();-1!==t.indexOf("edge")?this.identifiers.push(e.EDGEHTML):-1!==t.indexOf("opera")||-1!==t.indexOf("presto")?this.identifiers.push(e.PRESTO):-1!==t.indexOf("konqueror")?this.identifiers.push(e.KHTML):-1!==t.indexOf("chrome")?this.identifiers.push(e.BLINK):-1!==t.indexOf("msie")||-1!==t.indexOf("trident")?this.identifiers.push(e.IE):-1!==t.indexOf("webkit")?this.identifiers.push(e.WEBKIT):-1!==t.indexOf("gecko")&&this.identifiers.push(e.GECKO),-1!==t.indexOf("windows phone")?this.identifiers.push(e.MOBILE):-1!==t.indexOf("ipad")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPAD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("ipod")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPOD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("iphone")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPHONE),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("macintosh")||this.platform&&-1!==this.platform.indexOf("Mac")?this.identifiers.push(e.MAC):(/\b(mobile|android)\b/i.test(t)||window.matchMedia&&window.matchMedia(["(min-resolution: 1.3dppx) and (max-device-width: 1024px)","(-webkit-min-device-pixel-ratio: 1.3) and (max-device-width: 1024px)"].toString()).matches)&&this.identifiers.push(e.MOBILE)}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();h.EDGEHTML="edgehtml",h.IE="ie",h.PRESTO="presto",h.GECKO="gecko",h.KHTML="khtml",h.WEBKIT="webkit",h.BLINK="blink",h.MOBILE="mobile",h.IPAD="ipad",h.IPOD="ipod",h.IPHONE="iphone",h.MAC="mac",h.IOS="ios",h.IDENTIFIERS=[h.EDGEHTML,h.IE,h.PRESTO,h.GECKO,h.KHTML,h.WEBKIT,h.BLINK,h.MOBILE,h.IPAD,h.IPOD,h.IPHONE,h.MAC,h.IOS];var v,b,m,g,_,w,S,O,E,P,k,T,j,I,F,R,C=(v=function(e){var t=null;return function(){return null!=t?t:t=e()}},b=function(e){var t=document.createElement("input");try{return t.type=e,t.type===e}catch(e){return!1}},m=new h(navigator.userAgent,navigator.platform,document),g=v((function(){return m.isInCompatMode()})),_=v((function(){return m.getIEVersion()})),w=v((function(){return m.is("edgehtml")})),S=v((function(){return m.is("blink")})),O=v((function(){return m.is("webkit")})),E=v((function(){return m.is("ie")})),P=v((function(){return m.is("gecko")})),k=v((function(){return m.is("mobile")})),T=v((function(){return m.is("ipad")})),j=v((function(){return m.is("iphone")})),I=v((function(){return m.is(h.MAC)})),F=v((function(){return m.is(h.IOS)})),(R={}).placeholder=v((function(){return void 0!==document.createElement("input").placeholder})),R.stringTrim=v((function(){return!!String().trim})),R.addEventListener=v((function(){return!!window.addEventListener})),R.getComputedStyle=v((function(){return document.defaultView&&document.defaultView.getComputedStyle})),R.documentGetSelection=v((function(){return"getSelection"in document})),R.inputFiles=v((function(){var e=document.createElement("input");return e.type="file","files"in e})),R.inputTypeEmail=v((function(){return b("email")})),R.inputTypeSearch=v((function(){return b("search")})),R.inputTypeNumber=v((function(){return b("number")})),R.inputTypeTel=v((function(){return b("tel")})),R.inputTypeUrl=v((function(){return b("url")})),R.FileReader=v((function(){return"FileReader"in window})),R.FormData=v((function(){return"FormData"in window})),R.TransitionEvent=v((function(){return"TransitionEvent"in window})),R.AnimationEvent=v((function(){return"AnimationEvent"in window})),R.HTMLCanvasElement=v((function(){return"HTMLCanvasElement"in window})),R.MediaQueryList=v((function(){return!!window.matchMedia})),R.SVGSVGElement=v((function(){return"SVGSVGElement"in window})),R.windowErrorStackTrace=v((function(){return!(w()||O())})),{supports:function(e){if(R[e])return R[e]();throw new Error("This feature is not being tested")},isFullScreen:function(){return null!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null)},getBrowserClassNamesString:function(e){var t=m.getIdentifiers();if(e){for(var n=[],r=t.length;r--;)n.push(e+"_"+t[r]);return n.join(" ")}return t.join(" ")},isInCompatMode:g,getIEVersion:_,isEdgeHTML:w,isBlink:S,isWebKit:O,isIE:E,isGecko:P,isMobileDevice:k,isIpad:T,isIphone:j,isIOS:F,isMac:I});n(51532);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===D(i)?i:String(i)),r)}var o,i}var x,N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._values=new Map}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"set",value:function(e,t){this.getInstance()._set(e,t)}},{key:"get",value:function(e){return this.getInstance()._get(e)}}],(n=[{key:"_set",value:function(e,t){this._values.set(e,t)}},{key:"_get",value:function(e){return this._values.get(e)}}])&&A(t.prototype,n),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();(x=new s).setDescriber(p.describeValue),C.supports("windowErrorStackTrace")||x.wrapNativeFunctions(),N.set("defaultErrorHandler",x);n(30489),n(12419),n(21249),n(40561),n(69720),n(23157),n(34553),n(26833),n(85827),n(79753),n(91038);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===B(i)?i:String(i)),r)}var o,i}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)}var t,n,r;return t=e,n=[{key:"initialize",value:function(e){this._assign(e),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null}},{key:"_assign",value:function(e){if(e&&"object"!==B(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=L(e,2),r=n[0],o=n[1],i="set"+r.substring(0,1).toUpperCase()+r.substr(1);if(N.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[i])throw new Error(i+" is not a valid setter for class "+t.getTypeName());t[i](o)}))}}],n&&V(t.prototype,n),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===W(i)?i:String(i)),r)}var o,i}var Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)}var t,n,r;return t=e,n=[{key:"initialize",value:function(){}},{key:"getClassName",value:function(){return this.classRef?this.classRef.className:"Object"}},{key:"getTypeName",value:function(){return this.getClassName().replace(/\$Section$/,"")}},{key:"getSimpleClassName",value:function(){return this.classRef.simpleClassName?this.classRef.simpleClassName:this.classRef.className}},{key:"getPackage",value:function(){return this.classRef.packageRef}},{key:"includeToStringInLogItem",value:function(){return!1}},{key:"toString",value:function(){return this.classRef?"<<"+this.classRef.className+">>":"<<Object>>"}},{key:"Delete",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.map((function(e){if("string"!=typeof e&&void 0!==e)throw new Error("Delete should only receive propertyName as a string.");return e})).forEach((function(t){Delete(e[t]),delete e[t]}))}))},{key:"dispatcher",value:function(e){var t=this;return this.dispatchers||(this.dispatchers={}),this.dispatchers[e]||(this.dispatchers[e]=function(n){return t.dispatchEvent(e,n)}),this.dispatchers[e]}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new U),t instanceof U&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"addListener",value:function(t,n){if(this.Deleted)throw new Error("adding listener to a deleted emitter. Event: "+t+". Classname: "+this+". ExpectedListener: "+p.describeValue(n));if(this.eventListeners||(this.eventListeners={}),this.eventListeners[t]||(this.eventListeners[t]=[]),e.VALIDATE_LISTENER_ADDITION&&-1!==this.eventListeners[t].indexOf(n))throw new Error("adding repeated listener: "+this+"; listener to add: "+p.describeValue(n));if(n.callerObj){var r={context:this,eventName:t};n.callerObj.attachedTo.push(r)}this.eventListeners[t].push(n)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"removeListener",value:function(e,t){if(!this.Deleted)if(this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].length){var n=this.eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this.eventListeners[e].splice(n,1)):N.get("defaultErrorHandler").reportAsException("Cannot remove listener. Listener not added or already removed. Event: "+e+". Classname: "+this+". ExpectedListener: "+p.describeValue(t))}else N.get("defaultErrorHandler").reportAsException("Cannot remove listener. Event has no listeners. Event: "+e+". Classname: "+this+". ExpectedListener: "+p.describeValue(t))}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=H(e,2),r=n[0],o=n[1];if(r.startsWith("on")){if("function"==typeof o)t.addListener(r.substr(2),o);else if(null!==o)throw new Error("Event listener must be a valid function")}else{var i="set"+r.substring(0,1).toUpperCase()+r.substr(1);if(N.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[i])throw new Error(i+" is not a valid setter for class "+t.getTypeName());t[i](o)}}))}},{key:"caller",value:function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+this.getTypeName()+"."+e);var n=function(){return t[e].apply(t,arguments)};return n.methodName="caller:"+this.getTypeName()+"."+e,n}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}},{key:"_detachFromEvents",value:function(){var e=this,t=this.eventListeners||{};Object.entries(t).forEach((function(t){var n=H(t,2),r=n[0];(n[1]||[]).forEach((function(t){return e._detachFromEvent(t,r)}))}))}},{key:"_removeAllListenersFrom",value:function(e){e=e||{},Object.values(e).forEach((function(e){(e.callerObj&&e.callerObj.attachedTo?e.callerObj.attachedTo:[]).forEach((function(t){t.context.removeListener(t.eventName,e)}))}))}},{key:"_removeAllListeners",value:function(){this._removeAllListenersFrom(this.callers),this._removeAllListenersFrom(this.dispatchers)}},{key:"_uninit",value:function(){this.Deleted=!0,this._detachFromEvents(),this._removeAllListeners(),this.Delete("eventListeners"),this.Delete("callers"),this.Delete("dispatchers")}}],n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===q(i)?i:String(i)),r)}var o,i}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}Q.VALIDATE_LISTENER_ADDITION=!1,N.get("DEBUG_MODE")&&(Q.VALIDATE_LISTENER_ADDITION=!0,Q.prototype._createCaller=function(e){var t=this,n=function(){return t[e].apply(t,arguments)},r={object:this,methodName:e,callback:this[e],attachedTo:[]};n.callerObj=r;var o="caller:"+this.getTypeName()+"."+e;if(n.getTypeName=function(){return o},n.getExtraInfoToLog=function(){return{obj:function(){tinkerman.log(t)},attachedTo:function(){tinkerman.log(r.attachedTo,{as:"table"})}}},n.methodName=o,!this[e]){var i=o+" doesn't exist";throw tinkerman.log(n,i),new Error("ERROR: "+i)}return n},Q.prototype.getExtraInfoToLog=function(){var e=this;return{evt:function(){e.eventListeners?tinkerman.log(Object.entries(e.eventListeners).map((function(e){return{name:e[0],listeners:e[1]}})),{as:"table"}):tinkerman.log("No events are being listened to",{as:"text",prependNumber:!1})}}},Q.prototype.getListenersCount=function(){var e=this.eventListeners||{};return Object.values(e).reduce((function(e,t){return e+t.length}),0)});var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(i,e);var t,n,r,o=Z(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"handleRequireLogin",value:function(e){this.dispatchEvent("requirelogin",{otherUserLogged:e})}},{key:"handleRemoteException",value:function(e){var t=new U({remoteException:e});this.dispatchEvent("remoteexception",t),N.get("defaultErrorHandler").notifyError(e.getTechnicalDescription())}},{key:"log",value:function(e){var t=new U;t.message=e,this.dispatchEvent("info",t)}},{key:"notifyExecManyResponseReceive",value:function(e,t){var n=new U;n.message=e,n.response=t,this.dispatchEvent("execmanyresponsereceive",n)}},{key:"notifyListenerEvent",value:function(e,t){var n=new U;n.response=e,n.listener=t,this.dispatchEvent("listenerevent",n)}},{key:"notifyExecMany",value:function(e,t){var n=new U;n.message=e,n.bundleWaitTime=t,this.dispatchEvent("execmany",n)}},{key:"notifyPageSessionRenew",value:function(){this.dispatchEvent("sessionrenew")}},{key:"notifyServerError",value:function(e){var t=new U;t.randomCode=e,this.dispatchEvent("servererror",t)}},{key:"notifyRemoteListenerAdd",value:function(e){this.dispatchEvent("remotelisteneradd",new U({listener:e}))}},{key:"notifyPotentialUnneededCallback",value:function(e,t){this.dispatchEvent("potentialunneededcallback",new U({reason:e,apiCall:t}))}}])&&G(t.prototype,n),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===X(i)?i:String(i)),r)}var o,i}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(i,e);var t,n,r,o=ne(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o){this.application=e,this.publicSessionName=t,this.cortex=n,this.trackerCode=r,this.packsVersion=o,this.forceError=null,this.extraRequestParam=null}},{key:"getApplicationName",value:function(){return this.application.getName()}},{key:"getApplicationCode",value:function(){return this.application.getCode()}},{key:"setPublicSessionName",value:function(e){this.publicSessionName!=e&&(this.publicSessionName=e,$.getInstance().notifyPageSessionRenew(),this.dispatchEvent("sessionrenew"))}},{key:"getPublicSessionName",value:function(){return this.publicSessionName}},{key:"setForceError",value:function(e){this.forceError=e}},{key:"getForceError",value:function(){return this.forceError}},{key:"getCortex",value:function(){return this.cortex}},{key:"setCortex",value:function(e){this.cortex=e}},{key:"getTrackerCode",value:function(e){return this.trackerCode}},{key:"getPacksVersion",value:function(){return this.packsVersion}}])&&ee(t.prototype,n),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ie(i)?i:String(i)),r)}var o,i}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(i,e);var t,n,r,o=le(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){this.name=e,this.code=t}},{key:"getName",value:function(){return this.name}},{key:"getCode",value:function(){return this.code}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);n(47941),n(2707),n(69826);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fe(i)?i:String(i)),r)}var o,i}var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"decodeType",value:function(t,n){if(ye.decoders[t])return ye.decoders[t](n,this);var r=this._getDecodeCodec(t);if(r)return r.decode(n,this,t);throw new Error(e.INVALID_JSON_TYPE+": "+t)}},{key:"parseLegacyModelToNewModel",value:function(e){if(e&&e.$JSNType&&"model"===e.$JSNType&&e._name_){var t={},n=e._name_.split("_");return n.splice(1,0,"MODEL"),t.$JSNType=n.join("_"),t.value=e.value.values,Object.keys(t.value).forEach((function(e){t.value[e]=this.parseLegacyModelToNewModel(t.value[e])}),this),t}return Array.isArray(e)?e.map(this.parseLegacyModelToNewModel,this):(e instanceof Object&&Object.keys(e).forEach((function(t){e[t]=this.parseLegacyModelToNewModel(e[t])}),this),e)}},{key:"_addPackagesToLoadToSet",value:function(e,t){if(e&&"object"==fe(e))if(e.$JSNType)ye.packageToLoaderFinders.forEach((function(n){n(e.$JSNType,t)})),this._addPackagesToLoadToSet(e.value,t);else for(var n in e)this._addPackagesToLoadToSet(e[n],t)}},{key:"decodeTypes",value:function(e){if(e&&"object"==fe(e)){if(e.$JSNType)return this.decodeType(e.$JSNType,e.value);for(var t in e)e[t]=this.decodeTypes(e[t]);return e}return e}},{key:"unserialize",value:function(e){var t=this._rawUnserialize(e);return t=this.parseLegacyModelToNewModel(t),this.decodeTypes(t)}},{key:"unserializeWithModelSupport",value:function(e,t){var n=this._rawUnserialize(e);n=this.parseLegacyModelToNewModel(n);var r={};this._addPackagesToLoadToSet(n,r);var o=[];for(var i in r)o.push(i);var a=this;function u(){t(a.decodeTypes(n))}o.length>0?N.get("assetLoader").loadPackagesAndRun(o,u):u()}},{key:"encodeValue",value:function(e){if(void 0===e)return null;if(!(e&&e instanceof Object))return e;var t=this._getEncodeCodec(e);return t?t.encode(e):e.getClassName&&e.getJsonValue?this.encodeValue(e.getJsonValue()):e instanceof Array?this._encodeArray(e):e.constructor===Object?this._encodeRawObject(e):void this._throwInvalidValue(e)}},{key:"serialize",value:function(e,t){var n=t?this._sortedKeysReplacer:null;return JSON.stringify(this.encodeValue(e),n)}},{key:"_rawUnserialize",value:function(t){var n;try{n=JSON.parse(t)}catch(n){throw new Error(e.INVALID_JSON+": "+p.describeValue(t))}return n}},{key:"_sortedKeysReplacer",value:function(e,t){return t instanceof Object&&!(t instanceof Array)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}},{key:"_throwInvalidValue",value:function(t){throw t.getClassName?new Error(e.INVALID_JSON_CLASS+": "+t.getClassName()):new Error(e.INVALID_JSON_VALUE+": "+String(t).substr(0,30))}},{key:"_getDecodeCodec",value:function(e){return ye.codecs.find((function(t){return t.canDecode(e)}))}},{key:"_getEncodeCodec",value:function(e){return ye.codecs.find((function(t){return t.canEncode(e)}))}},{key:"_encodeArray",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=this.encodeValue(e[n]);return t}},{key:"_encodeRawObject",value:function(e){var t={};for(var n in e)t[n]=this.encodeValue(e[n]);return t}}],r=[{key:"addCodec",value:function(e){ye.codecs.push(e);var t=e.getPackageToLoaderFinder();t&&ye.packageToLoaderFinders.push(t)}},{key:"addTypeDecoder",value:function(e){var t=e.getType();if(ye.decoders[t])throw new Error("decoderAlreadyDefinedForType: "+t);ye.decoders[t]=function(t,n){return e.decode(t,n)}}}],n&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();if(de.INVALID_JSON="invalidJson",de.INVALID_JSON_CLASS=de.INVALID_JSON+"Class",de.INVALID_JSON_VALUE=de.INVALID_JSON+"Value",de.INVALID_JSON_MODEL=de.INVALID_JSON+"Model",de.INVALID_JSON_TYPE=de.INVALID_JSON+"Type",void 0===ye)var ye={};function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===he(i)?i:String(i)),r)}var o,i}ye.decoders={},ye.codecs=[],ye.packageToLoaderFinders=[];var be=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"canEncode",value:function(e){return!1}},{key:"encode",value:function(e){return e.getJsonValue()}},{key:"canDecode",value:function(e){return!1}},{key:"decode",value:function(e,t){throw new Error("unimplemented")}},{key:"getPackageToLoaderFinder",value:function(){return null}}])&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(54678),n(27207),n(70189),n(36210),n(92222);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t,n){return ge=Te()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Pe(o,n.prototype),o},ge.apply(null,arguments)}function _e(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===me(i)?i:String(i)),r)}var o,i}function Oe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function ke(e){var t=Te();return function(){var n,r=je(e);if(t){var o=je(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ie={initMethodEnabled:!0,Delete:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){e&&(e.constructor!=Array?e.constructor!=Object||e.uninit?(e.uninit?e.uninit():e.nodeType&&e.parentNode&&e.parentNode.removeChild(e),e._uninit&&e._uninit()):Object.values(e).forEach((function(e){return Ie.Delete(e)})):e.forEach((function(e){return Ie.Delete(e)})))}))},Class:function(e,t){if(!window[e]){var n=window[e]=t?function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(n,e);var t=ke(n);function n(){return Ee(this,n),t.apply(this,arguments)}return Oe(n)}(window[t.className.replaceAll("$Section","").replaceAll("$","_")]):function(){return Oe((function e(){Ee(this,e)}))}();n.prototype.classRef=n,n.className=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){return ge(n,_e(e||[]))}}return window[e]},peg:function(e,t){return e.peg(t),e},addMethodNames:function(e){var t=e.getClassName()+".";function n(e,n){e.methodName=t+n}Ie.callForEachPrototypeMethod(e,n),Ie.callForEachStaticClassMethod(e,n)},abstractMethod:function(){throw new Error("Abstract method. Needs to be implemented in the subclass.")},callForEachPrototypeMethod:function(e,t){for(var n in e.prototype)"classRef"==n||"function"!=typeof e.prototype[n]||e.baseClass&&e.baseClass.prototype[n]&&e.baseClass.prototype[n]===e.prototype[n]||t(e.prototype[n],n)},callForEachStaticClassMethod:function(e,t){for(var n in e)"function"==typeof e[n]&&"getClassName"!=n&&"baseClass"!=n&&e.constructor[n]!=e[n]&&t(e[n],n)},getAllClassMethods:function(e){for(var t=new Set(["arguments","callee","caller","constructor"]),n=[],r=e.prototype||e;r;){var o=Object.getOwnPropertyNames(r).filter((function(e){return!t.has(e)&&"function"==typeof r[e]}));n=n.concat(o),r=Object.getPrototypeOf(r)}return _e(new Set(n))}};function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Fe(i)?i:String(i)),r)}var o,i}window.Peg=Ie.peg,window.Delete=Ie.Delete,window.AbstractMethod=Ie.abstractMethod;var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],(n=[{key:"reset",value:function(){this.map={}}},{key:"track",value:function(e){this.map[e]=1}},{key:"getData",value:function(){var e;for(e in this.map)return this.map;return null}}])&&Re(t.prototype,n),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===De(i)?i:String(i)),r)}var o,i}var xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getCompleteClassName",value:function(e,t){return e.replace(/\./g,"_")+(t&&"Section"!=t?"_"+t:"")}},{key:"getPackageNameFromNamespace",value:function(e){e=e.replace(/_/g,".");var t=/(?:UNIT\.)?((?:[A-Z]{3}\.)?(?:[a-z\d]+\.)*(?:PLUG\.|MODEL\.)?(?:[a-z\d]+\.)*(?:[A-Z][A-Za-z\d]+))/.exec(e);if(!t)throw new Error("packageNameNotFoundFor: "+e);return t[0]}},{key:"getClassNameFromNamespace",value:function(t){t=t.replace(/_/g,".");var n=e.getPackageNameFromNamespace(t);return t.replace(n,"").replace(".","")||"Section"}}],(n=null)&&Ae(t.prototype,n),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Le(e,t,n){return Le=He()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ue(o,n.prototype),o},Le.apply(null,arguments)}function Me(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ne(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ne(i)?i:String(i)),r)}var o,i}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function We(e){var t=He();return function(){var n,r=Ye(e);if(t){var o=Ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function He(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(i,e);var t,n,r,o=We(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e){this.loaded=!1,this.name=e.name,this.codeReady=!1,this.classNames=[],this.classes=[],this.exportNames=[],this.exports=[]}},{key:"setCodeReady",value:function(e){this.codeReady=e}},{key:"getCodeReady",value:function(){return this.codeReady}},{key:"getAssetName",value:function(){return this.name+".js"}},{key:"load",value:function(e){function t(e){for(var t=0;t<r.classNames.length;++t)e(r[r.classNames[t]])}function n(e){for(var t in r)"function"!=typeof r[t]||i.prototype[t]||e(r[t],t)}var r=this;e.call(r,r.loaded),t(Ie.addMethodNames);var o=r.name+".";if(n((function(e,t){e.methodName=o+t})),!0===N.get("trackPackageUsage")){var a=Ce.getInstance();!function(e){function o(o){var a=function(){return e(),t((function(e){Ie.callForEachPrototypeMethod(e,i(e.prototype)),Ie.callForEachStaticClassMethod(e,i(e))})),n(i(r)),o.apply(this,arguments)};return a.oldMethod=o,a}function i(e){return function(t,n){t.oldMethod&&(e[n]=e[n].oldMethod)}}t((function(e){Ie.callForEachPrototypeMethod(e,(function(t,n){e.prototype[n]=o(t)})),Ie.callForEachStaticClassMethod(e,(function(t,n){e[n]=o(t)}))})),n((function(e,t){e.simpleClassName||(r[t]=o(e))}))}((function(){a.track(r.name)}))}r.loaded||(r.loaded=!0)}},{key:"translate",value:function(e,t,n){return N.get("currentLanguage").translate(this.name,e,t,n)}},{key:"translateWithResultCallback",value:function(e,t,n,r){return N.get("currentLanguage").translateWithResultCallback(this.name,e,t,n,r)}},{key:"Class",value:function(e,t,n){void 0===t&&(t=Q);var r=Ie.Class(xe.getCompleteClassName(this.name)+"$"+e,t,n);r.packageRef=this,r.simpleClassName=e,this.classNames.push(e),this.classes.push(r),this[e]=r,r.translate=this.caller("translate"),window[xe.getCompleteClassName(this.name,e)]=r}},{key:"export",value:function(e,t,n){var r=t;r.packageRef=this,r.exportName=e,this.exportNames.push(e),this.exports.push(t),this[e]=t,n&&(r.prototype.classRef=r,r.simpleClassName=e,r.className=xe.getCompleteClassName(this.name)+"$"+e,r.getClassName=function(){return r.className},r.New=function(e){return Le(r,Me(e||[]))},this.classNames.push(e),this.classes.push(r)),window[xe.getCompleteClassName(this.name,e)]=t}},{key:"getMainClass",value:function(){if(N.get("assetLoader").hurryUpPackage(this.name),!this.loaded)throw new Error("packageNotLoadedYet");return this.classes[0]}}],r=[{key:"getPathAndBaseName",value:function(e){var t=e.lastIndexOf(".")+1;return{path:e.substr(0,t),basename:e.substr(t)}}},{key:"getPackageNameWithLanguage",value:function(e){var t=i.getPathAndBaseName(e);return t.path+"lang."+N.get("currentLanguage").getLanguage()+"."+t.basename}},{key:"getPackageNameWithoutLanguage",value:function(e){return i.getLangAndBasePackageName(e)[1]}},{key:"isLangPackage",value:function(e){return-1!=e.indexOf(".lang.")}},{key:"getLangAndBasePackageName",value:function(e){var t=e.indexOf(".lang.");if(-1==t)return[null,e];var n=t+1,r=n+5,o=e.indexOf(".",r);return[e.substring(r,o),e.substr(0,n)+e.substr(o+1)]}},{key:"fromName",value:function(e){return N.get("assetLoader").hurryUpPackage(e),i.getOrCreatePackageFromName(e)}},{key:"getOrCreatePackageFromName",value:function(e,t,n){for(var r=e.split(/\./),o=window,a=0;a<r.length-1;++a){if(0==r[a].length)throw new Error("TIN_start_Package name "+e+" is not valid");if(!o[r[a]]){if(!t)return null;o[r[a]]={}}o=o[r[a]]}var u=r[a];if(o[u]){if(N.get("ENABLE_UI_VALIDATION")&&!(o[u]instanceof i))throw new Error("Variable "+e+" already exists and is not a TIN_start_Package")}else{if(!t)return null;o[u]=new i(n)}return o[u]}}],n&&Ve(t.prototype,n),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);n(24603),n(64765),n(39575),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016);function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qe(i)?i:String(i)),r)}var o,i}var Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isString",value:function(e){return"string"==typeof e||e instanceof String}},{key:"isObject",value:function(e){return"object"===Qe(e)}},{key:"isEmpty",value:function(e){return""===e||null==e||Array.isArray(e)&&0===e.length}},{key:"equals",value:function(t,n,r){if(r||(r=0),++r>100)return!0;if(t===n)return!0;if(t instanceof Array||n instanceof Array){if(t instanceof Array&&n instanceof Array){if(t.length!=n.length)return!1;for(var o=0;o<t.length;++o)if(!e.equals(t[o],n[o],r))return!1;return!0}return!1}if(t instanceof Date||n instanceof Date)return t instanceof Date&&n instanceof Date||(t=new Date(t),n=new Date(n)),t.getTime()==n.getTime();if(!0===t||!1===t||null==t)return!1;var i=Qe(t);if("string"==i||"number"==i)return!1;if(null===n)return!1;if(i!=Qe(n))return!1;if(t.equals)return t.equals(n);var a,u=0;for(a in t){if(!(a in n))return!1;if(!e.equals(t[a],n[a],r))return!1;++u}var l=0;for(a in n)++l;return u==l}},{key:"matches",value:function(t,n){var r=!0;for(var o in n){if(!t.hasOwnProperty(o)||!r)return!1;e.isObject(n[o])?(Array.isArray(n[o])&&(r=Array.isArray(t[o])),r=r&&e.matches(t[o],n[o])):r=t[o]===n[o]}return r}},{key:"wrapIntoArray",value:function(e){return Array.isArray(e)?e:[e]}}],(n=null)&&qe(t.prototype,n),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Je(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Je(i)?i:String(i)),r)}var o,i}Ge.isArray=Array.isArray;var Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"uremove",value:function(e,t,n){var r=n(e,t);return-1!=r&&(e.splice(r,1),!0)}},{key:"remove",value:function(t,n){var r=e.sloppyIndexOf(t,n);return-1!=r&&(t.splice(r,1),!0)}},{key:"setContains",value:function(t,n,r){var o=e.sloppyIndexOf(t,n);return-1!=o==r?o:r?(t.push(n),t.length-1):e.remove(t,n)}},{key:"sloppyIndexOf",value:function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}},{key:"append",value:function(e,t){return e.push.apply(e,t),e}},{key:"hasElement",value:function(e,t,n){n||(n=function(e){return e});for(var r=0;r<e.length;++r)if(n(e[r])==t)return!0;return!1}},{key:"usearch",value:function(e,t,n){if(!n||"function"!=typeof n)return null;for(var r=0;r<e.length;++r)if(n(e[r],t))return e[r]}},{key:"indexOfObject",value:function(e,t){for(var n=0;n<e.length;++n)if(Ge.equals(e[n],t))return n;return-1}},{key:"unique",value:function(e,t){var n=[];t=t||Ge.equals;for(var r=0,o=e.length;r<o;r++){for(var i=!1,a=0,u=n.length;a<u;a++)if(t(e[r],n[a])){i=!0;break}i||n.push(e[r])}return n}},{key:"intersection",value:function(e){return e.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))}},{key:"createArrayFromRange",value:function(e,t){var n=[];if(e<t)for(;e<=t;)n.push(e++);else for(;e>=t;)n.push(e--);return n}},{key:"getArrayWithSeparators",value:function(e,t,n){for(var r=[],o=0;o<e.length;++o)o>0&&r.push(t),r.push(n?n(e[o]):e[o]);return r}},{key:"join",value:function(e,t,n,r){return 1==e.length?r?r(e[0]):e[0]:(r&&(e=e.map(r)),null===t&&(t=","),null==n?e.join(t):e.slice(0,-1).join(t)+n+e.slice(-1))}},{key:"getArrayDiff",value:function(t,n){var r=[];for(var o in t){var i=t[o];-1===e.indexOfObject(n,i)&&r.push(i)}return r}}],(n=null)&&Ze(t.prototype,n),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$e(i)?i:String(i)),r)}var o,i}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(i,e);var t,n,r,o=tt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"replaceSpecialChar",value:function(e){var t="".indexOf(e);return t>=0?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy".charAt(t):e}},{key:"createEszettRegexString",value:function(e){return e.replace(new RegExp("ss|||SS","g"),"(ss|||SS)")}},{key:"replaceSpecialChars",value:function(e){return e.replace(/|||||||||||||||||||||||||||||/gi,i.replaceSpecialChar)}},{key:"escape",value:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"flatten",value:function(e){return i.escape(i.replaceSpecialChars(e.toLowerCase()))}},{key:"pL",value:function(){return"A-Za-z--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"}},{key:"pN",value:function(){return"0-9----------------------------------------------------------"}},{key:"getSearchCriteriaRegExp",value:function(e){for(var t,n=e.replace(","," ").split(/\s+/),r="",o=0,a=n.length-1;o<a;o++)r+=(t=n[o],"(?=.*(\\b|\\s)"+i.flatten(t)+"(\\b|\\s))");return r+=function(e){return"(?=.*(\\b|\\s)"+i.flatten(e)+").*$"}(n[n.length-1]),new RegExp(r,"mi")}},{key:"getHighlighterRegExp",value:function(e){for(var t,n=e.replace(","," ").split(/\s+/),r="",o=0,a=n.length-1;o<a;o++)r+=(t=n[o],"(?:\\b|\\s)"+i.flatten(t)+"(?:\\b|\\s)|");return r+=function(e){return"(?:\\b|\\s)"+i.flatten(e)}(n[n.length-1]),new RegExp("("+r+")","gmi")}}],(n=null)&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ot(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ot(i)?i:String(i)),r)}var o,i}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"unprefix",value:function(e,t){return e.substr(0,t.length)==t&&e.substr(t.length)}},{key:"toCamelCase",value:function(e){return e.replace(/([A-Z]+)/g,(function(e,t){return t.substr(0,1).toUpperCase()+t.toLowerCase().substr(1,t.length)})).replace(/[\-_\s](.)/g,(function(e,t){return t.toUpperCase()}))}},{key:"toPascalCase",value:function(t){for(var n=t.split(/\s+/),r="",o=0;o<n.length;++o)r+=e.capitalize(n[o]);return r}},{key:"cutText",value:function(e,t){return e.length>t?e.substr(0,t)+"...":e}},{key:"removeFromEnd",value:function(e,t){var n=e.length-t.length;return e.substr(n)==t&&e.substr(0,n)}},{key:"hasWord",value:function(e,t){return!!e&&Ke.hasElement(e.match(/\w+/g),t)}},{key:"removeWord",value:function(t,n){var r=e.split(t,/  */).filter((function(e){return e!=n}));return Ke.join(r," ")}},{key:"addWord",value:function(t,n){return e.hasWord(t,n)?t:(t+" "+n).trim()}},{key:"isWhitespace",value:function(e){return Ge.isString(e)&&""===e.trim()}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"removeAllWhitespace",value:function(e){return e.replace(/\s*/g,"")}},{key:"getUncamelized",value:function(t,n){for(var r="",o=0;o<t.length;++o){var i=t.charAt(o);0==o||i!=i.toUpperCase()||n&&!isNaN(i)?r+=i:r+=" "+i.toLowerCase()}return e.capitalize(r)}},{key:"isEmpty",value:function(e){return!e||""===e.trim()}},{key:"truncate",value:function(e,t,n){return t=t||30,n=n||"...",e.length>t?e.slice(0,t-n.length)+n:String(e)}},{key:"split",value:function(e,t,n){var r=String.prototype.split,o=void 0===/()??/.exec("")[1];if("[object RegExp]"!==Object.prototype.toString.call(t))return r.call(e,t,n);var i,a,u,l,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,c+"g"),e+="",o||(i=new RegExp("^"+t.source+"$(?!\\s)",c)),n=void 0===n?-1>>>0:n>>>0;(a=t.exec(e))&&!((u=a.index+a[0].length)>f&&(s.push(e.slice(f,a.index)),!o&&a.length>1&&a[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),a.length>1&&a.index<e.length&&Array.prototype.push.apply(s,a.slice(1)),l=a[0].length,f=u,s.length>=n));)t.lastIndex===a.index&&t.lastIndex++;return f===e.length?!l&&t.test("")||s.push(""):s.push(e.slice(f)),s.length>n?s.slice(0,n):s}},{key:"removeAccents",value:function(e){for(var t,n="",r=0;r<e.length;++r){var o=e.charAt(r);n+=-1!=(t="".indexOf(o))?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy"[t]:o}return n}},{key:"getSplitter",value:function(){return e._splitter||(e._splitter=new RegExp("((?:[^ \\n]){"+e.MAX_WORD_LENGTH+"})\\B","g")),e._splitter}},{key:"getLineBreaksOrWhitespace",value:function(){return e._lineBreaksOrWhitespace||(e._lineBreaksOrWhitespace=/\r|\n|\s/),e._lineBreaksOrWhitespace}},{key:"putWbrElementsInAllChildsIfNeeded",value:function(t,n){n=n||document;for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(i,e.getSplitter()),u=n.createElement("span");u.className="wbrContainer";for(var l=0;l<a.length;++l)u.appendChild(e._putWbrElement(a[l],n));t.replaceChild(u,r[o])}else e.putWbrElementsInAllChildsIfNeeded(r[o])}},{key:"_putWbrElement",value:function(t,n){var r,o=n.createElement("span");return e.getLineBreaksOrWhitespace().test(t)||t.length<e.MAX_WORD_LENGTH?(o.className="wbrSpanSimple",r=n.createTextNode(t.replace(/^[\r\n]+/,"")),o.appendChild(r)):(o.className="wbrSpan",r=n.createTextNode(t),o.appendChild(r)),o}},{key:"isRtlText",value:function(e){return e&&(e.search("")>=0||e.search("")>=0||/[\u0600-\u06FF]/.test(e)||/[\u0590-\u05FF]/.test(e))}},{key:"highlightChildrenMatches",value:function(t,n){if(n)for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){for(var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(rt.replaceSpecialChars(i),n),u=e._splitByStringsArray(a,i),l=document.createElement("span"),s=0;s<a.length;++s)l.appendChild(e._getHighlightedChild(a[s],u[s],n));t.replaceChild(l,r[o])}else e.highlightChildrenMatches(r[o],n)}},{key:"_getHighlightedChild",value:function(e,t,n){var r=n.test(rt.replaceSpecialChars(e)),o=document.createElement(r?"strong":"span"),i=document.createTextNode(t);return o.className=r?"HighlightedChild":"",o.appendChild(i),o}},{key:"_splitByStringsArray",value:function(e,t){for(var n=[],r=0,o=0,i=e.length;o<i;o++){var a=e[o].length;n.push(0===a?"":t.substr(r,a)),r+=a}return n}},{key:"countWords",value:function(e){var t=e.match(/[\w\d]+/gi);return t?t.length:0}},{key:"splitWords",value:function(e){return function(e){for(var t=[],n=0;n<e.length;++n)""!=e[n]&&t.push(e[n]);return t}(e.split(/[ \t\n\r,;:_]+/))}},{key:"isAsianChar",value:function(e){var t=new RegExp("[-|-|-|-|-]"),n=new RegExp("[------]"),r=new RegExp("[-|-|-|-|-]");return t.test(e)||n.test(e)||r.test(e)}},{key:"hasMSWordSource",value:function(e){return new RegExp('<o:p>|class="Mso|class=Mso|<?xml:namespace|data-leveltext').test(e)}},{key:"generateRandCode",value:function(e){for(var t="",n=0;n<=e;++n)t+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-"[Math.floor(64*Math.random())];return t}},{key:"uuidv4",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},{key:"tempId",value:function(){return"TEMPID_"+Math.random().toString(36).substr(2,8)}},{key:"trimSpecialUnicodeCharacters",value:function(e){var t=["","","","",""," "],n=new RegExp("^[".concat(t.join(""),"]+|[").concat(t.join(""),"]+$"),"g");return e.trim().replace(n,"")}}],(n=null)&&it(t.prototype,n),r&&it(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ut(i)?i:String(i)),r)}var o,i}at.MAX_WORD_LENGTH=14,at.whitespaceCharacters=" \t\n\r";var st=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.language=t,this.languagePathCache={},this.displayPackageAndKeyNames=!!n}var t,n,r;return t=e,n=[{key:"getLanguage",value:function(){return this.language}},{key:"translate",value:function(e,t,n,r){return this.translateWithResultCallback(e,t,n,r,this._resultAsString)}},{key:"translateWithResultCallback",value:function(e,t,n,r,o){var i="";if(void 0!==t||void 0!==r){var a=ze.getPathAndBaseName(e),u=this._getPkg(a.path+"lang");u||void 0!==r||N.get("defaultErrorHandler").reportAsException("noPackageForLanguageFoundForTranslation-"+e+"-"+this.language),i=this._getUnprocessedValue(u,a.basename,t),i=this._processUndefined(u,a.basename,e,i,t,r),i=this._processDisplayPackageAndKeyNames(u,i,e,t,a.basename),i=this._processFields(i,n,o)}return void 0===t&&N.get("defaultErrorHandler").reportAsException("missingKeyForTranslation-"+e+"-"+this.language),i}},{key:"_getUnprocessedValue",value:function(e,t,n){var r=void 0;return e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0===(r=e[this.language][t].text[n])&&this._isGenderKey(n)&&(r=e[this.language][t].text[this._getGenderBaseKey(n)]),r}},{key:"_isGenderKey",value:function(e){return"string"==typeof e&&e.match(this._getGenderRegex())}},{key:"_getGenderBaseKey",value:function(e){var t=e.match(this._getGenderRegex());return t?t[1]:void 0}},{key:"_getGenderRegex",value:function(){return/(.+Default)(Masculine|Feminine)$/}},{key:"_processUndefined",value:function(e,t,n,r,o,i){return void 0===r&&(void 0===i?(N.get("defaultErrorHandler").reportAsException("translationNotFound-"+n+"-"+this.language+"-"+o),r=e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0!==e[this.language][t].text[o+"#Default"]?e[this.language][t].text[o+"#Default"]:o):r=i),r}},{key:"_processFields",value:function(e,t,n){return n(e&&t&&"object"===ut(t)?this._replaceFields(e,t):[e])}},{key:"_replaceFields",value:function(e,t){for(var n=[],r=this._compileTranslation(e),o=0;o<r.variables.length;o++){var i=void 0!==t[r.variablesNames[o]]?t[r.variablesNames[o]]:r.variables[o];n.push(r.nonVariables[o],i)}return n.push(r.nonVariables.pop()),n}},{key:"_compileTranslation",value:function(e){var t={variables:[],variablesNames:[],nonVariables:[]},n=e.match(/\{\$[^}]+\}/g);if(null===n)t.nonVariables=[e];else{t.variables=n,t.nonVariables=at.split(e,/\{\$[^}]+\}/);for(var r=0;r<n.length;r++){var o=n[r].match(/\{\$([^}]+)\}/);t.variablesNames.push(o[1])}}return t}},{key:"_resultAsString",value:function(e){return e.join("")}},{key:"_processDisplayPackageAndKeyNames",value:function(e,t,n,r,o){return this.displayPackageAndKeyNames&&e&&void 0!==e[this.language][o].text&&-1===r.indexOf("NONT",r.length-4)&&(t=t+"( "+n+"-"+r+" )"),t}},{key:"_getPkgFromLanguagePath",value:function(e){for(var t=window,n=e.split(/\./),r=0;r<n.length;++r)if(!(t=t[n[r]]))return null;return t}},{key:"_getPkg",value:function(e){if(this.languagePathCache[e])return this.languagePathCache[e];var t=this._getPkgFromLanguagePath(e);return this.languagePathCache[e]=t,t}}],n&&lt(t.prototype,n),r&&lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();if(void 0===ct)var ct={code:"en_US",displayPackageAndKeyNames:!0};N.set("currentLanguage",new st(ct.code,!!ct.displayPackageAndKeyNames));const ft=["TIN","input","date","lang"];for(var pt=window,dt=0;dt<ft.length;++dt)pt[ft[dt]]||(pt[ft[dt]]={}),pt=pt[ft[dt]];pt.en_US||(pt.en_US={}),pt.en_US.Util={text:{at:"at",justNow:"just%20now",secondsAgo:"seconds%20ago",minuteAgo:"1%20minute%20ago",minutesAgo:"%7B%24amount%7D%20minutes%20ago",hourAgo:"1%20hour%20ago",hoursAgo:"%7B%24amount%7D%20hours%20ago",dayAgo:"1%20day%20ago",daysAgo:"%7B%24amount%7D%20days%20ago",today:"today",weekAgo:"1%20week%20ago",weeksAgo:"%7B%24amount%7D%20weeks%20ago",yesterday:"yesterday"}};const yt=function(e,t,n){return N.get("currentLanguage").translate("TIN.input.date.Util",e,t,n)},ht=yt,vt=["TIN","input","date","lang"];for(var bt=window,mt=0;mt<vt.length;++mt)bt[vt[mt]]||(bt[vt[mt]]={}),bt=bt[vt[mt]];bt.en_US||(bt.en_US={}),bt.en_US.Text={text:{apr:"Apr",april:"April",aug:"Aug",august:"August",dec:"Dec",december:"December",feb:"Feb",february:"February",fri:"Fri",friday:"Friday",jan:"Jan",january:"January",jul:"Jul",july:"July",jun:"Jun",june:"June",mar:"Mar",march:"March",may:"May",mon:"Mon",monday:"Monday",nov:"Nov",november:"November",oct:"Oct",october:"October",sat:"Sat",saturday:"Saturday",sep:"Sep",september:"September",shortMay:"May",sun:"Sun",sunday:"Sunday",thu:"Thu",thursday:"Thursday",tinyFriday:"F",tinyMonday:"M",tinySaturday:"S",tinySunday:"S",tinyThursday:"T",tinyTuesday:"T",tinyWednesday:"W",tue:"Tue",tuesday:"Tuesday",wed:"Wed",wednesday:"Wednesday",dayOfMonthOrd01:"1st",dayOfMonthOrd02:"2nd",dayOfMonthOrd03:"3rd",dayOfMonthOrd04:"4th",dayOfMonthOrd05:"5th",dayOfMonthOrd06:"6th",dayOfMonthOrd07:"7th",dayOfMonthOrd08:"8th",dayOfMonthOrd09:"9th",dayOfMonthOrd10:"10th",dayOfMonthOrd11:"11th",dayOfMonthOrd12:"12th",dayOfMonthOrd13:"13th",dayOfMonthOrd14:"14th",dayOfMonthOrd15:"15th",dayOfMonthOrd16:"16th",dayOfMonthOrd17:"17th",dayOfMonthOrd18:"18th",dayOfMonthOrd19:"19th",dayOfMonthOrd20:"20th",dayOfMonthOrd21:"21st",dayOfMonthOrd22:"22nd",dayOfMonthOrd23:"23rd",dayOfMonthOrd24:"24th",dayOfMonthOrd25:"25th",dayOfMonthOrd26:"26th",dayOfMonthOrd27:"27th",dayOfMonthOrd28:"28th",dayOfMonthOrd29:"29th",dayOfMonthOrd30:"30th",dayOfMonthOrd31:"31st"}};const gt=function(e,t,n){return N.get("currentLanguage").translate("TIN.input.date.Text",e,t,n)},_t=gt;function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==wt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===wt(i)?i:String(i)),r)}var o,i}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMonthNames",value:function(){return e.monthNames.concat()}},{key:"getMonthName",value:function(t){return e.monthNames[t]}},{key:"getShortMonthNames",value:function(){return e.shortMonthNames}},{key:"getShortMonthName",value:function(t){return e.shortMonthNames[t]}},{key:"isValidShortMonthName",value:function(e){return-1!==this.getMonthIndexFromShortName(e)}},{key:"getMonthIndexFromShortName",value:function(t){return t?e.shortMonthNames.findIndex((function(e){return!t.localeCompare(e,void 0,{sensitivity:"base"})})):-1}},{key:"getMonthIndexFromName",value:function(t){return e.monthNames.indexOf(t)}},{key:"getDayIndexFromOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames.indexOf(t)}},{key:"getMonthIndexFromEnglishShortName",value:function(t){return e.untranslatedShortMonthNames.indexOf(t)}},{key:"getDayOfWeekName",value:function(t){return e.dayOfWeekNames[t]}},{key:"getDayOfWeekTinyName",value:function(t){return e.dayOfWeekTinyNames[t]}},{key:"getDayOfWeekTinyNames",value:function(){return e.dayOfWeekTinyNames}},{key:"getDayOfWeekShortName",value:function(t){return e.dayOfWeekShortNames[t]}},{key:"getDayOfMonthOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames[t-1]}}],(n=null)&&St(t.prototype,n),r&&St(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Et(i)?i:String(i)),r)}var o,i}Ot.untranslatedMonthNames=["january","february","march","april","may","june","july","august","september","october","november","december"],Ot.monthNames=[_t("january"),_t("february"),_t("march"),_t("april"),_t("may"),_t("june"),_t("july"),_t("august"),_t("september"),_t("october"),_t("november"),_t("december")],Ot.shortMonthNames=[_t("jan"),_t("feb"),_t("mar"),_t("apr"),_t("shortMay"),_t("jun"),_t("jul"),_t("aug"),_t("sep"),_t("oct"),_t("nov"),_t("dec")],Ot.untranslatedShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ot.dayOfWeekNames=[_t("sunday"),_t("monday"),_t("tuesday"),_t("wednesday"),_t("thursday"),_t("friday"),_t("saturday")],Ot.dayOfWeekTinyNames=[_t("tinySunday"),_t("tinyMonday"),_t("tinyTuesday"),_t("tinyWednesday"),_t("tinyThursday"),_t("tinyFriday"),_t("tinySaturday")],Ot.dayOfWeekShortNames=[_t("sun"),_t("mon"),_t("tue"),_t("wed"),_t("thu"),_t("fri"),_t("sat")],Ot.dayOfMonthOrdinalNames=[_t("dayOfMonthOrd01"),_t("dayOfMonthOrd02"),_t("dayOfMonthOrd03"),_t("dayOfMonthOrd04"),_t("dayOfMonthOrd05"),_t("dayOfMonthOrd06"),_t("dayOfMonthOrd07"),_t("dayOfMonthOrd08"),_t("dayOfMonthOrd09"),_t("dayOfMonthOrd10"),_t("dayOfMonthOrd11"),_t("dayOfMonthOrd12"),_t("dayOfMonthOrd13"),_t("dayOfMonthOrd14"),_t("dayOfMonthOrd15"),_t("dayOfMonthOrd16"),_t("dayOfMonthOrd17"),_t("dayOfMonthOrd18"),_t("dayOfMonthOrd19"),_t("dayOfMonthOrd20"),_t("dayOfMonthOrd21"),_t("dayOfMonthOrd22"),_t("dayOfMonthOrd23"),_t("dayOfMonthOrd24"),_t("dayOfMonthOrd25"),_t("dayOfMonthOrd26"),_t("dayOfMonthOrd27"),_t("dayOfMonthOrd28"),_t("dayOfMonthOrd29"),_t("dayOfMonthOrd30"),_t("dayOfMonthOrd31")];var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isInteger",value:function(e){var t=Number(e);return!at.isWhitespace(e)&&!isNaN(t)&&t%1==0}},{key:"format",value:function(e,t,n){var r=Number(e).toString().split(".");return r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),r.join(t)}},{key:"fromString",value:function(e,t,n){return n&&(e=e.split(n).join("")),t&&(e=e.replace(t,".")),Number(e)}}],(n=null)&&Pt(t.prototype,n),r&&Pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Tt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Tt(i)?i:String(i)),r)}var o,i}var It=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setUseMilitaryTimeFormat",value:function(t){e.useMilitaryTimeFormat=!!t}},{key:"setPickerFirstDayOfTheWeek",value:function(t){e.pickerFirstDayOfTheWeek=t}},{key:"unserialize",value:function(t){return new e(t.hour,t.minute,t.second)}},{key:"fromString",value:function(t){if(!t.length)return null;var n=t.match(/^(\d{1,2})(?:[:|.](\d{1,2})(?:[:|.](\d{1,2}))?)?\s*(?:(am|pm))?$/i);if(!n)return null;var r=parseInt(n[1],10),o=parseInt(n[2],10);isNaN(o)&&(o=0);var i=parseInt(n[3],10);isNaN(i)&&(i=0);var a=(n[4]||"").toLowerCase();return"pm"===a&&r<12?r+=12:"am"===a&&r<=12&&(r%=12),24==r&&(r=0),r>23||o>=60||i>=60?null:new e(r,o,i)}}],(n=[{key:"initialize",value:function(e,t,n){e=parseInt(e||0,10),this._hour=24===e?0:e,this._minute=parseInt(t||0,10),this._second=parseInt(n||0,10),this._validate(this._hour,this._minute,this._second)}},{key:"getHour",value:function(){return this._hour}},{key:"getMinute",value:function(){return this._minute}},{key:"getSecond",value:function(){return this._second}},{key:"getJsonValue",value:function(){return{$JSNType:"time",value:{hour:this.getHour(),minute:this.getMinute(),second:this.getSecond()}}}},{key:"clone",value:function(){return new e(this.getHour(),this.getMinute(),this.getSecond())}},{key:"toString",value:function(){return this.getFormattedTime(!0)}},{key:"getFormattedTime",value:function(t){var n=e.useMilitaryTimeFormat?this.getHour():this.getHour()%12||12,r=e.useMilitaryTimeFormat?this._addLeadingZero(n):n;return t&&(r+=":"+this._addLeadingZero(this.getMinute())),e.useMilitaryTimeFormat||(r+=" "+(this.getHour()>=12?"PM":"AM")),r}},{key:"_addLeadingZero",value:function(e){return e>9?e.toString():"0"+e}},{key:"_validate",value:function(e,t,n){this._validateHour(e),this._validateMinute(t),this._validateSecond(n)}},{key:"_validateHour",value:function(e){if(!kt.isNumber(e)||e<0||e>23)throw new Error("Hour value should be beetwen 0 and 23.")}},{key:"_validateMinute",value:function(e){if(!kt.isNumber(e)||e<0||e>59)throw new Error("Minute value should be beetwen 0 and 59.")}},{key:"_validateSecond",value:function(e){if(!kt.isNumber(e)||e<0||e>59)throw new Error("Second value should be beetwen 0 and 59.")}}])&&jt(t.prototype,n),r&&jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ft(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ft(i)?i:String(i)),r)}var o,i}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);if(t){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(i,e);var t,n,r,o=Dt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getDaysToThisWeekLastWorkingDay",value:function(e){return i.getDaysToDayOfWeek(e,5)}},{key:"getDaysToDayOfWeek",value:function(e,t){return(7+t-e)%7}},{key:"getDaysToSaturday",value:function(e){return i.getDaysToDayOfWeek(e,6)}},{key:"getWeekStartDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getWeekEndDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n+6;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getMonthStartDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),1)}},{key:"getMonthEndDate",value:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}},{key:"getBeginningOfTheDay",value:function(e){return new Date(e.setHours(0,0,0,0))}},{key:"getEndOfTheDay",value:function(e){return new Date(e.setHours(23,59,59,999))}},{key:"now",value:function(){return N.get("dateOffsetMilliseconds")?new Date((new Date).getTime()+N.get("dateOffsetMilliseconds")):new Date}},{key:"getShortDateFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+Ot.getShortMonthName(e.getMonth())+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())}},{key:"getTimeOnlyFormat",value:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t}},{key:"getDateFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var t=e.split(/[ \/.-]+/);if(3!=t.length)return{isValid:!1};var n=parseInt(t[0],10);if(isNaN(n))return{isValid:!1};var r=parseInt(t[1],10);if(isNaN(r)){var o=t[1].substr(0,1).toUpperCase()+t[1].substr(1).toLowerCase(),a=Ot.getMonthIndexFromEnglishShortName(o);if(-1==a&&(a=Ot.getMonthIndexFromShortName(o)),-1==(r=a))return{isValid:!1}}else if((r-=1)<0||r>11)return{isValid:!1};var u=parseInt(t[2],10);return isNaN(u)||u>99&&u<1e3?{isValid:!1}:(u+"").length>=4&&(u<i.MIN_YEAR||u>i.MAX_YEAR)?{isValid:!1,errorMsgKey:"invalidYear",validDate:u<i.MIN_YEAR?i.getMinValidDate():i.getMaxValidDate()}:(u<=99&&(u>69?u+=1900:u>0&&(u+=2e3)),{isValid:!0,value:new Date(u,r,n)})}},{key:"getTimeFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var t=e.split(/[ \/:]+/);if(3!=t.length)return{isValid:!1,errorMsgKey:"invalidTime"};var n=parseInt(t[0],10);if(isNaN(n)||n<0||n>24)return{isValid:!1,errorMsgKey:"invalidHours"};var r=parseInt(t[1],10);if(isNaN(r)||r<0||r>60)return{isValid:!1,errorMsgKey:"invalidMinutes"};var o=parseInt(t[2],10);return isNaN(o)||o<0||o>60?{isValid:!1,errorMsgKey:"invalidSeconds"}:{isValid:!0,value:[n,r,o]}}},{key:"getDateTimeFromTextValue",value:function(e,t){var n=e.split(" ");if(!(t||2==n.length&&n[0]&&n[1]))return{isValid:!1,errorMsgKey:"invalidDateTime"};if(!(o=i.getDateFromTextValue(n[0])).isValid)return o;if(n[1]){var r;if(!(r=i.getTimeFromTextValue(n[1])).isValid)return r}else{if(!t)return{isValid:!1,errorMsgKey:"invalidDateTime"};r={value:[0,0,0]}}var o=new Date(o.value.getFullYear(),o.value.getMonth(),o.value.getDate(),r.value[0],r.value[1],r.value[2]);return{isValid:!0,value:i.truncateToValidDateRange(o)}}},{key:"_addLeadingZero",value:function(e,t){return 1!=e.length||t?e:"0"+e}},{key:"getShortDateFormatWithTime",value:function(e,t){var n=i._addLeadingZero(e.getDate().toString(),!1),r=t?i.getOnlyTimeFromDate(e,!1):i._getHoursFromDate(e,!1)+":"+i._getMinutesFromDate(e,!1);return n+"-"+Ot.getShortMonthName(e.getMonth())+"-"+e.getFullYear()+" "+r}},{key:"_getHoursFromDate",value:function(e,t){return i._addLeadingZero(e.getHours().toString(),t)}},{key:"_getMinutesFromDate",value:function(e,t){return i._addLeadingZero(e.getMinutes().toString(),t)}},{key:"getOnlyTimeFromDate",value:function(e,t){var n=new It(e.getHours(),e.getMinutes());return n.getFormattedTime(!t||0!=n.getMinute())}},{key:"getOnlyMonthAndYear",value:function(e){return Ot.getShortMonthName(e.getMonth())+"-"+e.getFullYear()}},{key:"getLongDateFormat",value:function(e){var t=e.getHours().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();return 1==n.length&&(n="0"+n),Ot.getDayOfWeekName(e.getDay())+", "+Ot.getMonthName(e.getMonth())+" "+e.getDate().toString()+", "+e.getFullYear()+". "+t+":"+n}},{key:"addDaysToDate",value:function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return i.truncateToValidDateRange(n)}},{key:"addMonthsToDate",value:function(e,t){var n=new Date(e.getFullYear(),e.getMonth()+t,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return i.truncateToValidDateRange(n)}},{key:"equals",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}},{key:"equalsWithTime",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()}},{key:"getDateDifferenceInDays",value:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)}},{key:"getDiff",value:function(e,t){return e.getTime()-t.getTime()}},{key:"getShortDateWithDayNameFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+Ot.getShortMonthName(e.getMonth()).toUpperCase()+" ("+Ot.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getShortDateWithDayNameAndYearFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+Ot.getShortMonthName(e.getMonth()).toUpperCase()+" "+e.getFullYear()+" ("+Ot.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getOnlyMonthAndDayFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),(t?Ot.getShortMonthName(e.getMonth()):Ot.getMonthName(e.getMonth()))+" "+n}},{key:"getOnlyMonthAndDayWithTimeFormat",value:function(e){return i.getOnlyMonthAndDayFormat(e,!0)+" "+ht("at")+" "+i.getOnlyTimeFromDate(e)}},{key:"getDateFromTimestamp",value:function(e){return i.truncateToValidDateRange(new Date(1e3*parseFloat(e)))}},{key:"getStrFTime",value:function(e,t){return t=t.constructor==Date?t:i.now(),e=(e=(e=e.replace(/%a/g,Ot.getDayOfWeekName(t.getDay()).substring(0,3))).replace(/%b/g,Ot.getShortMonthName(t.getMonth()))).replace(/%e/g,t.getDate())}},{key:"getStrFDate",value:function(e,t){return t=t.constructor==Date?t:i.now(),e=(e=(e=e.replace(/%d/g,i._addLeadingZero(t.getDate().toString()))).replace(/%m/g,i._addLeadingZero((t.getMonth()+1).toString()))).replace(/%G/g,t.getFullYear())}},{key:"getStrFTimeRange",value:function(e,t,n){return i.getStrFTime(i.getStrFTime(e,t).replace(/#([abe])/g,"%$1"),n)}},{key:"getDayNameMonthAndDayNumberFormat",value:function(e){return Ot.getDayOfWeekName(e.getDay())+", "+Ot.getMonthName(e.getMonth())+" "+e.getDate()}},{key:"dateToJson",value:function(e){return e||(e=i.now()),{year:e.getFullYear(),month:e.getMonth(),dayOfTheMonth:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}}},{key:"dateFromJson",value:function(e){var t=new Date(e.year,e.month,e.dayOfTheMonth,e.hours,e.minutes,e.seconds);return i.truncateToValidDateRange(t)}},{key:"dateToUTC",value:function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return i.truncateToValidDateRange(t)}},{key:"dateFromUTC",value:function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0));return i.truncateToValidDateRange(t)}},{key:"jsonToUTC",value:function(e){return i.dateToJson(i.dateToUTC(i.dateFromJson(e)))}},{key:"jsonFromUTC",value:function(e){return i.dateToJson(i.dateFromUTC(i.dateFromJson(e)))}},{key:"cleanTimeFromDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}},{key:"formatMinutesEntry",value:function(e){if(e>59||e<0)throw new Error("Invalid value in TIN_input_date_Util.formatMinutesEntry. Minutes must be between 0 and 59");var t=e.toString();return t.length>1?t:"0".concat(t)}},{key:"getDefaultMinutesEntries",value:function(){return[0,10,20,30,40,50]}},{key:"getTimeAgoAsString",value:function(e){var t,n=i.now(),r=parseInt((n.getTime()-e.getTime())/1e3,10),o=r;if(r<30)t="justNow";else if(r<60)t="secondsAgo";else if(r<3600)t=(o=r/60)<2?"minuteAgo":"minutesAgo";else if(r<86400)t=(o=r/3600)<2?"hourAgo":"hoursAgo";else if(r<604800)t=(o=r/86400)<2?"dayAgo":"daysAgo";else{if(!(r<7776e3))return r<2592e4?i.getOnlyMonthAndDayWithTimeFormat(e):i.getShortDateFormatWithTime(e);t=(o=r/604800)<2?"weekAgo":"weeksAgo"}return ht(t,{amount:parseInt(o,10)})}},{key:"getTimeDayAsString",value:function(e){var t=i.getDateDifferenceInDays(i.now(),e);return 0===t?ht("today"):1===t?ht("yesterday"):ht("daysAgo",{amount:t})}},{key:"truncateToValidDateRange",value:function(e){var t=e.getFullYear();return t>i.MAX_YEAR&&(e=i.getMaxValidDate()),t<i.MIN_YEAR&&(e=i.getMinValidDate()),e}},{key:"getMaxValidDate",value:function(){return new Date(i.MAX_YEAR,11,31,23,59,59.999999)}},{key:"getMinValidDate",value:function(){return new Date(i.MIN_YEAR,0,1,0,0,0)}}],(n=null)&&Rt(t.prototype,n),r&&Rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Nt(i)?i:String(i)),r)}var o,i}function Mt(e,t){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mt(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vt(e);if(t){var o=Vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}xt.FIRST_DAY_OF_THE_WEEK={},xt.FIRST_DAY_OF_THE_WEEK.SUNDAY=0,xt.FIRST_DAY_OF_THE_WEEK.MONDAY=1,xt.SECONDS_IN_A_DAY=86400,xt.SECONDS_IN_A_MINUTE=60,xt.MIN_YEAR=1001,xt.MAX_YEAR=9999;var Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(i,e);var t,n,r,o=Bt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canEncode",value:function(e){return e instanceof Date}},{key:"canDecode",value:function(e){return e===this._getType()}},{key:"_getType",value:function(){return"datetime"}},{key:"decode",value:function(e){return xt.truncateToValidDateRange(new Date(1e3*e))}},{key:"encode",value:function(e){return{$JSNType:this._getType(),value:xt.truncateToValidDateRange(e).getTime()/1e3}}}])&&Lt(t.prototype,n),r&&Lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);n(44048);function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Wt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wt(i)?i:String(i)),r)}var o,i}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qt(e);if(t){var o=Qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(i,e);var t,n,r,o=zt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"fromDateTime",value:function(e){return new i(e.getFullYear(),e.getMonth()+1,e.getDate())}},{key:"unserialize",value:function(e){return new i(e.year,e.month,e.dayOfTheMonth)}}],(n=[{key:"initialize",value:function(e,t,n){if(void 0!==e||void 0!==t||void 0!==n)if(e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),Number.isNaN(e)||Number.isNaN(t))this.date=null;else{t-=1;var r=Number.isNaN(n)?new Date(e,t):new Date(e,t,n);this.date=xt.truncateToValidDateRange(r)}else this.date=xt.now()}},{key:"getTimeStamp",value:function(){return this.date.getTime()/1e3}},{key:"getDateTime",value:function(){return this.date}},{key:"getFullYear",value:function(){return this.date.getFullYear()}},{key:"getMonth",value:function(){return this.date.getMonth()}},{key:"getDayOfTheMonth",value:function(){return this.date.getDate()}},{key:"getTimezoneOffset",value:function(){return this.date.getTimezoneOffset()}},{key:"setFullYear",value:function(e){this.date.setFullYear(e),this.date=xt.truncateToValidDateRange(this.date)}},{key:"setMonth",value:function(e){this.date.setMonth(e),this.date=xt.truncateToValidDateRange(this.date)}},{key:"setDayOfTheMonth",value:function(e){this.date.setDate(e),this.date=xt.truncateToValidDateRange(this.date)}},{key:"toString",value:function(){return xt.getShortDateFormat(this.getDateTime())}},{key:"equals",value:function(e){return e.getDateTime().getTime()==this.getDateTime().getTime()}},{key:"valueOf",value:function(){return this.date.valueOf()}},{key:"getJsonValue",value:function(){return{$JSNType:"date",value:{year:this.date.getFullYear(),month:this.date.getMonth()+1,dayOfTheMonth:this.date.getDate()}}}},{key:"clone",value:function(){return new i(this.date.getFullYear(),this.date.getMonth()+1,this.date.getDate())}}])&&Ht(t.prototype,n),r&&Ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Gt(i)?i:String(i)),r)}var o,i}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$t(e);if(t){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(i,e);var t,n,r,o=Kt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"date"===e}},{key:"decode",value:function(e){return qt.unserialize(e)}}])&&Jt(t.prototype,n),r&&Jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==en(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==en(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===en(i)?i:String(i)),r)}var o,i}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=on(e);if(t){var o=on(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(i,e);var t,n,r,o=rn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"unserialize",value:function(e){return new i(qt.unserialize(e.date.value),It.unserialize(e.time.value))}},{key:"create",value:function(e,t){return new i(e,t)}}],(n=[{key:"initialize",value:function(e,t){if(!(e instanceof qt&&t instanceof It))throw new Error("Incorrect object arguments");this.day=e,this.time=t}},{key:"getDay",value:function(){return this.day}},{key:"getTime",value:function(){return this.time}},{key:"getDateTime",value:function(){var e=this.day.getDateTime();return e&&(e.setHours(this.time.getHour()),e.setMinutes(this.time.getMinute()),e.setSeconds(this.time.getSecond())),e}},{key:"getJsonValue",value:function(){return{$JSNType:"dayAndTime",value:{date:this.day.getJsonValue(),time:this.time.getJsonValue()}}}},{key:"clone",value:function(){return new i(this.day.clone(),this.time.clone())}}])&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===un(i)?i:String(i)),r)}var o,i}function sn(e,t){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sn(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn(e);if(t){var o=fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}var pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}(i,e);var t,n,r,o=cn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"dayAndTime"===e}},{key:"decode",value:function(e){return an.unserialize(e)}}])&&ln(t.prototype,n),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);n(17727),n(74819),n(38880);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==dn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===dn(i)?i:String(i)),r)}var o,i}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hn(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bn(e);if(t){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bn(e){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bn(e)}var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}(i,e);var t,n,r,o=vn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.revisionNumber=0,this.dataSourceId=++i.count}},{key:"getDataHashCode",value:function(){return this.dataSourceId+"-"+this.getRevisionNumber()}},{key:"getRevisionNumber",value:function(){return this.revisionNumber}},{key:"forceChange",value:function(){var e=new U({partial:!1});this.dispatchChange(e)}},{key:"dispatchChange",value:function(e){++this.revisionNumber,this.dispatchEvent("change",e)}}])&&yn(t.prototype,n),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==gn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gn(i)?i:String(i)),r)}var o,i}function wn(){return wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=En(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},wn.apply(this,arguments)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=En(e);if(t){var o=En(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function En(e){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},En(e)}mn.count=0,N.get("DEBUG_MODE")&&(mn.prototype.getExtraInfoToLog=function(){var e=this;return{data:function(){return tinkerman.log(e.get())}}});var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}(i,e);var t,n,r,o=On(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"fromPromise",value:function(e){var t=new i(null,!0);return e.then((function(e){t.set(e)})).catch((function(){this.dispatchEvent("error")})).finally((function(){t.setIsBusy(!1)})),t}}],(n=[{key:"initialize",value:function(e,t){wn(En(i.prototype),"initialize",this).call(this),this.data=e,this.busy=!!t}},{key:"get",value:function(){return this.data}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"isBusy",value:function(){return this.busy}},{key:"set",value:function(e,t){if(this.data=e,!this.busy){var n=new U({partial:!1});t||this.dispatchChange(n)}}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"remove",value:function(e,t,n){var r=Ke.sloppyIndexOf(this.data,e);if(-1!==r&&(this.data.splice(r,1),this.set(this.data,t),!n)){var o=new U({partial:!0,oldItem:e,oldItemIndex:r});this.dispatchEvent("remove",o)}}},{key:"append",value:function(e){this.insert(e)}},{key:"appendMany",value:function(e,t){Array.prototype.push.apply(this.data,e);var n=new U({partial:!0,newItems:e});if(this.dispatchEvent("appendmany",n),!t){var r=new U({partial:!0,newItems:e});this.dispatchChange(r)}}},{key:"prepend",value:function(e){this.insert(e,0)}},{key:"insert",value:function(e,t){"number"==typeof t&&t>=0&&t<=this.data.length?this.data.splice(t,0,e):this.data.push(e);var n=new U({partial:!0,newItem:e,atIndex:t});this.dispatchEvent("append",n);var r=new U({partial:!0,newItem:e});this.dispatchChange(r)}},{key:"addDependencyOf",value:function(e){}},{key:"removeDependencyOf",value:function(e){}}])&&_n(t.prototype,n),r&&_n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kn(i)?i:String(i)),r)}var o,i}function jn(e,t){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jn(e,t)}function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fn(e);if(t){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fn(e){return Fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fn(e)}var Rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jn(e,t)}(i,e);var t,n,r,o=In(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"LocalDataSource"===e}},{key:"decode",value:function(e,t){return Pn.New(t.decodeTypes(e))}}])&&Tn(t.prototype,n),r&&Tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cn(i)?i:String(i)),r)}var o,i}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn(e);if(t){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}var Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(i,e);var t,n,r,o=xn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"time"===e}},{key:"decode",value:function(e){return It.unserialize(e)}}])&&Dn(t.prototype,n),r&&Dn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Mn(i)?i:String(i)),r)}var o,i}var Vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDefaultCodecs",value:function(){de.addCodec(new Ut),de.addCodec(new Xt),de.addCodec(new pn),de.addCodec(new Rn),de.addCodec(new Ln)}}],(n=null)&&Bn(t.prototype,n),r&&Bn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Un=["TIN","e","jscore","module","harp","UI","lang"];for(var Wn=window,Hn=0;Hn<Un.length;++Hn)Wn[Un[Hn]]||(Wn[Un[Hn]]={}),Wn=Wn[Un[Hn]];Wn.en_US||(Wn.en_US={}),Wn.en_US.ServerStatus={text:{loginRequired:"%27Login%20required%27",sessionExpired:"%27Your%20session%20has%20expired%27",sorryWeAreUnderMaintenance:"%27Avature%20is%20under%20maintenance.%27",unableToReachTheServer:"%27Unable%20to%20reach%20Avature.%20Please%20check%20your%20internet%20connection..%27"}};const Yn=function(e,t,n){return N.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.ServerStatus",e,t,n)},zn=Yn;function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qn(i)?i:String(i)),r)}var o,i}function Jn(e,t,n){return t&&Gn(e.prototype,t),n&&Gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xn(e);if(t){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}var er=function(e){Zn(n,e);var t=$n(n);function n(){return qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"initialize",value:function(e,t,n){this.errorCode=e,this.reportCode=t,this.callDescription=n}},{key:"getTechnicalDescription",value:function(){return this.callDescription+" exception: "+this.errorCode+(this.reportCode?" (reportCode: "+this.reportCode+")":"")}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"getReportCode",value:function(){return this.reportCode}}]),n}(Q),tr=function(e){Zn(n,e);var t=$n(n);function n(){return qn(this,n),t.apply(this,arguments)}return Jn(n,[{key:"getTranslatedMessage",value:function(){return this.getDescription()}}]),n}(er);function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(){return rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},rr.apply(this,arguments)}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==nr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===nr(i)?i:String(i)),r)}var o,i}function ar(e,t,n){return t&&ir(e.prototype,t),n&&ir(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ur(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lr(e,t)}function lr(e,t){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lr(e,t)}function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cr(e);if(t){var o=cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}var fr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(){this.setAsOnline()}},{key:"assertValidCode",value:function(e){if(-1==["online","invalidPageSession","routerLoginRequired","offline","serverDisabled","buildingPacks","otherUserLogged"].indexOf(e))throw new Error("Invalid status code")}},{key:"setAsServerDisabled",value:function(){this._set("serverDisabled")}},{key:"setAsBuildingPacks",value:function(){this._set("buildingPacks")}},{key:"setAsOnline",value:function(){this._set("online")}},{key:"setAsOffline",value:function(){this._set("offline")}},{key:"setAsUserLess",value:function(){this._set("routerLoginRequired")}},{key:"setAsOtherUserLogged",value:function(){this._set("otherUserLogged")}},{key:"mustPollForOnline",value:function(){return this.isOffline()||this.isServerDisabled()||this.isBuildingPacks()}},{key:"setAsPageSessionLess",value:function(){this._set("invalidPageSession")}},{key:"_set",value:function(e){if(e!=this.code){this.assertValidCode(e);var t=this.mustPollForOnline();this.code=e,this.isOffline()?this.dispatchEvent("offline"):this.isOnline()?this.dispatchEvent("online"):this.isUserLess()?this.dispatchEvent("userless"):this.isPageSessionLess()&&this.dispatchEvent("pagesessionless"),this.isOnline()||this.dispatchEvent("notonline"),!t&&this.mustPollForOnline()&&this.dispatchEvent("pollrequired"),t&&!this.mustPollForOnline()&&this.dispatchEvent("pollrequiredend")}}},{key:"createRemoteException",value:function(e){if(this.isOffline())return new vr("offline",e);if(this.isServerDisabled()||this.isBuildingPacks())return new br(e);if(this.isUserLess())return new yr(e);if(this.isPageSessionLess())return new dr(e);if(this.isOtherUserLogged())return new hr(e);throw new Error("No RemoteException for "+this.code)}},{key:"isOffline",value:function(){return"offline"==this.code}},{key:"isOnline",value:function(){return"online"==this.code}},{key:"isUserLess",value:function(){return"routerLoginRequired"==this.code}},{key:"isOtherUserLogged",value:function(){return"otherUserLogged"==this.code}},{key:"isPageSessionLess",value:function(){return"invalidPageSession"==this.code}},{key:"isServerDisabled",value:function(){return"serverDisabled"==this.code}},{key:"isBuildingPacks",value:function(){return"buildingPacks"==this.code}},{key:"isPageSessionLessOrUserLess",value:function(){return this.isPageSessionLess()||this.isUserLess()}}]),n}(Q),pr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(e,t){rr(cr(n.prototype),"initialize",this).call(this,e,null,t)}}]),n}(er),dr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(e){rr(cr(n.prototype),"initialize",this).call(this,"invalidPageSession",e)}},{key:"getDescription",value:function(){return zn("sessionExpired")}}]),n}(pr),yr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(e){rr(cr(n.prototype),"initialize",this).call(this,"routerLoginRequired",e)}},{key:"getDescription",value:function(){return zn("loginRequired")}}]),n}(pr),hr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(e){rr(cr(n.prototype),"initialize",this).call(this,"otherUserLogged",e)}},{key:"getDescription",value:function(){return zn("loginRequired")}}]),n}(pr),vr=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"getDescription",value:function(){return zn("unableToReachTheServer")}}]),n}(pr),br=function(e){ur(n,e);var t=sr(n);function n(){return or(this,n),t.apply(this,arguments)}return ar(n,[{key:"initialize",value:function(e){rr(cr(n.prototype),"initialize",this).call(this,"serverDisabled",e)}},{key:"getDescription",value:function(){return zn("sorryWeAreUnderMaintenance")}}]),n}(pr);const mr=["TIN","e","jscore","module","harp","UI","lang"];for(var gr=window,_r=0;_r<mr.length;++_r)gr[mr[_r]]||(gr[mr[_r]]={}),gr=gr[mr[_r]];gr.en_US||(gr.en_US={}),gr.en_US.RequestLoadHandler={text:{connectivityProblemsYouMayNeedToRefresh:"%27There%20were%20connectivity%20problems.%20You%20may%20need%20to%20refresh.%27"}};const wr=function(e,t,n){return N.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.RequestLoadHandler",e,t,n)},Sr=wr,Or=["TIN","e","jscore","module","harp","UI","lang"];for(var Er=window,Pr=0;Pr<Or.length;++Pr)Er[Or[Pr]]||(Er[Or[Pr]]={}),Er=Er[Or[Pr]];Er.en_US||(Er.en_US={}),Er.en_US.RemoteExceptionDecoder={text:{loginRequired:"%27Login%20required%27",oopsThereWasAnError:"%27Oops%2C%20there%20was%20an%20error%21%20Please%20contact%20your%20admin.%27",actionTakingTooLongContact:"%27This%20action%20is%20taking%20too%20long.%20Please%20contact%20Technical%20Support%27"}};const kr=function(e,t,n){return N.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.RemoteExceptionDecoder",e,t,n)},Tr={translate:kr};function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Ir(){return Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ir.apply(this,arguments)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jr(i)?i:String(i)),r)}var o,i}function Cr(e,t,n){return t&&Rr(e.prototype,t),n&&Rr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ar(e,t)}function Ar(e,t){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ar(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nr(e);if(t){var o=Nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}var Lr=function(e){Dr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Cr(n,[{key:"create",value:function(e,t){var r=t.errorCode;if("loginRequired"==r)return new Mr(e);if("exception"==r)return new Br(t.reportCode,e);if(r in n.remoteExceptionClassByCode)return new n.remoteExceptionClassByCode[r](t.reportCode,e,t.extraData);throw new Error("Unknown remote exception: "+r)}}],[{key:"remoteExceptionClassWithCallback",value:function(e,t,r){var o=r?tr:er,i=this._createMixin(o,t,e),a=at.capitalize(e);Tr.export(a,i),n.remoteExceptionClassByCode[e]=i}},{key:"_createMixin",value:function(e,t,n){return function(e){Dr(o,e);var r=xr(o);function o(){return Fr(this,o),r.apply(this,arguments)}return Cr(o,[{key:"initialize",value:function(e,t,r){this.extraData=r,Ir(Nr(o.prototype),"initialize",this).call(this,n,e,t)}},{key:"getDescription",value:function(){return t(this.extraData)}}]),o}(e)}},{key:"registerTranslatedClass",value:function(e,t){n.remoteExceptionClassWithCallback(e,(function(e){return t||e}),!0)}}]),n}(Q);Lr.remoteExceptionClassByCode={};var Mr=function(e){Dr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Cr(n,[{key:"initialize",value:function(e){Ir(Nr(n.prototype),"initialize",this).call(this,"loginRequired",null,e)}},{key:"getDescription",value:function(){return Tr.translate("loginRequired")}}]),n}(er),Br=function(e){Dr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Cr(n,[{key:"initialize",value:function(e,t){Ir(Nr(n.prototype),"initialize",this).call(this,"exception",e,t)}},{key:"getDescription",value:function(){return Tr.translate("oopsThereWasAnError")}}]),n}(er),Vr=function(e){Dr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Cr(n,[{key:"initialize",value:function(e){Ir(Nr(n.prototype),"initialize",this).call(this,"exception",null,e)}},{key:"getDescription",value:function(){return Tr.translate("actionTakingTooLongContact")}}]),n}(er);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ur(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ur(i)?i:String(i)),r)}var o,i}function Yr(e,t,n){return t&&Hr(e.prototype,t),n&&Hr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qr(e,t)}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gr(e);if(t){var o=Gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gr(e){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gr(e)}var Jr=function(e){zr(n,e);var t=qr(n);function n(){return Wr(this,n),t.apply(this,arguments)}return Yr(n,[{key:"initialize",value:function(){this.callbacks=[],this.delayer=new Zr(this.caller("onDelay")),this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"_checkBusy",value:function(){var e=this.callbacks.length>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"callLater",value:function(e){this.scheduled||(this.scheduled=!0,this.delayer.schedule()),this.callbacks.push(e),this._checkBusy()}},{key:"onDelay",value:function(){this.scheduled=!1;var e=this.callbacks;this.callbacks=[];for(var t=0;t<e.length;++t)try{e[t]()}catch(e){N.get("defaultErrorHandler").handleCatchedException(e)}this._checkBusy()}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}},{key:"delay",value:function(e){n.getInstance().callLater(e)}}]),n}(Q),Zr=function(e){zr(n,e);var t=qr(n);function n(){return Wr(this,n),t.apply(this,arguments)}return Yr(n,[{key:"initialize",value:function(e){this.div=document.createElement("div"),this.current=!0,new MutationObserver(e).observe(this.div,{attributes:!0})}},{key:"schedule",value:function(){this.div.setAttribute("class",this.current),this.current=!this.current}}]),n}(Q);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Kr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Kr(i)?i:String(i)),r)}var o,i}function Xr(e,t){return Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xr(e,t)}function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=to(e);if(t){var o=to(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function to(e){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},to(e)}var no=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(i,e);var t,n,r,o=eo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.ignoredRequestErrorsDueToStartingToUnload=!1,this.serverStatus=e,N.get("browserWindow").addListener("beforeunloadtimeout",this.caller("onBeforeUnloadTimeout")),N.get("browserWindow").addListener("beforeunload",this.caller("onBeforeUnload"))}},{key:"handleGroupedResponse",value:function(e,t,n,r){N.get("browserWindow").isUnloading()||(n.isError()?this.onRequestError(t,n):this.onRequestLoad(e,t,n,r))}},{key:"onBeforeUnloadTimeout",value:function(){this.ignoredRequestErrorsDueToStartingToUnload&&(N.get("page").info(Sr("connectivityProblemsYouMayNeedToRefresh")),this.ignoredRequestErrorsDueToStartingToUnload=!1),this.startingToUnload=!1}},{key:"onBeforeUnload",value:function(){this.startingToUnload=!0}},{key:"_updateServerStatus",value:function(e){if("routerLoginRequired"==e)this.serverStatus.setAsUserLess();else if("invalidPageSession"==e)this.serverStatus.setAsPageSessionLess();else if("serverDisabled"==e)this.serverStatus.setAsServerDisabled();else if("buildingPacks"==e)this.serverStatus.setAsBuildingPacks();else{if("otherUserLogged"!=e)throw new Error("invalidStatusCode");this.serverStatus.setAsOtherUserLogged()}}},{key:"onRequestLoad",value:function(e,t,n,r){var o,i=n.get(),a=N.get("serverCredentials");if(i.cortex&&a.getCortex()!=i.cortex&&a.setCortex(i.cortex),i.error){var u=i.msg;if(!Ke.hasElement(["invalidVersion","serverDisabled","buildingPacks","invalidPageSession","routerLoginRequired","otherUserLogged","invalidPublicSessionName","timeout","tooManyConnections"],u))throw new Error("unknownServerError: "+u);if("invalidVersion"==u){var l=xt.now(),s=sessionStorage.getItem("lastInvalidVersionReloadDate");return s&&l.getTime()-parseInt(s,10)<6e4?void(window.top.location.href="_unrecoverableError"):(sessionStorage.setItem("lastInvalidVersionReloadDate",l.getTime()),void N.get("browserWindow").reload())}"timeout"==u||"tooManyConnections"==u?o=null:"invalidPublicSessionName"==u?(a.setPublicSessionName(i.publicSessionName),o=null,r.resend()):("routerLoginRequired"!=u&&"otherUserLogged"!=u||$.getInstance().handleRequireLogin("otherUserLogged"==u),this._updateServerStatus(u),o=this.serverStatus.createRemoteException("requestContentError"),$.getInstance().handleRemoteException(o))}else try{t.handleResponse(e,i.msg)}catch(e){if("routerError"!=e.message)throw e;o=new Br(e.reportCode,"requestContentError"),$.getInstance().handleRemoteException(o)}o&&t.handleRequestError(o)}},{key:"onRequestError",value:function(e,t){t.isBadGateway()&&Jr.delay((function(){N.get("defaultErrorHandler").reportAsException("badGatewayWhileCalling:\n"+e.getDescription())}));var n=!1,r=t.getErrorCode();if(t.isAvatureTimeout())var o=new Vr("requestError");else o=new vr(r,"requestError"),n=!0;if(this.startingToUnload)this.ignoredRequestErrorsDueToStartingToUnload=!0;else if(!t.isAbort()){var i=this.serverStatus.isOffline();n&&this.serverStatus.setAsOffline(),!e.getMustIndicateErrors()&&i||$.getInstance().handleRemoteException(o)}e.handleRequestError(o)}}])&&$r(t.prototype,n),r&&$r(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);const ro=["TIN","e","jscore","module","harp","UI","lang"];for(var oo=window,io=0;io<ro.length;++io)oo[ro[io]]||(oo[ro[io]]={}),oo=oo[ro[io]];oo.en_US||(oo.en_US={}),oo.en_US.PageSessionFrequencyValidator={text:{connectivityProblems:"%27Connectivity%20problems%27"}};const ao=function(e,t,n){return N.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.PageSessionFrequencyValidator",e,t,n)},uo=ao;function lo(e){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(e)}function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==lo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===lo(i)?i:String(i)),r)}var o,i}function co(e,t){return co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},co(e,t)}function fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=po(e);if(t){var o=po(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function po(e){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},po(e)}var yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&co(e,t)}(i,e);var t,n,r,o=fo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){this.lastPageSessionDates=[]}},{key:"appendDate",value:function(e){this.lastPageSessionDates.push(e)}},{key:"removeOldDates",value:function(e){for(var t=[],n=0;n<this.lastPageSessionDates.length;++n){var r=this.lastPageSessionDates[n];e-r<3e4&&t.push(r)}this.lastPageSessionDates=t}},{key:"assertNotTooManyPageSessionRenews",value:function(e){function t(e){return Math.round(e/100)/10+"s"}if(this.lastPageSessionDates.length>=10)throw N.get("page").info(uo("connectivityProblems")),new Error("Too many pagesessionrenews ("+this.lastPageSessionDates.length+") in "+t(e-this.lastPageSessionDates[0])+" (message dismissed after "+t(xt.now()-e)+")")}}],n&&so(t.prototype,n),r&&so(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ho(i)?i:String(i)),r)}var o,i}function bo(e,t){return bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bo(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);if(t){var o=go(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},go(e)}var _o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bo(e,t)}(i,e);var t,n,r,o=mo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.apiCall=e,this.onload=t,this.onerror=n}},{key:"getMessageToSendAndHandleSend",value:function(){return this.apiCall.getMessageToSend()}},{key:"handleLoad",value:function(e){var t=new U({response:e,error:!1});this.dispatchEvent("beforeload",t),this.onload&&this.onload(e)}},{key:"getApiCall",value:function(){return this.apiCall}},{key:"getCallDescription",value:function(){return this.apiCall.getDescription()}},{key:"handleError",value:function(e){var t=new U({response:e,error:!0});this.dispatchEvent("beforeload",t),this.onerror&&this.onerror(e)||$.getInstance().handleRemoteException(e)}},{key:"handle",value:function(e,t,n){var r=this;this.apiCall.handleResponse(e,t,this.caller("handleLoad"),(function(e){r.handleError(n.create(r.getCallDescription(),e))}))}}])&&vo(t.prototype,n),r&&vo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function wo(e){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==wo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===wo(i)?i:String(i)),r)}var o,i}function Oo(){return Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ko(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Oo.apply(this,arguments)}function Eo(e,t){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Eo(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ko(e);if(t){var o=ko(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}N.get("DEBUG_MODE")&&(_o.prototype.openInEditor=function(){this.apiCall.openInEditor()},_o.prototype.getTypeName=function(){return"API:"+this.apiCall.getDescription()},_o.prototype.getExtraInfoToLog=function(){var e=this;return{php:function(){return e.apiCall.logPhpCodeToTinkerman()},resend:function(){return e.apiCall.createDataSource()}}});var To=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(i,e);var t,n,r,o=Po(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){Oo(ko(i.prototype),"initialize",this).call(this),this.waitingForLogin=!1,this.waitingForOnline=!1,this.actionCall=e,this.busy=!0,this.fetchDuration=null,this.sendStartTime=null,N.get("server").isOnline()?this._fetchData():this._addOnlineListener()}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"_fetchData",value:function(){this.sendStartTime=xt.now(),N.get("server").execCall(this.actionCall,this.caller("onDataReceive"),this.caller("onError"))}},{key:"_addLoginListener",value:function(){if(this.waitingForLogin)throw new Error("Already waiting for login");this.waitingForLogin=!0,N.get("page").addListener("userchange",this.caller("onLoginAfterLoginRequired"))}},{key:"onLoginAfterLoginRequired",value:function(){this._removeLoginListener(),this._fetchData()}},{key:"_removeLoginListener",value:function(){N.get("page").removeListener("userchange",this.caller("onLoginAfterLoginRequired")),this.waitingForLogin=!1}},{key:"_addOnlineListener",value:function(){if(this.waitingForOnline)throw new Error("Already waiting for online");this.waitingForOnline=!0,N.get("server").addListener("online",this.caller("onServerOnlineAfterOfflineError"))}},{key:"onServerOnlineAfterOfflineError",value:function(){this._removeOnlineListener(),this._fetchData()}},{key:"_removeOnlineListener",value:function(){N.get("server").removeListener("online",this.caller("onServerOnlineAfterOfflineError")),this.waitingForOnline=!1}},{key:"updateDatasourceProperty",value:function(e,t){this.data[e]=t}},{key:"onError",value:function(e){if(!this.Deleted){if(e instanceof pr)return this._addOnlineListener(),!0;if(e instanceof Mr)return this._addLoginListener(),!0;var t=new U({error:e});return this.dispatchEvent("error",t),t.getDefaultPrevented()}}},{key:"onDataReceive",value:function(e){this.Deleted||(this.data=e,this.fetchDuration=xt.now()-this.sendStartTime,this.dispatchEvent("receive"),this.busy=!1,this.dispatchEvent("busystatechange"))}},{key:"uninit",value:function(){this.waitingForLogin&&this._removeLoginListener(),this.waitingForOnline&&this._removeOnlineListener()}}])&&So(t.prototype,n),r&&So(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jo(i)?i:String(i)),r)}var o,i}function Fo(e,t){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fo(e,t)}function Ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Co(e);if(t){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Co(e)}var Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fo(e,t)}(i,e);var t,n,r,o=Ro(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"get",value:function(){return this.data}},{key:"getError",value:function(){return this.error}},{key:"setError",value:function(e){this.errorSet=!0,this.error=e;var t=new U({data:e});this.dispatchEvent("error",t)}},{key:"set",value:function(e){this.valueSet=!0,this.data=e;var t=new U({data:e});this.dispatchEvent("load",t)}}])&&Io(t.prototype,n),r&&Io(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);n(32564);function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ao(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ao(i)?i:String(i)),r)}var o,i}function No(e,t){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},No(e,t)}function Lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mo(e);if(t){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mo(e)}var Bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&No(e,t)}(i,e);var t,n,r,o=Lo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.busy=!!e}},{key:"isBusy",value:function(){return this.busy}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"setAsFree",value:function(){this.setIsBusy(!1)}},{key:"setAsBusy",value:function(){this.setIsBusy(!0)}}])&&xo(t.prototype,n),r&&xo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Vo(e){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Vo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Vo(i)?i:String(i)),r)}var o,i}var Wo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getNodeDepth",value:function(e){for(var t=0,n=e;n.parentNode;)t++,n=n.parentNode;return t}},{key:"isDomNode",value:function(e){return e&&(e instanceof Node||e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.Node&&e instanceof e.ownerDocument.defaultView.Node)}},{key:"isDomElement",value:function(e){return e&&(e instanceof Element||e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.Element&&e instanceof e.ownerDocument.defaultView.Element)}},{key:"assertIsDomNode",value:function(t){if(!e.isDomNode(t))throw new Error("Expecting DOM node to work with, received "+p.describeValue(t)+" instead.")}},{key:"assertIsDomElement",value:function(t){if(!e.isDomElement(t))throw new Error("Expecting DOM element to work with, received "+p.describeValue(t)+" instead.")}},{key:"contains",value:function(t,n){return e.assertIsDomNode(t),e.assertIsDomNode(n),t.contains(n)}},{key:"exclusiveContains",value:function(t,n){return e.assertIsDomNode(t),e.assertIsDomNode(n),t!==n&&t.contains(n)}}],(n=null)&&Uo(t.prototype,n),r&&Uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ho(e){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(e)}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ho(i)?i:String(i)),r)}var o,i}var zo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setAttributes",value:function(t,n){for(var r in n)e.setAttribute(t,r,n[r])}},{key:"setAttribute",value:function(e,t,n){var r,o,i;if(r=Ho(n),"on"===t.substr(0,2).toLowerCase()){if(!n)return;N.get("defaultErrorHandler").reportAsException("setAttributeEventListener: do not set event listeners with TIN_dom_Attribute.setAttribute. Attribute: "+t+" - Value: "+p.describeValue(n))}else if(null==n||!1===n)e.removeAttribute(t);else if(!0===n)e.setAttribute(t.toLowerCase().trim(),t.toLowerCase().trim());else if("string"===r||"number"===r)e.setAttribute(t,n);else if("object"===r)if("style"===t)for(i in o=n)e.style[i]=o[i];else Array.isArray(n)?e.setAttribute(t,n.join(" ")):N.get("defaultErrorHandler").reportAsException("setAttributeObjectParam: invalid object value. Attribute: "+t+" - Value: "+p.describeValue(n));else N.get("defaultErrorHandler").reportAsException("setAttributeParams: invalid attribute value type. Attribute: "+t+" - Value: "+p.describeValue(n))}},{key:"hasSpaceSeparatedAttributeValue",value:function(e,t,n){if(Wo.assertIsDomElement(e),t){var r=e.getAttribute(t)||"";return!!r&&at.hasWord(r,n)}return!1}},{key:"addSpaceSeparatedAttributeValue",value:function(t,n,r){e.hasSpaceSeparatedAttributeValue(t,n,r)||t.setAttribute(n,at.addWord(t.getAttribute(n)||"",r))}},{key:"removeSpaceSeparatedAttributeValue",value:function(t,n,r){e.hasSpaceSeparatedAttributeValue(t,n,r)&&(t.setAttribute(n,at.removeWord(t.getAttribute(n)||"",r)),t.getAttribute(n)||t.removeAttribute(n))}},{key:"addAriaLabelledby",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-labelledby",n)}},{key:"removeAriaLabelledby",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-labelledby",n)}},{key:"addAriaDescribedby",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-describedby",n)}},{key:"removeAriaDescribedby",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-describedby",n)}},{key:"addAriaControls",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-controls",n)}},{key:"removeAriaControls",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-controls",n)}},{key:"setDisabled",value:function(t,n){2===arguments.length?(n=!!n,e.isDisableable(t)?e.setAttribute(t,"disabled",n):e.setAttribute(t,"aria-disabled",!!n&&"true")):N.get("defaultErrorHandler").reportAsException("attributeDisabledWrongParams: #setDisabled missing required parameters")}},{key:"setHidden",value:function(t,n){2===arguments.length?e.setAttribute(t,"hidden",!!n):N.get("defaultErrorHandler").reportAsException("attributeHiddenWrongParams: #setHidden missing required parameters")}},{key:"setTabIndex",value:function(e,t){-1===t||"-1"===t||0===t||"0"===t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}},{key:"isLabelable",value:function(t){return t.nodeName&&e.HTML_LABELABLE_ELEMENTS.includes(t.nodeName.toUpperCase())}},{key:"isDisableable",value:function(t){return t.nodeName&&e.HTML_DISABLED_ELEMENTS.includes(t.nodeName.toUpperCase())}},{key:"isDisabled",value:function(t){return!!(e.isDisableable(t)&&(t.disabled||t.parentElement&&Array.from(t.getRootNode().querySelectorAll("fieldset:disabled "+t.nodeName.toLowerCase())).includes(t)))}}],(n=null)&&Yo(t.prototype,n),r&&Yo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function qo(e){return function(e){if(Array.isArray(e))return Go(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Go(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qo(i)?i:String(i)),r)}var o,i}zo.HTML_LABELABLE_ELEMENTS=["BUTTON","INPUT","SELECT","TEXTAREA","METER","OUTPUT","PROGRESS"],zo.HTML_DISABLED_ELEMENTS=["BUTTON","INPUT","SELECT","TEXTAREA","OPTGROUP","OPTION","FIELDSET","COMMAND","KEYGEN"];var Zo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"add",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).add.apply(n,qo(t)):(r=e.classList).add.apply(r,qo(t.split(" "))))}},{key:"remove",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).remove.apply(n,qo(t)):(r=e.classList).remove.apply(r,qo(t.split(" "))))}},{key:"toggle",value:function(t,n){e.has(t,n)?e.remove(t,n):e.add(t,n)}},{key:"setHas",value:function(t,n,r){r?e.add(t,n):e.remove(t,n)}},{key:"toggleFromSet",value:function(t,n,r){Array.isArray(n)||(n=n?n.split(" "):[]),r.forEach((function(r){e.setHas(t,r,n.includes(r))}))}},{key:"set",value:function(e,t){e.className=t}},{key:"has",value:function(e,t){return!!t&&e.classList.contains(t)}}],(n=null)&&Jo(t.prototype,n),r&&Jo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ko(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ko(i)?i:String(i)),r)}var o,i}function Xo(e,t){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xo(e,t)}function ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ti(e);if(t){var o=ti(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ti(e){return ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ti(e)}var ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xo(e,t)}(i,e);var t,n,r,o=ei(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"initialize",value:function(){}},{key:"notify",value:function(e){e instanceof Event&&this.dispatchEvent("stoppeddomevent",e)}}])&&$o(t.prototype,n),r&&$o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ri(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ri(i)?i:String(i)),r)}var o,i}var ii=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addEventToRegistry",value:function(e,t,n,r,o){o[t]||(o[t]=[]);var i={handler:n,element:e,useCapture:r};o[t].push(i)}},{key:"removeEventFromRegistry",value:function(e,t,n,r,o){for(var i,a=o[t],u=!1,l=0;l<a.length;++l)if(a[l].handler==n&&a[l].element==e&&a[l].useCapture==r){i=l,u=!0;break}if(!u)throw new Error(t+" event not found in registry for specified handler");a.splice(i,1),0==a.length&&delete o[t]}},{key:"getElementFromEvent",value:function(e){return e.target}},{key:"getPositionFromEvent",value:function(e){return{x:e.pageX,y:e.pageY,clientX:e.clientX,clientY:e.clientY}}},{key:"getButtonFromEvent",value:function(t){return void 0===t.button?e.MOUSE_LEFT_BUTTON:2===t.button?e.MOUSE_RIGHT_BUTTON:0===t.button?e.MOUSE_LEFT_BUTTON:e.MOUSE_MIDDLE_BUTTON}},{key:"preventDefault",value:function(e){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault&&e.preventDefault()}},{key:"getPreventDefault",value:function(e){return"defaultPrevented"in e?e.defaultPrevented:e.getPreventDefault&&e.getPreventDefault()}},{key:"stopPropagation",value:function(e){e.stopPropagation&&e.stopPropagation(),ni.getInstance().notify(e)}},{key:"cancelEvent",value:function(t){e.preventDefault(t),e.stopPropagation(t)}},{key:"addEventListener",value:function(e,t,n,r){n._wrappedHandler||(n._wrappedHandler=N.get("defaultErrorHandler").wrapHandlingErrors(n)),e.addEventListener(t,n._wrappedHandler,r)}},{key:"removeEventListener",value:function(e,t,n,r){e.removeEventListener(t,n._wrappedHandler,r)}}],(n=null)&&oi(t.prototype,n),r&&oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ai(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))}function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ui(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ui(i)?i:String(i)),r)}var o,i}function si(e,t){return si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},si(e,t)}function ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fi(e);if(t){var o=fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fi(e){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fi(e)}ii.MOUSE_LEFT_BUTTON="left",ii.MOUSE_RIGHT_BUTTON="right",ii.MOUSE_MIDDLE_BUTTON="middle",C.supports("getComputedStyle")?ii.getCurrentStyle=function(e,t){return e.ownerDocument.defaultView.getComputedStyle(e,null)[ai(t)]}:ii.getCurrentStyle=function(e,t){return e.currentStyle[ai(t)]};var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&si(e,t)}(i,e);var t,n,r,o=ci(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"toggleScrollBars",value:function(e,t){var n=!Zo.has(document.documentElement,"NoScrollBars");if(t&&!n){var r=parseInt(ii.getCurrentStyle(e,"left"),10),o=isNaN(r)?0:Math.abs(r),a=parseInt(ii.getCurrentStyle(e,"top"),10),u=isNaN(a)?0:Math.abs(a);Zo.remove(document.documentElement,"NoScrollBars"),i.scrollTo(o,u),e.style.left="auto",e.style.top="auto",i.SCROLL_Y=0}else if(!t&&n){var l=i.getWindowScrollBarPositions();e.style.left=-l.x+"px",e.style.top=-l.y+"px",i.SCROLL_Y=l.y,Zo.add(document.documentElement,"NoScrollBars")}N.get("timeoutManager").set((function(){}),0)}},{key:"scrollToTop",value:function(){i.scrollTo(0,0)}},{key:"scrollTo",value:function(e,t){window.scrollTo(e,t),N.get("timeoutManager").set((function(){}),0)}},{key:"getScrollBarPositions",value:function(){var e=i.getWindowScrollBarPositions(window);return e.y=e.y||i.SCROLL_Y,e}},{key:"getWindowScrollBarPositions",value:function(e){return{x:(e=e||window).pageXOffset,y:e.pageYOffset}}}],(n=null)&&li(t.prototype,n),r&&li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function di(e){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==di(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===di(i)?i:String(i)),r)}var o,i}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bi(e);if(t){var o=bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bi(e){return bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bi(e)}pi.SCROLL_Y=0;var mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(i,e);var t,n,r,o=vi(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"isFixed",value:function(e){var t=e;do{if("fixed"===ii.getCurrentStyle(t,"position"))return!0}while(t=t.offsetParent);return!1}},{key:"get",value:function(e){for(var t=0,n=0,r=e;;){var o=i.getTranslate3d(r);if(t+=r.offsetLeft+o.x,n+=r.offsetTop+o.y,!r.offsetParent)break;r=r.offsetParent}for(var a=e.parentNode;a&&a!=document.body;)t-=a.scrollLeft,n-=a.scrollTop,a=a.parentNode;return{x:t,y:n}}},{key:"getTranslate3d",value:function(e,t){var n=function(e){var t=/translate3d\((-?\d+)(?:px)?,\s(-?\d+)(?:px)?,\s(-?\d+)(?:px)?\)/i.exec(e.style?e.style.transform:""),n={x:0,y:0,z:0};return t&&(n={x:parseInt(t[1],10),y:parseInt(t[2],10),z:parseInt(t[3],10)}),n};if(t){for(var r=e,o={x:0,y:0,z:0};;){var i=n(e);if(o.x+=i.x,o.y+=i.y,o.z+=i.z,!r.offsetParent)break;r=r.offsetParent}return o}return n(e)}},{key:"getIntoDocument",value:function(e,t){for(var n=0,r=0,o=t;n+=o.offsetLeft,r+=o.offsetTop,o.offsetParent;)o=o.offsetParent;return{x:n,y:r}}},{key:"isInsideElement",value:function(e,t){var n=i.get(t);return n.x1=n.x+t.offsetWidth,n.y1=n.y+t.offsetHeight,e.x>=n.x&&e.x<=n.x1&&e.y>=n.y&&e.y<=n.y1}},{key:"getElementBoundaries",value:function(e){var t=i.get(e);return{x0:t.x,x1:t.x+e.offsetWidth,y0:t.y,y1:t.y+e.offsetHeight}}},{key:"getElementBoundariesIntoIframe",value:function(e,t){var n=i.getIntoDocument(e,t);return{x0:n.x,x1:n.x+t.offsetWidth,y0:n.y,y1:n.y+t.offsetHeight}}},{key:"getInsideBoundaries",value:function(e,t){return e.x>=t.x0&&e.x<=t.x1&&e.y>=t.y0&&e.y<=t.y1?{x:e.x-t.x0,y:e.y-t.y0}:null}},{key:"getInsideElement",value:function(e,t){return i.getInsideBoundaries(e,i.getElementBoundaries(t))}},{key:"calculateAvailableRoom",value:function(e){var t=N.get("browserWindow").getInnerSize(),n=e.getBoundingClientRect();return{toTop:n.top,toBottom:t.h-n.bottom,toLeft:n.left,toRight:t.w-n.right}}},{key:"scrollIntoView",value:function(e,t){t=t||0;var n=N.get("browserWindow").getInnerSize(),r=i.getElementBoundaries(e),o=pi.getWindowScrollBarPositions(),a=n.h+o.y-t;if(r.y1>a){var u=r.y1-r.y0>a?r.y0:r.y1-n.h+t+5;N.get("page").scrollTo(0,u)}else r.y0<o.y&&e.scrollIntoView()}},{key:"initialize",value:function(){i.topHtmlElement=document.getElementsByTagName("html")[0]}}],(n=null)&&yi(t.prototype,n),r&&yi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==gi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gi(i)?i:String(i)),r)}var o,i}function wi(e,t){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wi(e,t)}function Si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}mi.initialize();var Ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wi(e,t)}(i,e);var t,n,r,o=Si(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"generateUniqueId",value:function(e,t){e||(e="baseName"),i.uniqueId++;var n="boolean"!=typeof t||t?"_"+Math.random().toString(36).substring(2,15):"";return e+i.uniqueId+n}},{key:"getValue",value:function(e){return e.getValue?e.getValue():void 0===e.value?e:e.type&&"checkbox"===e.type?e.checked:e.value}},{key:"setValue",value:function(e,t){"function"==typeof e.setValue?e.setValue(t):e.type&&"checkbox"===e.type?e.checked=t:void 0!==e.value&&(e.value=t)}},{key:"createDocument",value:function(e){return document.implementation.createHTMLDocument(e)}},{key:"createNodeFromHTML",value:function(e){var t=this.createDocument().createElement("body");return t.innerHTML=e,t.childNodes.length>1?t.childNodes:t.childNodes[0]}},{key:"createOutlineFromElement",value:function(e,t,n){var r=document.createElement("div");r.style.backgroundColor=n&&n.backColor?n.backColor:"cyan",r.style.opacity=n&&n.opacity?n.opacity:"0.5",r.style.zIndex="1000",r.style.position="absolute",r.style.width=e.offsetWidth+"px",r.style.height=e.offsetHeight+"px";var o=mi.getInsideElement(mi.get(e),t);return r.style.left=o.x+"px",r.style.top=o.y+"px",r}},{key:"autoAdjustElementHeightToContent",value:function(e,t){var n=pi.getScrollBarPositions(),r=parseInt(e.style.height,10);e.style.height="auto",e.style.height=Math.max(e.scrollHeight,t)+"px";var o=parseInt(e.style.height,10)-r;N.get("page").scrollTo(n.x,Math.max(n.y,n.y+o))}},{key:"getRelativeCoordsFromEvent",value:function(e){var t=ii.getPositionFromEvent(e),n=mi.get(ii.getElementFromEvent(e));return{x:t.x-n.x,y:t.y-n.y}}},{key:"hasModifiersKeysPressed",value:function(e){return e.ctrlKey||e.altKey||e.shiftKey||e.metaKey}},{key:"copyToClipboard",value:function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{var t=document,n=t.createElement("textarea");n.value=e,n.style.cssText="display:block;width:0;height:0;opacity:0;",t.body.appendChild(n),n.select(),t.execCommand("copy"),t.body.removeChild(n)}}},{key:"getPreferredSize",value:function(e,t,n){var r=e.ownerDocument.body,o=e.cloneNode(!0),a=i.filterCssText(o.style.cssText)+"position:absolute;visibility:hidden;right:auto;bottom:auto;";a+="width:"+(t||"auto")+";",a+="height:"+(n||"auto")+";",o.style.cssText=a,r.appendChild(o);var u=i.getElementSize(o);return r.removeChild(o),u}},{key:"getElementSize",value:function(e){return{clientWidth:e.clientWidth,clientHeight:e.clientHeight,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}}},{key:"getElementCenter",value:function(e){var t=e.getBoundingClientRect();return{y:(t.bottom+t.top)/2,x:(t.right+t.left)/2}}},{key:"filterCssText",value:function(e){var t=e.toLowerCase().split(";"),n=["display","position","width","height","visibility","top","right","bottom","left"];return t.filter((function(e){var t=e.split(":")[0].replace(/\s/g,"");return-1===n.indexOf(t)})).join(";")}},{key:"setPositionAndKeepInsideViewport",value:function(e,t,n){var r=N.get("browserWindow").getInnerSize(),o=pi.getScrollBarPositions(),i=e.offsetWidth,a=e.offsetHeight;t+i-o.x>r.w&&(t=r.w-i+o.x),n+a-o.y>r.h&&(n=r.h-a+o.y),e.style.left=Math.max(t,0)+"px",e.style.top=Math.max(n,0)+"px"}},{key:"getScrollbarsWidth",value:function(){if(!i.scrollWidth){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e);var t=document.createElement("div");t.style.width="100%",e.appendChild(t),i.scrollWidth=e.offsetWidth-t.offsetWidth,document.body.removeChild(e)}return i.scrollWidth}},{key:"getDomNodeText",value:function(e,t){return function e(t,n){if(1!=t.nodeType)return 3==t.nodeType?t.nodeValue:"";if(t.getAttribute("data-ignoredomnodetext"))return"";if("IFRAME"!==t.nodeName){if("TEXTAREA"==t.nodeName||"INPUT"==t.nodeName&&"checkbox"!=t.type&&"radio"!=t.type)return t.value||t.placeholder;if("BR"==t.nodeName)return"\n";if("WBR"==t.nodeName)return"";if("none"==n)return"";for(var r="",o=!0,i=0,a=t.childNodes.length;i<a;i++){var u,l=t.childNodes[i],s=e(l,u=1==l.nodeType?ii.getCurrentStyle(l,"display"):null);s&&("block"==u||"table-row"==u||"table-cell"==u||"OPTION"==l.nodeName?(o||(r+="\n"),r+=s.trim(),r+="\n",o=!0):(r+=s,o=!1))}return r}try{return e(t.contentWindow.document.body)}catch(e){return""}}(e&&e.widget?e.widget:e,t).replace(/\u200b+/gim,"").replace(/[ \t]+/g," ").replace(/\u00a0/gim," ")}},{key:"getPinchZoomRatio",value:function(){return(window.visualViewport?window.visualViewport.width:window.innerWidth)/document.documentElement.clientWidth}}],(n=null)&&_i(t.prototype,n),r&&_i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Pi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Pi(i)?i:String(i)),r)}var o,i}function Ti(e,t){return Ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ti(e,t)}function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ii(e);if(t){var o=Ii(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}Ei.uniqueId=0;var Fi,Ri,Ci,Di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ti(e,t)}(i,e);var t,n,r,o=ji(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e){this.widgetToMonitor=e,this.eventRegistry={},this.widgetToMonitor.isInDom()&&this.onDomInsert(),e.addListener("dominsert",this.caller("onDomInsert")),e.addListener("domremove",this.caller("onDomRemove"))}},{key:"onDomInsert",value:function(){for(var e in this.eventRegistry)for(var t=this.eventRegistry[e],n=0;n<t.length;++n){var r=t[n];ii.addEventListener(r.element,e,r.handler,r.useCapture)}this.inDom=!0}},{key:"onDomRemove",value:function(){for(var e in this.eventRegistry)for(var t=this.eventRegistry[e],n=0;n<t.length;++n){var r=t[n];r.element?ii.removeEventListener(r.element,e,r.handler,r.useCapture):N.get("defaultErrorHandler").reportAsException("domRemoveItemElementIsNull")}this.inDom=!1}},{key:"addListener",value:function(e,t,n,r){ii.addEventToRegistry(e,t,n,r,this.eventRegistry),this.inDom&&ii.addEventListener(e,t,n,r)}},{key:"removeListener",value:function(e,t,n,r){ii.removeEventFromRegistry(e,t,n,r,this.eventRegistry),this.inDom&&ii.removeEventListener(e,t,n,r)}}],n&&ki(t.prototype,n),r&&ki(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q),Ai=(Fi=[{elements:["ARTICLE","ASIDE","DIV","DIALOG","FOOTER","FORM","HEADER","MAIN","NAV","SECTION","BLOCKQUOTE"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["H1","H2","H3","H4","H5","H6","P","PRE"],type:"FLOW",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["OL","UL"],type:"FLOW",contentTypes:null,contentElements:["LI"]},{elements:["DETAILS"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["SUMMARY"]},{elements:["LI"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["FIELDSET"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["LEGEND","TABLE"]},{elements:["HR"],type:"FLOW",contentTypes:[],contentElements:null},{elements:["VIDEO","AUDIO"],type:"MEDIA",contentTypes:["FLOW","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["SOURCE","TRACK"]},{elements:["ABBR","B","CODE","EM","I","SPAN","STRONG","S","TIME","KBD","VAR","SAMP"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["BR","IMG","CANVAS","IFRAME"],type:"PHRASING",contentTypes:[],contentElements:null},{elements:["PICTURE"],type:"PHRASING",contentTypes:null,contentElements:["SOURCE","IMG"]},{elements:["A","BUTTON","LABEL"],type:"PHRASING_INTERACTIVE",contentTypes:["PHRASING","TEXT_NODE"],contentElements:null},{elements:["TEXTAREA"],type:"PHRASING_INTERACTIVE",contentTypes:["TEXT_NODE"],contentElements:null},{elements:["INPUT"],type:"PHRASING_INTERACTIVE",contentTypes:[],contentElements:null},{elements:["LEGEND"],type:null,contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["SUMMARY"],type:null,contentTypes:["PHRASING","TEXT_NODE"],contentElements:["H1","H2","H3","H4","H5","H6"]},{elements:["TABLE"],type:null,contentTypes:["TABLE_SECTION"],contentElements:["CAPTION","COLGROUP"]},{elements:["TBODY","TFOOT","THEAD"],type:"TABLE_SECTION",contentTypes:null,contentElements:["TR"]},{elements:["TR"],type:null,contentTypes:["TABLE_CELL"],contentElements:null},{elements:["TH","TD"],type:"TABLE_CELL",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["CAPTION"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["SELECT"],type:"PHRASING_INTERACTIVE",contentTypes:null,contentElements:["OPTGROUP","OPTION"]},{elements:["OPTGROUP"],type:null,contentTypes:null,contentElements:["OPTION"]},{elements:["OPTION"],type:null,contentTypes:["TEXT_NODE"],contentElements:null},{elements:["DATALIST"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["OPTION"]},{elements:["HTML"],type:null,contentTypes:null,contentElements:["HEAD","BODY"]},{elements:["HEAD"],type:null,contentTypes:null,contentElements:["BASE","TITLE","META","LINK","STYLE","SCRIPT"]},{elements:["BODY"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE","SCRIPT"]},{elements:["STYLE","SCRIPT","TITLE"],type:null,contentTypes:["TEXT_NODE"],contentElements:null},{elements:["LINK","META","BASE","PARAM","SOURCE","TRACK"],type:null,contentTypes:[],contentElements:null},{elements:["TEXT_NODE"],type:"TEXT_NODE",contentTypes:[],contentElements:null},{elements:["OBJECT"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["PARAM"]}],Ri={LABEL:{childs:["INPUT"]}},Ci=["a a","a button","a label","a textarea","a input","a select","button a","button button","button label","button textarea","button input","button select","label a","label button","label label"].join(", "),{getNodeMap:function(){return Fi},getExceptions:function(){return Ri},getAncestryQuery:function(){return Ci}}),xi=function(){var e=function(e,t){return-1!==e.indexOf(t)},t=function(t,n){e(t,n)||t.push(n)},n=function(e,n){for(var r=n.length;r--;)t(e,n[r])},r=function(e,t,r){for(var o=r.length;o--;)t===r[o].type&&n(e[t],r[o].elements)},o=function(e,t,r){var o=[],i=[];if(e)for(var a=e.length;a--;)r[e[a]]&&i.push(r[e[a]]);return o=o.concat.apply(o,i),t&&n(o,t),o},i=function(t,n,r){for(var i=n.length;i--;)if(e(n[i].elements,t))return o(n[i].contentTypes,n[i].contentElements,r)},a=function(e){for(var o=function(e){for(var t=[],r=[],o=[],i=e.length;i--;)r.push(e[i].elements),e[i].contentElements&&n(o,e[i].contentElements);return t=t.concat.apply(t,r),n(t,o),t}(e),a=function(e,t){for(var n={},o=t.length;o--;)n[t[o]]=[],r(n,t[o],e);return n}(e,function(e){for(var n=[],r=e.length;r--;)e[r].type&&t(n,e[r].type);return n}(e)),u={},l=o.length;l--;)u[o[l]]={},u[o[l]].childs=i(o[l],e,a);return u}(Ai.getNodeMap()),u=Ai.getExceptions(),l=Ai.getAncestryQuery(),s=function(t,n){var r=a[t]&&a[t].childs;if(r&&e(r,n))return!0;var o=u[t]&&u[t].childs;return!(!o||!e(o,n))};return{validate:function e(t,n){var r=t.nodeName,o=n.nodeName;if(1===t.nodeType){if(1===n.nodeType)return{valid:s(r.toUpperCase(),o.toUpperCase())};if(3===n.nodeType)return{valid:s(r.toUpperCase(),"TEXT_NODE")};if(11===n.nodeType){for(var i=n.childNodes.length;i--;)if(!e(t,n.childNodes[i]).valid)return{valid:!1,child:n.childNodes[i]};return{valid:!0}}}else if(3===t.nodeType)return{valid:!1};return{valid:!0}},validateDeepAncestry:function(){return!document.querySelector(l)},getInvalidChilds:function(){return document.querySelectorAll(l)}}}();function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ni(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ni(i)?i:String(i)),r)}var o,i}function Ui(e,t,n){return t&&Vi(e.prototype,t),n&&Vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wi(){return Wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Wi.apply(this,arguments)}function Hi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yi(e,t)}function Yi(e,t){return Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yi(e,t)}function zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qi(e);if(t){var o=Qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qi(e){return Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qi(e)}var qi=function(e){Hi(n,e);var t=zi(n);function n(){var e;Bi(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).inDom=!1,e._createDomNode(),e}return Ui(n,[{key:"widgetBeforeRender",value:function(e){}},{key:"widgetAfterRender",value:function(e){}},{key:"widgetBeforeDomInsert",value:function(){}},{key:"widgetAfterDomInsert",value:function(){}},{key:"widgetBeforeDomRemove",value:function(){}},{key:"widgetAfterDomRemove",value:function(){}},{key:"getDomNode",value:function(){if(this.widget){if(this.widget.getDomNode)return this.widget.getDomNode();if(this.widget.nodeType)return this.widget}return null}},{key:"getParentWidget",value:function(){return this.parentWidget}},{key:"getThisDomNodeText",value:function(){return Ei.getDomNodeText(this.getDomNode(),"block")}},{key:"getBusyMonitor",value:function(){var e=new Bo(!this.getDomNode());return e.isBusy()&&this.callWhenContentReady((function(){e.setAsFree()})),e}},{key:"setExtraCssClass",value:function(e){Zo.add(this.getDomNode(),e)}},{key:"setDomAttributes",value:function(e,t){var n=this;if(N.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("setDomAttributesToForeignElement: element must be a child DOM node belonging to the class setting its attributes");t=t||{},Object.entries(t).forEach((function(t){var r=Li(t,2),o=r[0],i=r[1];if("function"==typeof i){if(N.get("ENABLE_UI_VALIDATION")&&"on"!==o.substring(0,2))throw new Error("function attributes must begin with on");n.addDomListener(e,o.substring(2),i)}else zo.setAttribute(e,o,i)}))}},{key:"setParentWidget",value:function(e){this.parentWidget=e}},{key:"setHasErrors",value:function(e){this.widget.setHasErrors?this.widget.setHasErrors(e):Zo.setHas(this.getFormRelationTargetElement?this.getFormRelationTargetElement():this.getDomNode(),"hasErrors",e)}},{key:"createPlaceholderContent",value:function(){return document.createComment(this.getClassName())}},{key:"isContentReady",value:function(){return!!this.getDomNode()}},{key:"isInDom",value:function(){return!!this.inDom}},{key:"element",value:function(e,t,n){var r=document.createElement(e);return(N.get("DEBUG_MODE")||N.get("ENABLE_UI_VALIDATION"))&&(this.childDomNodes||(this.childDomNodes=new Set),this.childDomNodes.add(r),r.ownerWidget=this),this.setDomAttributes(r,t),n&&this.appendChildren(r,n),r}},{key:"addDomListener",value:function(){var e;this.domEventMonitor||(this.domEventMonitor=new Di(this)),(e=this.domEventMonitor).addListener.apply(e,arguments)}},{key:"removeDomListener",value:function(){var e;(e=this.domEventMonitor).removeListener.apply(e,arguments)}},{key:"appendChild",value:function(e,t){return this.insertBefore(e,t,null)}},{key:"appendChildren",value:function(e,t){var n=this;if(N.get("ENABLE_UI_VALIDATION")&&!Array.isArray(t))throw new Error("TIN_display_Widget.appendChildren: children should be an array");t.forEach((function(t){return n.appendChild(e,t)}))}},{key:"removeChild",value:function(e,t){if(!e)throw new Error("InvalidParent: TIN_display_Widget.removeChild -> parent was not present");if(N.get("ENABLE_UI_VALIDATION")){if(!this.isContentReady())throw new Error("removeChildFromNotReadyWidget: TIN_display_Widget.removeChild -> widget not-yet-rendered cannot remove a child");if(!this._isChildDomNode(e))throw new Error("InvalidParent: TIN_display_Widget.removeChild -> parent is not a childDomNode")}t&&(t instanceof n?this._removeChildWidget(e,t):this._removeChildDomNode(e,t))}},{key:"removeAllChildren",value:function(e){if(N.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("InvalidChild: TIN_display_Widget.removeAllChildren -> element is not a childDomNode");for(;e.firstChild;){var t=void 0;this.childWidgets&&(t=this.childWidgets.find((function(t){return t.getDomNode()===e.firstChild}))),this.removeChild(e,t||e.firstChild)}}},{key:"insertBefore",value:function(e,t,n){if(!e)throw new Error("InvalidParent: TIN_display_Widget.insertBefore -> parent was not present");if(N.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("InvalidChild: TIN_display_Widget.insertBefore -> parent is not a childDomNode");null!=t&&("string"==typeof t||"number"==typeof t?this._insertTextNodeBefore(e,t,n):this._insertChildBefore(e,t,n))}},{key:"replaceContent",value:function(e,t){this.removeAllChildren(e),Array.isArray(t)?this.appendChildren(e,t):this.appendChild(e,t)}},{key:"callWhenContentReady",value:function(e){this.isContentReady()?e():this.addListenerOnce("contentready",e)}},{key:"show",value:function(e){if(!arguments.length)throw new Error('ERROR: missing required "showIt" parameter');zo.setHidden(this.getDomNode(),!e)}},{key:"dispatchEvent",value:function(e,t){var r=Wi(Qi(n.prototype),"dispatchEvent",this).call(this,e,t);this.parentWidget&&this.parentWidget._shouldBubble(e,r)&&this.parentWidget.dispatchEvent(e,r)}},{key:"dispatchSizeChangeEvent",value:function(){this.dispatchEvent("sizechange",new Gi)}},{key:"Delete",value:function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];r.forEach((function(t){var r=e[t];r&&r.nodeType&&(1===r.nodeType&&e.removeAllChildren(r),r.parentNode&&e.removeChild(r.parentNode,r),N.get("DEBUG_MODE")&&e.childDomNodes&&e.childDomNodes.delete(r),delete e[t]),Wi(Qi(n.prototype),"Delete",e).call(e,t)}))}},{key:"_getDomNodeFromWidget",value:function(e){return e.getDomNode()||e._getPlaceholderContent()}},{key:"_getDomNodeFromChild",value:function(e){return e instanceof n?this._getDomNodeFromWidget(e):e}},{key:"_getPlaceholderContent",value:function(){return this.isContentReady()||this.placeholderContent||(this.placeholderContent=this.createPlaceholderContent()),this.placeholderContent}},{key:"_getChildWidgetsContainedByChildDomNode",value:function(e){return this.childWidgets.filter((function(t){if(N.get("ENABLE_UI_VALIDATION")&&e===t.getDomNode())throw new Error("InvalidDomNode: TIN_display_Widget.removeChild -> remove the widget, not only its dom node");return t.isInDom()&&e.contains(t.getDomNode())}))}},{key:"_getFutureChildWidgetsContainedByChildDomNode",value:function(e){var t=[];return this.futureChildWidgets.forEach((function(n){e.contains(n._getPlaceholderContent())&&t.push(n)})),t}},{key:"_getFirstlingParentWidget",value:function(e){for(;e.parentWidget;)e=e.parentWidget;return e}},{key:"_setMainDomNodeParentWidget",value:function(e){!this.widget||this.widget instanceof n||(this.widget.parentWidget=e?this:null)}},{key:"_setFutureParentWidget",value:function(e){this.futureParentWidget&&this.futureParentWidget._removeFutureChildWidget(this),this.futureParentWidget=e,e&&this.futureParentWidget._addFutureChildWidget(this)}},{key:"_createDomNode",value:function(){this.widgetBeforeRender(!0);var e=this.render();this.widget=e&&!this.widget?e:this.widget,this._validateContentReadyAfterDomCreation(),this._alignParentWidgets(),this.widgetAfterRender(!0)}},{key:"_alignParentWidgets",value:function(){if(this.widget instanceof n){var e=this._getFirstlingParentWidget(this.widget);e.setParentWidget(this),this._addAsChildWidget(e)}}},{key:"_addAsChildWidget",value:function(e){this._removeWidgetFromAnotherParent(e),this.childWidgets||(this.childWidgets=[]),this._isChildWidget(e)||this.childWidgets.push(e)}},{key:"_addFutureChildWidget",value:function(e){this.futureChildWidgets||(this.futureChildWidgets=new Set),this.futureChildWidgets.add(e)}},{key:"_switchPlaceholderContent",value:function(){if(this.placeholderContent&&this.isContentReady()){var e=this.placeholderContent.parentNode;e&&this.futureParentWidget&&!this.futureParentWidget.Deleted&&this.futureParentWidget.insertBefore(e,this,this.placeholderContent)}this._setFutureParentWidget(null),this._removePlaceholderContent()}},{key:"_removePlaceholderContent",value:function(){this.placeholderContent&&(this.placeholderContent.remove(),delete this.placeholderContent)}},{key:"_removeChildDomNode",value:function(e,t){var n,r,o,i=this;if(!this.futureChildWidgets||(this._getFutureChildWidgetsContainedByChildDomNode(t).forEach((function(e){var n=e._getPlaceholderContent();i.removeChild(n.parentElement,e),n===t&&(o=!0)})),!o)){if(this.childWidgets){try{n=this._getChildWidgetsContainedByChildDomNode(t)}catch(e){r=e}n&&n.forEach((function(e){return e._onWidgetDomRemove()}))}if(this._doRemoveChild(e,t,t),n&&n.forEach((function(e){return e._onWidgetAfterDomRemove()})),r)throw r}}},{key:"_removeChildWidget",value:function(e,t){var n=this._getDomNodeFromWidget(t),r=t.isInDom();if(t.isContentReady()){if(N.get("DEBUG_MODE")&&(this._isChildWidget(t)||_logDebugError(this,"widget was not present",e,null,t),t.parentWidget!==this&&_logDebugError(this,"this.removeChild","widget is not a child",e,null,t)),N.get("ENABLE_UI_VALIDATION")){if(!this._isChildWidget(t))throw new Error("InvalidChild: TIN_display_Widget.removeChild -> widget was not present");if(t.parentWidget!==this)throw new Error("InvalidChild: TIN_display_Widget.removeChild -> widget is not a child")}this._removeWidgetFromChildWidgets(t)}t.setParentWidget(null),t._setFutureParentWidget(null),r&&t._onWidgetDomRemove(),this._doRemoveChild(e,n,t),r&&t._onWidgetAfterDomRemove()}},{key:"_removeWidgetFromChildWidgets",value:function(e){if(this.childWidgets){var t=this.childWidgets.indexOf(e);-1!==t&&this.childWidgets.splice(t,1)}}},{key:"_removeWidgetFromAnotherParent",value:function(e){e.parentWidget&&e.parentWidget!==this&&e.getDomNode().parentNode&&e.parentWidget.removeChild(e.getDomNode().parentNode,e)}},{key:"_removeFutureChildWidget",value:function(e){this.futureChildWidgets.delete(e),this.futureChildWidgets.size||delete this.futureChildWidgets}},{key:"_removeAllFutureChildWidgets",value:function(){this.futureChildWidgets&&(this.futureChildWidgets.forEach((function(e){e._getPlaceholderContent().remove(),e._setFutureParentWidget(null)})),delete this.futureChildWidgets)}},{key:"_doRemoveChild",value:function(e,t,n){try{e.removeChild(t)}catch(o){N.get("DEBUG_MODE")&&_logDebugError(this,"this.removeChild","DOM exception while removing",e,null,n);var r=o.message+" while calling:\n"+p.describeValue(this)+".removeChild(\n    "+p.describeValue(e)+",\n    "+p.describeValue(n)+" (domNode: "+p.describeValue(t)+")\n)";throw new Error(r)}}},{key:"_insertChildBefore",value:function(e,t,r){var o=t instanceof n,i=o&&t.isContentReady(),a=o&&!t.isContentReady(),u=this._getDomNodeFromChild(t);if(i&&this._addAsChildWidget(t),N.get("DEBUG_MODE")&&(o||1!==t.nodeType||this._isChildDomNode(t)||_logDebugError(this,"this.insertBefore","domNode is not a childDomNode",e,null,t)),N.get("ENABLE_UI_VALIDATION")&&!o&&1===t.nodeType&&!this._isChildDomNode(t))throw new Error("InvalidChild: TIN_display_Widget.insertBefore -> domNode is not a childDomNode");this._validateDomInsertion(t,e,u),i&&(t.setParentWidget(this),t._onWidgetBeforeDomInsert()),this._insertChildIntoParent(e,t,u,r),a?t._setFutureParentWidget(this):(n.validateDeepAncestry&&e.isConnected&&n.validateDeepAncestry(),this._forwardDomInsertion(e,t,u))}},{key:"_insertChildIntoParent",value:function(e,t,n,r){try{e.insertBefore(n,r)}catch(i){N.get("DEBUG_MODE")&&_logDebugError(this,"this.insertBefore","DOM exception while inserting",e,r,t);var o=i.message+" while calling:\n"+p.describeValue(this)+".insertBefore(\n    "+p.describeValue(e)+",\n    "+p.describeValue(t)+" (domNode: "+p.describeValue(n)+"),\n    "+p.describeValue(r)+"\n)";throw new Error(o)}}},{key:"_insertTextNodeBefore",value:function(e,t,n){e.insertBefore(e.ownerDocument.createTextNode(t),n)}},{key:"_forwardDomInsertion",value:function(e,t,r){this.inDom&&e.isConnected&&(t instanceof n?t._onWidgetDomInsert():this.childWidgets&&this.childWidgets.forEach((function(e){!e.isInDom()&&r.contains(e.getDomNode())&&e._onWidgetDomInsert()})))}},{key:"_isChildWidget",value:function(e){return this.childWidgets&&this.childWidgets.includes(e)}},{key:"_shouldBubble",value:function(e,t){return"dominsert"!==e&&"domremove"!==e&&t instanceof U&&(t instanceof Gi||"function"==typeof this.shouldBubble&&this.shouldBubble(t))}},{key:"_validateDomInsertion",value:function(e,t,r){if(n.VALIDATE_DOM_INSERTION&&(!e.classRef||!e.classRef.IGNORE_DOM_INSERT_VALIDATION)){try{var o=xi.validate(t,r)}catch(t){throw new Error("Failed to validate dom insertion. ERROR: "+t.name+": "+t.message+". Parent: "+this+", Child: "+e)}if(!o.valid){var i=o.child||r,a="DOM validation exception while inserting: "+(i.nodeName||"node type "+i.nodeType)+" is not a valid child for "+(t.nodeName||"node type "+t.nodeType);throw N.get("DEBUG_MODE")&&_logDebugError(this,"this.insertBefore",a,null,null,i),new Error(a)}}}},{key:"_validateContentReadyAfterDomCreation",value:function(){if(!this.isContentReady())throw new Error("InvalidWidgetReadyState: Widget is not content-ready after main DOM node creation. Class: "+this.getClassName());this._validateMainDomNodeDisconnectionAfterDomCreation()}},{key:"_validateMainDomNodeDisconnectionAfterDomCreation",value:function(){if(this.getDomNode().isConnected)throw new Error("WidgetCreatedWithMainNodeAlreadyInDom: main DOM node was already in DOM before this widget finished its rendering. Class: "+this.getClassName())}},{key:"_onWidgetBeforeDomInsert",value:function(){if(!this.isBeingInserted&&!this.inDom){this.isBeingInserted=!0,this.widget instanceof n&&this.widget._onWidgetBeforeDomInsert(),this.childWidgets&&this.childWidgets.slice().forEach((function(e){return e._onWidgetBeforeDomInsert()}));try{this.widgetBeforeDomInsert()}catch(e){throw this.isBeingInserted=!1,e}}}},{key:"_onWidgetDomInsert",value:function(){var e=this;if(!this.inDom){if(this.isBeingRemoved)throw new Error("ERROR: node cant be inserted while being removed. Classname: "+this+". domNode: "+p.describeValue(this.getDomNode()));this._setMainDomNodeParentWidget(!0),this.inDom=!0;try{if(this.widgetAfterDomInsert(),this.dispatchEvent("dominsert"),this.widget instanceof n&&this.widget._onWidgetDomInsert(),this.childWidgets){var t=this.childWidgets.slice();t.forEach((function(n){!n.isInDom()&&n.isContentReady()&&t.includes(n)&&e.getDomNode().contains(n.getDomNode())&&n._onWidgetDomInsert()}))}}catch(e){throw this.isBeingInserted=!1,e}this.isBeingInserted=!1}}},{key:"_onWidgetDomRemove",value:function(){var e=this;if(this.inDom){if(this.isBeingInserted)throw new Error("ERROR: node cant be removed while being inserted. Classname: "+this+". domNode: "+p.describeValue(this.getDomNode()));if(this.inDom=!1,this.isBeingRemoved=!0,this._setMainDomNodeParentWidget(!1),this.widgetBeforeDomRemove(),this.dispatchEvent("domremove"),this.widget instanceof n&&this.widget._onWidgetDomRemove(),this.childWidgets){var t=this.childWidgets.slice();t.forEach((function(n){n.isInDom()&&t.includes(n)&&e.getDomNode().contains(n.getDomNode())&&n._onWidgetDomRemove()}))}}}},{key:"_onWidgetAfterDomRemove",value:function(){if(this.isBeingRemoved){this.widget instanceof n&&this.widget._onWidgetAfterDomRemove(),this.childWidgets&&this.childWidgets.slice().forEach((function(e){return e._onWidgetAfterDomRemove()}));try{this.widgetAfterDomRemove()}catch(e){throw this.isBeingRemoved=!1,e}this.isBeingRemoved=!1}}},{key:"_uninit",value:function(){var e=this,t=this.getDomNode()||this.placeholderContent;t&&t.parentNode&&this.parentWidget&&this.parentWidget.removeChild(t.parentNode,this),this.childWidgets&&(this.childWidgets.forEach((function(t){t.getParentWidget()===e&&t.setParentWidget(null)})),this.childWidgets=null),this._removeAllFutureChildWidgets(),this._setFutureParentWidget(null),this._removePlaceholderContent(),Wi(Qi(n.prototype),"_uninit",this).call(this)}},{key:"_isChildDomNode",value:function(e){return this.getDomNode()===e||this.childDomNodes&&this.childDomNodes.has(e)}}],[{key:"initDomInsertionValidators",value:function(e){void 0===n.validateDeepAncestry&&(n.validateDeepAncestry=e?function(){if(!xi.validateDeepAncestry()){var e=xi.getInvalidChilds();throw window.tinkerman?tinkerman.log(e,"Invalid children"):console.log(e),new Error("DOM tree in an invalid state.")}}:null),n.VALIDATE_DOM_INSERTION=!0}}]),n}(Q);if(qi.topHtmlElement=document.getElementsByTagName("html")[0],qi.prototype.render=AbstractMethod,(N.get("DEBUG_MODE")||N.get("ENABLE_UI_VALIDATION"))&&(qi.initDomInsertionValidators(!1),qi.prototype.dontGuessNamesList=["childWidgets","parentWidget","childDomNodes","domEventMonitor"],qi.prototype.getDomNodesToHighlight=function(){var e=this.getDomNode();return e?[e]:[]}),N.get("DEBUG_MODE"));var Gi=function(e){Hi(n,e);var t=zi(n);function n(){return Bi(this,n),t.apply(this,arguments)}return Ui(n)}(U);function Ji(e){return Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ji(e)}function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ji(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ji(i)?i:String(i)),r)}var o,i}function Ki(e,t){return Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ki(e,t)}function $i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xi(e);if(t){var o=Xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ji(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xi(e){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xi(e)}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ki(e,t)}(i,e);var t,n,r,o=$i(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.attributes=this._getDefaultAttributes(),this._setLoadManagerAttribute(),e&&this._mergeAttributes(e)}},{key:"_getDefaultAttributes",value:function(){return{frameBorder:0}}},{key:"_setLoadManagerAttribute",value:function(){this.attributes||(this.attributes={})}},{key:"_mergeAttributes",value:function(e){for(var t in e)this.attributes[t]=e[t]}},{key:"render",value:function(){return this.element("iframe",this.attributes,null)}},{key:"onBaseIframeLoad",value:function(e){var t=this;Jr.delay((function(){t.dispatchEvent("load",e)}))}},{key:"getWindow",value:function(){try{return this.widget.contentWindow}catch(e){return null}}},{key:"getDocument",value:function(){try{return this.widget.contentDocument||this.getWindow().document}catch(e){return null}}},{key:"getBody",value:function(){var e=this.getDocument();return e?e.body:null}},{key:"getHead",value:function(){var e=this.getDocument();return e&&e.head?e.head:null}},{key:"setSrc",value:function(e){this.widget.src=e}},{key:"setLocationHash",value:function(e){this.getWindow().location.hash=e}},{key:"getLocationHash",value:function(e){return this.getWindow().location.hash.slice(1)}},{key:"widgetAfterRender",value:function(){this.widget.onload=this.caller("onBaseIframeLoad")}}])&&Zi(t.prototype,n),r&&Zi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(qi);function ta(e){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(e)}function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ta(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ta(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ta(i)?i:String(i)),r)}var o,i}function ra(e,t){return ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ra(e,t)}function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ia(e);if(t){var o=ia(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ta(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ia(e){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ia(e)}var aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ra(e,t)}(i,e);var t,n,r,o=oa(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_getDefaultAttributes",value:function(){return{frameBorder:0,style:{width:"0px",height:"0px",border:"0px",position:"absolute"}}}}])&&na(t.prototype,n),r&&na(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ea);function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ua(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ua(i)?i:String(i)),r)}var o,i}var sa,ca=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createTemporaryIframeWithSrc",value:function(e,t){var n=N.get("page"),r=new aa({src:e});return n.appendChild(n.widget,r),setTimeout((function(e){e&&n.removeChild(n.widget,e)}),t||5e3,r),r}}],(n=null)&&la(t.prototype,n),r&&la(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fa(i)?i:String(i)),r)}var o,i}function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==da(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===da(i)?i:String(i)),r)}var o,i}function ha(e,t){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ha(e,t)}function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ba(e);if(t){var o=ba(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ba(e){return ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ba(e)}N.get("DEBUG_MODE")&&window.tinkerman&&(sa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"_download",value:function(e){ca.createTemporaryIframeWithSrc(e,1e3)}},{key:"openRouterApi",value:function(e,t){sa._download("/openAction.php?action="+escape(e)+"&method="+escape(t))}},{key:"openClassInEditor",value:function(e){if(e.openInEditor)e.openInEditor();else if(e.getPackage){var t=e.getPackage().name+".js",n=e.getSimpleClassName();sa._download("/_openAsset?assetName="+escape(t)+"&class="+escape(n))}}},{key:"openFileInEditor",value:function(e,t){sa._download("/_openFile?file="+escape(e)+"&line="+t)}},{key:"openJsMethodInEditor",value:function(e,t){var n;e.classRef&&e.classRef.packageRef&&e.classRef.packageRef.getAssetName&&(n=e.classRef.packageRef.getAssetName(),sa._download("/_openJsMethod?assetName="+escape(n)+"&method="+escape(t)+"&class="+escape(e.getSimpleClassName())))}}],(n=null)&&pa(t.prototype,n),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pkg.bootstrap=function(){window.tinkerman.setOpenObjectInEditorHandler((function(e){sa.openClassInEditor(e)})),window.tinkerman.setOpenFileInEditorHandler((function(e,t){sa.openFileInEditor(e,t)}))});var ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ha(e,t)}(i,e);var t,n,r,o=va(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"serialize",value:function(e,t){var n=this;return this.encoders={boolean:function(e){return n._serializeBoolean(e)},null:function(){return n._serializeUndefinedOrNull()},undefined:function(){return n._serializeUndefinedOrNull()},number:function(e){return n._serializeNumber(e)},object:function(e,t){return n._serializeObject(e,t)},string:function(e){return n._serializeString(e)}},this.encoders[da(e)](e,t)}},{key:"_serializeBoolean",value:function(e){return String(e)}},{key:"_serializeUndefinedOrNull",value:function(){return"null"}},{key:"_getIndentation",value:function(e){for(var t="",n=0;n<e;++n)t+="    ";return t}},{key:"_serializeArray",value:function(e,t){return this._rawObject(e,t,!1)}},{key:"_rawObject",value:function(e,t,n){var r=["[\n"],o=this._getIndentation(t+1),i=!0;for(var a in e){var u=e[a],l=this.encoders[da(u)];if(l){var s=l(u,t+1);"string"==typeof s&&(i||r.push(",\n"),r.push(o),n&&r.push(this._serializeString(a)," => "),r.push(s),i=!1)}}return r.push("\n"),r.push(this._getIndentation(t)+"]"),r.join("")}},{key:"_serializeNumber",value:function(e){return isFinite(e)?String(e):"null"}},{key:"_serializeObject",value:function(e,t){if(e){if(e instanceof Array)return this._serializeArray(e,t);if(e instanceof Date)return this._serializeDate(e);if(e.getClassName){var n=new de;return"M_ICO_json_RichJson::getInstance()->decodeFromJson("+this._rawObject(n.encodeValue(e),t,!0)+")"}if(e.constructor!==Object)throw new Error(de.INVALID_JSON_VALUE);return this._rawObject(e,t,!0)}return"null"}},{key:"_serializeDate",value:function(e){return"new COR_date_Timestamp("+e.getTime()/1e3+")"}},{key:"_serializeString",value:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',$:"\\$"};return'"'+(e=e.replace(/(["$\\\x00-\x1f])/g,(function(e,n){if(n in t)return t[n];var r=n.charCodeAt();return"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16)})))+'"'}}],n&&ya(t.prototype,n),r&&ya(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ga(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ga(i)?i:String(i)),r)}var o,i}function wa(e,t){return wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wa(e,t)}function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oa(e);if(t){var o=Oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ga(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oa(e){return Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oa(e)}ma.serialize=function(e,t){return(new ma).serialize(e,t)};var Ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t)}(i,e);var t,n,r,o=Sa(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.className=e,this.method=t,this.params=n||[]}},{key:"createDataSource",value:function(){return new To(this)}},{key:"getParams",value:function(){return this.params}},{key:"getServerClassName",value:function(){return this.className}},{key:"getTypeLetter",value:function(){return"S"}},{key:"_getMethodNameToSend",value:function(){return"addListener"==this.method?"0":"removeListener"==this.method?"1":"get"==this.method?"2":"getDataAndProps"==this.method?"3":this.method}},{key:"getMessageToSend",value:function(){return[this.getTypeLetter()+this.className+"."+this._getMethodNameToSend(),this.params]}},{key:"getDescriptionPrefix",value:function(){return""}},{key:"getDescription",value:function(){return this.getDescriptionPrefix()+this.className+"."+this.method}},{key:"handleResponse",value:function(e,t,n,r){var o=e.msg;if(e.error)r(o);else{var i=this.getInnerValue(o);o instanceof Do?this._handleMsgAsDelayedResponse(o,t,n,r):i instanceof Do?this._handleInnerValueAsDelayedResponse(o,i,t,n,r):n(o)}}},{key:"getInnerValue",value:function(e){return e}},{key:"replaceInnerValue",value:function(e,t){return t}},{key:"_handleMsgAsDelayedResponse",value:function(e,t,n,r){e.addListener("load",(function(e){n(e.data)})),e.addListener("error",(function(e){r(e.data)})),t.registerDelayedResponse(e)}},{key:"_handleInnerValueAsDelayedResponse",value:function(e,t,n,r,o){var i=this;t.addListener("load",(function(t){r(i.replaceInnerValue(e,t.data))})),t.addListener("error",(function(e){o(e.data)})),n.registerDelayedResponse(t)}}])&&_a(t.prototype,n),r&&_a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);N.get("DEBUG_MODE")&&(Ea.prototype.openInEditor=function(){sa.openRouterApi(this.className,this.method)},Ea.prototype.getPhpClassName=function(){var e,t;"ICO_"===this.className.substr(0,4)?(e=this.className.substr(0,4),t=this.className.substr(4)):(e="",t=this.className);var n=t.indexOf("_");return"M_"+e+t.substr(0,n)+"_API_"+t.substr(n+1)},Ea.prototype.getPhpParam=function(e,t){return ma.serialize(this.params[e],t?1:0)},Ea.prototype.getPhpParams=function(e){for(var t="",n=0;n<this.params.length;++n)e&&(t+="    "),t+=this.getPhpParam(n,e),n<this.params.length-1&&(t+=","),e&&(t+="\n");return"("+(t&&e?"\n"+t:t)+")"},Ea.prototype.getAsPhpCode=function(){var e="$obj",t=e+" = new "+this.getPhpClassName()+"();\n";return this.getPropertiesAsPhpCode&&(t+=this.getPropertiesAsPhpCode(e)),t+=e+"->"+this.method+this.getPhpParams(this.params.length>1)+";"},Ea.prototype.logPhpCodeToTinkerman=function(){tinkerman.append(tinkerman.createElement("span",{},this.getAsPhpCode().replace(/ /g,"").split("\n").map((function(e){return tinkerman.createElement("div",{},[e])}))))});const Pa=["TIN","e","jscore","module","harp","UI","lang"];for(var ka=window,Ta=0;Ta<Pa.length;++Ta)ka[Pa[Ta]]||(ka[Pa[Ta]]={}),ka=ka[Pa[Ta]];ka.en_US||(ka.en_US={}),ka.en_US.PageSessionRequester={text:{connectivityProblemsWillReload:"%27connectivity%20problems%2C%20the%20application%20will%20reload%20to%20try%20to%20reconnect.%27"}};const ja=function(e,t,n){return N.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.PageSessionRequester",e,t,n)},Ia=ja;n(72443),n(39341),n(73706),n(10408),n(65069);function Fa(e){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(e)}function Ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Fa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Fa(i)?i:String(i)),r)}var o,i}var Ca=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getResponseText",value:function(){return null}},{key:"getResponse",value:function(){return null}},{key:"getResponseXML",value:function(){return null}},{key:"getStatus",value:function(){return null}},{key:"isRetryableError",value:function(){return!1}},{key:"isError",value:function(){return!0}},{key:"isAbort",value:function(){return!0}},{key:"isAvatureTimeout",value:function(){return!1}},{key:"getErrorCode",value:function(){return"abortedRequest"}},{key:"getErrorDescription",value:function(){return"Request has been aborted"}}])&&Ra(t.prototype,n),r&&Ra(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Da(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Da(i)?i:String(i)),r)}var o,i}function xa(e,t){return xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xa(e,t)}function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=La(e);if(t){var o=La(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},La(e)}var Ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xa(e,t)}(i,e);var t,n,r,o=Na(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.responseType=n,this.response=e,this.text=t,this.status=this._getResponseStatus(e),this.statusText=this._getResponseStatusText(e)}},{key:"_getResponseStatus",value:function(e){try{return e.status}catch(e){return null}}},{key:"_getResponseStatusText",value:function(e){try{return e.statusText}catch(e){return"__NONE__"}}},{key:"getResponse",value:function(){return this.response}},{key:"getResponseText",value:function(){return this.text}},{key:"getResponseLength",value:function(){return 280+this._getContentAsString().length}},{key:"getStatus",value:function(){return this.status}},{key:"isAbort",value:function(){return!1}},{key:"isRetryableError",value:function(){return 400==this.status}},{key:"isError",value:function(){return 200!=this.status}},{key:"isAvatureTimeout",value:function(){return this.isError()&&504==this.status&&(/Avature Timeout/.test(this.responseText)||/504 Gateway Time-out/.test(this.responseText))}},{key:"getErrorCode",value:function(){if(this.isError()){var e="string"==typeof this.responseText?this.responseText.substr(0,10):"";return"errorStatusReadingResponse/"+this.status+"/"+this.statusText+"/"+e}return null}},{key:"getErrorDescription",value:function(){return this.isError()?"Error status reading response: "+this.status:null}},{key:"_hasResponseText",value:function(){return!this.responseType||"text"===this.responseType}},{key:"_getContentAsString",value:function(){var e="",t=N.get("richJson");return this._hasResponseText()?e=this.getResponseText()||"":("document"===this.responseType&&this.getResponseText()&&(e=(new XMLSerializer).serializeToString(this.getResponseText())),"json"===this.responseType&&this.getResponseText()&&(e=t.serialize(this.getResponseText()))),e}}])&&Aa(t.prototype,n),r&&Aa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Ba(e){return Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(e)}function Va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wa(){Wa=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==Ba(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ha(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ba(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ba(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ba(i)?i:String(i)),r)}var o,i}function Qa(e,t,n){return t&&za(e.prototype,t),n&&za(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}function Ga(e,t){return Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ga(e,t)}function Ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Za(e);if(t){var o=Za(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Za(e){return Za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Za(e)}var Ka=function(e){qa(o,e);var t,n,r=Ja(o);function o(){return Ya(this,o),r.apply(this,arguments)}return Qa(o,[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.aborted=!1,this.headers={}}},{key:"setContentType",value:function(e){if(this.sent)throw new Error("Request already sent");this.contentType=e}},{key:"setResponseType",value:function(e){if(this.sent)throw new Error("Request already sent");this.responseType=e}},{key:"setHeader",value:function(e,t){this.headers[e]=t}},{key:"send",value:function(e,t){var n=this;if(this.sent)throw new Error("Request already sent");var r=N.get("defaultErrorHandler");this.sent=!0,this.callback=t,this.abortController=new AbortController;var i=this.headers,a=N.get("serverCredentials").getForceError();return a&&(i["X-Avature-Force-Error"]=a),this.contentType&&(i["Content-Type"]=this.contentType),N.get("DEBUG_MODE")&&o.charsOutMonitor.add(580+(e?e.length:0)),this.request=fetch(this.url,{method:this.method,headers:i,body:e,signal:this.abortController.signal}).then(r.wrapHandlingErrors(this.caller("_handleResponse"))).then(r.wrapHandlingErrors(this.caller("_handleResponseText"))).catch((function(e){n.aborted||(n._handleResponseText([null,Response.error()]),navigator.onLine&&(n._isExpectedNetwrokError(e)?$.getInstance().log(e.stack):r.handleCatchedException(e)))}))}},{key:"_handleResponse",value:(t=Wa().mark((function e(t){var n,r,o;return Wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",Promise.resolve([null,t]));case 2:return e.next=4,t.text();case 4:return n=e.sent,"document"===this.responseType&&(r=new DOMParser,o=t.headers.get("content-type")?t.headers.get("content-type").split(";")[0]:"text/xml",n=r.parseFromString(n,o)),e.abrupt("return",[n,t]);case 7:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Ha(i,r,o,a,u,"next",e)}function u(e){Ha(i,r,o,a,u,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)})},{key:"_handleResponseText",value:function(e){if(!this.aborted&&this.callback){var t=Va(e,2),n=t[0],r=t[1],i=new Ma(r,n,this.responseType);N.get("DEBUG_MODE")&&o.charsInMonitor.add(i.getResponseLength()),this.callback(i)}}},{key:"abort",value:function(){if(!this.sent)throw new Error("Attempt to abort unsent request");if(this.aborted)throw new Error("Already aborted");this.aborted=!0,this.abortController.abort(),this.callback(new Ca)}},{key:"_isExpectedNetwrokError",value:function(e){var t="Load failed"===e.message&&"TypeError"===e.name&&!e.stack;return"Failed to fetch"===e.message||-1!==e.message.indexOf("NetworkError")||t}}]),o}(Q),$a=function(e){qa(n,e);var t=Ja(n);function n(){return Ya(this,n),t.apply(this,arguments)}return Qa(n,[{key:"initialize",value:function(){this.quantity=0}},{key:"reset",value:function(){this.quantity=0,this.dispatchEvent("change")}},{key:"get",value:function(){return this.quantity}},{key:"add",value:function(e){this.quantity+=e,this.dispatchEvent("change")}}]),n}(Q);function Xa(e){return Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xa(e)}function eu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xa(i)?i:String(i)),r)}var o,i}function tu(e,t){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tu(e,t)}function nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ru(e);if(t){var o=ru(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ru(e)}Ka.charsInMonitor=new $a,Ka.charsOutMonitor=new $a;var ou=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tu(e,t)}(i,e);var t,n,r,o=nu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"setRetryTimeout",value:function(e){i.retryTimeout=e}}],(n=[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.contentType=null,this.retries=0,this.maxRetries=3}},{key:"attemptToSend",value:function(){this.serverRequest=new Ka(this.method,this.url),this.serverRequest.setContentType(this.contentType),this.retries==this.maxRetries&&this.serverRequest.setHeader("X-Avature-Last-Retry","yes"),this.serverRequest.send(this.data,this.caller("onRequestLoad"))}},{key:"send",value:function(e,t){if(this.sent)throw new Error("Request already sent");this.sent=!0,this.data=e,this.callback=t,this.attemptToSend()}},{key:"setContentType",value:function(e){this.contentType=e}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"onRequestLoad",value:function(e){e.isRetryableError()&&this.retries<this.maxRetries?(++this.retries,N.get("timeoutManager").set(this.caller("attemptToSend"),i.retryTimeout)):this.callback&&this.callback(e)}}])&&eu(t.prototype,n),r&&eu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function iu(e){return iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(e)}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==iu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===iu(i)?i:String(i)),r)}var o,i}function uu(e,t){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uu(e,t)}function lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=su(e);if(t){var o=su(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}ou.retryTimeout=1e3;var cu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uu(e,t)}(i,e);var t,n,r,o=lu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){this.requestResponse=e,this.onReadyCallback=t;var n=N.get("richJson");if(this.requestResponse.isError())this._setResponse(!1,!1,null);else{var r=this.requestResponse.getResponseText();if(r)try{n.unserializeWithModelSupport(r,this.caller("onUnserializeComplete"))}catch(e){if(!1===e.message.startsWith(de.INVALID_JSON))throw e;this.invalidResponse=r,this._setResponse(!0,!1,null)}else this._setResponse(!0,!0,null)}}},{key:"_setResponse",value:function(e,t,n){this.emptyResponse=t,this.error=e,this.response=n,this.onReadyCallback(this)}},{key:"onUnserializeComplete",value:function(e){this._setResponse(!1,!1,e)}},{key:"isEmpty",value:function(){return null==this.response}},{key:"getErrorCode",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorCode():this.emptyResponse?"emptyResponse":this.error?"jsonResponseParseError":null}},{key:"getErrorDescription",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorDescription():this.emptyResponse?"Error parsing JSON response: emptyResponse":this.error?"Error parsing JSON response: "+this.invalidResponse:null}},{key:"isAvatureTimeout",value:function(){return this.requestResponse.isAvatureTimeout()}},{key:"isBadGateway",value:function(){return 502==this.requestResponse.getStatus()}},{key:"isError",value:function(){return this.error||this.requestResponse.isError()}},{key:"isAbort",value:function(){return this.requestResponse.isAbort()}},{key:"get",value:function(){return this.response}}])&&au(t.prototype,n),r&&au(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function fu(e){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(e)}function pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fu(i)?i:String(i)),r)}var o,i}function du(e,t){return du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},du(e,t)}function yu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hu(e);if(t){var o=hu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hu(e)}var vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&du(e,t)}(i,e);var t,n,r,o=yu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"isAvailable",value:function(){var e=N.get("richJson");return e&&e.serialize}}],(n=[{key:"initialize",value:function(e){this.serverRequest=e,this.serverRequest.setContentType("text/javascript")}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"send",value:function(e,t){this.callback=t,e=N.get("richJson").serialize(e),this.serverRequest.send(e,this.callback?this.caller("onLoad"):null)}},{key:"onLoad",value:function(e){new cu(e,this.callback)}}])&&pu(t.prototype,n),r&&pu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function bu(e){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(e)}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bu(i)?i:String(i)),r)}var o,i}function gu(e,t){return gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gu(e,t)}function _u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wu(e);if(t){var o=wu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wu(e){return wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wu(e)}var Su=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gu(e,t)}(i,e);var t,n,r,o=_u(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.callback=e;var t=N.get("serverCredentials"),n=new ou("POST","/_createPageSession?applicationCode="+t.getApplicationCode()+"&version="+t.getPacksVersion());this.request=new vu(n)}},{key:"send",value:function(){$.getInstance().log("Requesting new page session");var e={m:[],p:N.get("serverCredentials").getPublicSessionName(),t:null};this.request.send(e,this.caller("onLoad"))}},{key:"onLoad",value:function(e){if(e.isError()||e.isEmpty())$.getInstance().log("Page session request failed"),N.get("page").info(Ia("connectivityProblemsWillReload"));else{var t=e.get().tabId,n=e.get().cortex;$.getInstance().log("Page session request success: "+t),this.callback(t,n)}}}])&&mu(t.prototype,n),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Ou(e){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(e)}function Eu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ou(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ou(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ou(i)?i:String(i)),r)}var o,i}function ku(e,t,n){return t&&Pu(e.prototype,t),n&&Pu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}function ju(e,t){return ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ju(e,t)}function Iu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fu(e);if(t){var o=Fu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ou(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fu(e){return Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fu(e)}var Ru=function(e){Tu(n,e);var t=Iu(n);function n(){return Eu(this,n),t.apply(this,arguments)}return ku(n,[{key:"initialize",value:function(){this.delayedResponses={},this.unexpectedAnswers={}}},{key:"add",value:function(e){var t=e.getId(),n=this.unexpectedAnswers[t];if(n)this._clearUnexpectedAnswer(t),this._run(e,n.getMsgAndClearTimeout());else{var r=this.isBusy();this.delayedResponses[t]=e,r||this.dispatchEvent("busystatechange")}}},{key:"_run",value:function(e,t){t.error?e.setError(t.data):e.set(t.data)}},{key:"onUnexpectedAnswerTimeout",value:function(e){this._clearUnexpectedAnswer(e.sourceWidget.getId())}},{key:"_clearUnexpectedAnswer",value:function(e){delete this.unexpectedAnswers[e]}},{key:"exec",value:function(e){var t=e.id,n=this.delayedResponses[t];if(n)this._run(n,e),delete this.delayedResponses[t],this.isBusy()||this.dispatchEvent("busystatechange");else{if(this.unexpectedAnswers[t])throw new Error("duplicateResponseInAdvance: "+t);this.unexpectedAnswers[t]=Peg(new Cu(e),{ontimeout:this.caller("onUnexpectedAnswerTimeout")})}}},{key:"isBusy",value:function(){for(var e in this.delayedResponses)return!0;return!1}}]),n}(Q),Cu=function(e){Tu(n,e);var t=Iu(n);function n(){return Eu(this,n),t.apply(this,arguments)}return ku(n,[{key:"initialize",value:function(e){this.msg=e,this.timeout=setTimeout(this.caller("onTimeout"),12e4)}},{key:"getId",value:function(){return this.msg.id}},{key:"onTimeout",value:function(){throw this.dispatchEvent("timeout"),new Error("delayedAnswerWithoutQuestion: "+this.getId()+" "+p.describeValue(this.msg))}},{key:"getMsgAndClearTimeout",value:function(){return clearTimeout(this.timeout),this.msg}}]),n}(Q);function Du(e){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Du(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Du(i)?i:String(i)),r)}var o,i}function xu(e,t){return xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xu(e,t)}function Nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lu(e);if(t){var o=Lu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lu(e){return Lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lu(e)}var Mu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xu(e,t)}(i,e);var t,n,r,o=Nu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.requestId=at.generateRandCode(7)}},{key:"getRequestId",value:function(){return this.requestId}}])&&Au(t.prototype,n),r&&Au(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}function Vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Bu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Bu(i)?i:String(i)),r)}var o,i}function Uu(){return Uu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Uu.apply(this,arguments)}function Wu(e,t){return Wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wu(e,t)}function Hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yu(e);if(t){var o=Yu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yu(e){return Yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yu(e)}var zu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wu(e,t)}(i,e);var t,n,r,o=Hu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){Uu(Yu(i.prototype),"initialize",this).call(this),this.invocations=e,this.dontIndicateErrors=t,this.handledActionsByNumber={}}},{key:"mustRetryOnNetworkErrors",value:function(){return!0}},{key:"getMustIndicateErrors",value:function(){return!this.dontIndicateErrors}},{key:"getDescription",value:function(){for(var e="",t=0;t<this.invocations.length;++t)e+=this.invocations[t].getCallDescription()+"\n";return e}},{key:"getRequestPath",value:function(){return"synapserCall/"+N.get("serverCredentials").getCortex()}},{key:"getMessageToSendAndHandleSend",value:function(){for(var e=[],t=0;t<this.invocations.length;++t)e.push(this.invocations[t].getMessageToSendAndHandleSend());return e}},{key:"handleResponse",value:function(e,t){var n=this,r=[];if(t)for(var o=0;o<t.length;++o)r.push(this._handleIndividualResponse(e,t[o]));var i=r.filter((function(e){return e instanceof Promise}));Promise.all(i).then((function(){n.dispatchEvent("load",new U({response:t}))}))}},{key:"_createExceptionDecoder",value:function(){return new Lr}},{key:"_handleIndividualResponse",value:function(e,t){var n=this._createExceptionDecoder();if(void 0!==t.actionNumber)this.invocations[t.actionNumber].handle(t,e,n),this.handledActionsByNumber[t.actionNumber]=1;else{if("event"!=t.type){if("routerError"==t.type){var r=new Error("routerError");throw r.reportCode=t.reportCode,r}throw new Error("unknownResponseType")}if(!t.error)return e.handleEvent(t);e.handleEventError(n.create("Event",t.msg))}}},{key:"hasInvocations",value:function(){return this.invocations.length>0}},{key:"handleRequestError",value:function(e){for(var t=0;t<this.invocations.length;++t)this.handledActionsByNumber[t]||this.invocations[t].handleError(e);this.dispatchEvent("error",new U({remoteException:e}))}},{key:"getInvocations",value:function(){return this.invocations}}],n&&Vu(t.prototype,n),r&&Vu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Mu);function Qu(e){return Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(e)}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qu(i)?i:String(i)),r)}var o,i}function Gu(e,t){return Gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gu(e,t)}function Ju(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zu(e);if(t){var o=Zu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zu(e){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zu(e)}var Ku=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gu(e,t)}(i,e);var t,n,r,o=Ju(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.messageSender=e,this.timeout=null,this.request=null,this.lastConnectWasAnError=!1,this.waitingForOnline=!1,this._fetch()}},{key:"_stopWaitingForOnline",value:function(){N.get("server").removeListener("online",this.caller("onOnline")),this.waitingForOnline=!1}},{key:"onOnline",value:function(){this._stopWaitingForOnline(),$.getInstance().log("Retrying permanent connection due to online"),this._fetch()}},{key:"onLoadError",value:function(e){if(!this.Deleted){var t=e.remoteException;if(!this.lastConnectWasAnError){var n="Permanent connection disconnected ("+t.getTechnicalDescription()+")";$.getInstance().log(n),N.get("userTrail").add(n),this.lastConnectWasAnError=!0}t instanceof pr?($.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), waiting for online"),N.get("server").addListener("online",this.caller("onOnline")),this.waitingForOnline=!0):($.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), will retry in 10000ms"),this.timeout=setTimeout(this.caller("onTimeout"),1e4))}}},{key:"onLoadOk",value:function(e){if(!this.Deleted){if(this.lastConnectWasAnError){var t="Permanent connection reconnected";$.getInstance().log(t),N.get("userTrail").add(t)}this.lastConnectWasAnError=!1;var n=xt.now()-this.lastFetchDate,r=0,o=N.get("config");r=0==e.response.length&&n<o.router.minPendingMessagesDelay?o.router.minPendingMessagesDelay-n:0,this.timeout=setTimeout(this.caller("onTimeout"),r)}}},{key:"onTimeout",value:function(){this.timeout=null,this._fetch()}},{key:"_fetch",value:function(){this.lastFetchDate=xt.now();var e=new zu([],!1);e.addListener("load",this.caller("onLoadOk")),e.addListener("error",this.caller("onLoadError")),this.request=this.messageSender.sendMessage(e)}},{key:"uninit",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.waitingForOnline&&this._stopWaitingForOnline()}}])&&qu(t.prototype,n),r&&qu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function $u(e){return $u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$u(i)?i:String(i)),r)}var o,i}function el(e,t){return el=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},el(e,t)}function tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nl(e);if(t){var o=nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nl(e){return nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nl(e)}var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&el(e,t)}(i,e);var t,n,r,o=tl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.url=e,this.pageSessionId=t,this.request=null,this.message=n}},{key:"resend",value:function(){this.request=null,this.send(this.callback)}},{key:"send",value:function(e){if(this.request)throw new Error("Already sent");this.callback=e;var t,n=N.get("serverCredentials"),r=this.url+"?applicationCode="+n.getApplicationCode()+"&version="+n.getPacksVersion();t=this.message.mustRetryOnNetworkErrors()?new ou("POST",r):new Ka("POST",r),this.request=new vu(t),this.request.send(this.getRequestStruct(),this.caller("onRequestResponse"))}},{key:"onRequestResponse",value:function(e){this.callback(this.message,e,this)}},{key:"abort",value:function(){this.request.abort()}},{key:"getRequestStruct",value:function(){var e=N.get("serverCredentials");return{m:this.message.getMessageToSendAndHandleSend(),p:e.getPublicSessionName(),t:this.pageSessionId,i:this.message.getRequestId()}}}])&&Xu(t.prototype,n),r&&Xu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function ol(e){return ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(e)}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ol(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ol(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ol(i)?i:String(i)),r)}var o,i}function al(e,t){return al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},al(e,t)}function ul(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ll(e);if(t){var o=ll(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ll(e){return ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ll(e)}var sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&al(e,t)}(i,e);var t,n,r,o=ul(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){this.pageSessionId=e,this.responseReceiveCallback=t,this.currentRequests=[],this.waitingMessageCount=0,this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"onRequestResponse",value:function(e,t,n){this.Deleted||(e.hasInvocations()>0&&--this.waitingMessageCount,$.getInstance().notifyExecManyResponseReceive(e,t),Ke.remove(this.currentRequests,n),this.responseReceiveCallback(e,t,n),this._dispatchBusyStateChangeIfNecessary())}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){var e=this.waitingMessageCount>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"sendMessage",value:function(e,t){e.hasInvocations()&&++this.waitingMessageCount,$.getInstance().notifyExecMany(e,t);var n=new rl(e.getRequestPath(),this.pageSessionId,e);return this.currentRequests.push(n),n.send(this.caller("onRequestResponse")),this._dispatchBusyStateChangeIfNecessary(),n}},{key:"uninit",value:function(){for(var e=this.currentRequests.slice(),t=0;t<e.length;++t)e[t].abort();delete this.responseReceiveCallback}}],n&&il(t.prototype,n),r&&il(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function cl(e){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(e)}function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==cl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===cl(i)?i:String(i)),r)}var o,i}function pl(){return pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pl.apply(this,arguments)}function dl(e,t){return dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dl(e,t)}function yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hl(e);if(t){var o=hl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hl(e){return hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hl(e)}var vl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dl(e,t)}(i,e);var t,n,r,o=yl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r){pl(hl(i.prototype),"initialize",this).call(this),this.onload=t,this.onerror=n,this.code=e,this.cortexToUse=r||N.get("serverCredentials").getCortex()}},{key:"mustRetryOnNetworkErrors",value:function(){return!1}},{key:"getMustIndicateErrors",value:function(){return!1}},{key:"getMessageToSendAndHandleSend",value:function(){return this.code}},{key:"getRequestPath",value:function(){return"synapserCall/"+this.cortexToUse}},{key:"handleResponse",value:function(e,t){this.onload(t)}},{key:"hasInvocations",value:function(){return!1}},{key:"handleRequestError",value:function(e){this.onerror()}},{key:"getDescription",value:function(){return"ICO.harp.SynapserMessage. Code: "+this.code}},{key:"getInvocations",value:function(){return[]}}])&&fl(t.prototype,n),r&&fl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Mu);function bl(e){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(e)}function ml(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bl(i)?i:String(i)),r)}var o,i}function wl(e,t){return wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wl(e,t)}function Sl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ol(e);if(t){var o=Ol(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ol(e)}var El=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wl(e,t)}(i,e);var t,n,r,o=Sl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.callbackQueue=[],this.invocationQueue=[],this.busy=!1,this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this.onHold=!1,this.config=N.get("config"),this.messageSender=Peg(new sl(e,t),{onbusystatechange:this.caller("_dispatchBusyStateChangeIfNecessary")}),n&&(this.fetcher=new Ku(this.messageSender)),this.currentBundleStartTime,this.nextBundleStartTime}},{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"enqueueInvocationRequest",value:function(e){this.invocationQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"isBusy",value:function(){return this.messageSender.isBusy()||this.invocationQueue.length>0||this.callbackQueue.length>0}},{key:"ping",value:function(e,t){return this.messageSender.sendMessage(new vl("ping",e,t,"1"))}},{key:"processInvocationRequest",value:function(e,t){return this.messageSender.sendMessage(new zu([e],t))}},{key:"flushAndHold",value:function(){var e=this;this.holdingTimeout&&clearTimeout(this.holdingTimeout),this._execPending(),this.onHold=!0,this.holdingTimeout=setTimeout((function(){e.flushAndRelease()}),this._getMaxPreflightWaitTime())}},{key:"flushAndRelease",value:function(){var e=this;this.onHold&&(clearTimeout(this.holdingTimeout),this.holdingTimeout=null,window.requestAnimationFrame((function(){e.onHold=!1,e._execPending()})))}},{key:"uninit",value:function(){this.Delete("messageSender"),this.fetcher&&this.Delete("fetcher")}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){if(!this.Deleted){var e=this.isBusy();this.busy!==e&&(this.busy=e,this.dispatchEvent("busystatechange"))}}},{key:"_ensureSendRequestTimeoutPresent",value:function(){this.hasPendingTimeout&&!this.hasPendingCallbacks||(this._saveBundleStartTime(performance.now()),this.hasPendingTimeout=!0,Jr.delay(this.caller("_execPending"))),this._dispatchBusyStateChangeIfNecessary()}},{key:"_execPending",value:function(){if(!this.Deleted){var e=this.callbackQueue.slice();this.callbackQueue=[];var t=this.invocationQueue.slice();this.invocationQueue=[],this.hasPendingCallbacks=!0;var n,r=ml(e);try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(e){r.e(e)}finally{r.f()}var o=performance.now()-this.currentBundleStartTime;if(this.onHold)this.invocationQueue=[].concat(t,this.invocationQueue);else if(t.length>0){var i=new zu(t,!1);this.messageSender.sendMessage(i,o)}this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this._dispatchBusyStateChangeIfNecessary(),this._saveNextBundleStartTime()}}},{key:"_saveBundleStartTime",value:function(e){this.hasPendingCallbacks?this.nextBundleStartTime=e:this.currentBundleStartTime=e}},{key:"_saveNextBundleStartTime",value:function(){this.nextBundleInit&&(this.currentBundleInit=this.nextBundleInit,this.nextBundleInit=null)}},{key:"_getMaxPreflightWaitTime",value:function(){return this.config.harp.control.maxPreflightWaitTime}}])&&_l(t.prototype,n),r&&_l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Pl(e){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(e)}function kl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Pl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Pl(i)?i:String(i)),r)}var o,i}function Tl(e,t){return Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tl(e,t)}function jl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Il(e);if(t){var o=Il(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Il(e)}var Fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tl(e,t)}(i,e);var t,n,r,o=jl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._initializeInvocationHandling()}},{key:"enqueueInvocationRequest",value:function(e){this._initializeInvocationHandling(),this.invocationQueue.push(e),this._getMaxRequestPerMessageConfig()&&this.invocationQueue.length>=this._getMaxRequestPerMessageConfig()&&(this._cancelExistingDelayer(),this._cancelExistingTimeout(),this._sendInvocationBundle())}},{key:"_cancelExistingDelayer",value:function(){this.pendingBrowserDelayer&&(clearTimeout(this.pendingBrowserDelayer),this.pendingBrowserDelayer=null)}},{key:"_cancelExistingTimeout",value:function(){this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=null)}},{key:"_getMaxRequestPerMessageConfig",value:function(){return this.config.harp.control.maxRequestPerMessage}},{key:"_initializeInvocationHandling",value:function(){var e=this;!this.pendingTimeout&&!this.pendingBrowserDelayer&&(0===this.invocationQueue.length||this.callbackQueue.length>0)&&(this.pendingTimeout=setTimeout((function(){e._cancelExistingDelayer(),e.pendingTimeout=null,e._sendInvocationBundle()}),this._getMaxPreflightWaitTime()),this.pendingBrowserDelayer=Jr.delay((function(){e._cancelExistingTimeout(),e.pendingBrowserDelayer=null,e._sendInvocationBundle()})))}},{key:"_sendInvocationBundle",value:function(){this._saveBundleStartTime(performance.now()),this._execPending(),this._dispatchBusyStateChangeIfNecessary()}}])&&kl(t.prototype,n),r&&kl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(El);function Rl(e){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(e)}function Cl(e,t,n){return Cl=Nl()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Al(o,n.prototype),o},Cl.apply(null,arguments)}function Dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Rl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Rl(i)?i:String(i)),r)}var o,i}function Al(e,t){return Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Al(e,t)}function xl(e){var t=Nl();return function(){var n,r=Ll(e);if(t){var o=Ll(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ll(e){return Ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ll(e)}var Ml=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Al(e,t)}(i,e);var t,n,r,o=xl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){for(var e=this._isHarpControlEnabled()?Fl:El,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.bundler=Cl(e,n),this.bundler.addListener("busystatechange",this.dispatcher("busystatechange"))}},{key:"callBeforeExecLater",value:function(e){this.bundler.callBeforeExecLater(e)}},{key:"exec",value:function(e,t,n){if(t)return this.bundler.processInvocationRequest(e,n);this.bundler.enqueueInvocationRequest(e)}},{key:"isBusy",value:function(){return this.bundler.isBusy()}},{key:"ping",value:function(e,t){return this.bundler.ping(e,t)}},{key:"flushAndHold",value:function(){this.bundler.flushAndHold()}},{key:"flushAndRelease",value:function(){this.bundler.flushAndRelease()}},{key:"uninit",value:function(){this.bundler.uninit(),this.Delete("bundler")}},{key:"_isHarpControlEnabled",value:function(){var e=N.get("config");return e.harp&&e.harp.control&&e.harp.control.enabled}}],n&&Dl(t.prototype,n),r&&Dl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Bl(e){return Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(e)}function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Bl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Bl(i)?i:String(i)),r)}var o,i}function Wl(e,t,n){return t&&Ul(e.prototype,t),n&&Ul(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yl(e,t)}function Yl(e,t){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yl(e,t)}function zl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ql(e);if(t){var o=Ql(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ql(e){return Ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ql(e)}var ql=function(e){Hl(n,e);var t=zl(n);function n(){return Vl(this,n),t.apply(this,arguments)}return Wl(n,null,[{key:"callWhenReady",value:function(e,t,n){for(var r=new Gl(n),o=0;o<e.length;++o)r.add(e[o].getBusyMonitor?e[o].getBusyMonitor():e[o]);if(r.isBusy()){return r.addListener("busystatechange",(function e(){r.removeListener("busystatechange",e),t(),Delete(r)})),r}return Delete(r),t(),null}}]),n}(Q),Gl=function(e){Hl(n,e);var t=zl(n);function n(){return Vl(this,n),t.apply(this,arguments)}return Wl(n,[{key:"initialize",value:function(e){this.objectsToMonitor=[],this.busy=this.isBusy(),this.mustNotify=e}},{key:"checkForBusyStateChange",value:function(){var e=this.isBusy();e!=this.busy&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"onChildBusyStateChange",value:function(){this.checkForBusyStateChange()}},{key:"add",value:function(e){if(N.get("ENABLE_UI_VALIDATION")&&-1!==Ke.sloppyIndexOf(this.objectsToMonitor,e))throw new Error("Object is already being monitored");this.objectsToMonitor.push(e),this.mustNotify&&e.notifyWaiting&&e.notifyWaiting(),e.addListener("busystatechange",this.caller("onChildBusyStateChange")),this.checkForBusyStateChange()}},{key:"remove",value:function(e,t){Ke.remove(this.objectsToMonitor,e)?(e.removeListener("busystatechange",this.caller("onChildBusyStateChange")),t||this.checkForBusyStateChange()):N.get("defaultErrorHandler").reportAsException("Cannot remove an Object that is not in monitor: "+e)}},{key:"isBusy",value:function(){for(var e=0;e<this.objectsToMonitor.length;++e)if(this.objectsToMonitor[e].isBusy())return!0;return!1}},{key:"uninit",value:function(){for(var e=this.objectsToMonitor.length-1;e>=0;--e)this.remove(this.objectsToMonitor[e],!0)}}]),n}(Q);function Jl(e){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(e)}function Zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jl(i)?i:String(i)),r)}var o,i}function Kl(){return Kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=es(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Kl.apply(this,arguments)}function $l(e,t){return $l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$l(e,t)}function Xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=es(e);if(t){var o=es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}var ts=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$l(e,t)}(i,e);var t,n,r,o=Xl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o){Kl(es(i.prototype),"initialize",this).call(this),this.pageSession=e,this.listenerNumber=t,this.className=n,this.eventName=r,this.callback=o,this.removing=!1,this.removed=!1;var a=void 0;this.response=a,this.errorResponse=a,this.parentObject=null}},{key:"getDescription",value:function(){return this.className+"-"+this.eventName+"#"+this.listenerNumber}},{key:"handleEvent",value:function(e){this.callback(e),this.dispatchEvent("eventreceive")}},{key:"handleEventError",value:function(e){var t=new U({response:e,error:!0});this.dispatchEvent("beforeload",t),this.onerror&&this.onerror(e)||$.getInstance().handleRemoteException(e)}},{key:"setAsRemoved",value:function(){this.removed||(this.removed=!0,this.removing=!1,this.dispatchEvent("remove"))}},{key:"_assertRemovable",value:function(){if(this.removed)throw new Error("cannot remove already-removed listener");if(this.removing)throw new Error("cannot remove already-scheduled to be removed listener")}},{key:"removeNow",value:function(){this._assertRemovable(),this.pageSession.removeRemoteListenerNow(this)}},{key:"removeLater",value:function(){this._assertRemovable(),this.removing=!0,this.pageSession.removeRemoteListenerLater(this)}},{key:"getEventName",value:function(){return this.eventName}},{key:"getServerClassName",value:function(){return this.className}},{key:"getListenerNumber",value:function(){return this.listenerNumber}},{key:"cancelRemove",value:function(){this.removing=!1,this.pageSession.cancelRemoveRemoteListener(this)}},{key:"isValid",value:function(){return!this.removed}},{key:"isRemoving",value:function(){return this.removing}},{key:"getResponse",value:function(){return this.response}},{key:"getErrorResponse",value:function(){return this.errorResponse}},{key:"setResponse",value:function(e){this.response=e,this.dispatchEvent("responsereceive")}},{key:"setErrorResponse",value:function(e){this.errorResponse=e,this.dispatchEvent("error")}},{key:"setParentObject",value:function(e){this.parentObject=e}},{key:"getParentObject",value:function(){return this.parentObject}}])&&Zl(t.prototype,n),r&&Zl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);ts.prototype.dontGuessNamesList=["pageSession"];n(49337),n(33321);function ns(e){return ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ns(e)}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ns(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ns(i)?i:String(i)),r)}var o,i}var os=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createCaller",value:function(e,t,n){return function(){if(e[t])return e[t].apply(e,n);if(N.get("ENABLE_UI_VALIDATION"))throw new Error("MethodDoesNotExists: Couldn't find method "+t+" in "+e)}}},{key:"shallowCloneMap",value:function(e){var t={};if(!e||"object"!=ns(e))return t;if(e.clone)return e.clone();if(e.classRef)return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e));var n=Object.keys(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{});return Object.getOwnPropertySymbols(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);r.enumerable&&(n[t]=r)})),Object.defineProperties(t,n),t}},{key:"merge",value:function(e,t){for(var n in t)e[n]=t[n];return e}},{key:"clone",value:function(t,n,r){if(r=r||"",n&&new RegExp(n).test(r))return t;if(t&&t.clone)return t.clone();if(!t||"object"!=ns(t))return t;var o;if(t instanceof Date)o=new Date(t.getTime());else if(Array.isArray(t))o=t.map((function(t,o){return e.clone(t,n,r+"."+o)}));else if(t.classRef)o=Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t));else for(var i in o={},t)o[i]=e.clone(t[i],n,r+"."+i);return o}},{key:"clean",value:function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e}},{key:"hasMethod",value:function(e,t){return!(!e||"function"!=typeof e[t])}}],(n=null)&&rs(t.prototype,n),r&&rs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==is(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===is(i)?i:String(i)),r)}var o,i}function us(){return us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},us.apply(this,arguments)}function ls(e,t){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ls(e,t)}function ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cs(e);if(t){var o=cs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(e)}var fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ls(e,t)}(i,e);var t,n,r,o=ss(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){us(cs(i.prototype),"initialize",this).call(this,e,"getDataAndProps",[]),this.instanceProperties=t||{}}},{key:"getTypeLetter",value:function(){return"R"}},{key:"getMessageToSend",value:function(){var e=Ea.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"remoteview:"}}])&&as(t.prototype,n),r&&as(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ea);function ps(e){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps(e)}function ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ps(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ps(i)?i:String(i)),r)}var o,i}function ys(){return ys="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ys.apply(this,arguments)}function hs(e,t){return hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hs(e,t)}function vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bs(e);if(t){var o=bs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bs(e){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bs(e)}N.get("DEBUG_MODE")&&(fs.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+ma.serialize(this.instanceProperties[n],0)+";\n";return t});var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hs(e,t)}(i,e);var t,n,r,o=vs(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r){ys(bs(i.prototype),"initialize",this).call(this,e,t,n),this.instanceProperties=r||{}}},{key:"getInstanceProperties",value:function(){return this.instanceProperties}},{key:"updateDatasourceProperty",value:function(e,t){this.instanceProperties[e]=t}},{key:"getTypeLetter",value:function(){return"O"}},{key:"getMessageToSend",value:function(){var e=Ea.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"staticview:"}},{key:"getInnerValue",value:function(e){return e.msg}},{key:"replaceInnerValue",value:function(e,t){return e.msg=t,e}}])&&ds(t.prototype,n),r&&ds(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ea);N.get("DEBUG_MODE")&&(ms.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+ma.serialize(this.instanceProperties[n],0)+";\n";return t});n(5212);function gs(e){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(e)}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==gs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gs(i)?i:String(i)),r)}var o,i}function ws(e,t){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ws(e,t)}function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Os(e);if(t){var o=Os(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Os(e){return Os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Os(e)}var Es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ws(e,t)}(i,e);var t,n,r,o=Ss(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.cleanupTimeout=null,this.monitor=e,this.active=this.monitor.get(),this.monitor.addListener("change",this.caller("onMonitorChange"))}},{key:"isBusy",value:function(){return!1}},{key:"get",value:function(){return this.active}},{key:"_startInactiveTimeout",value:function(){if(this.cleanupTimeout)throw new Error("cleanup timeout already started");var e=N.get("config");this.cleanupTimeout=setTimeout(this.caller("onInactiveTimeout"),e.WebsiteSettings.liveQueryCleanupTimeout)}},{key:"_cancelInactiveTimeout",value:function(){clearTimeout(this.cleanupTimeout),this.cleanupTimeout=null}},{key:"hurryUp",value:function(){this.cleanupTimeout&&(this._cancelInactiveTimeout(),this.onInactiveTimeout())}},{key:"onInactiveTimeout",value:function(){if(this.cleanupTimeout=null,!this.active)throw new Error("unexpected timeout reached");this.active=!1,this.dispatchEvent("change")}},{key:"onMonitorChange",value:function(){this.monitor.get()?(this.cleanupTimeout&&this._cancelInactiveTimeout(),this.active=!0,this.dispatchEvent("change")):this._startInactiveTimeout()}}])&&_s(t.prototype,n),r&&_s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ps(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ps(i)?i:String(i)),r)}var o,i}function Ts(){return Ts="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ts.apply(this,arguments)}function js(e,t){return js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},js(e,t)}function Is(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fs(e);if(t){var o=Fs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fs(e){return Fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fs(e)}var Rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&js(e,t)}(i,e);var t,n,r,o=Is(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){if(Ts(Fs(i.prototype),"initialize",this).call(this),this.dataSources=e,this.combineCallback=t,!Array.isArray(e))throw new Error("dataSources must be an array");this.busy=!0,this._someDataSourceIsBusy()?ql.callWhenReady(e,this.caller("onDataSourcesReady")):this.onDataSourcesReady()}},{key:"uninit",value:function(){for(var e=0;e<this.dataSources.length;++e)this.busy||this.dataSources[e].removeListener("change",this.caller("onDataSourceChange"));this.dataSources=[]}},{key:"notifyWaiting",value:function(){for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].notifyWaiting&&this.dataSources[e].notifyWaiting()}},{key:"_someDataSourceIsBusy",value:function(){for(var e=0;e<this.dataSources.length;++e)if(this.dataSources[e].isBusy())return!0;return!1}},{key:"onDataSourcesReady",value:function(){this.busy=!1,this.data=this._calculateData();for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].addListener("change",this.caller("onDataSourceChange"));this.dispatchEvent("busystatechange")}},{key:"onDataSourceChange",value:function(e){if(!this.busy){var t=this.data;this.data=this._calculateData(),this.data!=t&&this.dispatchChange()}}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"_calculateData",value:function(){for(var e=[],t=0;t<this.dataSources.length;++t)e.push(this.dataSources[t].get());return this.combineCallback(e)}},{key:"removeDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].removeDependencyOf&&this.dataSources[t].removeDependencyOf(e)}},{key:"addDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].addDependencyOf&&this.dataSources[t].addDependencyOf(e)}}],n&&ks(t.prototype,n),r&&ks(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function Cs(e){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(e)}function Ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Cs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cs(i)?i:String(i)),r)}var o,i}function As(){return As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ls(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},As.apply(this,arguments)}function xs(e,t){return xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xs(e,t)}function Ns(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ls(e);if(t){var o=Ls(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ls(e){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ls(e)}N.get("DEBUG_MODE")&&(Rs.prototype.getDomNodesToHighlight=function(){for(var e=[],t=0;t<this.dataSources.length;++t)this.dataSources[t].getDomNodesToHighlight&&(e=e.concat(this.dataSources[t].getDomNodesToHighlight()));return e});var Ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xs(e,t)}(i,e);var t,n,r,o=Ns(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e){As(Ls(i.prototype),"initialize",this).call(this,e,this.caller("combineValues"))}},{key:"combineValues",value:function(e){for(var t=0;t<e.length;++t)if(e[t])return!0;return!1}}],n&&Ds(t.prototype,n),r&&Ds(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Rs);function Bs(e){return Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bs(e)}function Vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Bs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Bs(i)?i:String(i)),r)}var o,i}function Us(e,t){return Us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Us(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hs(e);if(t){var o=Hs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hs(e){return Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hs(e)}var Ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Us(e,t)}(i,e);var t,n,r,o=Ws(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){this.childWidgets=[],this.active=!1}},{key:"isBusy",value:function(){return!1}},{key:"onChildWidgetsChange",value:function(){this.childWidgets.length>0?this.addIdlenessListener():this.removeIdlenessListener(),this.dispatchEvent("domnodestohighlightchange"),this.updateIsActive()}},{key:"calculateIsActive",value:function(){return this.childWidgets.length>0&&"xidle"!=N.get("browserWindow").getUserIdleness()}},{key:"updateIsActive",value:function(){var e=this.calculateIsActive();e!=this.active&&(this.active=e,this.dispatchEvent("change"))}},{key:"get",value:function(){return this.active}},{key:"addIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded||(N.get("browserWindow").addListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!0)}},{key:"removeIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded&&(N.get("browserWindow").removeListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!1)}},{key:"add",value:function(e){this.childWidgets.push(e),this.onChildWidgetsChange()}},{key:"remove",value:function(e){if(!Ke.remove(this.childWidgets,e))throw new Error("widgetWasNotBeingWatched");this.onChildWidgetsChange()}},{key:"uninit",value:function(){this.childWidgets.length>0&&this.removeIdlenessListener()}},{key:"getDomNodesToHighlight",value:function(){for(var e=[],t=0;t<this.childWidgets.length;++t)if(this.childWidgets[t].getDomNode){var n=this.childWidgets[t].getDomNode();n&&e.push(n)}return e}}],n&&Vs(t.prototype,n),r&&Vs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function zs(e){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zs(e)}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==zs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===zs(i)?i:String(i)),r)}var o,i}function qs(){return qs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},qs.apply(this,arguments)}function Gs(e,t){return Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gs(e,t)}function Js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zs(e);if(t){var o=Zs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zs(e){return Zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zs(e)}var Ks=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gs(e,t)}(i,e);var t,n,r,o=Js(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){if(qs(Zs(i.prototype),"initialize",this).call(this,null,!0),this.actionCall=e,this.sendingRemote=null,this.fetchDuration=null,this.activeMonitor=Peg(new Es(new Ms([this.widgetsActiveMonitor=new Ys,this.mustLoadOnceDataSource=new Pn(!0)])),{onchange:this.caller("onActiveMonitorChange")}),t)this._addRemoteListener(t.listenerNumber,t.addListenerOutput),this.onDataReceive(t.data);else{if(!this.activeMonitor.get())throw new Error("activeMonitorShouldStartActive");this._fetchAndStartListeningIfNecessary()}}},{key:"getActiveMonitorToHurryUp",value:function(){return this.activeMonitor}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"onActiveMonitorChange",value:function(){this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this._stopListening()}},{key:"_deleteRemoteListenerIfPresent",value:function(){this.remoteListener&&(this.remoteListener.removeListener("remove",this.caller("onRemoteListenerRemove")),this.remoteListener.setParentObject(null),this.Delete("remoteListener"))}},{key:"_addRemoteListener",value:function(e,t){this._deleteRemoteListenerIfPresent(),this.remoteListener=N.get("server").addRemoteListener(this.actionCall.getServerClassName(),"change",this.caller("onDataReceive"),null,null,!0,!1,e),this.remoteListener.setResponse(t),this.remoteListener.setParentObject(this),this.remoteListener.addListener("remove",this.caller("onRemoteListenerRemove"))}},{key:"onRemoteListenerRemove",value:function(){this._deleteRemoteListenerIfPresent(),this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this.dispatchEvent("expire")}},{key:"onError",value:function(e){this.sendingRemote=null,this._stopListening(),this.dispatchEvent("error",e)}},{key:"onDataReceive",value:function(e){if(this.set(e),this.mustLoadOnceDataSource.set(!1),!this.isBusy()){var t=this._isPotentialUnneededCallback();t&&$.getInstance().notifyPotentialUnneededCallback(t,this.actionCall)}this.setIsBusy(!1)}},{key:"_isPotentialUnneededCallback",value:function(){var e={};return this.remoteListener||(e.noRemoteListener=1),"xidle"===N.get("browserWindow").getUserIdleness()&&(e.tabIsIdle=1),this.hadDependencies&&this.widgetsActiveMonitor&&0===this.widgetsActiveMonitor.childWidgets.length&&(e.notInDom=1),"hidden"===document.visibilityState&&(e.tabNotVisible=1),!!Object.values(e).some((function(e){return e}))&&e}},{key:"_fetchAndStartListeningIfNecessary",value:function(){this.sendingRemote||(this.remoteListener?this.remoteListener.isRemoving()&&this.remoteListener.cancelRemove():this.sendingRemote=Peg(new To(this.actionCall),{onreceive:this.caller("onGetDataAndStartListeningReceive"),onerror:this.caller("onError")}))}},{key:"_stopListening",value:function(){this.remoteListener&&!this.remoteListener.isRemoving()&&this.remoteListener.removeLater()}},{key:"addDependencyOf",value:function(e){this.hadDependencies=!0,this.widgetsActiveMonitor.add(e)}},{key:"removeDependencyOf",value:function(e){this.widgetsActiveMonitor.remove(e)}},{key:"uninit",value:function(){this._stopListening(),this.remoteListener&&this._deleteRemoteListenerIfPresent(),this.Delete("widgetsActiveMonitor")}},{key:"onGetDataAndStartListeningReceive",value:function(){var e=this.sendingRemote.get();this.fetchDuration=this.sendingRemote.getFetchDuration(),this.Delete("sendingRemote"),this._addRemoteListener(e[1],e[2]),this.onDataReceive(e[0])}},{key:"getApiCall",value:function(){return this.actionCall}},{key:"getDomNodesToHighlight",value:function(){return this.widgetsActiveMonitor.getDomNodesToHighlight()}}])&&Qs(t.prototype,n),r&&Qs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Pn);function $s(e){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(e)}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$s(i)?i:String(i)),r)}var o,i}function ec(){return ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ec.apply(this,arguments)}function tc(e,t){return tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tc(e,t)}function nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rc(e);if(t){var o=rc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rc(e){return rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(e)}Ks.prototype.dontGuessNamesList=["activeMonitor","widgetsActiveMonitor"];var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tc(e,t)}(i,e);var t,n,r,o=nc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o,a){ec(rc(i.prototype),"initialize",this).call(this,e,t,n,r),this.filter=o,this.noCache=a}},{key:"getTypeLetter",value:function(){return"L"}},{key:"getDescriptionPrefix",value:function(){var e="liveview:";return this.noCache&&(e+="nocache:"),e}},{key:"createDataSource",value:function(){return new Ks(this)}},{key:"getMessageToSend",value:function(){var e=ms.prototype.getMessageToSend.call(this);return e.push(this.filter),this.noCache&&e.push("nocache"),e}},{key:"getInnerValue",value:function(e){return e[0]}},{key:"replaceInnerValue",value:function(e,t){return e[0]=t,e}}])&&Xs(t.prototype,n),r&&Xs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ms);function ic(e){return ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ic(e)}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ic(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ic(i)?i:String(i)),r)}var o,i}function uc(e,t){return uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uc(e,t)}function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sc(e);if(t){var o=sc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sc(e){return sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sc(e)}var cc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uc(e,t)}(i,e);var t,n,r,o=lc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.value=null,this.setAsActive()}},{key:"get",value:function(){return this.value}},{key:"isBusy",value:function(){return!1}},{key:"_clearTimeoutIfPresent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"_setTimeoutReplacing",value:function(e,t){this._clearTimeoutIfPresent();var n=this;this.timeout=setTimeout((function(){n.timeout=null,e()}),t)}},{key:"_setIfDifferent",value:function(e){this.value!=e&&(this.value=e,this.dispatchEvent("change"))}},{key:"setAsActive",value:function(){this._clearTimeoutIfPresent(),this.lastActiveDate=xt.now(),this._setIfDifferent("active"),this._setTimeoutReplacing(this.caller("onIdleTimeout"),i.IDLE_MS)}},{key:"onIdleTimeout",value:function(){this._setIfDifferent("idle"),this._setTimeoutReplacing(this.caller("onXIdleTimeout"),i.XIDLE_MS-(xt.now()-this.lastActiveDate))}},{key:"onXIdleTimeout",value:function(){this._setIfDifferent("xidle")}}])&&ac(t.prototype,n),r&&ac(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function fc(e){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(e)}function pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fc(i)?i:String(i)),r)}var o,i}function dc(e,t){return dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dc(e,t)}function yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hc(e);if(t){var o=hc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hc(e){return hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hc(e)}cc.IDLE_MS=3e5,cc.XIDLE_MS=18e5;var vc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dc(e,t)}(i,e);var t,n,r,o=yc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"topDocument",value:function(){return window.tinkerman?top.document:window.document}}],(n=[{key:"initialize",value:function(){this.startingToUnload=!1,this.unloading=!1,this.userIsIdleDetector=Peg(new cc,{onchange:this.dispatcher("useridlechange")}),this.innerSize=null,ii.addEventListener(window,"beforeunload",this.caller("onBeforeUnload")),ii.addEventListener(window,"unload",this.caller("onUnload")),ii.addEventListener(window,"resize",this.caller("onResize")),ii.addEventListener(document,"keypress",this.caller("onKeypress")),ii.addEventListener(document,"mousemove",this.caller("onMousemove")),ii.addEventListener(document,"click",this.caller("onClick"))}},{key:"getUserIdleness",value:function(){return this.userIsIdleDetector.get()}},{key:"reload",value:function(){if(N.get("TEST_ENV"))throw new Error("cannotReloadBrowserOnATest");i.topDocument().location.reload()}},{key:"isUnloading",value:function(){return this.unloading}},{key:"getInnerSize",value:function(){return this.innerSize?this.innerSize:this.innerSize=this._getCurrentSize()}},{key:"updateInnerSize",value:function(){var e=this._getCurrentSize();!this.innerSize||this.innerSize.w===e.w&&this.innerSize.h===e.h||(this.innerSize=e,this.dispatchEvent("resize"))}},{key:"_beforeUnloadTimeout",value:function(){this.dispatchEvent("beforeunloadtimeout"),this.startingToUnload=!1}},{key:"_getCurrentSize",value:function(){var e,t,n,r=((e=document.documentElement)||(e=document.body.parentNode))&&"number"==typeof e.clientWidth?e:document.body,o=document.body;return"number"==typeof r.clientWidth?{w:r.clientWidth,h:r.clientHeight}:r===o||(t=Math.max(r.clientWidth,o.clientWidth))>self.innerWidth||(n=Math.max(r.clientHeight,o.clientHeight))>self.innerHeight?{w:o.clientWidth,h:o.clientHeight}:{w:t,h:n}}},{key:"onClick",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onMousemove",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onKeypress",value:function(e){27==e.keyCode&&ii.preventDefault(e),this.userIsIdleDetector.setAsActive()}},{key:"onUnload",value:function(){this.unloading=!0,this.dispatchEvent("unload")}},{key:"onBeforeUnload",value:function(){this.startingToUnload||(this.dispatchEvent("beforeunload"),this.startingToUnload=!0,setTimeout(this.caller("_beforeUnloadTimeout"),1e4))}},{key:"onResize",value:function(){this.updateInnerSize()}}])&&pc(t.prototype,n),r&&pc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function bc(e){return bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(e)}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bc(i)?i:String(i)),r)}var o,i}function gc(e,t){return gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gc(e,t)}function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wc(e){return wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wc(e)}var Sc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gc(e,t)}(i,e);var t,n,r,o=_c(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new Gl),i.instance}}],(n=null)&&mc(t.prototype,n),r&&mc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Oc(e){return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(e)}function Ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Oc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Oc(i)?i:String(i)),r)}var o,i}var Pc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"initialize",value:function(){this.tasks=new Map,ii.addEventListener(vc.topDocument(),"visibilitychange",this.caller("onPageVisibilityChange")),Sc.getInstance().add(this.busyHandler=new Bo)}},{key:"isHidden",value:function(){return"hidden"===vc.topDocument().visibilityState}},{key:"enqueue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.uuidv4();if(this.tasks.has(t))throw new Error("PageVisibilityTaskQueueDuplicatedKey: duplicated key "+t);if("function"!=typeof e)throw new Error("PageVisibilityTaskQueueNotAFunction: Task must be a function");this.isHidden()?(this.tasks.set(t,e),this.busyHandler.setAsBusy()):this._runTask(e)}},{key:"remove",value:function(e){return this.tasks.delete(e)}},{key:"getTaskById",value:function(e){return this.tasks.get(e)}},{key:"_processQueue",value:function(){var e=this;this.tasks.forEach((function(t){return e._runTask(t)})),this.tasks.clear(),this.busyHandler.setAsFree()}},{key:"_runTask",value:function(e){e()}},{key:"onPageVisibilityChange",value:function(){this.isHidden()||this._processQueue()}}],r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"callWhenVisible",value:function(t,n){e.getInstance().enqueue(t,n)}}],n&&Ec(t.prototype,n),r&&Ec(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kc(e){return kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kc(e)}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kc(i)?i:String(i)),r)}var o,i}function jc(e,t){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jc(e,t)}function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fc(e);if(t){var o=Fc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fc(e){return Fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fc(e)}var Rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jc(e,t)}(i,e);var t,n,r,o=Ic(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"initialize",value:function(){this._resetMap()}},{key:"flush",value:function(){this.Delete("map"),this._resetMap()}},{key:"has",value:function(e){return e in this.map}},{key:"getActionCallHash",value:function(e){return N.get("richJson").serialize(e.getMessageToSend(),!0)}},{key:"getOrCreateSharedDataSource",value:function(e,t){var n=this.getActionCallHash(e);if(this.map[n])t&&Delete(t);else{var r,o=this;(r=t||e.createDataSource()).addListener("expire",(function e(){if(!o.map[n])throw new Error("Double remove");delete o.map[n],r.removeListener("expire",e)})),this.map[n]=r}return this.map[n]}},{key:"_resetMap",value:function(){this.map={}}}])&&Tc(t.prototype,n),r&&Tc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Cc(e){return Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(e)}function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ac(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ac(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Cc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cc(i)?i:String(i)),r)}var o,i}function Nc(){return Nc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Nc.apply(this,arguments)}function Lc(e,t){return Lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lc(e,t)}function Mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bc(e);if(t){var o=Bc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bc(e){return Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bc(e)}var Vc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lc(e,t)}(i,e);var t,n,r,o=Mc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n,r){Nc(Bc(i.prototype),"initialize",this).call(this),this.id=e,this.online=n,this.startTime=xt.now(),this.listeners={},this.nextListenerNumber=1,this.remoteListenersToRemove=[],this.delayedResponseManager=new Ru,this.tunnel=new Ml(this.id,t,r),this.busyStateMonitor=Peg(new Gl,{onbusystatechange:this.dispatcher("busystatechange")}),this.busyStateMonitor.add(this.delayedResponseManager),this.busyStateMonitor.add(this.tunnel)}},{key:"registerDelayedResponse",value:function(e){this.delayedResponseManager.add(e)}},{key:"callBeforeExecLater",value:function(e){this.tunnel.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.assertActive(),this.tunnel.ping(e,t)}},{key:"exec",value:function(e,t,n){this.assertActive();var r=this.tunnel.exec(e,t,n);return t||this.removePendingListeners(),r}},{key:"setIsOnline",value:function(e){this.assertActive(),this.online=e,e?this.removePendingListeners():this.cancelRemoveListenersTimeoutIfPresent()}},{key:"getStartTime",value:function(){return this.startTime}},{key:"flushAndHold",value:function(){this.tunnel.flushAndHold()}},{key:"flushAndRelease",value:function(){this.tunnel.flushAndRelease()}},{key:"onAddRemoteListenerError",value:function(e,t){var n=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromMap(e),n.setErrorResponse(t)}},{key:"_addRemoteListenerToServer",value:function(e,t,n,r,o,i){var a=this;this.tunnel.exec(new _o(new Ea(t,"addListener",[n,e.getListenerNumber(),r,o,i]),(function(t){return e.setResponse(t)}),(function(){return a.onAddRemoteListenerError(e)})))}},{key:"addRemoteListener",value:function(e,t,n,r,o,i,a,u){this.assertActive();var l=u||this.nextListenerNumber++,s=new ts(this,l,e,t,n);return $.getInstance().notifyRemoteListenerAdd(s),l in this.listeners&&this.throwRemoteListenerError(this.listeners[l],"duplicateListenerNumber (new: "+s.getDescription()+"), old: "),this.listeners[l]=s,i||this._addRemoteListenerToServer(s,e,t,r,o,a),s}},{key:"cancelRemoveListenersTimeoutIfPresent",value:function(){this.removeListenersTimeout&&(clearTimeout(this.removeListenersTimeout),this.removeListenersTimeout=null)}},{key:"removePendingListeners",value:function(){this.assertActive(),this.cancelRemoveListenersTimeoutIfPresent();var e=this.remoteListenersToRemove;this.remoteListenersToRemove=[];for(var t=0;t<e.length;++t)this._removeRemoteListenerWithoutDoingChecks(e[t])}},{key:"onRemoveListenersTimeout",value:function(){this.removeListenersTimeout=null,this.removePendingListeners()}},{key:"assertActive",value:function(){if(this.deleting)throw new Error("pageSession is being deleted");if(this.Deleted)throw new Error("pageSession is deleted")}},{key:"throwRemoteListenerError",value:function(e,t){throw new Error(t+" ("+e.getDescription()+")")}},{key:"cancelRemoveRemoteListener",value:function(e){this.assertActive(),Ke.remove(this.remoteListenersToRemove,e)||this.throwRemoteListenerError(e,"remoteListener wasn't being removed")}},{key:"_removeRemoteListenerFromServer",value:function(e){this.tunnel.exec(new _o(new Ea(e.getServerClassName(),"removeListener",[e.getListenerNumber()])))}},{key:"_removeRemoteListenerWithoutDoingChecks",value:function(e){var t=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromServer(e),this._removeRemoteListenerFromMap(e),t.setAsRemoved()}},{key:"_removeRemoteListenerFromMap",value:function(e){delete this.listeners[e.getListenerNumber()],e.setAsRemoved()}},{key:"_getListenerFromRemoteListener",value:function(e){return this.listeners[e.getListenerNumber()]}},{key:"_assertActiveAndRemovableListener",value:function(e){this.assertActive();var t=e.getListenerNumber();-1!=this.remoteListenersToRemove.indexOf(e)&&this.throwRemoteListenerError(e,"cannotRemoveAlreadyToBeRemovedListener"),this.listeners[t]||this.throwRemoteListenerError(e,"cannotRemoveNonExistentListener")}},{key:"removeRemoteListenerNow",value:function(e){this._assertActiveAndRemovableListener(e),this._removeRemoteListenerWithoutDoingChecks(e)}},{key:"removeRemoteListenerLater",value:function(e){var t=N.get("config");this._assertActiveAndRemovableListener(e),this.remoteListenersToRemove.push(e),this.online&&!this.removeListenersTimeout&&(this.removeListenersTimeout=setTimeout(this.caller("onRemoveListenersTimeout"),t.WebsiteSettings.liveQueryCleanupTimeout/3))}},{key:"_sendDataToEventHandler",value:function(e,t){this.listeners[e]&&this.listeners[e].handleEvent(t)}},{key:"_handleListenerEvent",value:function(e,t){var n=this;if(this.listeners[e])if(t.msg instanceof Do){var r=t.msg;r.addListener("load",(function(t){return n._sendDataToEventHandler(e,t.data)})),this.registerDelayedResponse(r)}else this._sendDataToEventHandler(e,t.msg)}},{key:"handleEvent",value:function(e){this.assertActive();var t=e.dst;if("number"==typeof t){if(e.serverCallback)return this._scheduleServerCallback(e);this._handleListenerEvent(t,e)}else if("delayedresponse"==t)this.delayedResponseManager.exec(e.msg);else{if("servererror"!=t)throw new Error("Unknown dst: "+t);$.getInstance().notifyServerError(e.msg.randomCode)}}},{key:"_scheduleServerCallback",value:function(e){var t=this,n=JSON.parse(e.serverCallback);e.serverCallback=null;var r=Dc(n,3),o=r[0],i=r[1],a=r[2],u=this._getActionCall(o,i,a),l=Rc.getInstance().getActionCallHash(u);return Pc.getInstance().getTaskById(l)?null:new Promise((function(n,r){var o=function(r){e.msg=null==r?e.msg:r,t._handleListenerEvent(e.dst,e),n()},i=function(){return n()};Pc.callWhenVisible((function(){u instanceof oc&&!Rc.getInstance().has(l)?n():N.get("server").execCall(u,o,i)}),l)}))}},{key:"_getActionCall",value:function(e,t,n){t=t||[],n=n||{};var r=Dc(e.split("."),2),o=r[0],i=r[1],a=o[0],u=o.substring(1);switch(a){case"R":return new fs(u,n);case"O":return new ms(u,i,t,n);case"L":return new oc(u,i,t,n);default:return new Ea(u,i,t)}}},{key:"handleEventError",value:function(e,t){this.listeners[e.dst]&&this.listeners[e.dst].handleEventError(t)}},{key:"isBusy",value:function(){return this.busyStateMonitor.isBusy()}},{key:"uninit",value:function(){this.deleting=!0,this.cancelRemoveListenersTimeoutIfPresent();var e=os.shallowCloneMap(this.listeners);for(var t in e)e[t].setAsRemoved();this.listeners={},this.Delete("tunnel"),this.deleting=!1}}],n&&xc(t.prototype,n),r&&xc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Uc(e){return Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(e)}function Wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Uc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Uc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Uc(i)?i:String(i)),r)}var o,i}function Hc(e,t){return Hc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hc(e,t)}function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zc(e);if(t){var o=zc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zc(e){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zc(e)}var Qc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hc(e,t)}(i,e);var t,n,r,o=Yc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n){this.requestLoadHandler=new no(n),this.pageSession=null,this.online=!0,this.usePermanentConnection=t,this.pageSessionFrequencyValidator=new yo,this.setTabId(e),this.idlenessChangedAndNotNotified=!1,N.get("browserWindow").addListener("useridlechange",this.caller("onUserIdleChange"))}},{key:"sendIdlenessToServer",value:function(){this.idlenessChangedAndNotNotified=!1,this.exec(new _o(new Ea("ICO_session_PageSession","setIdleness",[N.get("browserWindow").getUserIdleness()])))}},{key:"onUserIdleChange",value:function(){this.online?this.sendIdlenessToServer():this.idlenessChangedAndNotNotified=!0}},{key:"isBusy",value:function(){return this.requesting||this.pageSession&&this.pageSession.isBusy()}},{key:"setIsOnline",value:function(e){this.online=e,this.pageSession&&(this.pageSession.setIsOnline(e),this.idlenessChangedAndNotNotified&&this.sendIdlenessToServer())}},{key:"callBeforeExecLater",value:function(e){this.pageSession.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.pageSession.ping(e,t)}},{key:"exec",value:function(e,t,n){return this.pageSession.exec(e,t,n)}},{key:"getPageSession",value:function(){return this.pageSession}},{key:"getPageSessionStartTime",value:function(){return this.pageSession?this.pageSession.getStartTime():null}},{key:"getTabId",value:function(){return this.pageSessionId}},{key:"setTabId",value:function(e,t){this.isBusy();var n=this.getAndEndOldPageSessionIfPresentWithoutDeletingIt();null==e?(this.pageSessionId=null,t||this.requestNewPageSession()):this.startNewPageSession(e),n&&Delete(n),this.wasBusy!=this.isBusy()&&this.dispatchEvent("busystatechange")}},{key:"requestNewPageSession",value:function(){this.requesting||(this.requesting=!0,new Su(this.caller("onCreatePageSessionRequestLoadOk")).send())}},{key:"onCreatePageSessionRequestLoadOk",value:function(e,t){t&&N.get("serverCredentials").setCortex(t),this.setTabId(e),this.requesting=!1}},{key:"getAndEndOldPageSessionIfPresentWithoutDeletingIt",value:function(){if(this.pageSession){this.pageSession.removeListener("busystatechange",this.dispatcher("busystatechange"));var e=this.pageSession;return this.pageSession=null,e}return null}},{key:"onGroupedRequestLoad",value:function(e,t,n){this.requestLoadHandler.handleGroupedResponse(this.pageSession,e,t,n)}},{key:"startNewPageSession",value:function(e){var t=xt.now();this.pageSessionFrequencyValidator.removeOldDates(t),this.pageSessionFrequencyValidator.appendDate(t),this.pageSessionFrequencyValidator.assertNotTooManyPageSessionRenews(t),this.pageSessionId=e,this.pageSession=new Vc(this.pageSessionId,this.caller("onGroupedRequestLoad"),this.online,this.usePermanentConnection),this.pageSession.addListener("busystatechange",this.dispatcher("busystatechange")),this.sendIdlenessToServer(),N.get("AUTO_RELOAD_FILES")&&this.addRemoteListener("test_TestUtils","filechange",this.caller("onFilechange")),this.dispatchEvent("pagesessionrenew")}},{key:"addRemoteListener",value:function(){return this.pageSession.addRemoteListener.apply(this.pageSession,arguments)}},{key:"endPageSession",value:function(){var e=N.get("serverCredentials");if(null!=this.pageSessionId&&!N.get("TEST_ENV")){var t="/_endPageSession?applicationCode="+e.getApplicationCode()+"&version="+e.getPacksVersion(),n={m:[],p:e.getPublicSessionName(),t:this.pageSessionId};fetch(t,{keepalive:!0,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)})}}},{key:"flushAndHold",value:function(){this.pageSession.flushAndHold()}},{key:"flushAndRelease",value:function(){this.pageSession.flushAndRelease()}}],n&&Wc(t.prototype,n),r&&Wc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function qc(e){return qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(e)}function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==qc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qc(i)?i:String(i)),r)}var o,i}function Jc(e,t){return Jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jc(e,t)}function Zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kc(e);if(t){var o=Kc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Kc(e){return Kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kc(e)}N.get("AUTO_RELOAD_FILES")&&(Qc.prototype.onFilechange=function(e){N.get("assetLoader").reloadCssAsset(e.name.replace(/\.css$/,""))});var $c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jc(e,t)}(i,e);var t,n,r,o=Zc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"setRetryMs",value:function(e){i.retryMs=e}}],(n=[{key:"initialize",value:function(e){this.pageSessionManager=e,this.started=!1,this.attempt=0,this.interval=null,this.pingTimeout=null,this.secondsLeftToWait=null,this.tryingRequest=null}},{key:"getValue",value:function(){return{trying:!!this.tryingRequest,secondsLeftToWait:this.secondsLeftToWait}}},{key:"getSecondsLeftToWait",value:function(){return this.secondsLeftToWait}},{key:"retryNow",value:function(){this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"startToCheck",value:function(){if(this.started)throw new Error("Already checking");this.started=!0,this._ping()}},{key:"_getSecondsToWaitForAttempt",value:function(){var e=this.attempt;return 0==e?1:1==e?5:2==e||3==e?15:60}},{key:"_setInterval",value:function(){this.interval=setInterval(this.caller("onInterval"),i.retryMs)}},{key:"_clearInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"_clearIntervalAndRetry",value:function(){this.tryingRequest||(this.secondsLeftToWait=null,this._clearInterval(),this._ping())}},{key:"_clearPingTimeoutIfPresent",value:function(){this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null)}},{key:"_ping",value:function(){++this.attempt,this.pingTimeout=setTimeout(this.caller("onPingTimeout"),4e3),this.tryingRequest=this.pageSessionManager.ping(this.caller("onPingLoad"),this.caller("onPingError"))}},{key:"onInterval",value:function(){--this.secondsLeftToWait,this.secondsLeftToWait<=0&&this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"onPingLoad",value:function(e){this.Deleted||(this.onPingEnd(),this.dispatchEvent("online"))}},{key:"onPingEnd",value:function(e){this._clearPingTimeoutIfPresent(),this.tryingRequest=null}},{key:"onPingError",value:function(e){if(!this.Deleted)return this.onPingEnd(),this.secondsLeftToWait=this._getSecondsToWaitForAttempt(),this._setInterval(),!0}},{key:"onPingTimeout",value:function(){this.pingTimeout=null,this.tryingRequest&&this.tryingRequest.abort()}},{key:"uninit",value:function(){this.interval&&this._clearInterval(),this._clearPingTimeoutIfPresent()}}])&&Gc(t.prototype,n),r&&Gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xc(i)?i:String(i)),r)}var o,i}function tf(e,t){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tf(e,t)}function nf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rf(e);if(t){var o=rf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rf(e){return rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rf(e)}$c.retryMs=1e3;var of=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tf(e,t)}(i,e);var t,n,r,o=nf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n){this.logoutUrl=n,this.status=Peg(new fr,{onpollrequired:this.caller("onStatusPollRequired"),onpollrequiredend:this.caller("onStatusPollRequiredEnd"),ononline:this.caller("onStatusOnline"),onuserless:this.caller("onStatusUserLess"),onpagesessionless:this.caller("onStatusPageSessionLess"),onnotonline:this.caller("onStatusNotOnline")}),this.pageSessionManager=Peg(new Qc(e,t,this.status),{onpagesessionrenew:this.caller("onPagesessionrenew"),onbusystatechange:this.dispatcher("busystatechange")}),N.get("browserWindow").addListener("unload",this.caller("onUnload")),N.get("assetLoader").addListener("offline",this.caller("onAssetLoaderOffline")),N.get("assetLoader").addListener("packagenotloadedoffline",this.caller("onAssetLoaderPackageNotLoadedDueToOffline"))}},{key:"flushAndHold",value:function(){this.pageSessionManager.flushAndHold()}},{key:"flushAndRelease",value:function(){this.pageSessionManager.flushAndRelease()}},{key:"callBeforeExecLater",value:function(e){this.status.isOnline()?this.pageSessionManager.callBeforeExecLater(e):e()}},{key:"notifyLoginTabId",value:function(e,t,n){var r=N.get("serverCredentials");r.setPublicSessionName(e),r.setCortex(t),this.pageSessionManager.setTabId(n)}},{key:"notifyCouldNotLoadContentDueToOffline",value:function(e){$.getInstance().handleRemoteException(this.status.createRemoteException(e))}},{key:"onAssetLoaderPackageNotLoadedDueToOffline",value:function(){$.getInstance().handleRemoteException(this.status.createRemoteException("triedToLoadPackageWhileOffline"))}},{key:"onAssetLoaderOffline",value:function(){this.status.setAsOffline(),$.getInstance().handleRemoteException(this.status.createRemoteException("couldNotLoadPackage"))}},{key:"getCredentials",value:function(){return N.get("serverCredentials")}},{key:"execCall",value:function(e,t,n,r){var o=new _o(e,t,n);this.status.isOnline()?this.pageSessionManager.exec(o,r):o.handleError(this.status.createRemoteException(o.getCallDescription()))}},{key:"exec",value:function(e,t){this.execCall(new Ea(e.className,e.method,e.parameters),e.onload,e.onerror,t)}},{key:"execAsync",value:function(e,t,n,r){var o=this;return new Promise((function(i,a){o.execCall(new Ea(e,t,n),i,(function(e){var t=new Error("execAsync: "+e.getTechnicalDescription());t.remoteException=e,a(t)}),r)}))}},{key:"logout",value:function(e){this.isOnline()||this._isOtherUserLogged()?(this.dispatchEvent("logout"),location.href=e?this.logoutUrl+"/"+e:this.logoutUrl):$.getInstance().handleRemoteException(this.status.createRemoteException("logout"))}},{key:"onPagesessionrenew",value:function(e){this.status.isPageSessionLessOrUserLess()&&this.status.setAsOnline(),this.dispatchEvent("pagesessionrenew"),N.get("userTrail").logPageSessionRenew(),$.getInstance().log("Page session renew")}},{key:"getPageSession",value:function(){return this.pageSessionManager.getPageSession()}},{key:"addRemoteListener",value:function(){return this.pageSessionManager.addRemoteListener.apply(this.pageSessionManager,arguments)}},{key:"getTabId",value:function(){return this.pageSessionManager.getTabId()}},{key:"getPageSessionStartTime",value:function(){return this.pageSessionManager.getPageSessionStartTime()}},{key:"onOfflineCheckerOnline",value:function(){this.status.setAsOnline()}},{key:"getOfflineChecker",value:function(){return this.offlineChecker}},{key:"isOnline",value:function(){return this.status.isOnline()}},{key:"_isOtherUserLogged",value:function(){return this.status.isOtherUserLogged()}},{key:"onStatusPollRequired",value:function(){this.offlineChecker=Peg(new $c(this.pageSessionManager),{ononline:this.caller("onOfflineCheckerOnline")}),this.offlineChecker.startToCheck()}},{key:"onStatusPollRequiredEnd",value:function(){this.dispatchEvent("pollrequiredend"),this.offlineChecker&&this.Delete("offlineChecker")}},{key:"onStatusOnline",value:function(){N.get("assetLoader").setAsOnline(),this.dispatchEvent("online"),this.pageSessionManager.setIsOnline(!0)}},{key:"onStatusUserLess",value:function(){this.pageSessionManager.setTabId(null,!0)}},{key:"onStatusPageSessionLess",value:function(){this.pageSessionManager.setTabId(null,!1)}},{key:"onStatusNotOnline",value:function(){this.dispatchEvent("offline"),this.pageSessionManager.setIsOnline(!1)}},{key:"onUnload",value:function(){this.pageSessionManager.endPageSession()}},{key:"isBusy",value:function(){return this.pageSessionManager.isBusy()}}],n&&ef(t.prototype,n),r&&ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function af(e){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(e)}function uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==af(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===af(i)?i:String(i)),r)}var o,i}function lf(e,t){return lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lf(e,t)}function sf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cf(e);if(t){var o=cf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cf(e){return cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cf(e)}var ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lf(e,t)}(i,e);var t,n,r,o=sf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"initialize",value:function(){this.monitoredEvents=["click","mousedown","keydown","keyup"],ni.getInstance().addListener("stoppeddomevent",this.caller("onStoppedEvent")),this.start()}},{key:"start",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){ii.addEventListener(t,n,e.dispatcher(n))}))}},{key:"stop",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){ii.removeEventListener(t,n,e.dispatcher(n))}))}},{key:"onStoppedEvent",value:function(e){Ke.hasElement(this.monitoredEvents,e.type)&&this.dispatchEvent(e.type,e)}}])&&uf(t.prototype,n),r&&uf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function pf(e){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(e)}function df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==pf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===pf(i)?i:String(i)),r)}var o,i}function yf(e,t){return yf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yf(e,t)}function hf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vf(e);if(t){var o=vf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vf(e){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vf(e)}var bf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yf(e,t)}(i,e);var t,n,r,o=hf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.trail=[],Peg(ff.getInstance(),{onkeydown:this.caller("onDocumentKeyDown"),onmousedown:this.caller("onDocumentMouseDown")}),N.get("defaultErrorHandler").addListener("error",this.caller("onError")),N.get("defaultErrorHandler").addListener("errorreportok",this.caller("onErrorReportOk")),N.get("browserWindow").addListener("beforeunload",this.caller("onBrowserWindowBeforeUnload"))}},{key:"logUserChange",value:function(){this.add("user change")}},{key:"onBrowserWindowBeforeUnload",value:function(){this.add("before unload")}},{key:"onErrorReportOk",value:function(e){this.add("Error reporter accepted js error: "+e.reportUrl)}},{key:"onError",value:function(e){this.add("defaultErrorHandler reported: "+e.error)}},{key:"logPageSessionRenew",value:function(){this.add("page session renew")}},{key:"logPageLocationChange",value:function(e){this.add('location: "'+e.replace(/"/g,'\\"')+'"')}},{key:"onDocumentKeyDown",value:function(e){var t;13==e.keyCode?t="enter":9==e.keyCode?t="tab":27==e.keyCode&&(t="esc"),t&&this.add(t+" keydown at: "+p.describeValue(ii.getElementFromEvent(e)))}},{key:"onDocumentMouseDown",value:function(e){this.add(ii.getButtonFromEvent(e)+" click at "+p.describeValue(ii.getElementFromEvent(e)))}},{key:"get",value:function(){return this.trail}},{key:"add",value:function(e){this.trail.length>200&&this.trail.shift(),this.trail.push({date:xt.now(),description:e})}}])&&df(t.prototype,n),r&&df(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function mf(e){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(e)}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==mf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===mf(i)?i:String(i)),r)}var o,i}function _f(e,t){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_f(e,t)}function wf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sf(e);if(t){var o=Sf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sf(e){return Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sf(e)}var Of=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_f(e,t)}(i,e);var t,n,r,o=wf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getLocation",value:function(){return this.getLocationFromQueryString(this.lastQueryString)}},{key:"initialize",value:function(e){this.topDocument=vc.topDocument(),this.applicationCode=e,this.lastQueryString=this.getUrlHash(),this.enableInterval(),this.history=[]}},{key:"getHistory",value:function(){return this.history}},{key:"disableInterval",value:function(){this.interval&&(clearInterval(this.interval),delete this.interval)}},{key:"enableInterval",value:function(){this.interval=setInterval(this.caller("checkForUrlChanges"),1e3)}},{key:"getLocationFromQueryString",value:function(e){return"Home"==e?"":e}},{key:"callOnHashChange",value:function(e){this.onhashchange&&this.onhashchange(this.getLocationFromQueryString(e))}},{key:"goTo",value:function(e,t){var n=at.isWhitespace(e)?"Home":e;if(this.lastQueryString!=n){if(this.topDocument.defaultView&&this.topDocument!==document&&(t?history.replaceState:history.pushState))t?this.topDocument.defaultView.history.replaceState(null,this.topDocument.title,"#"+n):this.topDocument.defaultView.history.pushState(null,this.topDocument.title,"#"+n);else{var r=this.topDocument.location.protocol+"//"+this.topDocument.location.host+this.topDocument.location.pathname+this.topDocument.location.search+"#"+n;t?this.topDocument.location.replace(r):this.topDocument.location=r}this.lastQueryString=this.getUrlHash(),t&&this.history.pop(),this.history.push(n)}}},{key:"checkForUrlChanges",value:function(){var e=this.getUrlHash();e!=this.lastQueryString&&(this.lastQueryString=e,this.history.push(e),this.callOnHashChange(e))}},{key:"getUrlHash",value:function(){var e,t=this.topDocument.location.href,n=t.indexOf("#");if(-1==n)e="";else try{e=decodeURIComponent(t.substr(n+1))}catch(r){e=t.substr(n+1)}return e}}])&&gf(t.prototype,n),r&&gf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);function Ef(e){return Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(e)}function Pf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ef(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ef(i)?i:String(i)),r)}var o,i}function kf(e,t){return kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kf(e,t)}function Tf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jf(e);if(t){var o=jf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ef(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jf(e){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jf(e)}var If,Ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(i,e);var t,n,r,o=Tf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n&&Pf(t.prototype,n),r&&Pf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Q);function Rf(e){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Rf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Rf(i)?i:String(i)),r)}var o,i}function Df(e,t){return Df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Df(e,t)}function Af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xf(e);if(t){var o=xf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xf(e){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xf(e)}Ff.DOWN_KEY=40,Ff.UP_KEY=38,Ff.LEFT_KEY=37,Ff.RIGHT_KEY=39,Ff.ENTER_KEY=13,Ff.ESC_KEY=27,Ff.BACKSPACE_KEY=8,Ff.SPACE_KEY=32,Ff.HOME_KEY=36,Ff.END_KEY=35,Ff.TAB_KEY=9,Ff.ALT_KEY=18,Ff.DELETE_KEY=46,Ff.CTRL_KEY=17,Ff.SHIFT_KEY=16,Ff.F_KEY=70,Ff.S_KEY=83;var Nf,Lf,Mf,Bf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Df(e,t)}(i,e);var t,n,r,o=Af(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){if(!If)throw new Error("Must setup an instance first.");return If}},{key:"setupInstance",value:function(e,t){if(If)throw new Error("Instance already exists.");If=new i(e,t)}}],(n=[{key:"initialize",value:function(e,t){this.navigation=e,this.navigation.onhashchange=this.caller("onHashChange"),this.confirmFollowingExternalLinks=t,this.pageWidget=null}},{key:"onPageContentAdded",value:function(e){this.setMainContent(e.content)}},{key:"onHashChange",value:function(e){var t=new U({location:e});this.dispatchEvent("locationstatechange",t),t.getDefaultPrevented()||this.setLocation(e,!0)}},{key:"onContentLocationChange",value:function(e){this.navigation.goTo(this._getContentLocation(),e&&e.replaceState)}},{key:"setMainContent",value:function(e){this.content&&this.content.removeListener("locationchange",this.caller("onContentLocationChange")),this.content=e,this.content.addListener("locationchange",this.caller("onContentLocationChange"))}},{key:"setInterceptor",value:function(e){this.interceptor=e}},{key:"_checkForExternalLocation",value:function(e){return i.isExternalUrl(e)}},{key:"setLocation",value:function(e,t,n,r){n||this._checkForExternalLocation(e)?this.handleExternalLocation(e,"_blank",null,r):this._handleInternalLocation(e,t)}},{key:"_handleInternalLocation",value:function(e,t){var n=e.match(/^.?#(.*)/)||e.match(/^http.+\/\/.+\/#(.*)/);if(n&&(e=n[1]),!this.interceptor||!this.interceptor(e)){try{this.content&&(this.content.setLocation||e)&&(this.content.setLocation(e),e=e||this._getContentLocation())}catch(e){if("pageNotFound"!=e.message)throw e;this.showPageNotFound()}finally{t||this.navigation.goTo(e)}var r=new U({newLocation:e});this.dispatchEvent("locationchange",r),N.get("userTrail").logPageLocationChange(e)}}},{key:"handleExternalLocation",value:function(e,t,n,r){var o=new U;this.dispatchEvent("externallinkclick",o),o.getDefaultPrevented()||(this._checkForExternalLocation(e)&&!r&&this.confirmFollowingExternalLinks?this.showExternalUrlConfirm(e,t,n):this.goToExternalLocation(e,t,n))}},{key:"showExternalUrlConfirm",value:function(e,t,n){this.dispatchEvent("showexternalurlconfirm",new Ff({location:e,target:t,otherOptionsForExternalLocations:n}))}},{key:"goToExternalLocation",value:function(e,t,n){e=e.startsWith("www.")?"http://"+e:e;var r=t||Ei.generateUniqueId("windowTarget");n?window.open(e,r,n):window.open(e,r)}},{key:"showPageNotFound",value:function(){this.dispatchEvent("showpagenotfound")}},{key:"setPageWidget",value:function(e){this.pageWidget&&this.pageWidget.removeListener("contentadded",this.caller("onPageContentAdded")),this.pageWidget=e,this.pageWidget&&this.pageWidget.addListener("contentadded",this.caller("onPageContentAdded"))}},{key:"getPageWidget",value:function(){return this.pageWidget}},{key:"onPageNotFoundCloseClick",value:function(){this.setLocation(this.getLastVisitedLocation())}},{key:"_getContentLocation",value:function(){var e;return this.content&&this.content.getLocation&&(e=this.content.getLocation()),e||""}},{key:"getLocation",value:function(){return this.navigation.getLocation()}},{key:"getNavigation",value:function(){return this.navigation}},{key:"getLastVisitedLocation",value:function(){return this.content?this.content.getChild().getLastVisitedLocation():""}},{key:"getPreviousVisitedLocation",value:function(){return this.content?this.content.getChild().getLocatedWidget().getPreviousVisitedLocation():""}}])&&Cf(t.prototype,n),r&&Cf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);Bf.isExternalUrl=(Mf=function(e){return Nf.href=e.startsWith("www.")?"http://"+e:e,Nf.hostname},function(e){try{return Nf||(Nf=document.createElement("a"),Lf=Mf(window.location.href)),Lf!==Mf(e)}catch(n){var t=new Error("InvalidUrl: "+e);if("uiUnitTest"==N.get("page").getApplicationCode())throw t;return N.get("defaultErrorHandler").handleCatchedException(t),!0}});var Vf=n(24996),Uf=n(68806),Wf=n.n(Uf);function Hf(e){return Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(e)}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Hf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Hf(i)?i:String(i)),r)}var o,i}function zf(e,t){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zf(e,t)}function Qf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qf(e);if(t){var o=qf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qf(e){return qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qf(e)}var Gf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zf(e,t)}(i,e);var t,n,r,o=Qf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.reportedErrorCount=0}},{key:"watchForErrorsAndNotify",value:function(){N.get("defaultErrorHandler").setReportErrorCallbackAndReportPending(this.caller("_report")),$.getInstance().addListener("servererror",this.caller("onServerError"))}},{key:"onServerError",value:function(e){N.get("server").exec({className:"squealer_Squealer",method:"addPageInformationToServerErrorReport",parameters:[e.randomCode,{location:N.get("page")?Bf.getInstance().getLocation():"",trail:N.get("userTrail")?N.get("userTrail").get():"",pageSessionId:N.get("server").getTabId()}]},!0),N.get("defaultErrorHandler").notifyError("phpReportedAnError: "+this._getSquealerUrlForReportRandomCode(e.randomCode))}},{key:"_report",value:function(e){var t={fileName:e.getFileName(),lineNumber:e.getLineNumber(),message:e.getMessage(),name:e.getName(),stack:e.getStack(),originalStack:e.getOriginalStack()},n=!1;N.get("DEBUG_MODE")&&(n=!0),(this.reportedErrorCount<10||n)&&(++this.reportedErrorCount,N.get("userTrail")&&(N.get("userTrail").add("reporting error number "+this.reportedErrorCount),10==this.reportedErrorCount&&N.get("userTrail").add("Disabled error reporting after "+this.reportedErrorCount+" errors")),this.attemptToLogError(t,N.get("page")?Bf.getInstance().getLocation():"",N.get("userTrail")?N.get("userTrail").get():""))}},{key:"_getSquealerUrlForReportRandomCode",value:function(e){var t=N.get("config");return t&&t.squealer_Squealer&&t.squealer_Squealer.publicUrl?t.squealer_Squealer.publicUrl+"view.php?randomCode="+e:"Error handler config Url is not available. Report randomCode: "+e}},{key:"onLogErrorLoad",value:function(e){if(!e.isError()){var t=e.get();if(!t.error){var n=t.msg;if(!n)return void N.get("page").info("Error while reporting an error (empty router responses)");var r=n[0];if(!r)return void N.get("page").info("Error while reporting an error (no report response)");var o=N.get("richJson");N.get("defaultErrorHandler").notifyReportedError(this._getSquealerUrlForReportRandomCode(r));var i=o.unserialize(e.requestResponse.responseText);N.get("userTrail").add("randomCode: "+i.msg)}}}},{key:"attemptToLogError",value:function(e,t,n,r){var o=this,a=r||0;if(vu.isAvailable())this.logError(e,t,n);else{if(!(a<i.MAX_LOG_ATTEMPTS))throw e;setTimeout((function(){o.attemptToLogError(e,t,n,function(e){throw new TypeError('"'+e+'" is read-only')}("attempt"))}),i.LOG_ATTEMPTS_INTERVAL)}}},{key:"logError",value:function(e,t,n){if(this.shouldLogError(e)){var r=N.get("serverCredentials");new vu(new ou("POST","/_logJsError?applicationCode="+(r?r.getApplicationCode():"")+"&version="+r.getPacksVersion()+"&trackerCode="+r.getTrackerCode())).send({error:[e,{location:t,trail:n}]},this.caller("onLogErrorLoad"))}}},{key:"setShouldLogErrorCallback",value:function(e){this.shouldLogErrorCallback=e}},{key:"shouldLogError",value:function(e){return!this.shouldLogErrorCallback||!1!==this.shouldLogErrorCallback(e)}}])&&Yf(t.prototype,n),r&&Yf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);Gf.MAX_LOG_ATTEMPTS=10,Gf.LOG_ATTEMPTS_INTERVAL=1e3;var Jf,Zf=n(78879),Kf=(Jf=function(e,t){return Jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Jf(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Jf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))},Xf=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kf(t,e),t.prototype.setAsOnline=function(){},t.prototype.setAsOffline=function(){},t}(Q),tp=function(e){function t(t,n){var r=e.call(this)||this;return r.location=n,N.set("applicationCode",t),r}return Kf(t,e),t.prototype.getDomNode=function(){return document.body},t.prototype.getLocation=function(){return this.location},t.prototype.alert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];N.get("DEBUG_MODE")&&console.log("page alert: ",e)},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];N.get("DEBUG_MODE")&&console.log("page alert: ",e)},t}(Q),np=function(){function e(){}return e.prototype.config=function(e,t,n,r,o,i){this._initializeGlobalParams(t);var a=new oe(new ce(e,t),n,r,o,i);N.set("serverCredentials",a)},e.prototype._initializeGlobalParams=function(e){var t=new Of(e),n=new Zf.Z,r=n.get("avature.portal.urlPath")+"/"+n.get("avature.portal.page"),o=new tp(e,r);N.set("browserWindow",new vc),N.set("userTrail",new bf),N.set("assetLoader",new ep),N.set("page",o),Bf.setupInstance(o,t),N.set("richJson",new de),Vn.registerDefaultCodecs()},e.prototype.connect=function(){return $f(this,void 0,void 0,(function(){var e=this;return Xf(this,(function(t){return[2,new Promise((function(t,n){document.addEventListener("DOMContentLoaded",(function(){var n=(new Vf.Z).get("synapserBootstrap");if(n.enabled){n&&(e.pageSessionId=n.pagesessionid?n.pagesessionid:null,e.logoutUrl=n.logouturl?n.logouturl:null,e.config(n.applicationname,n.applicationcode,n.publicsessionname,parseInt(n.cortex,10),n.trackercode,n.packversion)),N.set("config",{WebsiteSettings:{liveQueryCleanupTimeout:4e4},router:{minPendingMessagesDelay:1e3}});var r=Ie.peg(new of(e.pageSessionId,!0,e.logoutUrl),{onpagesessionrenew:function(){var e=Ie.peg(new Gf,{shouldLogErrorCallback:function(e){return e.fileName.includes("portalpacks")}});try{e.watchForErrorsAndNotify()}catch(e){}N.set("server",r),t(r)},onoffline:function(){Wf().getInstance().dispatchEvent("serveroffline")}})}}))}))]}))}))},e}();const rp={connectServer:function(){return $f(this,void 0,void 0,(function(){return Xf(this,(function(e){switch(e.label){case 0:return[4,(new np).connect()];case 1:return[2,e.sent()]}}))}))}};function op(e){return op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(e)}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==op(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==op(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===op(i)?i:String(i)),r)}var o,i}function ap(){return ap="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ap.apply(this,arguments)}function up(e,t){return up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},up(e,t)}function lp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sp(e);if(t){var o=sp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===op(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sp(e){return sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sp(e)}var cp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&up(e,t)}(i,e);var t,n,r,o=lp(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){ap(sp(i.prototype),"initialize",this).call(this,new Ea(e,t,n))}}])&&ip(t.prototype,n),r&&ip(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(To),fp=null,pp=null,dp=null;const yp={connect:function(){return fp?pp?Promise.resolve():fp:(fp=rp.connectServer().then((function(e){dp=e,pp=!0})),fp)},exec:function(e,t,n,r){return void 0===r&&(r=!1),new Promise((function(o,i){dp.exec({className:e,method:t,parameters:n,onload:function(e){o(e)},onerror:function(e){i(e)}},r)}))},datasource:function(e,t,n){return new Promise((function(r,o){var i=new cp(e,t,n);i.addListener("receive",(function(){r(i.get())})),i.addListener("error",(function(e){o(e)}))}))}};var hp=n(85498),vp=n(20745),bp=(n(19601),n(67294)),mp=function(){return mp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mp.apply(this,arguments)};const gp=function(e){var t=e.text,n=e.onCloseButtonClick;return(0,hp.BX)("div",mp({className:"session-dialog-titlebar ui-dialog-titlebar"},{children:[(0,hp.tZ)("span",mp({className:"session-dialog-title ui-dialog-title"},{children:t})),(0,hp.BX)("button",mp({type:"button",className:"session-button session-dialog-titlebar-close ui-button ui-dialog-titlebar-close",title:"Close",onClick:n},{children:[(0,hp.tZ)("span",{className:"session-button-icon session-icon-closethick ui-button-icon ui-icon-closethick"}),"Close"]}))]}))};var _p=function(){return _p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_p.apply(this,arguments)};const wp=function(e){var t=e.text;return(0,hp.tZ)("div",_p({id:"timeoutSessionPopup",className:"session-dialog-content ui-dialog-content"},{children:(0,hp.tZ)("p",{children:t})}))};var Sp=function(){return Sp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sp.apply(this,arguments)};const Op=function(e){var t=e.text,n=e.onClick;return(0,hp.tZ)("button",Sp({type:"button",className:"session-button ui-button",onClick:n},{children:t}))};var Ep=function(){return Ep=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ep.apply(this,arguments)};const Pp=function(e){var t=e.sessionTimeoutPopup,n=e.sessionExtensionPopup,r=(0,bp.useState)(null),o=r[0],i=r[1],a=(0,bp.useState)(null),u=a[0],l=a[1],s=(0,bp.useState)(null),c=s[0],f=s[1];function p(e){return e?setTimeout((function(){i(e)}),e.getTimeout()):null}function d(){var e=p(t),r=p(n);return l(e),f(r),{timeoutTimerId:e,extendTimerId:r}}function y(){o.handleMainButtonClick(),o===n&&(i(null),clearTimeout(u),clearTimeout(c),d())}function h(){o===t&&o.handleMainButtonClick(),i(null)}return(0,bp.useEffect)((function(){var e=d();return function(){clearTimeout(e.timeoutTimerId),clearTimeout(e.extendTimerId)}}),[]),o&&(0,hp.BX)("div",{children:[(0,hp.BX)("div",Ep({tabIndex:-1,role:"dialog",className:"session-dialog ui-dialog","aria-describedby":"timeoutSessionPopup","aria-modal":"true"},{children:[(0,hp.tZ)(gp,{text:o.getTitle(),onCloseButtonClick:function(){return h()}}),(0,hp.tZ)(wp,{text:o.getMessage()}),(0,hp.tZ)("div",Ep({className:"session-dialog-buttonpane ui-dialog-buttonpane"},{children:(0,hp.BX)("div",Ep({className:"session-dialog-buttonset ui-dialog-buttonset"},{children:[o===n&&(0,hp.tZ)(Op,{text:n.getOkButtonText(),onClick:function(){return h()}}),(0,hp.tZ)(Op,{text:o.getMainButtonText(),onClick:function(){return y()}})]}))}))]})),(0,hp.tZ)("div",{className:"session-widget-overlay ui-widget-overlay"})]})};const kp=function(){function e(e,t,n,r){this.timeout=e,this.title=t,this.message=n,this.mainButtonText=r}return e.prototype.getTimeout=function(){return this.timeout},e.prototype.getTitle=function(){return this.title},e.prototype.getMessage=function(){return this.message},e.prototype.getMainButtonText=function(){return this.mainButtonText},e.prototype.handleMainButtonClick=function(){throw new Error("Unimplemented method: BasePopUp.handleMainButtonClick")},e}();var Tp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const jp=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r,o)||this;return a.portalUrl=i,a}return Tp(t,e),t.prototype.handleMainButtonClick=function(){window.location.href=this.portalUrl},t}(kp);var Ip=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fp=function(e){function t(t,n,r,o,i,a){var u=e.call(this,t,n,r,o)||this;return u.okButtonText=i,u.isSynapserEnabled=a,u}return Ip(t,e),t.prototype.getOkButtonText=function(){return this.okButtonText},t.prototype.handleMainButtonClick=function(){this.extendSession()},t.prototype.extendSession=function(){this.isSynapserEnabled?this.extendSessionWithSynapser():this.extendSessionWithoutSynapser()},t.prototype.extendSessionWithSynapser=function(){yp.connect().then((function(){yp.exec("ICO_session_PageSession","setIdleness",[N.get("browserWindow").getUserIdleness()])}))},t.prototype.extendSessionWithoutSynapser=function(){var e=new Zf.Z;pjQuery.post("/"+e.get("avature.portal.id")+"/_extendSession")},t}(kp);const Rp=Fp;var Cp=document.createElement("div");document.body.appendChild(Cp);var Dp=(0,vp.s)(Cp),Ap=Wf().getInstance(),xp=new Vf.Z;function Np(){var e=xp.get("showAlertOnSessionTimeout");return new jp(e.timeout,e.title,e.message,e.mainbutton,e.portalurl)}function Lp(){var e=xp.get("showAlertOnSessionExtend");return e?new Rp(e.timeout,e.title,e.message,e.mainbutton,e.okbutton,e.issynapserenabled):null}function Mp(e){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Mp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Mp(i)?i:String(i)),r)}var o,i}if(Ap.addEventHandler(Wf().EVENT_LOAD_NAME,(function(){Dp.render((0,hp.tZ)(Pp,{sessionTimeoutPopup:Np(),sessionExtensionPopup:Lp()}))}),Wf().PRIORITY_MEDIUM),!Vp)var Vp=n(68806);var Up=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"replaceEmailShareButtonHref",value:function(e,t){var n,r=document.querySelectorAll(".shareButton--email");r&&r.forEach((function(r){n=window.location.href.includes(e)?document.title:r.getAttribute("data-jobname")+" - "+t,r.href=r.href.replace("subject=","subject="+encodeURIComponent(n))}))}}])&&Bp(t.prototype,n),r&&Bp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wp=Vp.getInstance(),Hp=new Vf.Z,Yp=new Zf.Z;Wp.addEventHandler(Vp.EVENT_LOAD_NAME,(function(){var e=Hp.get("replaceEmailShareButtonHref");e&&(new Up).replaceEmailShareButtonHref(e.jobdetailpagename,Yp.get("avature.portal.name"))}),Vp.PRIORITY_MEDIUM);var zp=n(34039);function Qp(e){return Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(e)}function qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qp(i)?i:String(i)),r)}var o,i}var Gp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chatbotInjectionData=t}var t,n,r;return t=e,(n=[{key:"inject",value:function(){document.querySelector("body").insertAdjacentHTML("beforeend",this.chatbotInjectionData.html)}}])&&qp(t.prototype,n),r&&qp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();zp.Z.getEventManager().attachToLoadEvent((function(){var e=(new Vf.Z).get("chatbotInjection");e&&new Gp(e).inject()}));function Jp(e){return Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(e)}function Zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jp(i)?i:String(i)),r)}var o,i}var Kp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieUserConsentPopupData=t}var t,n,r;return t=e,(n=[{key:"initialise",value:function(){o().getInstance().initialise({content:{description:this.cookieUserConsentPopupData.description,acceptAll:this.cookieUserConsentPopupData.acceptall,rejectAll:this.cookieUserConsentPopupData.rejectall,save:this.cookieUserConsentPopupData.save,cancel:this.cookieUserConsentPopupData.cancel,settings:this.cookieUserConsentPopupData.settings,cookiesDisabled:this.cookieUserConsentPopupData.cookiesdisabled},showOnTop:!1})}}])&&Zp(t.prototype,n),r&&Zp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();zp.Z.getEventManager().attachToLoadEvent((function(){var e=(new Vf.Z).get("cookieUserConsentPopupData");e&&new Kp(e).initialise()}));function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function Xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$p(i)?i:String(i)),r)}var o,i}if(!ed)var ed=n(68806);var td=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,n,r;return t=e,n=[{key:"validate",value:function(){var e=this,t=new Zf.Z;grecaptcha.ready((function(){grecaptcha.execute(e.key,{action:"submit"}).then((function(e){pjQuery.post("/"+t.get("avature.portal.id")+"/_visitValidator",{token:e},null,"json")}))}))}}],n&&Xp(t.prototype,n),r&&Xp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nd=ed.getInstance(),rd=new Vf.Z;nd.addEventHandler(ed.EVENT_LOAD_NAME,(function(){var e=rd.get("executeReCaptcha");e&&new td(e.key).validate()}),ed.PRIORITY_MEDIUM);function od(e){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}function id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==od(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===od(i)?i:String(i)),r)}var o,i}if(!ad)var ad=n(68806);var ud=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"makeDateFieldWorkWithTimestamp",value:function(e){this._convertFromTimestampOnLoad(e),this._convertToTimestampOnSubmit(e)}},{key:"_convertToTimestampOnSubmit",value:function(e){pjQuery("form").submit((function(){var t=this;pjQuery(this).find('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.val();if(n){n=n.split("-");var r=parseInt(n[1],10)-1,o=parseInt(new Date(n[0],r,n[2]).getTime()/1e3,10);pjQuery("<input>").attr({type:"hidden",name:e.attr("name")+"Timestamp",value:o}).appendTo(t)}}))}))}},{key:"_convertFromTimestampOnLoad",value:function(e){var t=this;pjQuery('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.attr("value");if(t._shouldConvertFromTimstampToDateString(n)){var r=LuxonDateTime.fromMillis(1e3*n).toFormat("yyyy-MM-dd");e.val(r),e.attr("value",r)}}))}},{key:"_shouldConvertFromTimstampToDateString",value:function(e){return""!=e&&-1==e.indexOf("-")}}])&&id(t.prototype,n),r&&id(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ld=ad.getInstance(),sd=new Vf.Z;ld.addEventHandler(ad.EVENT_LOAD_NAME,(function(){var e=sd.get("makeExpiresDateFieldWorkWithTimestamp");e&&e.inputname&&(new ud).makeDateFieldWorkWithTimestamp(e.inputname);var t=sd.get("makeStartsDateFieldWorkWithTimestamp");t&&t.inputname&&(new ud).makeDateFieldWorkWithTimestamp(t.inputname)}),ad.PRIORITY_MEDIUM);function cd(e){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(e)}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==cd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===cd(i)?i:String(i)),r)}var o,i}if(!pd)var pd=n(68806);var dd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"scheduleAutomaticRedirectionToHome",value:function(e,t){setTimeout((function(){window.location.href="/"+e}),t)}}])&&fd(t.prototype,n),r&&fd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yd=pd.getInstance(),hd=new Vf.Z;function vd(e){return vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(e)}function bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gd(r.key),r)}}function md(e,t,n){return(t=gd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gd(e){var t=function(e,t){if("object"!==vd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vd(t)?t:String(t)}if(yd.addEventHandler(pd.EVENT_LOAD_NAME,(function(){var e=hd.get("automaticRedirectionToHome");e&&(new dd).scheduleAutomaticRedirectionToHome(e.url,e.timeout)}),pd.PRIORITY_MEDIUM),!_d)var _d=n(68806);var wd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),md(this,"initialized",!1),md(this,"$widgets",{})}var t,n,r;return t=e,n=[{key:"init",value:function(){this.initialized||(this.initialized=!0,this._doInit())}},{key:"_doInit",value:function(){var e=this;pjQuery('select[data-rel="wsp"]').each((function(){var t=pjQuery(this);e._setCurrentStepId(t,t.val()),t.on("change",(function(){e._updateStep(t,e._getRequestData(t.data("id")))}))}))}},{key:"_getRequestData",value:function(e){var t=this._findForm(e),n=pjQuery('input[name="tokenField"]',t).val(),r={personId:t.data("personid"),jobId:t.data("jobid")},o=pjQuery('select[data-rel="wsp"]',t);return r.newStep=o.val(),r.isPrevious=o.find(":selected").data("previous"),void 0!==n&&n.length&&(r.tokenField=n),r}},{key:"_getFormAction",value:function(e){return this._findForm(e).attr("action")}},{key:"_findForm",value:function(e){return this.$widgets.hasOwnProperty(e)||(this.$widgets[e]=this._findElementOrException("form#"+e)),this.$widgets[e]}},{key:"_updateStep",value:function(e,t){var n=e.data("id"),r=this._getFormAction(n);if(!r.length)throw"Endpoint not found for picker '"+n+"'";this._removeErrorLabel(n);var o=this;pjQuery.post(r,t).done((function(e){o._fillPickerOptions(n,e.steps.next,e.steps.previous,e.texts)})).fail((function(t){var r=t.responseText.replace(/^"|"$/g,"");o._showErrorLabel(n,r),e.val(e.attr("data-current"))}))}},{key:"_fillPickerOptions",value:function(e,t,n,r){t instanceof Array||(t=[]),n instanceof Array||(n=[]);var o,i,a=this._findElementOrException('select[data-id="'+e+'"]'),u=document.createDocumentFragment();for(o in t)t.hasOwnProperty(o)&&((i=document.createElement("option")).value=t[o].id,i.text=t[o].name,i.selected=t[o].selected,i.dataset.previous=!1,u.appendChild(i),i.selected&&this._setCurrentStepId(a,i.value));if(n.length){var l=document.createElement("optgroup");for(o in l.label=r.previousSteps,n)(i=document.createElement("option")).value=n[o].id,i.text=n[o].name,i.dataset.previous=!0,l.appendChild(i);u.appendChild(l)}a.empty().append(u)}},{key:"_showErrorLabel",value:function(e,t){var n=this._findElementOrException('select[data-id="'+e+'"]'),r=pjQuery("<span>").addClass("errorMessage").attr({id:this._getErrorLabelId(e)}).text(t);n.after(r)}},{key:"_removeErrorLabel",value:function(e){this._findElement("#"+this._getErrorLabelId(e)).remove()}},{key:"_getErrorLabelId",value:function(e){return e+"-errorMessage"}},{key:"_findElementOrException",value:function(e){var t=this._findElement(e);if(!t.length)throw'Selector "'+e+'" not found';return t}},{key:"_findElement",value:function(e){return pjQuery(e)}},{key:"_setCurrentStepId",value:function(e,t){e.attr("data-current",t)}}],n&&bd(t.prototype,n),r&&bd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();_d.getInstance().addEventHandler(_d.EVENT_LOAD_NAME,(function(){document.querySelectorAll('select[data-rel="wsp"]')&&(new wd).init()}),_d.PRIORITY_MEDIUM);function Sd(e){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(e)}function Od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Sd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Sd(i)?i:String(i)),r)}var o,i}if(!Ed)var Ed=n(68806);var Pd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addCaptchaError",value:function(e){if(e){var t=pjQuery("<span/>",{class:"errorMessage",html:e});pjQuery(".g-recaptcha").before(t)}}}])&&Od(t.prototype,n),r&&Od(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),kd=Ed.getInstance(),Td=new Vf.Z;kd.addEventHandler(Ed.EVENT_LOAD_NAME,(function(){var e=Td.get("captchaError");e&&(new Pd).addCaptchaError(e.error)}),Ed.PRIORITY_MEDIUM);function jd(e){return jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(e)}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jd(i)?i:String(i)),r)}var o,i}if(!Fd)var Fd=n(68806);var Rd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"renderChart",value:function(e,t){AvatureChart.render(e,JSON.parse(t))}}])&&Id(t.prototype,n),r&&Id(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Cd=Fd.getInstance(),Dd=new Vf.Z;Cd.addEventHandler(Fd.EVENT_LOAD_NAME,(function(){var e=Dd.getAllByDataValue("type","avatureChart");e&&e.forEach((function(e){var t=Dd.get(e.id);(new Rd).renderChart(t.id,t.json)}))}),Fd.PRIORITY_MEDIUM);function Ad(e){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(e)}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ad(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ad(i)?i:String(i)),r)}var o,i}n(7556);var Nd=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._dictionary=this._buildDictionaryFromData(t),this._uploadButtonId=n,this._errorContainerId=r,this._methodContainerCssClass=o}var t,n,r;return t=e,(n=[{key:"_buildDictionaryFromData",value:function(e){return this._getCommonDictionaryFromData(e)}},{key:"_getCommonDictionaryFromData",value:function(e){var t=document.getElementById(e);return{continue:t.dataset.continue,fieldIsRequired:t.dataset.fieldisrequired,noFileSelected:t.dataset.nofileselected,requirePrivacyPolicyAcceptance:t.dataset.requireprivacypolicyacceptance,requirePrivacyPolicyAcceptanceText:t.dataset.requireprivacypolicyacceptancetext}}},{key:"_appendFieldContainerToForm",value:function(e,t,n){var r=this._getForm(),o=this._buildManualMethodContainer(),i=this._buildInputFieldSpecContainer(),a=this._buildErrorContainer(this._dictionary.fieldIsRequired,n),u=this._buildErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);i.append(e),o.append(u),t.append(a),i.append(t),o.append(i),o.hide(),r.append(o),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendContinueButton",value:function(){var e=this._buildUploadResumeButton(this._dictionary.continue);this._getFieldSetContainer().append(e)}},{key:"_getForm",value:function(){return pjQuery("#manualRegisterMethodsForm")}},{key:"_submitForm",value:function(){this._getForm().submit()}},{key:"_attachResumeRegistrationFileModeIfNeeded",value:function(){if(!this._getResumeRegistrationFileModeInput().length){var e=pjQuery("<input/>",{class:"resumeRegistrationFileMode",type:"hidden",name:"radio"});this._getForm().prepend(e)}}},{key:"_setResumeRegistrationFileMode",value:function(e){this._getResumeRegistrationFileModeInput().val(e)}},{key:"_getResumeRegistrationFileModeInput",value:function(){return pjQuery("input.resumeRegistrationFileMode")}},{key:"_buildManualMethodContainer",value:function(){return pjQuery("<fieldset/>",{id:this._id+"FieldSetContainer",class:"manualRegisterMethodExtra Section"})}},{key:"_buildInputFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpec",class:"fieldSpec"})}},{key:"_buildUploadResumeButton",value:function(e){var t=pjQuery("<button/>",{id:this._uploadButtonId,class:"button button--primary button--default",type:"submit",value:e,text:e}),n=pjQuery("<div/>",{id:this._uploadButtonId+"Container",class:"fieldSpec button-bar"}).append(t);return n.hide(),n}},{key:"_buildErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._errorContainerId,class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_buildErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._errorContainerId+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_buildRequiredFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",text:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildRequiredHtmlFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",html:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildAnotherFileButtonContainer",value:function(e,t){return pjQuery("<div/>",{class:"fieldContainer"}).append([pjQuery("<div/>",{class:"selectedFile"}).append([pjQuery("<span/>",{id:e,text:this._dictionary.noFileSelected}),pjQuery("<a/>",{id:t,class:"button button--secondary button--small",text:this._dictionary.chooseAnotherFile,tabindex:0,role:"button"})])])}},{key:"_buildLabelRequiredIcon",value:function(e,t){return pjQuery("<span/>",{class:"labelRequiredIcon","aria-hidden":!0,text:" *"})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("fieldset.manualRegisterMethodExtra").each((function(){pjQuery(this).hide()})),pjQuery("#"+this._id+"FieldSetContainer").show(),pjQuery("a.list__item__link").each((function(){pjQuery(this).removeClass("manualRegisterMethodSelected")})),this._getManualMethodButton().addClass("manualRegisterMethodSelected")}},{key:"_getManualMethodButton",value:function(){return pjQuery("#"+this._id)}},{key:"_getUploadButton",value:function(){return pjQuery("#"+this._uploadButtonId)}},{key:"_getUploadButtonContainer",value:function(){return pjQuery("#"+this._uploadButtonId+"Container")}},{key:"_getErrorContainer",value:function(){return pjQuery("#"+this._errorContainerId)}},{key:"_getFieldSetContainer",value:function(){return pjQuery("#"+this._id+"FieldSetContainer")}},{key:"_getFieldContainer",value:function(){return pjQuery("#"+this._id+"FieldSpec")}},{key:"_showInputErrorContainer",value:function(){this._getErrorContainer().show(),this._getFieldContainer().addClass("hasErrors")}},{key:"_hideInputErrorContainer",value:function(){this._getErrorContainer().hide(),this._getFieldContainer().removeClass("hasErrors")}},{key:"_enableKeyboardClickForAccessibility",value:function(e){e.keypress((function(e){var t=e.keyCode?e.keyCode:e.which;13!==t&&32!==t||(e.preventDefault(),this.click())}))}}])&&xd(t.prototype,n),r&&xd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ld=Nd;function Md(e){return Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Md(e)}function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(n),!0).forEach((function(t){Ud(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ud(e,t,n){return(t=Hd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hd(r.key),r)}}function Hd(e){var t=function(e,t){if("object"!==Md(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Md(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Md(t)?t:String(t)}function Yd(){return Yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yd.apply(this,arguments)}function zd(e,t){return zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zd(e,t)}function Qd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qd(e);if(t){var o=qd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Md(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qd(e){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qd(e)}if(!Gd)var Gd=n(68806);n(7556);var Jd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zd(e,t)}(i,e);var t,n,r,o=Qd(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e,"uploadPasteResume","pasteManualMethodErrorContainer","resumePasteField")).textAreaId="resumePaste",t}return t=i,(n=[{key:"prepare",value:function(){this._appendTextAreaContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=Yd(qd(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={copyAndPasteResume:t.dataset.copyandpasteresume};return Vd(Vd({},n),r)}},{key:"_appendTextAreaContainer",value:function(){var e=pjQuery("<label/>",{class:"requiredField",for:this.textAreaId,text:this._dictionary.copyAndPasteResume}).append(this._buildLabelRequiredIcon()),t=pjQuery("<div/>",{class:"fieldContainer"}).append(pjQuery("<textarea/>",{id:this.textAreaId,name:"resumePaste","aria-required":!0}));this._appendFieldContainerToForm(e,t,this._dictionary.copyAndPasteResume)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getTextArea().focus()})),this._enableKeyboardClickForAccessibility(t),this._getUploadButton().click((function(t){t.preventDefault(),e._isResumePasted()?(e._setResumeRegistrationFileMode("paste"),e._submitForm()):(e._getUploadButtonContainer().hide(),e._getErrorContainer().show())})),this._getTextArea().on("keyup change focusout",(function(t){pjQuery(this).val()?(e._getUploadButtonContainer().show(),e._hideInputErrorContainer()):(e._getUploadButtonContainer().hide(),e._showInputErrorContainer())}))}},{key:"_isResumePasted",value:function(){return!!this._getTextArea().val()}},{key:"_getTextArea",value:function(){return pjQuery("#"+this.textAreaId)}}])&&Wd(t.prototype,n),r&&Wd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ld);Gd.getInstance().addEventHandler(Gd.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="paste"]');e&&e.forEach((function(e){new Jd(e.id).prepare()}))}),Gd.PRIORITY_MEDIUM);n(29254);function Zd(e){return Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Zd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Zd(i)?i:String(i)),r)}var o,i}function $d(){return $d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ty(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},$d.apply(this,arguments)}function Xd(e,t){return Xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xd(e,t)}function ey(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ty(e);if(t){var o=ty(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ty(e)}n(7556);var ny=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xd(e,t)}(i,e);var t,n,r,o=ey(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,n,r))._checkboxErrorContainerId="checkboxErrorContainer",a._checkboxInputId="checkBox",a}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_getRegisterMethodUploadType")}},{key:"_isFileAvailable",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_isFileAvailable")}},{key:"_appendCheckboxToForm",value:function(e,t,n){var r=this._getFieldSetContainer(),o=this._buildCheckboxFieldSpecContainer(),i=this._buildCheckboxErrorContainer(this._dictionary.fieldIsRequired,n),a=this._buildCheckboxErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);r.append(a),o.append(e),e.append(t),o.append(i),r.append(o),r.hide(),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendPrivacyPolicyAcceptanceContainer",value:function(){var e=this._checkboxInputId+this._getRegisterMethodUploadType(),t=this._buildRequiredHtmlFieldLabel(this._dictionary.requirePrivacyPolicyAcceptanceText,e),n=pjQuery("<input/>",{id:e,type:"checkbox",name:e,"aria-required":!0}),r=this._buildPrivacyPolicyAcceptanceCheckboxContainer();r.prepend(n),this._appendCheckboxToForm(r,t,this._dictionary.requirePrivacyPolicyAcceptanceText)}},{key:"_buildPrivacyPolicyAcceptanceCheckboxContainer",value:function(){return pjQuery("<div/>",{class:"fieldContainerCheckbox"})}},{key:"_buildCheckboxErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType()+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("#"+this._id+"Checkbox").show(),this._getUploadButtonContainer().show(),$d(ty(i.prototype),"_showCurrentManualMethodContainerAndHideMoreManualMethods",this).call(this)}},{key:"_getCheckbox",value:function(){return pjQuery("#"+this._checkboxInputId+this._getRegisterMethodUploadType())}},{key:"_setCheckboxEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance){var e=this,t=this._getCheckbox();t.click((function(){t.prop("checked")?e._hideCheckboxErrorContainer():e._showCheckboxErrorContainer()}))}}},{key:"_showCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().show(),this._getCheckboxErrorContainer().addClass("hasErrors")}},{key:"_getCheckboxErrorContainer",value:function(){return pjQuery("#"+this._checkboxErrorContainerId+this._getRegisterMethodUploadType())}},{key:"_hideCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().hide(),this._getCheckboxErrorContainer().removeClass("hasErrors")}},{key:"_buildCheckboxFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpecCheckbox",class:"fieldSpecCheckbox"})}},{key:"_buildCheckboxErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType(),class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_setUploadButtonEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance)this._setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox();else{var e=this;this._getUploadButton().click((function(t){t.preventDefault(),e._isFileAvailable()?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._showInputErrorContainer()}))}}},{key:"_setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox",value:function(){var e=this,t=this._getUploadButton(),n=this._getCheckbox();t.click((function(t){t.preventDefault(),e._isFileAvailable()&&n.prop("checked")?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._isFileAvailable()||n.prop("checked")?n.prop("checked")?e._isFileAvailable()||e._showInputErrorContainer():e._showCheckboxErrorContainer():(e._showInputErrorContainer(),e._showCheckboxErrorContainer())}))}}])&&Kd(t.prototype,n),r&&Kd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ld);const ry=ny;const oy=function(){var e=[{name:"fakeDropboxResume.txt",link:"fakeDropboxResumeLink"}];function t(){}function n(e){this.options=e}return t.prototype.createChooseButton=function(e){return new n(e)},n.prototype.click=function(){this.options.success(e)},{getApi:function(){return(new Vf.Z).get("enableDropboxDummyApi")?new t:Dropbox}}}();function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){ly(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ly(e,t,n){return(t=cy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cy(r.key),r)}}function cy(e){var t=function(e,t){if("object"!==iy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==iy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===iy(t)?t:String(t)}function fy(){return fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fy.apply(this,arguments)}function py(e,t){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},py(e,t)}function dy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yy(e);if(t){var o=yy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yy(e){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yy(e)}if(!hy)var hy=n(68806);n(7556);var vy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&py(e,t)}(i,e);var t,n,r,o=dy(i);function i(e,t,n,r,a,u){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,"uploadDropboxResume","dropboxManualMethodErrorContainer","resumeDropboxField"))._appKey=t,l._allowedFileExtensions=n,l._dropboxLinkId=r,l._dropboxFileNameId=a,l._dropboxHiddenContainerId=u,l._dropboxLinkNameContainerId="dropboxLinkNameContainer",l._dropboxPickerAnotherId="dropboxPickerAnother",l}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){return"dropbox"}},{key:"prepare",value:function(){this._appendDropboxContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInputs();var e=this._buildDropboxButton();this._attachEvents(e)}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=fy(yy(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromDropbox:t.dataset.fromdropbox};return uy(uy({},n),r)}},{key:"_appendHiddenInputs",value:function(){this._getForm().append([pjQuery("<input/>",{type:"hidden",name:this._dropboxFileNameId,id:this._dropboxFileNameId}),pjQuery("<input/>",{type:"hidden",name:this._dropboxLinkId,id:this._dropboxLinkId})])}},{key:"_appendDropboxContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDropbox,this._dropboxLinkId),t=this._buildAnotherFileButtonContainer(this._dropboxLinkNameContainerId,this._dropboxPickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDropbox)}},{key:"_attachEvents",value:function(e){var t=this,n=this._getManualMethodButton();n.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(n);var r=pjQuery("#"+this._dropboxPickerAnotherId);r.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(r),this._setUploadButtonEvents(),this._setCheckboxEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#dropboxLink").val()}},{key:"_initDropboxPicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods(),e.click(),pjQuery("#"+this._dropboxPickerAnotherId).focus()}},{key:"_buildDropboxButton",value:function(){var e=this,t={success:function(t){pjQuery("#"+e._dropboxFileNameId).val(t[0].name),pjQuery("#"+e._dropboxLinkId).val(t[0].link),pjQuery("#"+e._dropboxPickerAnotherId).show(),pjQuery("#"+e._dropboxLinkNameContainerId).text(t[0].name),e._hideInputErrorContainer(),e._getUploadButtonContainer().show(),e._getUploadButton().focus()},cancel:function(){pjQuery("#"+e._dropboxLinkId).val()?(e._getUploadButtonContainer().show(),e._getUploadButton().focus()):(e._getUploadButtonContainer().hide(),e._showInputErrorContainer(),e._setResumeRegistrationFileMode(""),pjQuery("#"+e._dropboxPickerAnotherId).focus())},linkType:"direct",extensions:JSON.parse(this._allowedFileExtensions)},n=oy.getApi().createChooseButton(t);return pjQuery("#"+this._dropboxHiddenContainerId).append(n),n}}])&&sy(t.prototype,n),r&&sy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ry);hy.getInstance().addEventHandler(hy.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="dropbox"]');e&&e.forEach((function(e){new vy(e.id,e.dataset.appkey,e.dataset.allowedmimetypes,e.dataset.linkid,e.dataset.filenameid,e.dataset.hiddencontainerid).prepare()}))}),hy.PRIORITY_MEDIUM);function by(e){return by="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(e)}function my(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?my(Object(n),!0).forEach((function(t){_y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _y(e,t,n){return(t=Sy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sy(r.key),r)}}function Sy(e){var t=function(e,t){if("object"!==by(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==by(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===by(t)?t:String(t)}function Oy(){return Oy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ky(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Oy.apply(this,arguments)}function Ey(e,t){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ey(e,t)}function Py(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ky(e);if(t){var o=ky(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===by(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ky(e){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ky(e)}if(!Ty)var Ty=n(68806);n(7556);var jy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ey(e,t)}(i,e);var t,n,r,o=Py(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,"uploadFileResume","fileManualMethodErrorContainer","resumeFileField"))._fileInputId="resumeFile",n._allowedFileExtensions=t,n._fileNameContainerId="fileNameContainer",n._filePickerAnotherId="filePickerAnother",n}return t=i,(n=[{key:"prepare",value:function(){this._appendInputFileContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=Oy(ky(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromComputer:t.dataset.fromcomputer};return gy(gy({},n),r)}},{key:"_appendInputFileContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromComputer,this._fileInputId),t=pjQuery("<input/>",{id:this._fileInputId,type:"file",name:this._fileInputId,"aria-required":!0,accept:this._allowedFileExtensions});t.hide();var n=this._buildAnotherFileButtonContainer(this._fileNameContainerId,this._filePickerAnotherId);n.prepend(t),this._appendFieldContainerToForm(e,n,this._dictionary.fromComputer)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getFileInput().click(),pjQuery("#"+e._filePickerAnotherId).focus()})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._filePickerAnotherId);n.click((function(t){t.preventDefault(),e._getManualMethodButton().click()})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents(),this._getFileInput().change((function(){pjQuery(this).val()?(e._hideInputErrorContainer(),e._getUploadButton().focus(),pjQuery("#"+e._fileNameContainerId).text(this.files[0].name)):(e._setResumeRegistrationFileMode(""),e._getFileInput().focus(),pjQuery("#"+e._fileNameContainerId).text(e._dictionary.noFileSelected))}))}},{key:"_getRegisterMethodUploadType",value:function(){return"file"}},{key:"_isFileAvailable",value:function(){return!!this._getFileInput().val()}},{key:"_getFileInput",value:function(){return pjQuery("#"+this._fileInputId)}}])&&wy(t.prototype,n),r&&wy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ry);Ty.getInstance().addEventHandler(Ty.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="file"]');e&&e.forEach((function(e){new jy(e.id,e.dataset.allowedfilextensions).prepare()}))}),Ty.PRIORITY_MEDIUM);const Iy=function(){var e={access_token:"fakeAccessToken"},t={id:"fakeDriveResumeId",title:"fakeDriveResume.txt"};function n(){}function r(){}function o(e){this.options=e,e.onSelect(t)}return n.prototype.auth=new r,r.prototype.getToken=function(){return e},{getApi:function(){return(new Vf.Z).get("enableGoogleDriveDummyApi")?new n:gapi},createFilePicker:function(e){return(new Vf.Z).get("enableGoogleDriveDummyApi")?new o(e):new FilePicker(e)}}}();function Fy(e){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(e)}function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(Object(n),!0).forEach((function(t){Dy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dy(e,t,n){return(t=xy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xy(r.key),r)}}function xy(e){var t=function(e,t){if("object"!==Fy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fy(t)?t:String(t)}function Ny(){return Ny="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=By(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ny.apply(this,arguments)}function Ly(e,t){return Ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ly(e,t)}function My(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=By(e);if(t){var o=By(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},By(e)}if(!Vy)var Vy=n(68806);n(7556);var Uy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ly(e,t)}(i,e);var t,n,r,o=My(i);function i(e,t,n,r,a,u,l){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,"uploadDriveResume","driveManualMethodErrorContainer","resumeDriveField"))._appKey=t,s._clientId=n,s._scope=r,s._exportTpye=a,s._allowedFileExtensions=u,s._driveFileNameId=l,s._driveLinkNameContainerId="driveLinkNameContainer",s._drivePickerAnotherId="drivePickerAnother",s}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){return"drive"}},{key:"prepare",value:function(){this._appendGoogleDriveContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInput(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=Ny(By(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromDrive:t.dataset.fromdrive};return Cy(Cy({},n),r)}},{key:"_appendHiddenInput",value:function(){this._getForm().append(pjQuery("<input/>",{type:"hidden",name:this._driveFileNameId,id:this._driveFileNameId}))}},{key:"_appendGoogleDriveContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDrive,this._driveFileNameId),t=this._buildAnotherFileButtonContainer(this._driveLinkNameContainerId,this._drivePickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDrive)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(t){t.preventDefault(),e._initDrivePicker(e._id)})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._drivePickerAnotherId);n.click((function(t){t.preventDefault(),e._initDrivePicker(e._drivePickerAnotherId)})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#driveFileId").val()}},{key:"_initDrivePicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods();var t=this;Iy.createFilePicker({apiKey:this._appKey,clientId:this._clientId,scope:this._scope,buttonEl:document.getElementById(e),onSelect:function(e){var n=e.title;e&&e.id&&(t.addFileDataToDownload(e),pjQuery("#"+t._drivePickerAnotherId).show(),t._getUploadButtonContainer().show(),t._hideInputErrorContainer()),pjQuery("#"+t._driveFileNameId).val(n),pjQuery("#"+t._driveLinkNameContainerId).text(e.title),t._getUploadButton().focus()},onCancel:function(){pjQuery("#"+t._driveLinkId).val()?(t._getUploadButtonContainer().show(),t._getUploadButton().focus()):(t._getUploadButtonContainer().hide(),t._showInputErrorContainer(),t._setResumeRegistrationFileMode(""),pjQuery("#"+t._drivePickerAnotherId).focus())},extensions:this._allowedFileExtensions}),pjQuery("#"+this._drivePickerAnotherId).focus()}},{key:"addFileDataToDownload",value:function(e){if(e&&e.id){var t=Iy.getApi().auth.getToken().access_token,n=this._getForm();this.createInputIfNotExists({name:"driveFileId",id:"driveFileId",value:e.id,type:"hidden"}).appendTo(n),this.createInputIfNotExists({name:"driveAccessToken",id:"driveAccessToken",value:t,type:"hidden"}).appendTo(n)}}},{key:"createInputIfNotExists",value:function(e){var t=pjQuery("#"+e.id);return 0===t.length&&(t=pjQuery("<input>")),t.attr(e),t}}])&&Ay(t.prototype,n),r&&Ay(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ry);Vy.getInstance().addEventHandler(Vy.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="drive"]');e&&e.forEach((function(e){new Uy(e.id,e.dataset.appkey,e.dataset.clientid,e.dataset.scope,e.dataset.exportmimetype,e.dataset.allowedmimetypes,e.dataset.filenameid).prepare()}))}),Vy.PRIORITY_MEDIUM);function Wy(e){return Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(e)}function Hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Wy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wy(i)?i:String(i)),r)}var o,i}function Yy(e,t){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yy(e,t)}function zy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qy(e);if(t){var o=Qy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qy(e)}if(!qy)var qy=n(68806);n(7556);var Gy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t)}(i,e);var t,n,r,o=zy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"prepare",value:function(){this._attachEvents()}},{key:"_attachEvents",value:function(){var e=this._getManualMethodButton();this._enableKeyboardClickForAccessibility(e)}}])&&Hy(t.prototype,n),r&&Hy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ld);qy.getInstance().addEventHandler(qy.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="later"]');e&&e.forEach((function(e){new Gy(e.id).prepare()}))}),qy.PRIORITY_MEDIUM);function Jy(e){return Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(e)}function Zy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jy(i)?i:String(i)),r)}var o,i}if(!Ky)var Ky=n(68806);var $y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"inject",value:function(e,t){var n=document.getElementById(t);(n=n.contentWindow||n.contentDocument.document||n.contentDocument).document.open(),n.document.write(e),n.document.close()}}])&&Zy(t.prototype,n),r&&Zy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ky.getInstance().addEventHandler(Ky.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('iframe[class="pCustomFrame"]');if(e){var t=new $y;e.forEach((function(e){t.inject(e.dataset.content,e.id)}))}}),Ky.PRIORITY_MEDIUM);function Xy(e){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(e)}function eh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xy(i)?i:String(i)),r)}var o,i}if(!th)var th=n(68806);var nh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureButtonClick",value:function(e){var t=document.getElementById("default-apply-button");t&&(t.onclick=window[e])}}])&&eh(t.prototype,n),r&&eh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rh=th.getInstance(),oh=new Vf.Z;rh.addEventHandler(th.EVENT_LOAD_NAME,(function(){var e=oh.get("linkedinDefaultApplyButton");e&&(new nh).configureButtonClick(e.onclickmethod)}),th.PRIORITY_MEDIUM);function ih(e){return ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(e)}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ih(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ih(i)?i:String(i)),r)}var o,i}if(!uh)var uh=n(68806);var lh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"formatWidth",value:function(e){for(var t=document.querySelectorAll('div.progress__bar[data-progress="'+e+'%"]'),n=0;n<t.length;n++)t[n].style.width=e+"%"}}],n&&ah(t.prototype,n),r&&ah(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),sh=uh.getInstance(),ch=new Vf.Z;sh.addEventHandler(uh.EVENT_LOAD_NAME,(function(){var e=ch.getAllByDataValue("type","listProgressBarData");if(e){var t=new lh;e.forEach((function(e){t.formatWidth(e.dataset.progress)}))}}),uh.PRIORITY_MEDIUM);function fh(e){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(e)}function ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fh(i)?i:String(i)),r)}var o,i}if(!dh)var dh=n(68806);var yh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureDelegateWidget",value:function(e){pjQuery("#delegateWidget").autocomplete({source:function(t,n){pjQuery.ajax({type:"POST",url:"/"+e+"/_portalUserApi?delegates=true",dataType:"json",cache:!1,xhrFields:{withCredentials:!0},data:JSON.stringify({key:t.term}),success:function(e){n(pjQuery.map(e,(function(e){return{label:e.longName,shortName:e.shortName,value:e.id}})))}})},minLength:2,select:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1},focus:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1}});var t=pjQuery("#delegateEnabled"),n=pjQuery("#delegateNotify");if(t.length&&n.length){var r=this;t.on("change",(function(){r._delegateEnableChecker(t,n)})),this._delegateEnableChecker(t,n)}}},{key:"_delegateEnableChecker",value:function(e,t){e.prop("checked")?t.attr("disabled",!1):(t.attr("disabled","disabled"),t.attr("checked",!1))}}])&&ph(t.prototype,n),r&&ph(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),hh=dh.getInstance(),vh=new Vf.Z;hh.addEventHandler(dh.EVENT_LOAD_NAME,(function(){var e=vh.get("portalsDelegateWidget");e&&(new yh).configureDelegateWidget(e.portalurlpath)}),dh.PRIORITY_HIGH);function bh(e){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(e)}function mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bh(i)?i:String(i)),r)}var o,i}if(!gh)var gh=n(68806);var _h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureSelect",value:function(e){var t=document.querySelector('select[name="template"]');t&&t.addEventListener("change",(function(){var n=e[t.options[t.selectedIndex].value],r=document.getElementById("jobTemplateWidgetDescription");if(r&&r.parentNode.removeChild(r),0!==t.selectedIndex&&n){var o=document.createElement("span");o.setAttribute("id","jobTemplateWidgetDescription");var i=document.createTextNode(n);o.appendChild(i),document.getElementById("jobTemplateWidget").appendChild(o)}}))}}])&&mh(t.prototype,n),r&&mh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wh=gh.getInstance(),Sh=new Vf.Z;wh.addEventHandler(gh.EVENT_LOAD_NAME,(function(){var e=Sh.get("jobTemplateWidget");e&&(new _h).configureSelect(JSON.parse(e.templatesdatajson))}),gh.PRIORITY_MEDIUM);function Oh(){}Oh.assertIsValid=function(e){if(!(e&&e instanceof Oh))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBaseLegacy.")},Oh.prototype.getType=function(){throw new Error("notImplementedError")},Oh.prototype.toString=function(){throw new Error("notImplementedError")},Oh.prototype.isEmpty=function(){return!1};const Eh=Oh;function Ph(){Eh.call(this)}Ph.TYPE="FieldEmptyValueLegacy",Ph.prototype=Object.create(Eh.prototype),Ph.prototype.getType=function(){return Ph.TYPE},Ph.prototype.toString=function(){return""},Ph.prototype.isEmpty=function(){return!0};const kh=Ph;function Th(){}Th.registerFieldDependency=function(e,t,n){PortalHtml.elementExists(e)&&PortalHtml.elementExists(t)&&(n!==Th.TYPE_DISPLAY&&n!==Th.TYPE_VALUES||(Th._existsFieldWithDependencies(t)||(Th._fieldsDependencies[t]=[]),-1===Th._fieldsDependencies[t].indexOf(e)&&(Th._fieldsDependencies[t][e]=[]),-1===Th._fieldsDependencies[t][e].indexOf(n)&&Th._fieldsDependencies[t][e].push(n)))},Th.getChildDependentFieldsOf=function(e){return Th._existsFieldWithDependencies(e)?Th._fieldsDependencies[e]:[]},Th._existsFieldWithDependencies=function(e){return e in Th._fieldsDependencies},Th.TYPE_DISPLAY="Display",Th.TYPE_VALUES="Values",Th._fieldsDependencies={};const jh=Th;function Ih(e){return Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(e)}function Fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ih(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ih(i)?i:String(i)),r)}var o,i}var Rh=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r}var t,n,r;return t=e,(n=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&Fh(t.prototype,n),r&&Fh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ch=Rh;function Dh(){}Dh.isFieldRegistered=function(e){return e in Dh._fields},Dh.registerField=function(e,t){return!(Dh.isFieldRegistered(e)||!PortalHtml.elementExists(e))&&(Dh._fields[e]=t,!0)},Dh.getFieldValue=function(e){return Dh._getFieldOrDie(e).getValue()},Dh.getFieldValueByType=function(e,t){var n=Dh._getFieldOrDie(e).getValue();if(n.getType()!==t&&n.getType()!==kh.TYPE)throw new Error("invalidValueError: field "+e+" returns "+n.getType()+" values");return n},Dh.getFieldValueForVisibilityCondition=function(e){return Dh._getFieldOrDie(e).getValueForVisibilityCondition()},Dh.setFieldValue=function(e,t){Dh._getFieldOrDie(e).setValue(t)},Dh.hasValue=function(e){var t=Dh.getField(e);if(null!==t)return t.hasValue();Dh._throwFieldNotRegisteredException(e)},Dh.cloneForNewTableRow=function(e,t,n){PortalString.isString(n)||(n="");var r=e+"-0"+n,o=e+"-"+t+n;if(null===Dh.getField(o)){var i=Dh.getField(r);null===i&&Dh._throwFieldNotRegisteredException(e),i.cloneForNewTableRow(o,t)}},Dh.isVisible=function(e){var t=Dh.getField(e);return null!==t&&t.isVisible()},Dh.setFieldVisibilityConditionFromParams=function(e,t,n,r){if(Dh.isFieldRegistered(e)){var o=Dh.getField(e),i=new Ch(t,n,r);o.addVisibilityCondition(i)}},Dh.onFieldValueChange=function(e){if(Dh.isFieldRegistered(e)){var t,n,r,o=jh.getChildDependentFieldsOf(e);for(n in o)if(o.hasOwnProperty(n))for(t=0;t<o[n].length;t++)r=o[n][t],Dh._addFieldAsPendingToBeUpdated(n,r,e);var i=Dh._getFieldsPendingToBeUpdated(e);for(t=0;t<i.length;t++){n=i[t];var a=Dh.getField(n);null!==a&&(a.onRelatedFieldValueChange(e),Dh._removePendingToBeUpdatedField(n))}}},Dh.fieldAcceptsValueType=function(e,t){return Dh._getFieldOrDie(e).fieldAcceptsValueType(t)},Dh.isSomeFieldBeingUpdated=function(){for(var e in Dh._fields)if(Dh._fields.hasOwnProperty(e)&&Dh.getField(e).isBeingUpdated())return!0;return!1},Dh.getField=function(e){return Dh.isFieldRegistered(e)?Dh._fields[e]:null},Dh.dispatchBeforeSubmit=function(){for(var e in Dh._fields)Dh.getField(e).onBeforeSubmit()},Dh._throwFieldNotRegisteredException=function(e){throw new Error("tryToAccessNonRegisteredField: "+e)},Dh._addFieldAsPendingToBeUpdated=function(e,t,n){-1===Dh._fieldsPendingToBeUpdated.indexOf(e)?Dh._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n}:Dh._fieldsPendingToBeUpdated[e].dependencyType===jh.TYPE_DISPLAY&&t===jh.TYPE_VALUES&&(Dh._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n})},Dh._getFieldsPendingToBeUpdated=function(e){var t=[];for(var n in Dh._fieldsPendingToBeUpdated){if(Dh._fieldsPendingToBeUpdated.hasOwnProperty(n))Dh._fieldsPendingToBeUpdated[n].parentFieldId===e&&t.push(n)}return t},Dh._removePendingToBeUpdatedField=function(e){var t=Dh._fieldsPendingToBeUpdated.indexOf(e);t>-1&&Dh._fieldsPendingToBeUpdated.splice(t,1)},Dh._getFieldOrDie=function(e){var t=Dh.getField(e);if(null!==t)return t;Dh._throwFieldNotRegisteredException(e)},Dh._fieldsPendingToBeUpdated=[],Dh._fields={};const Ah=Dh;function xh(e){return xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(e)}function Nh(){}Nh.evaluateForField=function(e,t){if(!t)return!1;for(var n=!0,r=t.length-1;r>=0;r--){var o=t[r],i=o.getParentDependencyFieldId(),a=Ah.getFieldValueForVisibilityCondition(i);if(!(n=Ah.isVisible(i)&&(a instanceof Array?this._evaluateArrayedValue(a,o.getValue(),o.getOperator()):this._evaluateValue(a,o.getValue(),o.getOperator()))))break}var u=e.isVisible();return n?!u&&(e.show(),!0):!!u&&(e.hide(),!0)},Nh._evaluateArrayedValue=function(e,t,n){return"all"===n||"=="===n?this._arrayEquals(e,t):"!="===n?!this._arrayEquals(e,t):"any"===n?this._arrayContainsAny(e,t):"none"===n?!this._arrayContainsAny(e,t):void 0},Nh._arrayContainsAny=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(Nh._parseValueForEvaluation(e[n])==Nh._parseValueForEvaluation(t[r]))return!0;return!1},Nh._arrayEquals=function(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0;r<t.length;r++){for(var o=!1,i=0;i<e.length&&!o;i++)Nh._parseValueForEvaluation(t[r])==Nh._parseValueForEvaluation(e[i])&&(o=!0);n=o&&n}return n},Nh._evaluateValue=function(e,t,n){return e=Nh._parseValueForEvaluation(e),"=="===n?(null!==e||null===t)&&(e==t||!(e<t||e>t)):"!="===n?e!=t:"any"===n||"none"===n?this._evaluateArrayedValue([e],t,n):"isSet"===n?this._evaluateValueIsSet(e,t):"isEmpty"===n?!this._isValueSet(e):void 0},Nh._evaluateValueIsSet=function(e,t){return this._isWhenIsSetConditionValue(t)?this._isValueSet(e):this._isWhenIsNotSetConditionValue(t)?!this._isValueSet(e):void 0},Nh._isValueSet=function(e){return""!==e&&null!=e},Nh._isWhenIsSetConditionValue=function(e){return"1"===e},Nh._isWhenIsNotSetConditionValue=function(e){return"2"===e},Nh._parseValueForEvaluation=function(e){if(null===e)return null;if("string"==typeof e&&-1!==e.indexOf("JSNType")){var t=JSON.parse(e);return t.value&&t.value.id?t.value.id:null}return"object"===xh(e)&&e.value?e.value.id:e};const Lh=Nh;function Mh(e){this._fieldId=e,this._visibilityConditions=[],this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null}Mh.prototype.register=function(){Ah.registerField(this._fieldId,this)&&this._postRegister()},Mh.prototype.getType=function(){throw new Error("notImplementedError")},Mh.prototype.getValue=function(){throw new Error("notImplementedError")},Mh.prototype.getValueForVisibilityCondition=function(){throw new Error("notImplementedError")},Mh.prototype.setValue=function(e){throw new Error("notImplementedError")},Mh.prototype.hasValue=function(){return!this.getValue().isEmpty()},Mh.prototype._assertIsAllowedValueToSet=function(e){if(Eh.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))},Mh.prototype._getAllowedValueTypesToSet=function(){throw new Error("notImplementedError")},Mh.prototype.isRequired=function(){return pjQuery("#fieldSpecContainer"+this._fieldId).find(".requiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".formrequiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".datasetrequiredField").length},Mh.prototype.isBeingUpdated=function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate},Mh.prototype.cloneForNewTableRow=function(e,t){for(var n=this._buildClonedFieldForNewTableRow(e,t),r=this._visibilityConditions.length-1;r>=0;r--)n.addVisibilityCondition(new Ch(this._visibilityConditions[r].getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),this._visibilityConditions[r].getOperator(),this._visibilityConditions[r].getValue()));n.register()},Mh.prototype.getFieldId=function(){return this._fieldId},Mh.prototype.addVisibilityCondition=function(e){null!==e&&(this._visibilityConditions.push(e),FieldsDependenciesLegacy.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),FieldsDependenciesLegacy.TYPE_DISPLAY))},Mh.prototype.isVisible=function(){if(null===this._getFieldContainerElement())return!1;var e=this._getHiddenFieldIndicatorElement();return null===e||0==e.length},Mh.prototype.show=function(){var e=this._getFieldContainerElement();if(e){var t=this._getFieldElement();e.css("display",""),this._resetAttributes(t),this._removeHiddenElementIndicator()}},Mh.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldContainerElement();if(e){e.css("display","none");var t=this._getFieldElement();this._hideElement(t),this._addHiddenElementIndicator()}}},Mh.prototype.onRelatedFieldValueChange=function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))},Mh.prototype.fieldAcceptsValueType=function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1},Mh.prototype._postRegister=function(){if(this._attachOnChangeListener(),this.hasValue()){var e=this._fieldId;pjQuery((function(){Ah.onFieldValueChange(e)}))}},Mh.prototype._updateFieldAfterParentFieldValueChange=function(e){var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)},Mh.prototype._onFieldUpdated=function(e){if(e&&Ah.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}},Mh.prototype._evaluateConditionalVisibilityAfterRelatedFieldValueChange=function(){return Lh.evaluateForField(this,this._visibilityConditions)},Mh.prototype._buildClonedFieldForNewTableRow=function(e,t){throw new Error("notImplementedError")},Mh.prototype._resetAttributes=function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),e.removeAttr("data-hiddenType"));var r=e.attr("data-hiddenValue");r&&(e.val(r),r!==e.val()&&this._unsetOnHide(e),e.removeAttr("data-hiddenValue")),this._resetChildren(e)}},Mh.prototype._hideElement=function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type")),this._setElementType(e,"hidden");var t=e.val();t&&e.attr("data-hiddenValue",t),this._unsetOnHide(e),this._hideChildren(e)}},Mh.prototype._unsetOnHide=function(e){e.val("")},Mh.prototype._hideChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._hideElement(pjQuery("#"+n.id))}))},Mh.prototype._resetChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._resetAttributes(pjQuery("#"+n.id))}))},Mh.prototype._addHiddenElementIndicator=function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')},Mh.prototype._removeHiddenElementIndicator=function(){pjQuery("#"+this._fieldId+"_hidden").remove()},Mh.prototype._setElementType=function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}},Mh.prototype._elementAllowsChangingType=function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set},Mh.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){Ah.onFieldValueChange(e.getFieldId())}))},Mh.prototype._getFieldElement=function(){return pjQuery("#"+this._fieldId)},Mh.prototype._getFieldContainerElement=function(){return pjQuery("#fieldSpecContainer"+this._fieldId)},Mh.prototype._getHiddenFieldIndicatorElement=function(){return pjQuery("#"+this._fieldId+"_hidden")},Mh.prototype._triggerEvent=function(e){e=e||"change",this._getFieldElement().trigger(e)},Mh.prototype.onBeforeSubmit=function(){};const Bh=Mh;function Vh(){}Vh.registerDatasource=function(e,t){Vh._isDatasourceRegistered(e)||(Vh._datasources[e]=t)},Vh.getForField=function(e){var t=Vh._getDatasource(e);if(null!==t)return t;throw new Error("tryToAccessNonRegisteredDatasource: "+e)},Vh.cloneDatasourceForNewTableRow=function(e,t,n){var r=Vh.getForField(e).cloneForNewTableRow(t,n);Vh.registerDatasource(t,r)},Vh._getDatasource=function(e){return Vh._isDatasourceRegistered(e)?Vh._datasources[e]:null},Vh._isDatasourceRegistered=function(e){return e in Vh._datasources},Vh._datasources={};const Uh=Vh;function Wh(e,t){if(Eh.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(t))throw new Error("invalidValue: option text must be a valid string");this._optionId=e,this._optionText=t}Wh.TYPE="FieldOptionValueLegacy",Wh.prototype=Object.create(Eh.prototype),Wh.prototype.getType=function(){return Wh.TYPE},Wh.prototype.toString=function(){return this._optionText},Wh.prototype.getOptionId=function(){return this._optionId},Wh.prototype.getOptionText=function(){return this._optionText};const Hh=Wh;function Yh(e){if(Eh.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var t=this;e.forEach((function(e,n){t._assertIsValidOption(e)})),this._options=e}Yh.buildOption=function(e,t){return{id:e,text:t}},Yh.TYPE="FieldMultipleOptionsValueLegacy",Yh.prototype=Object.create(Eh.prototype),Yh.prototype.getType=function(){return Yh.TYPE},Yh.prototype.toString=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"},Yh.prototype.getOptionsIds=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e},Yh.prototype.getOptionsTexts=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e},Yh.prototype._assertIsValidOption=function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")};const zh=Yh;function Qh(e){Bh.call(this,e),this._datasource=Uh.getForField(e),pjQuery.each(this._datasource.getParentDependenciesFieldsIds(),(function(t,n){jh.registerFieldDependency(e,n,jh.TYPE_VALUES)}))}Qh.prototype=Object.create(Bh.prototype),Qh.prototype._getOptionsPage=function(){throw new Error("notImplementedError")},Qh.prototype._getOptionsPageSize=function(){throw new Error("notImplementedError")},Qh.prototype._createWithNewOptions=function(e){throw new Error("notImplementedError")},Qh.prototype._updateFieldAfterParentFieldValueChange=function(e){if(this._datasource.isParentDependentField(e))this.isVisible()?(this._evaluateConditionalVisibilityAfterRelatedFieldValueChange(),this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback())):(this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._evaluateConditionalVisibilityAfterRelatedFieldValueChange());else{var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)}},Qh.prototype._getOnNewOptionsCallback=function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;e.isRequired()&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),s=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(s)}},Qh.prototype._cloneDatasourceForNewTableRow=function(e,t){Uh.cloneDatasourceForNewTableRow(this._fieldId,e,t)},Qh.prototype._getSelectedOptionsIds=function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case Hh.TYPE:return[PortalString.toInt(e.getOptionId())];case zh.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]},Qh.prototype._buildOptionHtmlId=function(e){return this._fieldId+"_"+e};const qh=Qh;function Gh(e){if(Eh.call(this),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");this._value=e}Gh.TYPE="FieldTextValueLegacy",Gh.prototype=Object.create(Eh.prototype),Gh.prototype.getType=function(){return Gh.TYPE},Gh.prototype.toString=function(){return this._value},Gh.prototype.getValue=function(){return this._value};const Jh=Gh;function Zh(e){if(Eh.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");this._optionId=e}Zh.TYPE="FieldIdValueLegacy",Zh.prototype=Object.create(Eh.prototype),Zh.prototype.getType=function(){return Zh.TYPE},Zh.prototype.toString=function(){return this._optionId},Zh.prototype.getOptionId=function(){return this._optionId};const Kh=Zh;var $h=n(16655),Xh=n.n($h),ev=n(81396),tv=n.n(ev);function nv(e,t,n,r,o,i,a,u,l,s,c){qh.call(this,e),this._dropdownCssClass=t,this._placeholderText=n,this._minimumInputLength=r,this._ajaxDelayMs=o,this._visibleOptionsLimit=i,this._optionIdsToSearchLimit=a,this._dictionary=u,this._label=l,this._isRequired=s,this._isAccessible=c}nv.TYPE="AutocompleteSelectFieldLegacy",nv.register=function(e,t,n,r,o,i,a,u,l,s,c){new nv(e,t,n,r,o,i,a,u,l,s,c).register()},nv.prototype=Object.create(qh.prototype),nv.prototype._postRegister=function(){this._attachLazyPicker(),qh.prototype._postRegister.call(this)},nv.prototype._getAllowedValueTypesToSet=function(){return[Kh.TYPE,Jh.TYPE]},nv.prototype.getType=function(){return nv.TYPE},nv.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new kh;var t=e[0].id,n=e[0].text;return null===t||""===t?new kh:new Hh(t,n)},nv.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return null!==e&&""!==e||(e=null),e},nv.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Kh.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Jh.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},nv.prototype._buildOnFieldOptionsRetrieveCallback=function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),Ah.onFieldValueChange(e.getFieldId())}},nv.prototype._markOptionsFoundAsSelected=function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e},nv.prototype._getOptionsPage=function(){return 1},nv.prototype._getOptionsPageSize=function(){return 2},nv.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")},nv.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},nv.prototype._attachLazyPicker=function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))},nv.prototype._getLazyPickerProperties=function(){var e={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple()};if(this._datasource.isLocalDatasource())e.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var t=this,n=this._getCache();e.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,r,o){var i=t._generateCacheKey(e.data);return n.get(i).done(r).fail((function(){return pjQuery.ajax(e).done(r).done((function(e){n.set(i,e)})).fail(o)}))},processResults:function(e,n){return t._datasource.processLazyPickerAjaxResponseData(e)}}}return e},nv.prototype._getEventCallbacksForLazyPicker=function(){return[this._buildEventCallback(nv.ITEM_SELECTION_EVENT_NAME,(function(){pjQuery(this).focus()}))]},nv.prototype._buildEventCallback=function(e,t){return{eventName:e,eventCallback:t}},nv.prototype._adaptDatasourceOptionsToSelect2LocalDataFormat=function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e},nv.prototype._isMultiple=function(){return!1},nv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new nv(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible)},nv.prototype._getDataPayload=function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)},nv.prototype._getCache=function(){return Xh().getInstance()},nv.prototype._generateCacheKey=function(e){return tv()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))},nv.ITEM_SELECTION_EVENT_NAME="select2:select";const rv=nv;function ov(e){if(Eh.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),this._optionsIds=e}ov.TYPE="FieldMultipleIdsValueLegacy",ov.prototype=Object.create(Eh.prototype),ov.prototype.getType=function(){return ov.TYPE},ov.prototype.toString=function(){return"["+this._optionsIds.join(",")+"]"},ov.prototype.getOptionsIds=function(){return this._optionsIds};const iv=ov;function av(e){if(Eh.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),this._values=e}av.TYPE="FieldMultipleTextsValueLegacy",av.prototype=Object.create(Eh.prototype),av.prototype.getType=function(){return av.TYPE},av.prototype.toString=function(){return"["+this._values.join(",")+"]"},av.prototype.getOptionsTexts=function(){return this._values};const uv=av;function lv(e,t,n,r,o,i,a,u,l,s,c){rv.call(this,e,t,n,r,o,i,a,u,l,s,c)}lv.TYPE="AutocompleteMultipleSelectFieldLegacy",lv.register=function(e,t,n,r,o,i,a,u,l,s,c){new lv(e,t,n,r,o,i,a,u,l,s,c).register()},lv.prototype=Object.create(rv.prototype),lv.prototype._getAllowedValueTypesToSet=function(){return[iv.TYPE,uv.TYPE]},lv.prototype.getType=function(){return lv.TYPE},lv.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case iv.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case uv.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},lv.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(null===e||0===e.length)return new kh;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(zh.buildOption(r,o))})),new zh(t)},lv.prototype._removeAllOptions=function(){this._getFieldElement().empty()},lv.prototype._isMultiple=function(){return!0},lv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new lv(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible)};const sv=lv;function cv(e){if(Eh.call(this),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");this._isSelected=e}cv.TYPE="FieldBooleanValueLegacy",cv.prototype=Object.create(Eh.prototype),cv.prototype.getType=function(){return cv.TYPE},cv.prototype.toString=function(){return this._isSelected.toString()},cv.prototype.isSelected=function(){return this._isSelected};const fv=cv;function pv(e){Bh.call(this,e)}pv.TYPE="CheckboxFieldLegacy",pv.register=function(e){new pv(e).register()},pv.prototype=Object.create(Bh.prototype),pv.prototype.getType=function(){return pv.TYPE},pv.prototype._getAllowedValueTypesToSet=function(){return[fv.TYPE]},pv.prototype.getValue=function(){var e=this._getFieldElement().prop("checked");return new fv(!!e)},pv.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null},pv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")},pv.prototype._buildClonedFieldForNewTableRow=function(e,t){return new pv(e)};const dv=pv;function yv(e){qh.call(this,e)}yv.TYPE="CheckboxListFieldLegacy",yv.register=function(e){new yv(e).register()},yv.prototype=Object.create(qh.prototype),yv.prototype._getAllowedValueTypesToSet=function(){return[iv.TYPE,uv.TYPE]},yv.prototype.getType=function(){return yv.TYPE},yv.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new kh;var t=[];return e.each((function(){t.push(zh.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new zh(t)},yv.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},yv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case iv.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case uv.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},yv.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},yv.prototype._getOptionsPage=function(){return null},yv.prototype._getOptionsPageSize=function(){return null},yv.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>").attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))},yv.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()},yv.prototype._postRegister=function(){qh.prototype._postRegister.call(this),this._addClickToShowMoreLinkIfNeeded()},yv.prototype._addClickToShowMoreLinkIfNeeded=function(){var e=document.getElementById("showHiddenElements_"+this._fieldId);e&&(e.onclick=function(e){return this.nextSibling.style.display="inline",this.style.display="none",!1})},yv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new yv(e)};const hv=yv;function vv(e){Bh.call(this,e),this._registerFieldDependenciesForDependentFields(e,this._getDepedentFieldsMetadata())}vv.register=function(e){new vv(e).register()},vv.prototype=Object.create(Bh.prototype),vv.prototype._getDepedentFieldsMetadata=function(){throw new Error("notImplementedError")},vv.prototype._registerFieldDependenciesForDependentFields=function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&FieldsDependenciesLegacy.registerFieldDependency(e,t[n].id,FieldsDependenciesLegacy.TYPE_VALUES)},vv.prototype.onRelatedFieldValueChange=function(e){Bh.prototype.onRelatedFieldValueChange.call(this,e),FieldsLegacy.onFieldValueChange(this._fieldId)},vv.prototype.cloneForNewTableRow=function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)},vv.prototype._cloneCurrentFieldForNewTableRow=function(e,t){Bh.prototype.cloneForNewTableRow.call(this,e,t)},vv.prototype._cloneDependentFieldsForNewTableRow=function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=FieldsLegacy.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}},vv.prototype._createFieldMetadata=function(e,t){return{id:e,suffix:t}};const bv=vv;function mv(e){this._assertIsValidPortalDateObject(e),Eh.call(this),this._date=e}mv.TYPE="FieldDateValueLegacy",mv.prototype=Object.create(Eh.prototype),mv.prototype.getType=function(){return mv.TYPE},mv.prototype.toString=function(){return this._date.format()},mv.prototype.getFormattedDateString=function(e){return this._date.format(e)},mv.prototype.getPortalDate=function(){return this._date},mv.prototype._assertIsValidPortalDateObject=function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")};const gv=mv;function _v(e){bv.call(this,e)}_v.register=function(e){new _v(e).register()},_v.prototype=Object.create(bv.prototype),_v.prototype._postRegister=function(){Ah.onFieldValueChange(this._fieldId),bv.prototype._postRegister.call(this)},_v.prototype._getAllowedValueTypesToSet=function(){return[gv.TYPE]},_v.prototype._createYearInput=function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=Uh.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInput(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a},_v.prototype._createMonthInput=function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),s=Uh.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,s,t),l.fnt=function(){u._updateDayInput(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l},_v.prototype._createDayInput=function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),s=Uh.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,s,t),l},_v.prototype._updateDayInput=function(e,t,n,r){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=Uh.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,"--")},_v.prototype._hideInput=function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddenType","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t},_v.prototype._populateSelectElement=function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}},_v.prototype._populateSelectElementFromDatasource=function(e,t,n){if(e)for(var r=t.getOptions(),o=0;o<r.length;++o){var i=r[o];e.appendChild(this._createOptionElement(parseInt(i.id,10),n,(function(e){return i.name})))}},_v.prototype._createSelectElement=function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input"),r.setAttribute("tabindex",n),r},_v.prototype._createOptionElement=function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r},_v.prototype._getMaxDaysForInput=function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)},_v.prototype._getDaysForMonthAndYear=function(e,t){var n=!1;e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1;return e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:t%4==0?29:28},_v.prototype._clearSelectElementById=function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t},_v.prototype._normalize=function(e){return PortalString.zeroPad(e,2)},_v.prototype._cloneDatasourceForNewTableRow=function(e,t,n){Uh.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)};const wv=_v;n(83112);function Sv(e,t,n,r,o,i,a){this._tabIndex=t,this._minDate=n,this._maxDate=r,this._accessibleLabelsDictionary=o,this._isAccessible=i,this._year=this._month=this._day=0,this._yearInput=this._monthInput=this._dayInput=null,this.isRequired=a,wv.call(this,e)}Sv.TYPE="FullDateFieldLegacy",Sv.register=function(e,t,n,r,o,i,a){new Sv(e,t,n,r,o,i,a).register()},Sv.prototype=Object.create(wv.prototype),Sv.prototype._postRegister=function(){this._createWidget(),wv.prototype._postRegister.call(this)},Sv.prototype.cloneForNewTableRow=function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)},Sv.prototype.getType=function(){return Sv.TYPE},Sv.prototype.getValue=function(){var e=this._getFieldElement().val();if(!e)return new FieldEmptyValueLegacy;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new FieldFullDateValueLegacy(n,r,o)},Sv.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e||""},Sv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")},Sv.prototype.show=function(){var e=this._getFieldContainerElement(),t=this._getFieldElement();e&&t&&this._valueDiffersForElement(t)&&t.val(t.val()),wv.prototype.show.call(this)},Sv.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldElement();this._saveDateValueForField(e),wv.prototype.hide.call(this)}},Sv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new Sv(e,this._tabIndex,this._minDate,this._maxDate,this._accessibleLabelsDictionary,this._isAccessible)},Sv.prototype._valueDiffersForElement=function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t},Sv.prototype._saveDateValueForField=function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}},Sv.prototype._addLeadingZeros=function(e){return e.toString().padStart(2,"0")},Sv.prototype._getDepedentFieldsMetadata=function(){return[]},Sv.prototype._createWidget=function(){var e=this;this._browserSupportsInputDate()||pjQuery((function(){e._createFallbackWidget()}))},Sv.prototype._browserSupportsInputDate=function(){return H5H.inputSupported("date")&&!(GLOBALS.BROWSER.name&&"Safari"==GLOBALS.BROWSER.name)},Sv.prototype._createFallbackWidget=function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(LuxonDateTime.fromFormat(this._minDate,"yyyy-MM-dd")).toDate(),n=new PortalDate(LuxonDateTime.fromFormat(this._maxDate,"yyyy-MM-dd")).toDate();this._initDefaultValues(e);var r=this._createInput(this._tabIndex,t,n);e.parentNode.appendChild(r)}},Sv.prototype._initDefaultValues=function(e){this._year=this._month=this._day=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1]),this._day=PortalString.toInt(n[2])}},Sv.prototype._createInput=function(e,t,n){var r,o=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,e,t,n),this._yearInput.onchange=function(){o._year=this.value,o._day=0,o._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,e,t,n),this._monthInput.onchange=function(){o._month=this.value,o._day=0,o._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e,t,n),this._dayInput.onchange=function(){o._day=this.value,o._updateHiddenInputValue()},this._isAccessible?(r=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),this._wrapFieldAsFieldSetWithLegend()):r=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),r},Sv.prototype._updateHiddenInputValue=function(){document.getElementById(this._fieldId).value=this._year>0||this._month>0||this._day>0?this._year+"-"+this._normalize(this._month)+"-"+this._normalize(this._day):"",Ah.onFieldValueChange(this._fieldId)},Sv.prototype._createWidgetWithLabelsFromInputs=function(e,t,n){var r=document.createElement("div"),o=document.createElement("div");o.className="FullDate_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e);var i=document.createElement("div");i.className="FullDate_MonthWrapper",i.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),i.appendChild(t);var a=document.createElement("div");return a.className="FullDate_DayWrapper",a.appendChild(this._createLabelFor(n.id,this._accessibleLabelsDictionary.dayLabel)),a.appendChild(n),r.appendChild(o),r.appendChild(i),r.appendChild(a),r},Sv.prototype._createLabelFor=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility"),n.innerHTML=t,n},Sv.prototype._createWidgetWithoutLabelsFromInputs=function(e,t,n){var r=document.createElement("div");return r.appendChild(e),r.appendChild(t),r.appendChild(n),r},Sv.prototype._wrapFieldAsFieldSetWithLegend=function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;e&&t.isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html());return pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,html:e})).html()}))},Sv.prototype._resetDayInput=function(e){this._day=0;var t=this.monthInput.parentNode;t.removeChild(this._dayInput),this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e),t.appendChild(this._dayInput);var n=this;this._dayInput.onchange=function(){n._day=this.value,n._updateHiddenInputValue()}};const Ov=Sv;function Ev(e){Bh.call(this,e)}Ev.TYPE="GenericFieldLegacy",Ev.register=function(e){new Ev(e).register()},Ev.prototype=Object.create(Bh.prototype),Ev.prototype.getType=function(){return Ev.TYPE},Ev.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Ev(e)},Ev.prototype._postRegister=function(){};const Pv=Ev;function kv(e){Bh.call(this,e)}kv.TYPE="InputFieldLegacy",kv.register=function(e){new kv(e).register()},kv.prototype=Object.create(Bh.prototype),kv.prototype._getAllowedValueTypesToSet=function(){return[Jh.TYPE]},kv.prototype.getType=function(){return kv.TYPE},kv.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new Jh(e):new kh},kv.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().val()},kv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},kv.prototype._buildClonedFieldForNewTableRow=function(e,t){return new kv(e)},kv.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,Ah.onFieldValueChange(e.getFieldId())}))};const Tv=kv;function jv(e,t,n){this._setCountry(e),this._setState(t),this._setCity(n),Eh.call(this)}jv.TYPE="FieldLocationValueLegacy",jv.prototype=Object.create(Eh.prototype),jv.prototype.getType=function(){return jv.TYPE},jv.prototype.toString=function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})},jv.prototype.getCountry=function(){return this._country},jv.prototype.getState=function(){return this._state},jv.prototype.getCity=function(){return this._city},jv.prototype._setCountry=function(e){Eh.assertIsValid(e),this._country=e},jv.prototype._setState=function(e){Eh.assertIsValid(e),this._state=e},jv.prototype._setCity=function(e){Eh.assertIsValid(e),this._city=e};const Iv=jv;function Fv(e){bv.call(this,e)}Fv.TYPE="LocationFieldLegacy",Fv.register=function(e){new Fv(e).register()},Fv.prototype=Object.create(bv.prototype),Fv.prototype._getAllowedValueTypesToSet=function(){return[Iv.TYPE]},Fv.prototype.getType=function(){return Fv.TYPE},Fv.prototype.getValue=function(){var e=Ah.getFieldValue(this._getCountryId()),t=Ah.getFieldValue(this._getStateId()),n=Ah.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new kh:new Iv(e,t,n)},Fv.prototype.getValueForVisibilityCondition=function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]},Fv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),Ah.setFieldValue(this._getCountryId(),e.getCountry()),Ah.setFieldValue(this._getStateId(),e.getState()),Ah.setFieldValue(this._getCityId(),e.getCity())},Fv.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Fv(e)},Fv.prototype._getDepedentFieldsMetadata=function(){return[this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix()),this._createFieldMetadata(this._getStateId(),this._getStateSuffix()),this._createFieldMetadata(this._getCityId(),this._getCitySuffix())]},Fv.prototype._getCountryId=function(){return this.getFieldId()+this._getCountrySuffix()},Fv.prototype._getStateId=function(){return this.getFieldId()+this._getStateSuffix()},Fv.prototype._getCityId=function(){return this.getFieldId()+this._getCitySuffix()},Fv.prototype._getCountrySuffix=function(){return"_location_country"},Fv.prototype._getStateSuffix=function(){return"_location_state"},Fv.prototype._getCitySuffix=function(){return"_location_city"},Fv.prototype._attachOnChangeListener=function(){};const Rv=Fv;function Cv(e){qh.call(this,e)}Cv.TYPE="MultipleSelectFieldLegacy",Cv.register=function(e){new Cv(e).register()},Cv.prototype=Object.create(qh.prototype),Cv.prototype._getAllowedValueTypesToSet=function(){return[iv.TYPE,uv.TYPE]},Cv.prototype.getType=function(){return Cv.TYPE},Cv.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new kh;var t=[];return e.each((function(){t.push(zh.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new zh(t)},Cv.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},Cv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case iv.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case uv.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},Cv.prototype._getSelectedElements=function(){return this._getFieldElement().find("option:selected")},Cv.prototype._getOptionsPage=function(){return null},Cv.prototype._getOptionsPageSize=function(){return null},Cv.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},Cv.prototype._removeAllOptions=function(){this._getFieldElement().find("option").remove()},Cv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Cv(e)};const Dv=Cv;function Av(e){this._assertIsValidNumberValue(e),Eh.call(this),this._value=e}Av.TYPE="FieldNumberValueLegacy",Av.prototype=Object.create(Eh.prototype),Av.prototype.getType=function(){return Av.TYPE},Av.prototype.toString=function(){return this._value.toString()},Av.prototype.getValue=function(){return this._value},Av.prototype._assertIsValidNumberValue=function(e){if(!PortalNumber.isNumber(e))throw new Error("invalidArgumentException: expected number value")};const xv=Av;function Nv(e){Tv.call(this,e)}Nv.TYPE="NumberFieldLegacy",Nv.register=function(e){new Nv(e).register()},Nv.prototype=Object.create(Tv.prototype),Nv.prototype._getAllowedValueTypesToSet=function(){return[xv.TYPE]},Nv.prototype.getType=function(){return Nv.TYPE},Nv.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new xv(PortalString.toFloat(e)):new kh},Nv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},Nv.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Nv(e)};const Lv=Nv;function Mv(e){qh.call(this,e)}Mv.TYPE="RadioButtonListFieldLegacy",Mv.register=function(e){new Mv(e).register()},Mv.prototype=Object.create(qh.prototype),Mv.prototype._getAllowedValueTypesToSet=function(){return[Kh.TYPE,Jh.TYPE]},Mv.prototype.getType=function(){return Mv.TYPE},Mv.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new FieldEmptyValueLegacy;var t=null,n=null;return e.each((function(){t=pjQuery(this).val(),n=pjQuery(this).data("option-name").toString()})),new Hh(t,n)},Mv.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},Mv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case Kh.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Jh.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}},Mv.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},Mv.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){Ah.onFieldValueChange(e.getFieldId())}))},Mv.prototype._getOptionsPage=function(){return null},Mv.prototype._getOptionsPageSize=function(){return null},Mv.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()},Mv.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb").remove()},Mv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Mv(e)};const Bv=Mv;function Vv(e,t){qh.call(this,e),this._notSelectedOptionValue=t}Vv.TYPE="SelectFieldLegacy",Vv.register=function(e,t){new Vv(e,t).register()},Vv.prototype=Object.create(qh.prototype),Vv.prototype._getAllowedValueTypesToSet=function(){return[Kh.TYPE,Jh.TYPE]},Vv.prototype.getType=function(){return Vv.TYPE},Vv.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new kh:new Hh(e,pjQuery("#"+this._fieldId+" option:selected").text())},Vv.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null},Vv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Kh.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Jh.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},Vv.prototype._unsetOnHide=function(e){e.val(this._notSelectedOptionValue)},Vv.prototype._getOptionsPage=function(){return null},Vv.prototype._getOptionsPageSize=function(){return null},Vv.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},Vv.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},Vv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Vv(e,this._notSelectedOptionValue)};const Uv=Vv;function Wv(e,t,n){this._setHours(e),this._setMinutes(t),this._setSeconds(n),Eh.call(this)}Wv.TYPE="FieldTimeValueLegacy",Wv.prototype=Object.create(Eh.prototype),Wv.prototype.getType=function(){return Wv.TYPE},Wv.prototype.toString=function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)},Wv.prototype.getHours=function(){return this._hours},Wv.prototype.getMinutes=function(){return this._minutes},Wv.prototype.getSeconds=function(){return this._seconds},Wv.prototype._setHours=function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e},Wv.prototype._setMinutes=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e},Wv.prototype._setSeconds=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e};const Hv=Wv;function Yv(e){Uv.call(this,e,"-1")}Yv.TYPE="SimpleTimeFieldLegacy",Yv.register=function(e){new Yv(e).register()},Yv.prototype=Object.create(Uv.prototype),Yv.prototype.getType=function(){return Yv.TYPE},Yv.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new kh:new Hv(PortalString.toInt(e),0,0)},Yv.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]},Yv.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Yv(e)};const zv=Yv;function Qv(e,t){bv.call(this,e),this.shouldUseMilitaryTimeFormat=t}Qv.TYPE="TimeFieldLegacy",Qv.register=function(e,t){new Qv(e,t).register()},Qv.prototype=Object.create(bv.prototype),Qv.prototype.getType=function(){return Qv.TYPE},Qv.prototype._getAllowedValueTypesToSet=function(){return[Hv.TYPE]},Qv.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this.shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),Ah.setFieldValue(this._getHoursId(),new Kh(t.toString())),Ah.setFieldValue(this._getMinutesId(),new Kh(e.getMinutes().toString())),n&&Ah.setFieldValue(this._getAMPMId(),new Jh(n))},Qv.prototype.getValue=function(){return Ah.hasValue(this._getHoursId())&&Ah.hasValue(this._getMinutesId())?new Hv(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new kh},Qv.prototype.getValueForVisibilityCondition=function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]},Qv.prototype._getHoursFieldValue=function(){var e=Ah.getFieldValueByType(this._getHoursId(),Hh.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this.shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))},Qv.prototype._adaptHoursToAMPMFormat=function(e){var t=Ah.getFieldValueByType(this._getAMPMId(),Hh.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e},Qv.prototype._getMinutesFieldValue=function(){var e=Ah.getFieldValueByType(this._getMinutesId(),Hh.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0},Qv.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Qv(e,this.shouldUseMilitaryTimeFormat)},Qv.prototype._getDepedentFieldsMetadata=function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this.shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e},Qv.prototype._getHoursId=function(){return this.getFieldId()+this._getHoursSuffix()},Qv.prototype._getMinutesId=function(){return this.getFieldId()+this._getMinutesSuffix()},Qv.prototype._getAMPMId=function(){return this.getFieldId()+this._getAMPMSuffix()},Qv.prototype._getHoursSuffix=function(){return"_hours"},Qv.prototype._getMinutesSuffix=function(){return"_minutes"},Qv.prototype._getAMPMSuffix=function(){return"_ampm"};const qv=Qv;function Gv(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){this.fieldId=e,this.dropdownCssClass=t,this.placeholderText=n,this.minimumInputLength=r,this.isMultiple=o,this.ajaxDelayMs=i,this.visibleOptionsLimit=a,this.optionsSearchApiUrl=u,this.dictionary=l,this.label=s,this.isRequired=c,this.isAccessible=f,this.requestedDataFieldId=p,this.jobId=d,this.contactOrJobIdEdit=y,this.wizardId=h,this.wizardFormId=v,this.schemaFieldId=b,this.optionFormatJson=m,this.alphabeticalOrder=g||!1,this.entityExtensionId=_}Gv.prototype.attachToFieldAndRefreshOptions=function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")},Gv.prototype._buildAjaxRequestData=function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder,entityExtensionId:this.entityExtensionId},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)},Gv.prototype._processAjaxResponseData=function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}};const Jv=Gv;function Zv(){}Zv.registerJobTemplateAutocompletableWidgetLazyPicker=function(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){Zv._lazyPickers[e]=new JobTemplateAutocompletableWidgetLazyPickerLegacy(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_)},Zv.refreshLazyPickerOptions=function(e){Zv.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(e,e)},Zv.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource=function(e,t){var n=Zv._getLazyPicker(e);null!==n&&n.attachToFieldAndRefreshOptions(t)},Zv._getLazyPicker=function(e){return Zv._isLazyPickerRegistered(e)?Zv._lazyPickers[e]:null},Zv._isLazyPickerRegistered=function(e){return e in Zv._lazyPickers},Zv._lazyPickers={};const Kv=Zv;function $v(e,t,n){if(!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var r=PortalDate.fromParams(e,t,n);this._assertIsValidPortalDateObject(r),gv.call(this,r),this._day=n,this._month=t,this._year=e}$v.TYPE="FieldFullDateValueLegacy",$v.prototype=Object.create(gv.prototype),$v.prototype.getType=function(){return $v.TYPE},$v.prototype.toString=function(){return this.getFormattedDateString("yyyy-MM-dd")},$v.prototype.getDay=function(){return this._day},$v.prototype.getMonth=function(){return this._month},$v.prototype.getYear=function(){return this._year};const Xv=$v;var eb=n(16655);const tb=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=eb.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function nb(e,t){this._fieldId=e,this._portalUrlPath=t,this._datasourcesCallRunner=new tb}nb.prototype.isLocalDatasource=function(){return!1},nb.prototype.getOptions=function(){return[]},nb.prototype.fetchNewOptions=function(e,t,n,r){throw new Error("notImplementedError")},nb.prototype.fetchOptionsById=function(e,t){throw new Error("notImplementedError")},nb.prototype.fetchOptionsByValue=function(e,t){throw new Error("notImplementedError")},nb.prototype.getParentDependenciesFieldsIds=function(){throw new Error("notImplementedError")},nb.prototype.isParentDependentField=function(e){throw new Error("notImplementedError")},nb.prototype.cloneForNewTableRow=function(e,t){throw new Error("notImplementedError")},nb.prototype.getOptionsSearchApiUrl=function(){throw new Error("notImplementedError")},nb.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){throw new Error("notImplementedError")},nb.prototype.processLazyPickerAjaxResponseData=function(e){throw new Error("notImplementedError")},nb.prototype._fetchOptions=function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)},nb.prototype._getDatasourcesCallRunnerOnSuccessCallback=function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}},nb.prototype._getFieldId=function(){return this._fieldId};const rb=nb;function ob(e,t,n,r,o){rb.call(this,e,o),this._datasetFilters=r||[],this._optionFormatComponents=t,this._schemaFieldIdToUseForIndirectFiltering=n}ob.prototype=Object.create(rb.prototype),ob.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){throw new Error("notImplemented")},ob.prototype.getParentDependenciesFieldsIds=function(){var e=[];return pjQuery.each(this._datasetFilters,(function(t,n){"field"===n.type&&e.push(n.parentDependencyFieldId)})),e},ob.prototype.isParentDependentField=function(e){var t=!1;return pjQuery.each(this._datasetFilters,(function(n,r){if("field"===r.type&&r.parentDependencyFieldId===e)return t=!0,!1})),t},ob.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},ob.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])},ob.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])},ob.prototype._buildClonedFiltersForNewTableRow=function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if("field"===i.type&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n},ob.prototype._buildFiltersWithCurrentFieldsValues=function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);if("field"===n.type){var r=n.parentDependencyFieldId;if(!Ah.isFieldRegistered(r))continue;var o=Ah.getFieldValue(r);if(this._shouldIgnoreFilterIfNoValueIsSelected()&&o.isEmpty())continue;switch(o.getType()){case kh.TYPE:n.value=[];break;case Hh.TYPE:n.value=PortalString.toInt(o.getOptionId());break;case zh.TYPE:n.value=o.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}n.type="fixed"}e.push(n)}return e};const ib=ob;function ab(e,t,n,r,o,i){this._datasetSchemaSpecId=i,ib.call(this,e,t,n,r,o)}ab.register=function(e,t,n,r,o,i){var a=new ab(e,t,n,r,o,i);Uh.registerDatasource(e,a)},ab.prototype=Object.create(ib.prototype),ab.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!1},ab.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new ab(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaSpecId)},ab.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetOptionsSearchApi"},ab.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){for(var a=this._buildFiltersWithCurrentFieldsValues(),u=[],l=0;l<a.length;++l)u.push({operator:a[l].operator,datasetSpecIdFilter:a[l].datasetSpecIdFilter||null,schemaFieldNumberFilter:a[l].schemaFieldNumberFilter||null,value:a[l].value||null,type:a[l].type});var s=this._optionFormatComponents,c=[];for(l=0;l<s.length;++l)c.push({type:s[l].type,order:s[l].order,fieldNumberOrText:s[l].fieldNumberOrText});var f={datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:c,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1};return JSON.stringify(f)},ab.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const ub=ab;function lb(e,t,n,r,o,i){this._datasetSchemaFieldId=i,ib.call(this,e,t,n,r,o)}lb.register=function(e,t,n,r,o,i){var a=new lb(e,t,n,r,o,i);Uh.registerDatasource(e,a)},lb.prototype=Object.create(ib.prototype),lb.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!0},lb.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new lb(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaFieldId)},lb.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetSingleColumnOptionsSearchApi"},lb.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a=this._buildFiltersWithCurrentFieldsValues().map((function(e){return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:e.value||null,type:e.type}})),u=this._optionFormatComponents.map((function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:a,optionFormatComponents:u,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})},lb.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const sb=lb;function cb(e,t){this._setOptions(t),rb.call(this,e)}cb.register=function(e,t){var n=new cb(e,t);Uh.registerDatasource(e,n)},cb.prototype=Object.create(rb.prototype),cb.prototype.isLocalDatasource=function(){return!0},cb.prototype.getOptions=function(){return this._options},cb.prototype.getParentDependenciesFieldsIds=function(){return[]},cb.prototype.isParentDependentField=function(e){return!1},cb.prototype.fetchNewOptions=function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)},cb.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)},cb.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)},cb.prototype.cloneForNewTableRow=function(e,t){return new cb(e,this._options)},cb.prototype._setOptions=function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)};const fb=cb;function pb(e){fb.call(this,e)}pb.register=function(e){var t=new pb(e);Uh.registerDatasource(e,t)},pb.prototype=Object.create(fb.prototype),pb.prototype.getParentDependenciesFieldsIds=function(){return[]},pb.prototype.isParentDependentField=function(e){return!1},pb.prototype.fetchNewOptions=function(e,t,n,r){return[]},pb.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)},pb.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)},pb.prototype.cloneForNewTableRow=function(e,t){return new pb(e)};const db=pb;function yb(e,t,n,r,o,i,a,u){rb.call(this,e,t),this._jobId=n,this._contactOrJobIdEdit=r,this._wizardId=o,this._wizardFormId=i,this._schemaFieldId=a,this._optionFormatJson=u}yb.register=function(e,t,n,r,o,i,a,u){var l=new yb(e,t,n,r,o,i,a,u);Uh.registerDatasource(e,l)},yb.prototype=Object.create(rb.prototype),yb.prototype.cloneForNewTableRow=function(e,t){return new yb(e,this._portalUrlPath,this._jobId,this._contactOrJobIdEdit,this._wizardId,this._includeDisabledUsers,this._wizardFormId,this._schemaFieldId,this._optionFormatJson)},yb.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalOptionSearchApi"},yb.prototype.getParentDependenciesFieldsIds=function(){return[]},yb.prototype.isParentDependentField=function(e){return!1},yb.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))},yb.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},yb.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},yb.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,wizardFormId:this._wizardFormId,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)},yb.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}},yb.prototype._buildApiAdaptedResults=function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t};const hb=yb;function vb(e,t,n,r){rb.call(this,t,r),this._schemaFieldId=e,this._fieldId=t,this._isSearchMode=n}vb.register=function(e,t,n,r){var o=new vb(e,t,n,r);Uh.registerDatasource(t,o)},vb.prototype=Object.create(rb.prototype),vb.prototype.cloneForNewTableRow=function(e,t){return new vb(this._schemaFieldId,e,this._isSearchMode,this._portalUrlPath)},vb.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalUserSearch"},vb.prototype.getParentDependenciesFieldsIds=function(){return[]},vb.prototype.isParentDependentField=function(e){return!1},vb.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},vb.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])},vb.prototype.fetchOptionsByValue=function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")},vb.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,key:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode};return JSON.stringify(a)},vb.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const bb=vb;n(53493),n.g.CookieConsentPopupService=o(),n.g.MassiveActionService=a(),yp.connect(),n.g.ApiCacheLegacy=n(16655),n(16509),n.g.md5=n(81396),n.g.AutocompleteSelectFieldLegacy=rv,n.g.AutocompleteMultipleSelectFieldLegacy=sv,n.g.CheckboxFieldLegacy=dv,n.g.CheckboxListFieldLegacy=hv,n.g.CompoundFieldBaseLegacy=bv,n.g.DateFieldBaseLegacy=wv,n.g.FieldBaseLegacy=Bh,n.g.FieldsDependenciesLegacy=jh,n.g.FieldsLegacy=Ah,n.g.FullDateFieldLegacy=Ov,n.g.GenericFieldLegacy=Pv,n.g.InputFieldLegacy=Tv,n.g.LocationFieldLegacy=Rv,n.g.MultipleSelectFieldLegacy=Dv,n.g.NumberFieldLegacy=Lv,n.g.OptionsFieldBaseLegacy=qh,n.g.RadioButtonListFieldLegacy=Bv,n.g.SelectFieldLegacy=Uv,n.g.SimpleTimeFieldLegacy=zv,n.g.TimeFieldLegacy=qv,n.g.VisibilityEvaluatorLegacy=Lh,n.g.JobTemplateAutocompletableWidgetLazyPickerLegacy=Jv,n.g.LazyPickersLegacy=Kv,n.g.FieldBooleanValueLegacy=fv,n.g.FieldDateValueLegacy=gv,n.g.FieldEmptyValueLegacy=kh,n.g.FieldFullDateValueLegacy=Xv,n.g.FieldIdValueLegacy=Kh,n.g.FieldLocationValueLegacy=Iv,n.g.FieldMultipleIdsValueLegacy=iv,n.g.FieldMultipleOptionsValueLegacy=zh,n.g.FieldMultipleTextsValueLegacy=uv,n.g.FieldNumberValueLegacy=xv,n.g.FieldOptionValueLegacy=Hh,n.g.FieldTextValueLegacy=Jh,n.g.FieldTimeValueLegacy=Hv,n.g.ValueBaseLegacy=Eh,n.g.DatasourcesCallRunnerLegacy=tb,n.g.DatasetFieldOptionsDatasourceLegacy=ub,n.g.DatasetOptionsDatasourceBaseLegacy=ib,n.g.DatasetSingleColumnFieldOptionsDatasourceLegacy=sb,n.g.DatasourcesLegacy=Uh,n.g.DummyDatasourceLegacy=db,n.g.GeneralOptionsDatasourceLegacy=hb,n.g.LocalDatasourceLegacy=fb,n.g.OptionsDatasourceBaseLegacy=rb,n.g.UsersDatasourceLegacy=bb},81396:function(e,t,n){var r;n(92222),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),function(o){"use strict";function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,a){return i(function(e,t){return e<<t|e>>>32-t}(i(i(t,e),i(r,a)),o),n)}function u(e,t,n,r,o,i,u){return a(t&n|~t&r,e,t,o,i,u)}function l(e,t,n,r,o,i,u){return a(t&r|n&~r,e,t,o,i,u)}function s(e,t,n,r,o,i,u){return a(t^n^r,e,t,o,i,u)}function c(e,t,n,r,o,i,u){return a(n^(t|~r),e,t,o,i,u)}function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,o,a,f,p=1732584193,d=-271733879,y=-1732584194,h=271733878;for(n=0;n<e.length;n+=16)r=p,o=d,a=y,f=h,p=u(p,d,y,h,e[n],7,-680876936),h=u(h,p,d,y,e[n+1],12,-389564586),y=u(y,h,p,d,e[n+2],17,606105819),d=u(d,y,h,p,e[n+3],22,-1044525330),p=u(p,d,y,h,e[n+4],7,-176418897),h=u(h,p,d,y,e[n+5],12,1200080426),y=u(y,h,p,d,e[n+6],17,-1473231341),d=u(d,y,h,p,e[n+7],22,-45705983),p=u(p,d,y,h,e[n+8],7,1770035416),h=u(h,p,d,y,e[n+9],12,-1958414417),y=u(y,h,p,d,e[n+10],17,-42063),d=u(d,y,h,p,e[n+11],22,-1990404162),p=u(p,d,y,h,e[n+12],7,1804603682),h=u(h,p,d,y,e[n+13],12,-40341101),y=u(y,h,p,d,e[n+14],17,-1502002290),p=l(p,d=u(d,y,h,p,e[n+15],22,1236535329),y,h,e[n+1],5,-165796510),h=l(h,p,d,y,e[n+6],9,-1069501632),y=l(y,h,p,d,e[n+11],14,643717713),d=l(d,y,h,p,e[n],20,-373897302),p=l(p,d,y,h,e[n+5],5,-701558691),h=l(h,p,d,y,e[n+10],9,38016083),y=l(y,h,p,d,e[n+15],14,-660478335),d=l(d,y,h,p,e[n+4],20,-405537848),p=l(p,d,y,h,e[n+9],5,568446438),h=l(h,p,d,y,e[n+14],9,-1019803690),y=l(y,h,p,d,e[n+3],14,-187363961),d=l(d,y,h,p,e[n+8],20,1163531501),p=l(p,d,y,h,e[n+13],5,-1444681467),h=l(h,p,d,y,e[n+2],9,-51403784),y=l(y,h,p,d,e[n+7],14,1735328473),p=s(p,d=l(d,y,h,p,e[n+12],20,-1926607734),y,h,e[n+5],4,-378558),h=s(h,p,d,y,e[n+8],11,-2022574463),y=s(y,h,p,d,e[n+11],16,1839030562),d=s(d,y,h,p,e[n+14],23,-35309556),p=s(p,d,y,h,e[n+1],4,-1530992060),h=s(h,p,d,y,e[n+4],11,1272893353),y=s(y,h,p,d,e[n+7],16,-155497632),d=s(d,y,h,p,e[n+10],23,-1094730640),p=s(p,d,y,h,e[n+13],4,681279174),h=s(h,p,d,y,e[n],11,-358537222),y=s(y,h,p,d,e[n+3],16,-722521979),d=s(d,y,h,p,e[n+6],23,76029189),p=s(p,d,y,h,e[n+9],4,-640364487),h=s(h,p,d,y,e[n+12],11,-421815835),y=s(y,h,p,d,e[n+15],16,530742520),p=c(p,d=s(d,y,h,p,e[n+2],23,-995338651),y,h,e[n],6,-198630844),h=c(h,p,d,y,e[n+7],10,1126891415),y=c(y,h,p,d,e[n+14],15,-1416354905),d=c(d,y,h,p,e[n+5],21,-57434055),p=c(p,d,y,h,e[n+12],6,1700485571),h=c(h,p,d,y,e[n+3],10,-1894986606),y=c(y,h,p,d,e[n+10],15,-1051523),d=c(d,y,h,p,e[n+1],21,-2054922799),p=c(p,d,y,h,e[n+8],6,1873313359),h=c(h,p,d,y,e[n+15],10,-30611744),y=c(y,h,p,d,e[n+6],15,-1560198380),d=c(d,y,h,p,e[n+13],21,1309151649),p=c(p,d,y,h,e[n+4],6,-145523070),h=c(h,p,d,y,e[n+11],10,-1120210379),y=c(y,h,p,d,e[n+2],15,718787259),d=c(d,y,h,p,e[n+9],21,-343485551),p=i(p,r),d=i(d,o),y=i(y,a),h=i(h,f);return[p,d,y,h]}function p(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function y(e){var t,n,r="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function h(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return p(f(d(e),8*e.length))}(h(e))}function b(e,t){return function(e,t){var n,r,o=d(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=f(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=f(i.concat(d(t)),512+8*t.length),p(f(a.concat(r),640))}(h(e),h(t))}function m(e,t,n){return t?n?b(t,e):function(e,t){return y(b(e,t))}(t,e):n?v(e):function(e){return y(v(e))}(e)}void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}()},40454:e=>{function t(e){this.cookieUserConsentService=e}t.prototype.init=function(e){this.cookieUserConsentService.init(e)},t.prototype.getCurrentUserConsent=function(e){this.cookieUserConsentService.getCurrentUserConsent(e)},t.prototype.getCookieUsage=function(e){this.cookieUserConsentService.getCookieUsage(e)},t.prototype.updateTypesConsent=function(e,t){this.cookieUserConsentService.updateTypesConsent(e,t)},t.prototype.acceptAll=function(e){this.cookieUserConsentService.acceptAll(e)},t.prototype.shouldRequestUserConsent=function(e){this.cookieUserConsentService.shouldRequestUserConsent(e)},e.exports=t},23467:(e,t,n)=>{if(!r)var r=n(68806);function o(e){this.eventManager=e}o.prototype.attachToLoadEvent=function(e){this.eventManager.addEventHandler(o.EVENT_LOAD_NAME,e,r.PRIORITY_LOWEST)},o.prototype.attachToAutoSaveEvent=function(e){this.eventManager.addEventHandler(o.EVENT_AUTO_SAVE_NAME,e,r.PRIORITY_LOWEST)},o.EVENT_LOAD_NAME=r.EVENT_LOAD_NAME,o.EVENT_AUTO_SAVE_NAME=r.EVENT_AUTO_SAVE_NAME,o.STATUS_SUCCESS=r.STATUS_SUCCESS,o.STATUS_ERROR=r.STATUS_ERROR,e.exports=o},30309:e=>{function t(e){this.integrationService=e}t.prototype.setIntegrationCallback=function(e,t){this.integrationService.setIntegrationCallback(e,t)},e.exports=t},34039:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(89415),o=n(37797),i=n.n(o);if(!a)var a=n(23467),u=n(68806);if(!l)var l=n(40454);if(!s)var s=n(30309);function c(){}c.getEventManager=function(){return new a(u.getInstance())},c.getCookieUserConsentService=function(){return new l(r.Z.getInstance())},c.getIntegrationService=function(){return new s(i().getInstance())};const f=c},77250:(e,t,n)=>{n(21249);var r=n(47128),o=n(11952);function i(){this._actionsFactory=new r,this._requestConfigFactory=new o}i.prototype.getListSelectedIds=function(e){return this._assertIsAValidList(e),pjQuery(this._getListSelectorString(e)+":checked").map((function(){return pjQuery(this).data("record-id")})).get()},i.prototype.getRequestConfigFactory=function(){return this._requestConfigFactory},i.prototype.getActionsFactory=function(){return this._actionsFactory},i.prototype._assertIsAValidList=function(e){if(!e)throw"invalidArgumentException: list ID not provided.";if(0===pjQuery(this._getListSelectorString(e)).length)throw"invalidList: No selector was found for the list with ID: "+e},i.prototype._getListSelectorString=function(e){return'[data-selector-type="massiveAction"][data-list-id="'+e+'"]'},e.exports=i},32211:e=>{MassiveActionActionBase=function(){},MassiveActionActionBase.prototype.getName=function(){throw"notImplementedException"},MassiveActionActionBase.prototype.getRequestObject=function(){throw"notImplementedException"},e.exports=MassiveActionActionBase},47128:(e,t,n)=>{var r=n(17060),o=n(45295);MassiveActionActionFactory=function(){},MassiveActionActionFactory.prototype.buildWorkflowForPeopleStepUpdateAction=function(e,t,n){return new r(e,t,n)},MassiveActionActionFactory.prototype.buildWorkflowForJobsStepUpdateAction=function(e,t){return new o(e,t)},e.exports=MassiveActionActionFactory},45295:(e,t,n)=>{n(78011);var r=n(32211);MassiveActionWorkflowForJobsStepUpdateAction=function(e,t){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),r.call(this)},MassiveActionWorkflowForJobsStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForJobsStepUpdateAction.prototype.getName=function(){return"workflowForJobsStepUpdate"},MassiveActionWorkflowForJobsStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId}}},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},e.exports=MassiveActionWorkflowForJobsStepUpdateAction},17060:(e,t,n)=>{n(78011);var r=n(32211);MassiveActionWorkflowForPeopleStepUpdateAction=function(e,t,n){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),this._setJobId(n),r.call(this)},MassiveActionWorkflowForPeopleStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getName=function(){return"workflowForPeopleStepUpdate"},MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId,jobId:this._jobId}}},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setJobId=function(e){this._jobId=e},e.exports=MassiveActionWorkflowForPeopleStepUpdateAction},11952:(e,t,n)=>{var r=n(94606);MassiveActionRequestConfigFactory=function(){},MassiveActionRequestConfigFactory.prototype.MassiveActionRecordsSubsetRequestConfig=r,MassiveActionRequestConfigFactory.prototype.buildRecordsSubsetRequestConfig=function(e,t,n){return new r(e,t,n)},e.exports=MassiveActionRequestConfigFactory},94606:(e,t,n)=>{n(78011),n(79753);var r=n(33386);function o(e,t,n){this._setRecordIds(e),r.call(this,t,n)}o.prototype=Object.create(r.prototype),o.prototype._getName=function(){return"recordsSubset"},o.prototype._getExtraTaskDataForRequestObject=function(){return{recordIds:this._recordIds}},o.prototype._setRecordIds=function(e){e&&Array.isArray(e)||(e=[]),this._recordIds=e},e.exports=o},33386:(e,t,n)=>{n(79753);var r=n(32211);function o(e,t){this._setActions(e),this._setListId(t)}o.prototype.getEncodedRequestData=function(){return this._encodeObject(this._getRequestObject())},o.prototype._getName=function(){throw"notImplementedException"},o.prototype._getExtraTaskDataForRequestObject=function(){return{}},o.prototype._setActions=function(e){if(!e||!Array.isArray(e)||0==e.length)throw"invalidArgumentException: at least one action must be defined.";for(var t in this._actions=[],e)e.hasOwnProperty(t)&&this._addAction(e[t])},o.prototype._addAction=function(e){if(!(e&&e instanceof r))throw'invalidArgumentException: object not defined or not an instance of "MassiveActionActionBase"';this._actions.push(e.getRequestObject())},o.prototype._setListId=function(e){this._listId=e||null},o.prototype._getRequestObject=function(){return{task:{name:this._getName(),listId:this._listId,actions:this._actions,extraData:this._getExtraTaskDataForRequestObject()}}},o.prototype._encodeObject=function(e){return encodeURIComponent(JSON.stringify(e))},e.exports=o},86698:(e,t,n)=>{"use strict";n(41539),n(88674),n(32564),n(74916),n(69070),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(72443),n(39341),n(73706),n(10408),n(78011),n(30489),n(89554),n(54747),n(68309),n(68304),n(65069),n(47042);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),u=new T(r||[]);return i(a,"_invoke",{value:O(e,n,u)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function y(){}function h(){}function v(){}var b={};c(b,u,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==t&&n.call(g,u)&&(b=g);var _=v.prototype=y.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,a,u,l){var s=p(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,l)}),(function(e){o("throw",e,u,l)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return o("throw",e,u,l)}))}l(s.arg)}var a;i(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function j(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:h,configurable:!0}),h.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),c(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),c(_,s,"Generator"),c(_,u,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,l,"next",e)}function l(e){i(a,r,o,u,l,"throw",e)}u(void 0)}))}}n(34039).Z.getEventManager().attachToLoadEvent((function(){function e(e,t){var n=function(e,t){var n=e.getAttribute("data-width"),r=e.getAttribute("data-height"),o=e.getAttribute("data-lang"),i=e.getAttribute("data-is-moderator"),a=e.getAttribute("data-user-jwt"),u=function(e,t,n,r){var o=["microphone","camera","fullscreen","fodeviceselection","hangup","chat","settings","filmstrip","stats","shortcuts","tileview","raisehand","select-background","noisesuppression"];return e||o.push("desktop"),t&&(o.push("mute-everyone"),o.push("mute-video-everyone"),o.push("videoquality"),n&&o.push("recording"),r&&o.push("participants-pane")),o}(t,i,"1"===e.getAttribute("data-recording-enabled"),"1"===e.getAttribute("data-participants-pane-enabled")),l={roomName:e.getAttribute("data-room-name"),parentNode:e,userInfo:{email:e.getAttribute("data-user-name")+(t?"@mobile":""),displayName:e.getAttribute("data-display-name")},configOverwrite:{prejoinPageEnabled:"1"===e.getAttribute("data-prejoin-page-enabled"),toolbarButtons:u},toggleLobby:"1"===e.getAttribute("data-use-lobby-enabled"),noiseSuppressionEnabled:!1};return i&&a&&(l.jwt=a),n&&(l.width=n),r&&(l.height=r),o&&(l.configOverwrite.defaultLanguage=o),l}(t,e),r="1"===t.getAttribute("data-noise-suppression-enabled"),i=new JitsiMeetExternalAPI(t.getAttribute("data-jitsi-domain"),n);i.executeCommand("subject",""),i.executeCommand("localSubject","");var u=t.getAttribute("data-hangup-callback");u&&i.addListener("readyToClose",(function(){window[u]()})),r&&i.addListener("videoConferenceJoined",(function(e){i.isAudioMuted().then(function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.addListener("audioMuteStatusChanged",function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,100)}));case 2:return e.next=4,i.isAudioMuted().then((function(e){t.muted||e||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),i.addListener("participantRoleChanged",(function(e){"moderator"===e.role&&(n.toggleLobby&&n.jwt&&i.executeCommand("toggleLobby",!0),i.executeCommand("subject","")),i.executeCommand("localSubject","")}))}!function(){for(var t=/\b(iPhone|iPad|iPod|Android)\b/i.test(navigator.userAgent),n=document.body.getElementsByClassName("rtcPortalExtension"),r=0;r<n.length;++r)e(t,n[r])}()}))},36406:(e,t,n)=>{"use strict";n(47042),n(83710),n(57327),n(41539),n(74916),n(15306),n(91058),n(47941);var r=n(67991),o=n(69940),i=(0,r.wT)("TimeslotsFreeTimePicker",r.$L);i.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.slotDuration=o,this.relatedUserId=i,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},i.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.WN)(new u(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new c(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},i.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},i.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getFreeTime(this.selectedDate):getFreeTime(this.selectedDate),n=this,r=new Date(this.selectedDate),o=new Date(this.selectedDate);o.setHours(23),o.setSeconds(59),o.setMinutes(59),t.done((function(e){for(var t=[],i=0;i<e.length;++i){var a=new Date(1e3*e[i].targetDate.timestamp);a>=r&&a<=o&&t.push({targetDate:a,slot:e[i]})}n.freeTimesForSelectedDate=t,n.datePicker.setDate(n.selectedDate),n.timeSelector.setDate(n.selectedDate,n.freeTimesForSelectedDate)}))};var a=(0,r.wT)("Toolbar",r.$L);a.prototype.init=function(e){this.content=e,this.drawUI()},a.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var u=(0,r.wT)("DatePicker",r.$L);u.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},u.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},u.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new a(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},u.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[o.Z.shortDayOfWeekNames[0].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[1].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[2].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[3].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[4].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[5].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[6].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[6].slice(1)])])]},u.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.WN)(new l(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},u.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},u.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(o.Z.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=o.Z.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),i=(u=new Date).getFullYear(),a=u.getMonth(),u=u.getDate(),l=!1,s=0;s<6;++s){this.weeks[s].element.style.display=r>n?"none":"";for(var c=0;c<7;++c){var f=new Date(e,t,r);this.weeks[s].days[c].setDay(f),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Past",r<=0||r>n),!l&&r+1>=n&&(l=!0),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Today",f.getDate()==u&&f.getFullYear()==i&&f.getMonth()==a),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==f.getDate()&&this.selectedDate.getFullYear()==f.getFullYear()&&this.selectedDate.getMonth()==f.getMonth()),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(f)),++r}}},u.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},u.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},u.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},u.prototype.changeDate=function(e){var t=new r.uW,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());var o=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getSlotDays(t.date):getSlotDays(t.date),i=this;o.done((function(e){for(var n=e.days,r=[],o=0;o<=n.length;++o)r.push(new Date(t.date.getFullYear(),t.date.getMonth(),n[o]));i.daysWithFreeTime=r,i.dispatchEvent("selectdate",t)}))},u.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var l=(0,r.wT)("DatePickerWeek",r.$L);l.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.WN)(new s(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var s=(0,r.wT)("DatePickerCell",r.$L);s.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},s.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},s.prototype.onHeaderClick=function(){var e=new r.uW;e.date=this.date,this.dispatchEvent("selectdate",e)};var c=(0,r.wT)("TimeSelector",r.$L);c.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},c.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},c.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new a(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},c.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new f(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},c.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(o.Z.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},c.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var f=(0,r.wT)("TimeSelectorOption",r.$L);f.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},f.prototype.getValueForCheckbox=function(){return JSON.stringify({slotPartitionNumber:Object.keys(this.slot.availablePartitionNumbers)[0],targetDate:{date:this.startDate.getTime()/1e3,hasTime:!0},timeSlotId:this.slot.appUserTimeSlotId,title:"Event for timeslot id "+this.slot.appUserTimeSlotId,contactIdAssignee:null,durationInSeconds:60*this.slot.slotInMinutes,relatedObjects:{addedItems:[],removedItems:[]},typeId:2,timezoneOffset:this.timezoneOffset})},f.prototype.drawUI=function(){var e="";""!==this.slot.location&&null!==this.slot.location&&(e=" ("+this.slot.location+")"),this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedTimeSlot",onchange:this.caller("onChange")}),o.Z.getOnlyTimeFromDate(this.startDate)," - ",o.Z.getOnlyTimeFromDate(this.endDate),this.e("span",{class:"timeSlotLocation"},[e])]),this.input.value=this.getValueForCheckbox()},f.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.uW;t.date=this.date,this.dispatchEvent("selecttime",t)};const p=i;var d=!1,y={load:function(e,t,n){y.portalBaseUrl=e,y.companiesSelector=n,y.selectedCompanySelector=n+" option:selected",","==t.slice(-1)&&(t=t.slice(0,-1)),y.entityIds=t},getFreeTime:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "day": '+e.getDate()+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=2"})},getSlotDays:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=1"})},getSlotDaysAndTodaysFreeTime:function(e,t,n){var r=new Date,o=e||r.getFullYear(),i=t||r.getMonth(),a=n||null;pjQuery.ajax({contentType:"application/json",data:'{ "year":'+o+', "month":'+(i+1)+', "day":'+a+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+r.getTimezoneOffset()+"}",dataType:"json",success:function(e){for(var t=[],n=0;n<=e.days.length;++n)t.push(new Date(o,e.month-1,e.days[n]));var i=[],a=new Date;a.setFullYear(e.year,e.month-1,e.day),a.setHours(23,59,59,999);for(n=0;n<e.times.length;++n)r.getTime()<=1e3*e.times[n].targetDate.timestamp&&a.getTime()>=1e3*e.times[n].targetDate.timestamp&&i.push({targetDate:new Date(1e3*e.times[n].targetDate.timestamp),slot:e.times[n]});d||(d=!0,pjQuery(y.companiesSelector+" option").filter((function(){return-1==pjQuery.inArray(this.value,["0","-1"])})).remove(),pjQuery.each(e.companies,(function(e,t){pjQuery(y.companiesSelector).append(pjQuery("<option></option>").attr("value",t.entityId).text(t.entityName))}))),new p(document.getElementById("freeTimePickerContainer"),new Date(e.year,e.month-1,e.day?e.day:(new Date).getDate()),t,i,30,1,(new Date).getTimezoneOffset())},type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=4"})},_getEntityIds:function(){var e=y.entityIds;return""!=e&&y.companiesSelector?e=y.entityIds+","+pjQuery(y.selectedCompanySelector).val():y.companiesSelector&&(e=pjQuery(y.selectedCompanySelector).val()),e}};const h=y;n.g.TimeSlotApiHelper=h},83433:(e,t,n)=>{"use strict";n(96649),n(96078),n(82526),n(41817),n(41539),n(9653),n(69070),n(32165),n(66992),n(78783),n(33948);var r=n(81396),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialize()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}],(n=[{key:"get",value:function(e){var t=pjQuery.Deferred();return this.cache[e]?t.resolve(this.cache[e]):t.reject(null),t.promise()}},{key:"set",value:function(e,t){var n=pjQuery.Deferred();return this.cache[e]=t,n.resolve(!0),n.promise()}},{key:"clear",value:function(e){var t=pjQuery.Deferred();return this.cache.hasOwnProperty(e)?(delete this.cache[e],t.resolve(!0)):t.reject(null),t.promise()}},{key:"purge",value:function(){var e=pjQuery.Deferred();return this._initialize(),e.resolve(!0),e.promise()}},{key:"buildKey",value:function(e,t){return t=t||{},o()(e+JSON.stringify(t))}},{key:"_initialize",value:function(){this.cache={}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const l=u;n(69826),n(32564);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}var y=f((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));p(y,"WIZARD_FIELD_DESCRIPTION","WizardFieldDescription"),p(y,"WIZARD_FIELD_LABEL","WizardFieldLabel"),p(y,"WIZARD_FIELD_SUBFIELD_LABEL","WizardSubFieldLabel"),p(y,"WIZARD_FIELD_LINK","WizardFieldLink"),p(y,"WIZARD_FIELD_INPUT_CONTAINER","WizardFieldInputContainer"),p(y,"WIZARD_FIELD_INPUT","WizardFieldInput"),p(y,"WIZARD_FIELD_ERROR","WizardFieldError"),p(y,"WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS","tc_formSublabel"),p(y,"WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS","tc_formField"),p(y,"WIZARD_FIELD_LABEL_TEMPLATES_CLASS","tc_formLabel");const h=y;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===v(i)?i:String(i)),r)}var o,i}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setWizardValidationAccessible",value:function(t){var n="";pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).find(".errorMessage").each((function(e,t){var r=pjQuery(this),o=r.text(),i=r.attr("data-fieldLabel");if(i&&o){var a=o.split(")")[1].substr(1);n+=i+": "+a+" "}}))})),n&&(pjQuery("#liveErrorsContainer").append("<p>"+t+" "+n+"</p>"),setTimeout((function(){e.cleanDuplicatedNotices(),e.appendToWizardFormVisibleNoticeOfFieldErrors(t)}),1e3))}},{key:"cleanDuplicatedNotices",value:function(){pjQuery("div.alert--error").remove(),pjQuery("div.message--error").remove()}},{key:"appendToWizardFormVisibleNoticeOfFieldErrors",value:function(e){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).prepend(pjQuery("<div/>",{class:"alert alert--error "+h.WIZARD_FIELD_ERROR,"aria-hidden":"true"}).append([pjQuery("<i/>",{class:"fa fa-exclamation-circle"}),e]))}))}}],(n=null)&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const g=m;n(74916),n(15306),n(24603),n(39714),n(54678),n(83710),n(68304),n(24812),n(30489),n(12419),n(78011),n(74819),n(38880),n(21249),n(26833),n(88674),n(97314),n(82772),n(40561);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_(i)?i:String(i)),r)}var o,i}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"assertIsValid",value:function(t){if(!(t&&t instanceof e))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBase.")}}],(n=[{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"toString",value:function(){throw new Error("notImplementedError")}},{key:"isEmpty",value:function(){return!1}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const O=S;function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function I(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var F,R,C,D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(i,e);var t,n,r,o=T(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return""}},{key:"isEmpty",value:function(){return!0}}])&&P(t.prototype,n),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);F=D,C="FieldEmptyValue",(R=I(R="TYPE"))in F?Object.defineProperty(F,R,{value:C,enumerable:!0,configurable:!0,writable:!0}):F[R]=C;const A=D;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerFieldDependency",value:function(t,n,r){PortalHtml.elementExists(t)&&PortalHtml.elementExists(n)&&(r!==e.TYPE_DISPLAY&&r!==e.TYPE_VALUES&&r!==e.TYPE_EDIT||(e._existsFieldWithDependencies(n)||(e._fieldsDependencies[n]=[]),-1===e._fieldsDependencies[n].indexOf(t)&&(e._fieldsDependencies[n][t]=[]),-1===e._fieldsDependencies[n][t].indexOf(r)&&e._fieldsDependencies[n][t].push(r)))}},{key:"getChildDependentFieldsOf",value:function(t){return e._existsFieldWithDependencies(t)?e._fieldsDependencies[t]:[]}},{key:"_existsFieldWithDependencies",value:function(t){return t in e._fieldsDependencies}}],(n=null)&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();M.TYPE_DISPLAY="Display",M.TYPE_VALUES="Values",M.TYPE_EDIT="Edit",M._fieldsDependencies={};const B=M;function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===V(t)?t:String(t)}var H=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r}var t,n,r;return t=e,(n=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Y=H;function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isFieldRegistered",value:function(t){return t in e._fields}},{key:"registerField",value:function(t,n){return!(e.isFieldRegistered(t)||!PortalHtml.elementExists(t)||(e._fields[t]=n,0))}},{key:"unregisterField",value:function(t){e.isFieldRegistered(t)&&!PortalHtml.elementExists(t)&&delete e._fields[t]}},{key:"getFieldValue",value:function(t){return e._getFieldOrDie(t).getValue()}},{key:"getFieldValueByType",value:function(t,n){var r=e._getFieldOrDie(t).getValue();if(r.getType()!==n&&r.getType()!==A.TYPE)throw new Error("invalidValueError: field "+t+" returns "+r.getType()+" values");return r}},{key:"getFieldValueForCondition",value:function(t){return e._getFieldOrDie(t).getValueForCondition()}},{key:"setFieldValue",value:function(t,n){e._getFieldOrDie(t).setValue(n)}},{key:"hasValue",value:function(t){var n=e.getField(t);if(null!==n)return n.hasValue();e._throwFieldNotRegisteredException(t)}},{key:"cloneForNewTableRow",value:function(t,n,r){PortalString.isString(r)||(r="");var o=t+"-0"+r,i=t+"-"+n+r;if(null===e.getField(i)){var a=e.getField(o);null===a&&e._throwFieldNotRegisteredException(t),a.cloneForNewTableRow(i,n)}}},{key:"isVisible",value:function(t){var n=e.getField(t);return null!==n&&n.isVisible()}},{key:"setFieldVisibilityConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new Y(n,r,o);i.addVisibilityCondition(a)}}},{key:"setFieldEditConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new Y(n,r,o);i.addEditCondition(a)}}},{key:"onFieldValueChange",value:function(t){if(e.isFieldRegistered(t)){var n,r,o,i=B.getChildDependentFieldsOf(t);for(r in i)if(i.hasOwnProperty(r))for(n=0;n<i[r].length;n++)o=i[r][n],e._addFieldAsPendingToBeUpdated(r,o,t);var a=e._getFieldsPendingToBeUpdated(t);for(n=0;n<a.length;n++){r=a[n];var u=e.getField(r);null!==u&&(u.onRelatedFieldValueChange(t),e._removePendingToBeUpdatedField(r))}}}},{key:"evaluateEditRestrictions",value:function(t){var n=e.getField(t);null!==n&&n.evaluateEditRestrictions()}},{key:"fieldAcceptsValueType",value:function(t,n){return e._getFieldOrDie(t).fieldAcceptsValueType(n)}},{key:"isSomeFieldBeingUpdated",value:function(){for(var t in e._fields)if(e._fields.hasOwnProperty(t)&&e.getField(t).isBeingUpdated())return!0;return!1}},{key:"getField",value:function(t){return e.isFieldRegistered(t)?e._fields[t]:null}},{key:"dispatchBeforeSubmitAutoPartialSave",value:function(){var t=Object.values(e._fields).map((function(e){return e.onBeforeSubmitAutoPartialSave()}));return Promise.allSettled(t)}},{key:"_throwFieldNotRegisteredException",value:function(e){throw new Error("tryToAccessNonRegisteredField: "+e)}},{key:"_addFieldAsPendingToBeUpdated",value:function(t,n,r){(-1===e._fieldsPendingToBeUpdated.indexOf(t)||e._fieldsPendingToBeUpdated[t].dependencyType===B.TYPE_DISPLAY&&n===B.TYPE_VALUES)&&(e._fieldsPendingToBeUpdated[t]={dependencyType:n,parentFieldId:r})}},{key:"_getFieldsPendingToBeUpdated",value:function(t){var n=[];for(var r in e._fieldsPendingToBeUpdated)e._fieldsPendingToBeUpdated.hasOwnProperty(r)&&e._fieldsPendingToBeUpdated[r].parentFieldId===t&&n.push(r);return n}},{key:"_removePendingToBeUpdatedField",value:function(t){var n=e._fieldsPendingToBeUpdated.indexOf(t);n>-1&&e._fieldsPendingToBeUpdated.splice(n,1)}},{key:"_getFieldOrDie",value:function(t){var n=e.getField(t);if(null!==n)return n;e._throwFieldNotRegisteredException(t)}},{key:"_isCollapsible",value:function(t){var n=e.getField(t);return n&&n._getFieldContainerElement().hasClass("fieldSpec--collapsible")}}],(n=null)&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();G._fieldsPendingToBeUpdated=[],G._fields={};const J=G;n(69600),n(51532),n(89554),n(54747),n(26699),n(47042),n(68309),n(91038),n(79753),n(72443),n(39341),n(73706),n(10408),n(65069),n(26541),n(5212),n(32023);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function $(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t,n){return(t=ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}var te=$((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));X(te,"EQUAL","=="),X(te,"NOT_EQUAL","!="),X(te,"ANY","any"),X(te,"ALL","all"),X(te,"NONE","none"),X(te,"IS_ATTACHED","isAttached"),X(te,"IS_SET","isSet"),X(te,"IS_COMPLETED","isCompleted"),X(te,"IS_EMPTY","isEmpty"),X(te,"IS_NOT_EMPTY","isNotEmpty"),X(te,"TIME_SLOT_SELECTED","timeSlotSelected"),X(te,"NO_TIME_SLOT_SELECTED","noTimeSlotSelected");const ne=te;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e,t){if("object"!==re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===re(t)?t:String(t)}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"areFieldConditionsSatisfied",value:function(e,t){var n=this;return!!e&&e.every((function(e){return n._isFieldConditionSatisfied(e)}))}},{key:"_isFieldConditionSatisfied",value:function(e){var t=e.getParentDependencyFieldId();try{var n=J.getFieldValueForCondition(t);return Array.isArray(n)?this._evaluateArrayedValue(n,e.getValue(),e.getOperator()):this._evaluateSimpleValue(n,e.getValue(),e.getOperator())}catch(e){return!1}}},{key:"_evaluateArrayedValue",value:function(e,t,n){switch(n){case ne.ALL:case ne.EQUAL:return this._arrayEquals(e,t);case ne.NOT_EQUAL:return!this._arrayEquals(e,t);case ne.ANY:return this._arrayContainsAny(e,t);case ne.NONE:return!this._arrayContainsAny(e,t);case ne.IS_EMPTY:return this._arrayIsEmpty(e);case ne.IS_NOT_EMPTY:return!this._arrayIsEmpty(e);default:return!1}}},{key:"_arrayContainsAny",value:function(e,t){var n=this;return e.some((function(e){return t.some((function(t){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_arrayEquals",value:function(e,t){var n=this;return!(e.length<t.length)&&t.every((function(t){return e.some((function(e){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_evaluateSimpleValue",value:function(e,t,n){switch(e=this._parseValueForEvaluation(e),t=null===t?"":t,n){case ne.EQUAL:return this._evaluateSimpleEqual(e,t);case ne.NOT_EQUAL:return e!=t;case ne.ANY:case ne.NONE:return this._evaluateArrayedValue([e],t,n);case ne.IS_SET:case ne.IS_ATTACHED:return this._evaluateValueIsSetOrFileIsAttached(e,t);case ne.IS_EMPTY:return!this._isValueSetOrFileAttached(e);case ne.IS_NOT_EMPTY:return this._isValueSetOrFileAttached(e);case ne.TIME_SLOT_SELECTED:case ne.NO_TIME_SLOT_SELECTED:return this._evaluateTimeSlotFieldValue(e,n);default:return!1}}},{key:"_evaluateSimpleEqual",value:function(e,t){return!(null===e&&null!==t||e!=t&&(e<t||e>t))}},{key:"_evaluateTimeSlotFieldValue",value:function(e,t){return e&&t===ne.TIME_SLOT_SELECTED||!e&&t===ne.NO_TIME_SLOT_SELECTED}},{key:"_evaluateValueIsSetOrFileIsAttached",value:function(e,t){return this._isSetOrIsAttachedConditionValue(t)?this._isValueSetOrFileAttached(e):!this._isValueSetOrFileAttached(e)}},{key:"_isValueSetOrFileAttached",value:function(e){return""!==e&&null!=e}},{key:"_arrayIsEmpty",value:function(e){return 0===e.length}},{key:"_isSetOrIsAttachedConditionValue",value:function(e){return 1===e||"1"===e}},{key:"_parseValueForEvaluation",value:function(e){return null===e?"":"string"==typeof e&&e.includes("JSNType")?(null===(t=JSON.parse(e).value)||void 0===t?void 0:t.id)||null:"object"===re(e)&&e.value?e.value.id:e;var t}}],n&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ue=ae;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e,t){if("object"!==le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===le(t)?t:String(t)}function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fe.apply(this,arguments)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(i,e);var t,n,r,o=de(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_isFieldConditionSatisfied",value:function(e){var t=e.getParentDependencyFieldId();return(J.isVisible(t)||J._isCollapsible(t))&&fe(ye(i.prototype),"_isFieldConditionSatisfied",this).call(this,e)}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue);const ve=he;function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function ge(e){var t=function(e,t){if("object"!==be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===be(t)?t:String(t)}function _e(){return _e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_e.apply(this,arguments)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(i,e);var t,n,r,o=Se(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"areFieldConditionsSatisfied",value:function(e,t){return(!e||1!==e.length||e[0].getParentDependencyFieldId()!==t)&&_e(Oe(i.prototype),"areFieldConditionsSatisfied",this).call(this,e,t)}}])&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue);const Pe=Ee;function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function je(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ke(t)?t:String(t)}var Ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerValidator",value:function(t,n){e._isValidatorRegistered(t)||(e._validators[t]=[]),e._validators[t].push(n)}},{key:"getForField",value:function(t){var n=e.__getValidators(t);return null!==n?n:[]}},{key:"cloneValidatorForNewTableRow",value:function(t,n,r){for(var o=e.getForField(t),i=0;i<o.length;i++){var a=o[i].cloneForNewTableRow(n,r);e.registerValidator(n,a)}}},{key:"__getValidators",value:function(t){return e._isValidatorRegistered(t)?e._validators[t]:null}},{key:"_isValidatorRegistered",value:function(t){return t in e._validators}}],(n=null)&&Te(t.prototype,n),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ie._validators={};const Fe=Ie;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}function De(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ae(e,t,n){return(t=xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){var t=function(e,t){if("object"!==Re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Re(t)?t:String(t)}var Ne=De((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Ae(Ne,"DISPLAY_CONDITIONALLY","DisplayConditionally"),Ae(Ne,"SECTION_COLLAPSIBLE","SectionCollapsible"),Ae(Ne,"SHOW_FIELD_BY_FIELD","ShowFieldByField");const Le=Ne;function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ve(r.key),r)}}function Ve(e){var t=function(e,t){if("object"!==Me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Me(t)?t:String(t)}var Ue=null,We=!1,He={},Ye=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!We)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return Ue||(We=!0,Ue=new e,We=!1),Ue}}],(n=[{key:"addWizard",value:function(e,t){He[e]=t}},{key:"getWizard",value:function(e){if(!He[e])throw new Error("Wizard (ID: "+e+") does not exist.");return He[e]}},{key:"getAll",value:function(){return Object.values(He)}},{key:"registerAll",value:function(){Object.values(He).forEach((function(e){return e.register()}))}}])&&Be(t.prototype,n),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ze=Ye;n(34553);function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function Ge(e){var t=function(e,t){if("object"!==Qe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qe(t)?t:String(t)}var Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assign.apply(this,arguments),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null}var t,n,r;return t=e,(n=[{key:"_assign",value:function(e){if(e&&"object"!==Qe(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}}])&&qe(t.prototype,n),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ze=Je;function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xe(r.key),r)}}function Xe(e){var t=function(e,t){if("object"!==Ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ke(t)?t:String(t)}var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventListeners={},this._callers={}}var t,n,r;return t=e,n=[{key:"addListener",value:function(e,t){if(this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].includes(t))throw new Error("Adding repeated listener ("+e+")");t.callerObj&&t.callerObj.attachedTo.push({context:this,eventName:e}),this._eventListeners[e].push(t)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new Ze),t instanceof Ze&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this._eventListeners[e]&&this._eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"removeListener",value:function(e,t){if(this._eventListeners[e]&&this._eventListeners[e].length){var n=this._eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this._eventListeners[e].splice(n,1)):error.log("Cannot remove listener. Listener not added or already removed. Event: "+e+".")}else error.log("Cannot remove listener. Event has no listeners. Event: "+e+".")}},{key:"caller",value:function(e){return this._callers[e]?this._callers[e]:this._callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+e);return function(){return t[e].apply(t,arguments)}}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}}],n&&$e(t.prototype,n),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const tt=et;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(){rt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==nt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function at(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ut(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ut(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function ct(e){var t=function(e,t){if("object"!==nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nt(t)?t:String(t)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dt(e);if(t){var o=dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(u,e);var t,n,r,o,i,a=pt(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this))._fieldId=e,n._fieldSettings=t||{},n._visibilityConditions=[],n._editConditions=[],n._isBeingUpdated=!1,n._shouldReupdateAfterCurrentUpdate=!1,n._nextUpdateParentFieldId=null,n._visibilityConditionsEvaluator=new ve,n._editConditionsEvaluator=new Pe,n}return t=u,n=[{key:"register",value:function(){J.registerField(this._fieldId,this)&&(this._buildVisibilityStatus(),this._postRegister(),this._changeVisibilityIfNeeded(),this.evaluateEditRestrictions())}},{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"getValue",value:function(){throw new Error("notImplementedError")}},{key:"getValueForCondition",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){throw new Error("notImplementedError")}},{key:"hasValue",value:function(){return!this.getValue().isEmpty()}},{key:"getLabel",value:function(){var e=pjQuery("#"+this._fieldId+"-label").text();return e&&this.isRequired()?e.replace(/\s\*$/,""):e}},{key:"_assertIsAllowedValueToSet",value:function(e){if(O.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))}},{key:"_getAllowedValueTypesToSet",value:function(){throw new Error("notImplementedError")}},{key:"isRequired",value:function(){return this._getFieldContainerElement().find(".requiredField").length||this._getFieldContainerElement().find(".formrequiredField").length||this._getFieldContainerElement().find(".datasetrequiredField").length}},{key:"isValid",value:function(){if(!this._isActive())return!0;var e,t=Fe.getForField(this._fieldId),n=new Map,r=at(t);try{for(r.s();!(e=r.n()).done;){var o=e.value,i=o.isValid();if(!1===i)return this._addValidationErrorIfNeeded(o.getValidationErrorText()),this.dispatchEvent(u.EVENT_ON_VALIDATION_FAIL),!1;i instanceof Promise&&n.set(o,i)}}catch(e){r.e(e)}finally{r.f()}return n.size>0?this._runAsyncValidators(n):(this._removeValidationErrorIfNeeded(),!0)}},{key:"getFieldSettings",value:function(){return this._fieldSettings}},{key:"getSetting",value:function(e){return this._fieldSettings.hasOwnProperty(e)?this._fieldSettings[e]:null}},{key:"getWizard",value:function(){return this._wizard||(this._wizard=ze.getInstance().getWizard(this.getWizardId())),this._wizard}},{key:"getFormContainer",value:function(){return this.getWizard().getForm()}},{key:"getWizardId",value:function(){return this._wizardId||(this._wizardId=this._getFieldElement().closest(".wizard").data("id")),this._wizardId}},{key:"_addValidationErrorIfNeeded",value:function(e){if(pjQuery("#"+this._fieldId+"-errorMessage").length)pjQuery("#"+this._fieldId+"-errorMessage").text(e),pjQuery("#"+this._fieldId+"-errorMessage").prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));else{var t=pjQuery("<span/>",{id:this._fieldId+"-errorMessage",class:"errorMessage "+h.WIZARD_FIELD_ERROR,role:"alert","aria-live":"assertive","data-fieldlabel":pjQuery("#"+this._fieldId+"-label").text(),text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));pjQuery("#"+this._fieldId).parent().append(t)}}},{key:"_removeValidationErrorIfNeeded",value:function(){pjQuery("#"+this._fieldId+"-errorMessage").length&&pjQuery("#"+this._fieldId+"-errorMessage").remove()}},{key:"isBeingUpdated",value:function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFieldForNewTableRow(e,t);this._addVisibilityConditionsToNewTableRow(n,t),this._addEditConditionsToNewTableRow(n,t),Fe.cloneValidatorForNewTableRow(this._fieldId,e,t),n.register()}},{key:"getFieldId",value:function(){return this._fieldId}},{key:"addVisibilityCondition",value:function(e){null!==e&&(this._visibilityConditions.push(e),B.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),B.TYPE_DISPLAY))}},{key:"addEditCondition",value:function(e){null!==e&&(this._editConditions.push(e),B.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),B.TYPE_EDIT))}},{key:"shouldShowIf",value:function(e,t){var n=this.visibilityStatus[e];this.visibilityStatus[e]=t;var r=this._shouldShow();return this.visibilityStatus[e]=n,r}},{key:"isVisible",value:function(){var e=this._getFieldContainerElement();return null!==e&&!e.attr("hidden")}},{key:"focus",value:function(){pjQuery("#"+this._fieldId).focus()}},{key:"onRelatedFieldValueChange",value:function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))}},{key:"fieldAcceptsValueType",value:function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1}},{key:"evaluateEditRestrictions",value:function(){var e=this._editConditionsEvaluator.areFieldConditionsSatisfied(this._editConditions,this._fieldId);this._changeEditRestrictionsIfNeeded(e)}},{key:"_postRegister",value:function(){if(this._attachOnChangeListener(),this.hasValue()){var e=this._fieldId;pjQuery((function(){J.onFieldValueChange(e)}))}}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this.evaluateEditRestrictions();var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}},{key:"_onFieldUpdated",value:function(e){if(e&&J.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}}},{key:"_updateFieldVisibilityAfterParentFieldValueChange",value:function(){var e=this._visibilityConditionsEvaluator.areFieldConditionsSatisfied(this._visibilityConditions),t=this.isVisible();return this.setVisibilityStatusByType(Le.DISPLAY_CONDITIONALLY,e),t!==this.isVisible()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._buildClonedField(e)}},{key:"_buildClonedField",value:function(e){throw new Error("notImplementedError")}},{key:"_addVisibilityConditionsToNewTableRow",value:function(e,t){for(var n=this._visibilityConditions.length-1;n>=0;n--)e.addVisibilityCondition(this._buildFieldConditionForNewTableRow(this._visibilityConditions[n],t))}},{key:"_addEditConditionsToNewTableRow",value:function(e,t){for(var n=this._editConditions.length-1;n>=0;n--)e.addEditCondition(this._buildFieldConditionForNewTableRow(this._editConditions[n],t))}},{key:"_buildFieldConditionForNewTableRow",value:function(e,t){return new Y(e.getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),e.getOperator(),e.getValue())}},{key:"_unsetField",value:function(e){e.val("")}},{key:"_deactivateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._deactivate(pjQuery("#"+n.id))}))}},{key:"_activateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._activate(pjQuery("#"+n.id))}))}},{key:"_addHiddenElementIndicator",value:function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')}},{key:"_removeHiddenElementIndicator",value:function(){pjQuery("#"+this._fieldId+"_hidden").remove()}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!0}},{key:"_setElementType",value:function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}}},{key:"_runAsyncValidators",value:(o=rt().mark((function e(t){var n,r,o,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=at(t.entries()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=14;break}return o=ot(r.value,2),i=o[0],a=o[1],e.next=7,a;case 7:if(!1!==e.sent){e.next=12;break}return this._addValidationErrorIfNeeded(i.getValidationErrorText()),this.dispatchEvent(u.EVENT_ON_VALIDATION_FAIL),e.abrupt("return",!1);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e,this,[[1,16,19,22]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){it(i,n,r,a,u,"next",e)}function u(e){it(i,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"_elementAllowsChangingType",value:function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){J.onFieldValueChange(e.getFieldId())}))}},{key:"_getFieldElement",value:function(){return pjQuery("#"+this._fieldId)}},{key:"_getFieldContainerElement",value:function(){return pjQuery("#fieldSpecContainer"+this._fieldId)}},{key:"_buildVisibilityStatus",value:function(){var e=this._getFieldContainerElement();this.visibilityStatus=[],this.visibilityStatus[Le.DISPLAY_CONDITIONALLY]="1"!==e.attr("data-displayConditionallyHidden"),this.visibilityStatus[Le.SECTION_COLLAPSIBLE]="1"!==e.attr("data-sectionCollapsibleHidden"),this.visibilityStatus[Le.SHOW_FIELD_BY_FIELD]=!0,e.removeAttr("data-displayConditionallyHidden"),e.removeAttr("data-sectionCollapsibleHidden")}},{key:"setVisibilityStatusByType",value:function(e,t){this.visibilityStatus[e]=t,this._changeVisibilityIfNeeded()}},{key:"_changeVisibilityIfNeeded",value:function(){this._shouldShow()?this._show():this._hide()}},{key:"_shouldShow",value:function(){for(var e in this.visibilityStatus)if(!this.visibilityStatus[e])return!1;return!0}},{key:"_show",value:function(){this._shouldActivate()&&(this._activate(this._getFieldElement()),this._removeHiddenElementIndicator()),this._getFieldContainerElement().attr("hidden",!1)}},{key:"_hide",value:function(){this._getFieldContainerElement().attr("hidden",!0),this._shouldDeactivate()&&(this._deactivate(this._getFieldElement()),this._addHiddenElementIndicator())}},{key:"_shouldActivate",value:function(){return!0===this.visibilityStatus[Le.DISPLAY_CONDITIONALLY]&&!this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_shouldDeactivate",value:function(){return!1===this.visibilityStatus[Le.DISPLAY_CONDITIONALLY]&&this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_isActive",value:function(){return 0===pjQuery("#"+this._fieldId+"_hidden").length}},{key:"_activate",value:function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),this._activateAttributesMetadata(e),e.removeAttr("data-hiddenType"));var r=this._getDataHiddenValue(e);void 0!==r&&r.length>0&&(e.val(r),JSON.stringify(r)!==JSON.stringify(e.val())&&this._unsetField(e),e.removeAttr("data-hiddenValue")),this._activateChildren(e)}}},{key:"_getDataHiddenValue",value:function(e){return e.attr("data-hiddenValue")}},{key:"_deactivate",value:function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type"));var t=e.val();t&&e.attr("data-hiddenValue",t),this._setElementType(e,"hidden"),this._inactivateAttributesMetadata(e),this._unsetField(e),this._deactivateChildren(e)}}},{key:"_triggerEvent",value:function(e){e=e||"change",this._getFieldElement().trigger(e)}},{key:"_activateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr("data-"+t)&&(e.attr(t,e.attr("data-"+t)),e.removeAttr("data-"+t))}))}},{key:"_inactivateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr(t)&&(e.attr("data-"+t,e.attr(t)),e.removeAttr(t))}))}},{key:"_getAttributesToFix",value:function(){return["placeholder","min","max"]}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){e?(this._getFieldContainerElement().removeClass("fieldSpec--disabled"),this._getFieldContainerElement().removeAttr("aria-disabled"),this._getFieldElement().removeAttr("readonly")):(this._getFieldContainerElement().addClass("fieldSpec--disabled"),this._getFieldContainerElement().attr("aria-disabled",!e),this._canBeMarkedAsReadOnly()&&this._getFieldElement().attr("readonly",!e))}},{key:"_canBeMarkedAsReadOnly",value:function(){return["INPUT","TEXTAREA"].includes(this._getFieldElement().prop("tagName"))}},{key:"changeHiddenField",value:function(e,t){t?e.addClass("WizardFieldHidden"):e.removeClass("WizardFieldHidden")}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return Promise.resolve()}},{key:"onFormStepVisibilityChange",value:function(){}},{key:"isAutocomplete",value:function(){return!1}}],n&&st(t.prototype,n),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(tt);yt.EVENT_ON_VALIDATION_FAIL="onValidationFail";const ht=yt;function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function wt(e){var t=function(e,t){if("object"!==vt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vt(t)?t:String(t)}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(i,e);var t,n,r,o=gt(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");return t._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value}},{key:"getValue",value:function(){return this._value}}])&&bt(t.prototype,n),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(St,"TYPE","FieldTextValue");const Ot=St;function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,It(r.key),r)}}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jt(e);if(t){var o=jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jt(e){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jt(e)}function It(e){var t=function(e,t){if("object"!==Et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Et(t)?t:String(t)}var Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(i,e);var t,n,r,o=Tt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value.toString()}},{key:"getValue",value:function(){return this._value}}])&&Pt(t.prototype,n),r&&Pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=It(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ft,"TYPE","FieldNumberValue");const Rt=Ft;function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mt(r.key),r)}}function At(){return At="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},At.apply(this,arguments)}function xt(e,t){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xt(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function Mt(e){var t=function(e,t){if("object"!==Ct(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ct(t)?t:String(t)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(i,e);var t,n,r,o=Nt(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._formula=n||r.getSetting("formula"),r._currentValue=0,r._parentsFieldsIdsInFormula=[],r}return t=i,n=[{key:"_postRegister",value:function(){this._setNewFormula(this._formula),this._printFieldValue(this._currentValue),At(Lt(i.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return null!==this._currentValue?new Rt(this._currentValue):new A}},{key:"getValueForCondition",value:function(){return this._currentValue}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setNewFormula(e.getValue()),this._evaluateFormula()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){var n=this._replaceRowIndexInFormula(this._formula,t);return new i(e,this.getFieldSettings(),n)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this._evaluateFormula(),At(Lt(i.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this,e)}},{key:"_setNewFormula",value:function(e){this._formula=e,this._getFieldElement().attr("data-formula",e),this._reevaluateFormulaDependentFields()}},{key:"_printFieldValue",value:function(e){this._getFieldElement().text(e)}},{key:"_evaluateFormula",value:function(){this._currentValue=this._recalculateFieldValue(),this._printFieldValue(this._currentValue),J.onFieldValueChange(this._fieldId)}},{key:"_reevaluateFormulaDependentFields",value:function(){var e,t=/\{([\d-]+)\}/,n=this._formula;for(this._parentsFieldsIdsInFormula=[];e=t.exec(n);){var r=e[0],o=e[1];this._parentsFieldsIdsInFormula.push(o),B.registerFieldDependency(this._fieldId,o,B.TYPE_VALUES),n=n.replace(r,"")}}},{key:"_replaceRowIndexInFormula",value:function(e,t){for(var n,r=e,o=/\{([\d-]+)-\d\}/;n=o.exec(e);){var i=n[0],a=n[1],u=new RegExp(a+"-\\d","g"),l=a+"-"+t;r=r.replace(u,l),e=e.replace(i,"")}return r}},{key:"_recalculateFieldValue",value:function(){var e,t=this,n=this._formula;return pjQuery.each(this._parentsFieldsIdsInFormula,(function(e,r){var o=t._getNumericFieldValueById(r);n=n.replace("{"+r+"}",o)})),null!==(e=math.evaluate(n))&&void 0!==e?e:null}},{key:"_getNumericFieldValueById",value:function(e){var t=J.getFieldValue(e);if(t.isEmpty())return 0;var n=parseFloat(t.toString());return isNaN(n)?0:n}}],n&&Dt(t.prototype,n),r&&Dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Mt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bt,"TYPE","ArithmeticField");const Vt=Bt;function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qt(r.key),r)}}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var o=zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Qt(e){var t=function(e,t){if("object"!==Ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ut(t)?t:String(t)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(i,e);var t,n,r,o=Yt(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");return t._optionId=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._optionId}},{key:"getOptionId",value:function(){return this._optionId}}])&&Wt(t.prototype,n),r&&Wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Qt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qt,"TYPE","FieldIdValue");const Gt=qt;function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}function Kt(e,t){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kt(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xt(e);if(t){var o=Xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function en(e){var t=function(e,t){if("object"!==Jt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jt(t)?t:String(t)}var tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(i,e);var t,n,r,o=$t(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),"string"!=typeof e)throw new Error("invalidValue: option ID must be a valid string");if("string"!=typeof t)throw new Error("invalidValue: option text must be a valid string");return n._optionId=e,n._optionText=t,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._optionText}},{key:"getOptionId",value:function(){return this._optionId}},{key:"getOptionText",value:function(){return this._optionText}}])&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=en(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tn,"TYPE","FieldOptionValue");const nn=tn;function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cn(r.key),r)}}function an(e,t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},an(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sn(e);if(t){var o=sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ln(e)}(this,n)}}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sn(e)}function cn(e){var t=function(e,t){if("object"!==rn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rn(t)?t:String(t)}var fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(i,e);var t,n,r,o=un(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var n=ln(t);return e.forEach((function(e,t){n._assertIsValidOption(e)})),t._options=e,t}return t=i,r=[{key:"buildOption",value:function(e,t){return{id:e,text:t}}}],(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"}},{key:"getOptionsIds",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e}},{key:"getOptionsTexts",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e}},{key:"_assertIsValidOption",value:function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")}}])&&on(t.prototype,n),r&&on(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=cn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fn,"TYPE","FieldMultipleOptionsValue");const pn=fn;function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hn(r.key),r)}}function hn(e){var t=function(e,t){if("object"!==dn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dn(t)?t:String(t)}var vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDatasource",value:function(t,n){e._isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e._isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"_isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&yn(t.prototype,n),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();vn._datasources={};const bn=vn;function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function _n(e){var t=function(e,t){if("object"!==mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mn(t)?t:String(t)}function wn(){return wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=En(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},wn.apply(this,arguments)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=En(e);if(t){var o=En(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function En(e){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},En(e)}var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}(i,e);var t,n,r,o=On(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasource=bn.getForField(n||e),pjQuery.each(r._datasource.getParentDependenciesFieldsIds(),(function(t,n){B.registerFieldDependency(e,n,B.TYPE_VALUES)})),r}return t=i,(n=[{key:"_postRegister",value:function(){this._isPrePopulateEnabled()&&this._prePopulateIfOnlyOneOption(),wn(En(i.prototype),"_postRegister",this).call(this)}},{key:"_getOptionsPage",value:function(){throw new Error("notImplementedError")}},{key:"_getOptionsPageSize",value:function(){throw new Error("notImplementedError")}},{key:"_createWithNewOptions",value:function(e){throw new Error("notImplementedError")}},{key:"_isPrePopulateEnabled",value:function(){throw new Error("notImplementedError")}},{key:"_prePopulateIfOnlyOneOption",value:function(){throw new Error("notImplementedError")}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._datasource.isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback())):(this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_getOnNewOptionsCallback",value:function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;(e.isRequired()||e._isPrePopulateEnabled())&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),s=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(s)}}},{key:"_getOnPrePopulateOptionsCallback",value:function(){var e=this;return function(t){1===t.length&&e.setValue(new Gt(t[0].id.toString()))}}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t){bn.cloneDatasourceForNewTableRow(this._fieldId,e,t)}},{key:"_cloneDatasource",value:function(e){bn.cloneDatasource(this._fieldId,e)}},{key:"_getSelectedOptionsIds",value:function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case nn.TYPE:return[PortalString.toInt(e.getOptionId())];case pn.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]}},{key:"_buildOptionHtmlId",value:function(e){return this._fieldId+"_"+e}}])&&gn(t.prototype,n),r&&gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);const kn=Pn;var Tn=n(78879);function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,An(r.key),r)}}function Fn(){return Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fn.apply(this,arguments)}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var o=Dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function An(e){var t=function(e,t){if("object"!==jn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===jn(t)?t:String(t)}var xn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(a,e);var t,n,r,i=Cn(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t,n))._dropdownCssClass=r.getSetting("dropdownCssClass"),r._placeholderText=r.getSetting("placeholderText"),r._minimumInputLength=r.getSetting("minimumInputLength")||0,r._ajaxDelayMs=r.getSetting("ajaxDelayMs"),r._visibleOptionsLimit=r.getSetting("visibleOptionsLimit")||100,r._optionIdsToSearchLimit=r.getSetting("optionIdsToSearchLimit"),r._dictionary=r.getSetting("dictionary"),r._label=r.getSetting("label")||"",r._isRequired=r.getSetting("isRequired")||!1,r._isAccessible=r.getSetting("isAccessible"),r}return t=a,n=[{key:"_postRegister",value:function(){this._attachLazyPicker(),Fn(Dn(a.prototype),"_postRegister",this).call(this),this._setOnResetFormListener()}},{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return a.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new A;var t=e[0].id,n=e[0].text;return null===t||""===t?new A:new nn(t,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return null==e||0===e.length?null:e}},{key:"setPlaceholderText",value:function(e){this._placeholderText=e}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Gt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"_buildOnFieldOptionsRetrieveCallback",value:function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),J.onFieldValueChange(e.getFieldId())}}},{key:"_markOptionsFoundAsSelected",value:function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e}},{key:"_getOptionsPage",value:function(){return 1}},{key:"_getOptionsPageSize",value:function(){return 2}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_attachLazyPicker",value:function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))}},{key:"_getLazyPickerProperties",value:function(){var e=new Tn.Z,t={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple(),dropdownParent:e.get("avature.portal.mobile")?document.getElementById("ui-widget_"+this._fieldId):null};if(this._datasource.isLocalDatasource())t.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var n=this,r=this._getCache();t.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,t,o){var i=n._generateCacheKey(e.data);return r.get(i).done(t).fail((function(){return pjQuery.ajax(e).done(t).done((function(e){r.set(i,e)})).fail(o)}))},processResults:function(e,t){return n._datasource.processLazyPickerAjaxResponseData(e)}}}return t}},{key:"_getEventCallbacksForLazyPicker",value:function(){var e=this;return[this._buildEventCallback(a.ITEM_SELECTION_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectedAutocompleteValueEvent",t)})),this._buildEventCallback(a.ITEM_SELECTING_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectingAutocompleteValueEvent",t)}))]}},{key:"_buildEventCallback",value:function(e,t){return{eventName:e,eventCallback:t}}},{key:"_adaptDatasourceOptionsToSelect2LocalDataFormat",value:function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e}},{key:"_isMultiple",value:function(){return!1}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new a(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new a(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataPayload",value:function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)}},{key:"_getCache",value:function(){return l.getInstance()}},{key:"_generateCacheKey",value:function(e){return o()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).parent().attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnPrePopulateOptionsCallback())}},{key:"_getClearButton",value:function(){return document.querySelector(".select2Container".concat(this._fieldId," .select2-selection__clear"))}},{key:"_setOnResetFormListener",value:function(){var e,t=this,n=this.getValue();null===(e=this.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._resetValue(n)}))}},{key:"_resetValue",value:function(e){try{var t=e.getType()===A.TYPE?"":e.getOptionId();this.setValue(new Gt(t))}catch(t){this.setValue(new Ot(e.toString()))}}},{key:"isAutocomplete",value:function(){return!0}}],n&&In(t.prototype,n),r&&In(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(kn);!function(e,t,n){(t=An(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xn,"TYPE","AutocompleteSelectField"),xn.ITEM_SELECTION_EVENT_NAME="select2:select",xn.ITEM_SELECTING_EVENT_NAME="select2:selecting";const Nn=xn;function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wn(r.key),r)}}function Bn(e,t){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bn(e,t)}function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Un(e);if(t){var o=Un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Un(e){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Un(e)}function Wn(e){var t=function(e,t){if("object"!==Ln(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ln(t)?t:String(t)}var Hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bn(e,t)}(i,e);var t,n,r,o=Vn(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),t._optionsIds=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return"["+this._optionsIds.join(",")+"]"}},{key:"getOptionsIds",value:function(){return this._optionsIds}}])&&Mn(t.prototype,n),r&&Mn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Wn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Hn,"TYPE","FieldMultipleIdsValue");const Yn=Hn;function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zn(r.key),r)}}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jn(e);if(t){var o=Jn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}function Zn(e){var t=function(e,t){if("object"!==zn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zn(t)?t:String(t)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(i,e);var t,n,r,o=Gn(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),t._values=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return"["+this._values.join(",")+"]"}},{key:"getOptionsTexts",value:function(){return this._values}}])&&Qn(t.prototype,n),r&&Qn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Zn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kn,"TYPE","FieldMultipleTextsValue");const $n=Kn;var Xn=n(4592);function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}function nr(e){var t=function(e,t){if("object"!==er(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===er(t)?t:String(t)}var rr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addEmptyHiddenInputBeforeSubmit",value:function(e,t){var n=this;Xn.default.getInstance().addActionBeforeSubmit((function(){var r=e.getFieldId();if(e.getValue().isEmpty()&&!n._existsInputWithName(r)){var o=document.createElement("input");o.hidden=!0,o.value=null,o.name=r,t.insertAdjacentElement("beforebegin",o)}}),e.getFormContainer())}},{key:"_existsInputWithName",value:function(e){return null!==document.querySelector('input[name="'+e+'"]')}}])&&tr(t.prototype,n),r&&tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const or=rr;function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fr(r.key),r)}}function ur(e,t){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ur(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cr(e);if(t){var o=cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}(this,n)}}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}function fr(e){var t=function(e,t){if("object"!==ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ir(t)?t:String(t)}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ur(e,t)}(i,e);var t,n,r,o=lr(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t,n),(new or).addEmptyHiddenInputBeforeSubmit(sr(r),r._getFieldElement()[0]),r}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Yn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Yn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(null===e||0===e.length)return new A;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(pn.buildOption(r,o))})),new pn(t)}},{key:"_removeAllOptions",value:function(){this._getFieldElement().empty()}},{key:"_isMultiple",value:function(){return!0}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}},{key:"_resetValue",value:function(e){try{var t=e.getType()===A.TYPE?[""]:e.getOptionsIds();this.setValue(new Yn(t))}catch(t){var n=e.getType()===A.TYPE?[""]:e.getOptionsTexts();this.setValue(new $n(n))}}}],n&&ar(t.prototype,n),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nn);!function(e,t,n){(t=fr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pr,"TYPE","AutocompleteMultipleSelectField");const dr=pr;n(57327),n(91058);function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vr(r.key),r)}}function vr(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}var br=null,mr=!1,gr={},_r=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!mr)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return br||(mr=!0,br=new e,mr=!1),br}}],(n=[{key:"addFieldsetStepper",value:function(e,t){gr[e]=t}},{key:"getAllFieldsetSteppers",value:function(){return Object.values(gr)}}])&&hr(t.prototype,n),r&&hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const wr=_r;n(60285),n(41637),n(47941),n(4723);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Er(r.key),r)}}function Er(e){var t=function(e,t){if("object"!==Sr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sr(t)?t:String(t)}var Pr=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldsContainerId=t,this._textsDictionary=n,this._shouldUseBuiltinButtons=r,this._hasToHideWizardButtons=o,this._shouldIncludePreviousButton=i,this._initialFieldIndex=a||0}var t,n,r;return t=e,n=[{key:"generate",value:function(){this._addIndicatorClass(),this._hideUnimplementedFields(),this._setupFieldByFieldDisplayFormat(this._initialFieldIndex),this._updateCurrentStepIndicatorClass(),this._updateElementsVisibility(),this._removeSeparators(),this._showFieldSet(),this._addToFieldsetStepperManager()}},{key:"getFieldsStatus",value:function(){var e=this,t=[];return this._getFieldsContainers().forEach((function(n){var r=parseInt(n.getAttribute("data-field-index"),10),o=n.getAttribute("data-field-id"),i=J.getField(o);t.push({index:r,id:o,name:i.getLabel(),isCurrent:r===e._getCurrentFieldIndex()})})),t}},{key:"goToNextField",value:function(){this._hasCurrentFieldValidationErrors()||this._goToField(this._getNextFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"goToPreviousField",value:function(){this._goToField(this._getPrevFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"hasBuiltinButtonBar",value:function(){return this._shouldUseBuiltinButtons}},{key:"_showFieldSet",value:function(){var e;this._getFieldSetContainer().classList.remove("fieldSpec--loading","wizard--loading"),this._getFieldSetContainer().removeAttribute("hidden"),null===(e=this._getFieldSetContainer().parentElement.querySelector(".form__loader"))||void 0===e||e.remove()}},{key:"_addIndicatorClass",value:function(){this._getFieldSetContainer().classList.add("shownFieldByField")}},{key:"_setupFieldByFieldDisplayFormat",value:function(e){this._generateFieldsHelperData(),this._buildCurrentFieldIndex(),this._shouldUseBuiltinButtons&&(this._buildBuiltinButtonsContainer(),this._shouldIncludePreviousButton&&this._buildBuiltinPreviousButton(),this._buildBuiltinNextButton()),e=this._hasValidationErrors()?this._getFirstFieldIndexWithValidationError():this._getNextFieldIndexToShow(e-1),this._setCurrentFieldIndex(e)}},{key:"_generateFieldsHelperData",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){t.setAttribute("data-field-index",n.toString()),t.setAttribute("data-field-id",e._getFieldIdFromFieldContainer(t))}))}},{key:"_buildCurrentFieldIndex",value:function(){var e=document.createElement("input");e.setAttribute("id",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("name",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("type","hidden"),this._getFieldSetContainer().append(e)}},{key:"_buildBuiltinButtonsContainer",value:function(){var e=document.createElement("div");e.setAttribute("id",this._fieldsContainerId+"_formContainerButtons"),e.setAttribute("class","button-bar__wrap"),e.setAttribute("role","navigation");var t=document.createElement("div");t.setAttribute("id","fieldSpecButtonContainer"+this._fieldsContainerId),t.setAttribute("class","formfieldSpec button-bar formfieldSpecPadder"),t.append(e);var n=document.createElement("div");n.setAttribute("id","schemaFieldButtonContainer"+this._fieldsContainerId),n.setAttribute("class","schemaFieldButtonContainer"),n.append(t),this._getFieldSetContainer().append(n)}},{key:"_buildBuiltinPreviousButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.prevButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerPrevButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){e.preventDefault()})),t.setAttribute("class","button button--primary formContainerPrevButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.prevButtonAriaLabel),t.addEventListener("click",(function(){return e.goToPreviousField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_buildBuiltinNextButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.nextButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerNextButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){return e.preventDefault()})),t.setAttribute("class","button button--primary formContainerNextButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.nextButtonAriaLabel),t.addEventListener("click",(function(){return e.goToNextField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_goToField",value:function(e){this._setCurrentFieldIndex(e),this._updateElementsVisibility(),this._focusInputInCurrentField()}},{key:"_updateElementsVisibility",value:function(){this._updatesFieldsVisibility(),this._updateNextButtonVisibility(),this._updatePreviousButtonVisibility(),this._hasToHideWizardButtons&&(this._updateSaveAndNextWizardButtonsVisibility(),this._updatePreviousWizardButtonVisibility()),this._getFieldSetContainer().dispatchEvent(new Event("form:refreshFormStepVisibility"))}},{key:"_removeSeparators",value:function(){this._getFieldSetContainer().querySelectorAll(".Separator").forEach((function(e){return e.remove()}))}},{key:"_hideUnimplementedFields",value:function(){this._getFieldsContainers().forEach((function(e){e.querySelectorAll(".WizardFieldUnimplemented").length>0&&e.setAttribute("hidden",!0)}))}},{key:"_updatesFieldsVisibility",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){var r=t.getAttribute("data-field-id"),o=J.getField(r),i=n===e._getCurrentFieldIndex();o.setVisibilityStatusByType(Le.SHOW_FIELD_BY_FIELD,i),o.onFormStepVisibilityChange(!i)}))}},{key:"_updateNextButtonVisibility",value:function(){this._getNextButton().hidden=this._isCurrentFieldTheLastField()}},{key:"_isCurrentFieldTheLastField",value:function(){return this._getNextFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updatePreviousButtonVisibility",value:function(){this._getPrevButton().hidden=this._isCurrentFieldTheFirstField()}},{key:"_isCurrentFieldTheFirstField",value:function(){return 0===this._getCurrentFieldIndex()||this._getPrevFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updateSaveAndNextWizardButtonsVisibility",value:function(){var e=this._areFieldsetsInLastField();this._getClosestWizard().querySelectorAll("button.saveButton, button.nextButton, button.submitButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInLastField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerNextButton":"button.formNextButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_updatePreviousWizardButtonVisibility",value:function(){var e=this._areFieldsetsInFirstField();this._getClosestWizard().querySelectorAll("button.previousButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInFirstField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerPrevButton":"button.formPreviousButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_addToFieldsetStepperManager",value:function(){wr.getInstance().addFieldsetStepper(this._fieldsContainerId,this)}},{key:"_getNextFieldIndexToShow",value:function(e){var t,n=e;do{if(n++,!(t=this._getFieldIdByFieldIndex(n))){n--;break}}while(!this._shouldShowField(t));return n}},{key:"_getPrevFieldIndexToShow",value:function(e){var t,n=e;do{if(--n<0)return e;if(!(t=this._getFieldIdByFieldIndex(n))){n++;break}}while(!this._shouldShowField(t));return n}},{key:"_shouldShowField",value:function(e){var t;return(null===(t=J.getField(e))||void 0===t?void 0:t.shouldShowIf(Le.SHOW_FIELD_BY_FIELD,!0))||!1}},{key:"_updateCurrentStepIndicatorClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._getFieldSetContainer(),n=this._getCurrentStepIndicatorClass();n&&t.classList.remove(n),t.classList.add("shownFieldByField--step"+(e+1))}},{key:"_getCurrentStepIndicatorClass",value:function(){return Array.from(this._getFieldSetContainer().classList).filter((function(e){return e.match(/^shownFieldByField--step\d+/gm)})).join("")}},{key:"_getFieldIdFromFieldContainer",value:function(e){return e.id.replace(/^[a-z]+(\d+(?:-\d+)*)$/i,"$1")}},{key:"_hasValidationErrors",value:function(){return this._getFieldSetContainer().querySelectorAll(".hasErrors").length>0}},{key:"_hasCurrentFieldValidationErrors",value:function(){var e=this._getFieldIdByFieldIndex(this._getCurrentFieldIndex());return!J.getField(e).isValid()}},{key:"_getFirstFieldIndexWithValidationError",value:function(){var e=Array.from(this._getFieldsContainers()).findIndex((function(e){return e.querySelectorAll(".hasErrors").length>0}));return-1===e?null:e}},{key:"_getFieldSetContainer",value:function(){return document.getElementById(this._fieldsContainerId)}},{key:"_getFieldsContainers",value:function(){return this._getFieldSetContainer().querySelectorAll(".fieldSpec:not(.ButtonBarField):not(.fieldSpec--in-dataset), .schemaFieldContainer:not([hidden])")}},{key:"_getClosestWizard",value:function(){return this._getFieldSetContainer().closest(".wizard")}},{key:"_getCurrentFieldIndex",value:function(){return parseInt(document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value,10)}},{key:"_getNextButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerNextButton"):this._getClosestWizard().querySelector("button.formNextButton"))||document.createElement("div")}},{key:"_getPrevButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerPrevButton"):this._getClosestWizard().querySelector("button.formPreviousButton"))||document.createElement("div")}},{key:"_getFieldIdByFieldIndex",value:function(e){var t=this._getFieldSetContainer().querySelector('[data-field-index="'+e+'"]');return t?t.getAttribute("data-field-id"):null}},{key:"_focusInputInCurrentField",value:function(){J.getField(this._getFieldIdByFieldIndex(this._getCurrentFieldIndex())).focus(),this._updateCurrentStepIndicatorClass(this._getCurrentFieldIndex())}},{key:"_setCurrentFieldIndex",value:function(e){document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value=e}}],n&&Or(t.prototype,n),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const kr=Pr;function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rr(r.key),r)}}function Ir(e,t,n){return t&&jr(e.prototype,t),n&&jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fr(e,t,n){return(t=Rr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e){var t=function(e,t){if("object"!==Tr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tr(t)?t:String(t)}var Cr=Ir((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Fr(Cr,"FIELD","Field"),Fr(Cr,"VALUES_DATASOURCE","ValuesDatasource"),Fr(Cr,"DEFAULT_VALUES_DATASOURCE","DefaultValuesDatasource"),Fr(Cr,"VALIDATOR","Validator");const Dr=Cr;function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Br(r.key),r)}}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);if(t){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}function Br(e){var t=function(e,t){if("object"!==Ar(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ar(t)?t:String(t)}var Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(i,e);var t,n,r,o=Lr(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");return t._isSelected=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._isSelected.toString()}},{key:"isSelected",value:function(){return this._isSelected}}])&&xr(t.prototype,n),r&&xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vr,"TYPE","FieldBooleanValue");const Ur=Vr;function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qr(r.key),r)}}function Yr(e,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yr(e,t)}function zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qr(e);if(t){var o=Qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qr(e){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qr(e)}function qr(e){var t=function(e,t){if("object"!==Wr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wr(t)?t:String(t)}var Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}(i,e);var t,n,r,o=zr(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[Ur.TYPE]}},{key:"getValue",value:function(){var e=this._getFieldElement().prop("checked");return new Ur(!!e)}},{key:"getValueForCondition",value:function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}],n&&Hr(t.prototype,n),r&&Hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=qr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Gr,"TYPE","CheckboxField");const Jr=Gr;function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ro(r.key),r)}}function $r(){return $r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=no(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},$r.apply(this,arguments)}function Xr(e,t){return Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xr(e,t)}function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=no(e);if(t){var o=no(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return to(e)}(this,n)}}function to(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function no(e){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},no(e)}function ro(e){var t=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zr(t)?t:String(t)}var oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(i,e);var t,n,r,o=eo(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),(new or).addEmptyHiddenInputBeforeSubmit(to(n),n._getFieldElement()[0]),n}return t=i,n=[{key:"_postRegister",value:function(){$r(no(i.prototype),"_postRegister",this).call(this),this._addClickToShowMoreLinkIfNeeded()}},{key:"_addClickToShowMoreLinkIfNeeded",value:function(){var e=document.getElementById("showHiddenElements_"+this._fieldId);e&&(e.onclick=function(e){return this.nextSibling.style.display="inline",this.style.display="none",!1})}},{key:"_getAllowedValueTypesToSet",value:function(){return[Yn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new A;var t=[];return e.each((function(){t.push(pn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new pn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case Yn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("input:checked")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>",{class:h.WIZARD_FIELD_INPUT}).attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),this._setIdMoreButtonElement(e),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),this._setIdMoreButtonElement(e),new i(e,this.getFieldSettings())}},{key:"_setIdMoreButtonElement",value:function(e){pjQuery("#"+e).find(".CheckBoxListFormField_more").attr("id","showHiddenElements_"+e)}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}}],n&&Kr(t.prototype,n),r&&Kr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=ro(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(oo,"TYPE","CheckboxListField");const io=oo;function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fo(r.key),r)}}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=co(e);if(t){var o=co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function co(e){return co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},co(e)}function fo(e){var t=function(e,t){if("object"!==ao(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ao(t)?t:String(t)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(i,e);var t,n,r,o=so(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new Ot(e):new A}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,J.onFieldValueChange(e.getFieldId())}))}}],n&&uo(t.prototype,n),r&&uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=fo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(po,"TYPE","InputField");const yo=po;function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_o(r.key),r)}}function bo(e,t){return bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bo(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);if(t){var o=go(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},go(e)}function _o(e){var t=function(e,t){if("object"!==ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ho(t)?t:String(t)}var wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bo(e,t)}(i,e);var t,n,r,o=mo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Rt.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new Rt(PortalString.toFloat(e)):new A}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}],n&&vo(t.prototype,n),r&&vo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=_o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wo,"TYPE","CurrencyField");const So=wo;n(38478);function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Po(r.key),r)}}function Po(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oo(t)?t:String(t)}function ko(){return ko="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Io(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ko.apply(this,arguments)}function To(e,t){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},To(e,t)}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Io(e);if(t){var o=Io(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Io(e){return Io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Io(e)}var Fo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&To(e,t)}(i,e);var t,n,r,o=jo(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._registerFieldDependenciesForDependentFields(e,n._getDepedentFieldsMetadata()),n}return t=i,(n=[{key:"_getDepedentFieldsMetadata",value:function(){throw new Error("notImplementedError")}},{key:"_registerFieldDependenciesForDependentFields",value:function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&B.registerFieldDependency(e,t[n].id,B.TYPE_VALUES)}},{key:"onRelatedFieldValueChange",value:function(e){ko(Io(i.prototype),"onRelatedFieldValueChange",this).call(this,e),e!==this._fieldId&&J.onFieldValueChange(this._fieldId)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)}},{key:"_cloneCurrentFieldForNewTableRow",value:function(e,t){ko(Io(i.prototype),"cloneForNewTableRow",this).call(this,e,t)}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=J.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}}},{key:"_createFieldMetadata",value:function(e,t){return{id:e,suffix:t}}}])&&Eo(t.prototype,n),r&&Eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);const Ro=Fo;function Co(e){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lo(r.key),r)}}function Ao(e,t){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ao(e,t)}function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=No(e);if(t){var o=No(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},No(e)}function Lo(e){var t=function(e,t){if("object"!==Co(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Co(t)?t:String(t)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ao(e,t)}(i,e);var t,n,r,o=xo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._assertIsValidPortalDateObject(e),t._date=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._date.format()}},{key:"getFormattedDateString",value:function(e){return this._date.format(e)}},{key:"getPortalDate",value:function(){return this._date}},{key:"_assertIsValidPortalDateObject",value:function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")}}])&&Do(t.prototype,n),r&&Do(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Lo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Mo,"TYPE","FieldDateValue");const Bo=Mo;function Vo(e){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(e)}function Uo(e,t,n){return(t=Ho(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ho(r.key),r)}}function Ho(e){var t=function(e,t){if("object"!==Vo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vo(t)?t:String(t)}function Yo(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var zo=new WeakSet,Qo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yo(this,zo)}var t,n,r;return t=e,(n=[{key:"getBrowserTimeZone",value:function(){return"undefined"==typeof Intl?"":function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,zo,qo).call(this,Intl.DateTimeFormat().resolvedOptions().timeZone)}}])&&Wo(t.prototype,n),r&&Wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qo(e){var t;return(Uo(t={"Africa/Timbuktu":"Africa/Abidjan","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Santa_Isabel":"America/Tijuana","America/Shiprock":"America/Denver","America/Virgin":"America/Port_of_Spain","Antarctica/South_Pole":"Pacific/Auckland","Asia/Ashkhabad":"Asia/Ashgabat","Asia/Calcutta":"Asia/Kolkata","Asia/Chongqing":"Asia/Shanghai","Asia/Chungking":"Asia/Shanghai","Asia/Dacca":"Asia/Dhaka","Asia/Harbin":"Asia/Shanghai","Asia/Istanbul":"Europe/Istanbul","Asia/Kashgar":"Asia/Urumqi[note 1]","Asia/Katmandu":"Asia/Kathmandu","Asia/Macao":"Asia/Macau","Asia/Rangoon":"Asia/Yangon","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Thimbu":"Asia/Thimphu","Asia/Ujung_Pandang":"Asia/Makassar","Asia/Ulan_Bator":"Asia/Ulaanbaatar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Europe/Belfast":"Europe/London","Europe/Nicosia":"Asia/Nicosia","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",Navajo:"America/Denver",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham","Pacific/Johnston":"Pacific/Honolulu","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",PRC:"Asia/Shanghai",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Pacific-New":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago","W-SU":"Europe/Moscow"},"W-SU","Europe/Moscow"),Uo(t,"Etc/UTC","GMT"),Uo(t,"UTC","GMT"),t)[e]||e}const Go=Qo;function Jo(e){return Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ko(r.key),r)}}function Ko(e){var t=function(e,t){if("object"!==Jo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jo(t)?t:String(t)}function $o(){return $o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ni(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},$o.apply(this,arguments)}function Xo(e,t){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xo(e,t)}function ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ni(e);if(t){var o=ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ti(e)}(this,n)}}function ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ni(e){return ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ni(e)}function ri(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var oi=new WeakSet,ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xo(e,t)}(i,e);var t,n,r,o=ei(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ri(ti(n=o.call(this,e,t)),oi),n._timeZoneHelper=new Go,n}return t=i,n=[{key:"_postRegister",value:function(){(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n})(this,oi,ai).call(this),J.onFieldValueChange(this._fieldId),$o(ni(i.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Bo.TYPE]}},{key:"_createYearInput",value:function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=bn.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInputIfNeeded(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a}},{key:"_createMonthInput",value:function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),s=bn.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,s,t),l.fnt=function(){u._updateDayInputIfNeeded(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l}},{key:"_createDayInput",value:function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),s=bn.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,s,t),l}},{key:"_updateDayInputIfNeeded",value:function(e,t,n,r){if(document.getElementById(e+"_day")){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=bn.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,a[0].name)}}},{key:"_hideInput",value:function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddentype","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t}},{key:"_populateSelectElement",value:function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}}},{key:"_populateSelectElementFromDatasource",value:function(e,t,n){if(e)for(var r=t.getOptions(),o=0;o<r.length;++o){var i=r[o];e.appendChild(this._createOptionElement(parseInt(i.id,10),n,(function(e){return i.name})))}}},{key:"_createSelectElement",value:function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input "+h.WIZARD_FIELD_INPUT_CONTAINER+" "+h.WIZARD_FIELD_INPUT),r.setAttribute("tabindex",n),this.isRequired()&&r.setAttribute("aria-required","true"),r}},{key:"_createOptionElement",value:function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.setAttribute("class",h.WIZARD_FIELD_INPUT),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r}},{key:"_getMaxDaysForInput",value:function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)}},{key:"_getDaysForMonthAndYear",value:function(e,t){var n=!1;return e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1,e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:1===t||t%4==0?29:28}},{key:"_clearSelectElementById",value:function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t}},{key:"_normalize",value:function(e){return PortalString.zeroPad(e,2)}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t,n){bn.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)}},{key:"_cloneDatasource",value:function(e,t){bn.cloneDatasource(this._fieldId+"_"+e,t+"_"+e)}},{key:"_inputSupported",value:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t.type===e}},{key:"_isSafariBrowser",value:function(e){var t="undefined"!=typeof window&&window.navigator.userAgent;if(t){var n=/Version\/([0-9]+\.[0-9]+).*Mobile.*Safari/i.test(t)||/Version\/([0-9]+\.[0-9]+).*Safari/i.test(t)||/Safari\/([0-9]+\.[0-9]+)/i.test(t),r=/Chrome\/([0-9]+\.[0-9]+)/i.test(t)||/Chromium\/([0-9]+\.[0-9]+)/i.test(t);return n&&!r}return!1}},{key:"_buildDateTime",value:function(e,t){return LuxonDateTime.fromSeconds(e.timestamp,{zone:e.timezone,locale:null!=t?t:"en-US"})}},{key:"_addMinAndMaxAttributes",value:function(e,t,n){var r=this._buildDateTime(e),o=this._buildDateTime(t),i=document.getElementById(this.getFieldId());i.setAttribute(e.attribute,r.toFormat(n)),i.setAttribute(t.attribute,o.toFormat(n))}}],n&&Zo(t.prototype,n),r&&Zo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);function ai(){var e=document.createElement("input");e.setAttribute("id",this.getFieldId()+"_timeZone"),e.setAttribute("name",this.getFieldId()+"_timeZone"),e.setAttribute("hidden",!0),e.value=this._timeZoneHelper.getBrowserTimeZone(),document.getElementById(this.getFieldId()).append(e)}const ui=ii;function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,di(r.key),r)}}function ci(e,t){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ci(e,t)}function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pi(e);if(t){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pi(e){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pi(e)}function di(e){var t=function(e,t){if("object"!==li(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===li(t)?t:String(t)}var yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(i,e);var t,n,r,o=fi(i);function i(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var a=PortalDate.fromParams(e,t,n);return(r=o.call(this,a))._day=n,r._month=t,r._year=e,r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&si(t.prototype,n),r&&si(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bo);!function(e,t,n){(t=di(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yi,"TYPE","FieldFullDateValue");const hi=yi;function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Si(r.key),r)}}function mi(){return mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},mi.apply(this,arguments)}function gi(e,t){return gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gi(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wi(e);if(t){var o=wi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wi(e){return wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wi(e)}function Si(e){var t=function(e,t){if("object"!==vi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vi(t)?t:String(t)}var Oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gi(e,t)}(i,e);var t,n,r,o=_i(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datePickerElementId=n||r.getSetting("datePickerElementId"),r._locale=r.getSetting("locale"),r._dateFormat=r.getSetting("dateFormat"),r._luxonDateFormat=r.getSetting("luxonDateFormat"),r._nextMonthText=r.getSetting("nextMonthText"),r._previousMonthText=r.getSetting("previousMonthText"),r._yearRange=r.getSetting("yearRange"),r._minDate=r.getSetting("minDate"),r._maxDate=r.getSetting("maxDate"),r._altField=r.getSetting("altField"),r._defaultDate=r.getSetting("defaultDate"),r._firstDay=r.getSetting("firstDay"),r._includeBaseCss=pjQuery("#"+e).data("include-base-css")||!1,r._displayInline=pjQuery("#"+e).data("display-inline")||!1,r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e={dateFormat:this._dateFormat,nextText:this._nextMonthText,prevText:this._previousMonthText,changeMonth:!0,changeYear:!0,yearRange:this._yearRange,firstDay:this._firstDay},t=this._locale.replace("_","-");void 0!==this._minDate&&null!==this._minDate&&(e.minDate=this._buildDateTime(this._minDate,t).toFormat(this._luxonDateFormat)),void 0!==this._maxDate&&null!==this._maxDate&&(e.maxDate=this._buildDateTime(this._maxDate,t).toFormat(this._luxonDateFormat)),void 0!==this._altField&&null!==this._altField&&(e.altField=this._altField),void 0!==this._defaultDate&&null!==this._defaultDate&&(e.defaultDate=this._defaultDate),this._setDatePickerLocale(this._locale),this._includeBaseCssIfNecessary(e),pjQuery("#"+this._datePickerElementId).datepicker(e),mi(wi(i.prototype),"_postRegister",this).call(this)}},{key:"_includeBaseCssIfNecessary",value:function(e){this._includeBaseCss&&(this._displayInline?pjQuery("#"+this._datePickerElementId).addClass("ui-base-css"):e.beforeShow=function(e,t){pjQuery(t.dpDiv).parent().hasClass("ui-base-css")||pjQuery(t.dpDiv).wrap("<div class='ui-base-css'></div>")})}},{key:"getValue",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?new hi(e.getFullYear(),e.getMonth()+1,e.getDate()):new A}},{key:"getValueForCondition",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?e.getFullYear()+"-"+PortalString.zeroPad(e.getMonth()+1,2)+"-"+PortalString.zeroPad(e.getDate(),2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().datepicker("setDate",e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){var n=this._datePickerElementId.replace(/^((\d+-)+)\d+(_datepicker)*$/,"$1"+t+"$3");return new i(e,this.getFieldSettings(),n)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this.getFieldId();this._getFieldElement().datepicker("option","onSelect",(function(t){J.onFieldValueChange(e)}))}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}}],n&&bi(t.prototype,n),r&&bi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ui);!function(e,t,n){(t=Si(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Oi,"TYPE","CustomFormatDateField");const Ei=Oi;function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ti(r.key),r)}}function Ti(e){var t=function(e,t){if("object"!==Pi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pi(t)?t:String(t)}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fi(e);if(t){var o=Fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fi(e){return Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fi(e)}var Ri=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}(i,e);var t,n,r,o=Ii(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,ne.EQUAL,null)}return t=i,(n=[{key:"getValue",value:function(){return J.getFieldValueForCondition(this._parentDependencyFieldId)}}])&&ki(t.prototype,n),r&&ki(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Y);const Ci=Ri;n(4129);function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xi(r.key),r)}}function xi(e){var t=function(e,t){if("object"!==Di(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Di(t)?t:String(t)}function Ni(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Li(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Bi(e,t,"get"))}function Mi(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Bi(e,t,"set"),n),n}function Bi(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Vi=new WeakMap,Ui=new WeakMap,Wi=new WeakMap,Hi=new WeakMap,Yi=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ni(this,Vi,{writable:!0,value:void 0}),Ni(this,Ui,{writable:!0,value:void 0}),Ni(this,Wi,{writable:!0,value:void 0}),Ni(this,Hi,{writable:!0,value:void 0}),Mi(this,Vi,t),Mi(this,Ui,n),Mi(this,Wi,r),Mi(this,Hi,o)}var t,n,r;return t=e,(n=[{key:"getFieldId",value:function(){return Li(this,Vi)}},{key:"getValue",value:function(){return Li(this,Ui)}},{key:"getPlaceholderText",value:function(){return Li(this,Wi)}},{key:"getTabIndex",value:function(){return Li(this,Hi)}}])&&Ai(t.prototype,n),r&&Ai(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const zi=Yi;function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gi(r.key),r)}}function Gi(e){var t=function(e,t){if("object"!==Qi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qi(t)?t:String(t)}var Ji=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"clone",value:function(e,t){throw new Error("Unimplemented method: clone()")}}])&&qi(t.prototype,n),r&&qi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$i(r.key),r)}}function $i(e){var t=function(e,t){if("object"!==Zi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zi(t)?t:String(t)}function Xi(e,t){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xi(e,t)}function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ta(e);if(t){var o=ta(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ta(e){return ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ta(e)}var na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xi(e,t)}(i,e);var t,n,r,o=ea(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){throw new Error("Unimplemented method: _fixPlaceholderTextInClonedHtmlNode()")}},{key:"_executeAfterCloningTasks",value:function(e,t,n){}},{key:"clone",value:function(e,t){var n=t.getFieldId(),r=this._cloneFieldHtmlElement(e.getFieldId(),t,null!==t.getValue());this._insertClonedHtml(r,n);var o=this._createClonedField(e,n);return this._executeAfterCloningTasks(e,o,t),o}},{key:"_insertClonedHtml",value:function(e,t){document.getElementById(t).replaceWith(e)}},{key:"_createClonedField",value:function(e,t){return e._buildClonedField(t)}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=this._cloneHtml(e);return this._fixIdInClonedHtmlNode(r,e,t.getFieldId()),this._fixValueInClonedHtmlNodeIfNeeded(n,r,t.getValue()),this._fixPlaceholderTextInClonedHtmlNode(r,t.getPlaceholderText()),this._fixTabIndexInClonedHtmlNode(r,t.getTabIndex()),r}},{key:"_cloneHtml",value:function(e){return document.getElementById(e).cloneNode(!1)}},{key:"_fixIdInClonedHtmlNode",value:function(e,t,n){var r=document.getElementById(t),o=new RegExp(t,"g");e.getAttributeNames().forEach((function(t){var r=e.getAttribute(t);if(o.test(r)){var i=r.replace(o,n);e.setAttribute(t,i)}})),e.innerHTML=r.innerHTML.replace(o,n)}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){e&&(t.value=n)}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){e.tabIndex=t}}])&&Ki(t.prototype,n),r&&Ki(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ji);const ra=na;function oa(e){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(e)}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aa(r.key),r)}}function aa(e){var t=function(e,t){if("object"!==oa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oa(t)?t:String(t)}function ua(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function la(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var sa=new WeakSet,ca=new WeakSet,fa=new WeakSet,pa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ua(this,fa),ua(this,ca),ua(this,sa)}var t,n,r;return t=e,(n=[{key:"linkFields",value:function(e,t){la(this,sa,da).call(this,e,t),la(this,ca,ya).call(this,e,t),la(this,fa,ha).call(this,e,t),la(this,fa,ha).call(this,t,e)}}])&&ia(t.prototype,n),r&&ia(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function da(e,t){var n=e.shouldBeMasked.bind(e),r=t.shouldBeMasked.bind(t),o=function(e){return n(e)&&r(e)};e.shouldBeMasked=o,t.shouldBeMasked=o}function ya(e,t){var n=e.setIsMaskedWithoutPermissionsRole.bind(e),r=t.setIsMaskedWithoutPermissionsRole.bind(t),o=function(e){n(e),r(e)};e.setIsMaskedWithoutPermissionsRole=o,t.setIsMaskedWithoutPermissionsRole=o}function ha(e,t){e.addListener("unmaskedClicked",(function(){return t.unmaskField()})),e.addListener("unmaskedLostFocus",(function(){return t.maskField()})),e.addListener("fieldWasUnmasked",(function(){return t.unmaskField()}))}const va=pa;function ba(e){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(e)}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ga(r.key),r)}}function ga(e){var t=function(e,t){if("object"!==ba(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ba(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ba(t)?t:String(t)}function _a(e,t){return _a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_a(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sa(e);if(t){var o=Sa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sa(e)}var Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_a(e,t)}(i,e);var t,n,r,o=wa(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}}])&&ma(t.prototype,n),r&&ma(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ra);const Ea=Oa;function Pa(e){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(e)}function ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ta(r.key),r)}}function Ta(e){var t=function(e,t){if("object"!==Pa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pa(t)?t:String(t)}function ja(e,t){return ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ja(e,t)}function Ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ca(e);if(t){var o=Ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fa(e)}(this,n)}}function Fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ra(){return Ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ca(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ra.apply(this,arguments)}function Ca(e){return Ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ca(e)}function Da(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Aa(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Na(e,t,"get"))}function xa(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Na(e,t,"set"),n),n}function Na(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var La=new WeakMap,Ma=new WeakSet,Ba=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ja(e,t)}(i,e);var t,n,r,o=Ia(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){Da(e,t),t.add(e)}(Fa(t=o.call(this)),Ma),function(e,t,n){Da(e,t),t.set(e,n)}(Fa(t),La,{writable:!0,value:void 0}),xa(Fa(t),La,e),t}return t=i,(n=[{key:"_executeAfterCloningTasks",value:function(e,t,n){Ra(Ca(i.prototype),"_executeAfterCloningTasks",this).call(this,e,t,n),Aa(this,La)._executeAfterCloningTasks(e,t,n),(new va).linkFields(e,t),t._postRegister()}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=Fields.getField(e),o=Aa(this,La)._cloneFieldHtmlElement(e,t,n&&!r.isMaskedValue());if(!r||!r.hasToShowValueMasked())return o;var i=document.createElement("div"),a=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Ma,Va).call(this,r,t,n);return i.appendChild(a),i.appendChild(o),i}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){}}])&&ka(t.prototype,n),r&&ka(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ra);function Va(e,t,n){var r=new zi(t.getFieldId()+e.getSuffixMaskedField(),t.getPlaceholderText(),t.getTabIndex()),o=e.getFieldId()+e.getSuffixMaskedField(),i=Ra(Ca(Ba.prototype),"_cloneFieldHtmlElement",this).call(this,o,r,n);return Ra(Ca(Ba.prototype),"_fixValueInClonedHtmlNodeIfNeeded",this).call(this,Aa(this,La)instanceof Ea,i,i.getAttribute("value")),i}const Ua=Ba;function Wa(e){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wa(e)}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ya(r.key),r)}}function Ya(e){var t=function(e,t){if("object"!==Wa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wa(t)?t:String(t)}function za(e,t){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},za(e,t)}function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qa(e);if(t){var o=qa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qa(e)}var Ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&za(e,t)}(i,e);var t,n,r,o=Qa(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){if(t){var n=Array.from(e.children).filter((function(e){return e instanceof HTMLOptionElement})),r=n.length>0?n[0]:null;r&&!r.value&&(r.textContent=t)}}}])&&Ha(t.prototype,n),r&&Ha(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ra);const Ja=Ga;n(92222);function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function Ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$a(r.key),r)}}function $a(e){var t=function(e,t){if("object"!==Za(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Za(t)?t:String(t)}function Xa(){return Xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ru(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Xa.apply(this,arguments)}function eu(e,t){return eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eu(e,t)}function tu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ru(e);if(t){var o=ru(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nu(e)}(this,n)}}function nu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ru(e)}function ou(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function iu(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var au=new WeakSet,uu=new WeakSet,lu=new WeakSet,su=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eu(e,t)}(i,e);var t,n,r,o=tu(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ou(nu(e=o.call.apply(o,[this].concat(n))),lu),ou(nu(e),uu),ou(nu(e),au),e}return t=i,(n=[{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_executeAfterCloningTasks",value:function(e,t,n){Xa(ru(i.prototype),"_executeAfterCloningTasks",this).call(this,e,t,n),iu(this,lu,pu).call(this,t,n.getPlaceholderText()),iu(this,uu,fu).call(this,t,n.getValue())}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=Xa(ru(i.prototype),"_cloneFieldHtmlElement",this).call(this,e,t,n),o=document.getElementById(e).parentElement,a=iu(this,au,cu).call(this,o,e,t.getFieldId()),u=document.getElementById(e+"-liveContainer"),l=iu(this,au,cu).call(this,u,e,t.getFieldId());return a.appendChild(l),a.appendChild(r),a}}])&&Ka(t.prototype,n),r&&Ka(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ra);function cu(e,t,n){var r=new RegExp(t),o=e.cloneNode(!1),i=o.getAttribute("id").replace(r,n);return o.setAttribute("id",i),o}function fu(e,t){null!==t&&e.setValue(new Gt(t))}function pu(e,t){t&&e.setPlaceholderText(t)}const du=su;function yu(e){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vu(r.key),r)}}function vu(e){var t=function(e,t){if("object"!==yu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yu(t)?t:String(t)}function bu(e,t){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bu(e,t)}function mu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gu(e);if(t){var o=gu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function gu(e){return gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gu(e)}var _u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bu(e,t)}(i,e);var t,n,r,o=mu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){e.placeholder=t,e.setAttribute("data-placeholder",t)}}])&&hu(t.prototype,n),r&&hu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ra);const wu=_u;function Su(e){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(e)}function Ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eu(r.key),r)}}function Eu(e){var t=function(e,t){if("object"!==Su(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Su(t)?t:String(t)}var Pu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"create",value:function(e){switch(e.getType()){case EncryptedAutocompleteSelectField.TYPE:return new Ua(new du);case EncryptedSelectField.TYPE:return new Ua(new Ja);case EncryptedFullDateField.TYPE:return new Ua(new Ea);case EncryptedTextField.TYPE:return new Ua(new wu);default:return new wu}}}])&&Ou(t.prototype,n),r&&Ou(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ku=Pu;function Tu(e){return Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(e)}function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cu(r.key),r)}}function Iu(e,t){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iu(e,t)}function Fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ru(e);if(t){var o=Ru(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Tu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ru(e){return Ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ru(e)}function Cu(e){var t=function(e,t){if("object"!==Tu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tu(t)?t:String(t)}var Du=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(i,e);var t,n,r,o=Fu(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fieldToConfirmId=n.getSetting("fieldToConfirmId"),n._placeholderText=n.getSetting("placeholderText"),n._tabIndex=n.getSetting("tabIndex"),n._confirmationField=null,n.getWizard().addListenerOnce(sP.EVENT_AFTER_FIELDS_REGISTER,n.caller("_cloneFieldToConfirm")),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return this._confirmationField?this._confirmationField.getValue():new A}},{key:"setValue",value:function(e){this._confirmationField&&this._confirmationField.setValue(e)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_cloneFieldToConfirm",value:function(){var e=new ku,t=new zi(this.getFieldId(),this._getValueToSet(),this._placeholderText,this._tabIndex);try{var n=J.getField(this._fieldToConfirmId),r=e.create(n);this._confirmationField=r.clone(n,t),this._addHiddenInputIfNeeded(n),this._buildConditionForFieldToConfirm()}catch(e){console.error(e),this._getFieldContainerElement().remove(),J.unregisterField(this.getFieldId())}}},{key:"_addHiddenInputIfNeeded",value:function(e){!e._isActive()&&this._isActive()&&(this._addHiddenElementIndicator(),this.setVisibilityStatusByType(Le.DISPLAY_CONDITIONALLY,!1))}},{key:"_buildConditionForFieldToConfirm",value:function(){this.addVisibilityCondition(new Ci(this._fieldToConfirmId))}},{key:"_getValueToSet",value:function(){return document.getElementsByClassName("WizardFieldError").length?this.getSetting("value"):null}}],n&&ju(t.prototype,n),r&&ju(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Cu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Du,"TYPE","ConfirmationField");const Au=Du;function xu(e){return xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(e)}function Nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uu(r.key),r)}}function Lu(){return Lu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Lu.apply(this,arguments)}function Mu(e,t){return Mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mu(e,t)}function Bu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vu(e);if(t){var o=Vu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vu(e){return Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vu(e)}function Uu(e){var t=function(e,t){if("object"!==xu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xu(t)?t:String(t)}var Wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mu(e,t)}(i,e);var t,n,r,o=Bu(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fixedYear=n.getSetting("fixedYear"),n._tabIndex=n.getSetting("tabIndex"),n._dayPlaceholder=n.getSetting("dayPlaceholder"),n._monthPlaceholder=n.getSetting("monthPlaceholder"),n._dayLabel=n.getSetting("dayLabel"),n._monthLabel=n.getSetting("monthLabel"),B.registerFieldDependency(e,n._getMonthId(),B.TYPE_VALUES),B.registerFieldDependency(e,n._getDayId(),B.TYPE_VALUES),n}return t=i,n=[{key:"_postRegister",value:function(){this._createWidget(),Lu(Vu(i.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new A;var t=e.split("-"),n=PortalString.toInt(t[1]),r=PortalString.toInt(t[0]);return new FieldDayAndMonthValue(r,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?this._fixedYear+"-"+e:""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("MM-dd")),this._setElementComponentsValues(e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),new i(e,this.getFieldSettings())}},{key:"_setElementComponentsValues",value:function(e){J.setFieldValue(this._getMonthId(),new FieldIdValue((e.getMonth()+1).toString())),J.setFieldValue(this._getDayId(),new FieldIdValue(e.getDate().toString()))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getMonthId(),this._getMonthSuffix()),this._createFieldMetadata(this._getDayId(),this._getDaySuffix())]}},{key:"_getMonthId",value:function(){return this.getFieldId()+this._getMonthSuffix()}},{key:"_getDayId",value:function(){return this.getFieldId()+this._getDaySuffix()}},{key:"_getMonthSuffix",value:function(){return"_month"}},{key:"_getDaySuffix",value:function(){return"_day"}},{key:"_createWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));this._initDefaultValues(e.value),e.parentNode.appendChild(this._createMonthAndDayInputs())}},{key:"_elementAllowsChangingType",value:function(e){return!1}},{key:"_initDefaultValues",value:function(e){if(this._month=this._day=0,e){var t=e.split("-");this._month=PortalString.toInt(t[0]),this._day=PortalString.toInt(t[1])}}},{key:"_createMonthAndDayInputs",value:function(){var e=this;return this._monthInput=this._createMonthInput(this._fieldId,this._month,this._fixedYear,this._tabIndex,null,null,this._monthPlaceholder),this._monthInput.onchange=function(){e._month=this.value,e._day=0,e._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._fixedYear,this._tabIndex,null,null,this._dayPlaceholder),this._dayInput.onchange=function(){e._day=this.value,e._updateHiddenInputValue()},this._dayLabel||this._monthLabel?this._createWidgetWithLabelsFromInputs(this._dayInput,this._monthInput):this._createWidgetWithoutLabelsFromInputs(this._dayInput,this._monthInput)}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._normalize(this._month)+"-"+this._normalize(this._day),J.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(t),n.appendChild(e),n}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=h.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS;var r=document.createElement("div");r.className="DayAndMont_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="DayAndMont_DayWrapper",o.appendChild(this._createLabelFor(e.id,this._dayLabel)),o.appendChild(e),n.appendChild(r),n.appendChild(o),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.className="WizardSubFieldLabel "+h.WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS,n.setAttribute("for",e),n.textContent=t,n}}],n&&Nu(t.prototype,n),r&&Nu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ui);!function(e,t,n){(t=Uu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wu,"TYPE","DayAndMonthDateField");const Hu=Wu;function Yu(e){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(e)}function zu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ju(r.key),r)}}function Qu(e,t){return Qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qu(e,t)}function qu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gu(e);if(t){var o=Gu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gu(e){return Gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gu(e)}function Ju(e){var t=function(e,t){if("object"!==Yu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yu(t)?t:String(t)}var Zu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qu(e,t)}(i,e);var t,n,r,o=qu(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._notSelectedOptionValue=n.getSetting("notSelectedOptionValue")||"",n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new A:new nn(e,pjQuery("#"+this._fieldId+" option:selected").text())}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Gt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_unsetField",value:function(e){e.val(this._notSelectedOptionValue)}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=pjQuery("#"+this.getFieldId()).find('option:not([value="'+this._notSelectedOptionValue+'"])');1===e.length&&this.setValue(new Gt(e[0].value))}}],n&&zu(t.prototype,n),r&&zu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=Ju(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zu,"TYPE","SelectField");const Ku=Zu;function $u(e){return $u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,el(r.key),r)}}function el(e){var t=function(e,t){if("object"!==$u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$u(t)?t:String(t)}var tl=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._onClick=n,this._primary=r}var t,n,r;return t=e,(n=[{key:"getText",value:function(){return this._text}},{key:"getOnClick",value:function(){return this._onClick}},{key:"isPrimary",value:function(){return this._primary}}])&&Xu(t.prototype,n),r&&Xu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const nl=tl;function rl(e){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(e)}function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,il(r.key),r)}}function il(e){var t=function(e,t){if("object"!==rl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rl(t)?t:String(t)}var al=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t,this._description=n,this._buttons=r,this._appendTo=o,this._beforeClose=i,this._closeText=a,this.BUTTON_CLASS_COMMON="upload-large-files__button",this.BUTTON_CLASS_PRIMARY="upload-large-files__button--primary",this.BUTTON_CLASS_NOT_PRIMARY="upload-large-files__button--secondary",this.DIALOG_CLASS="largeFileUploadJqueryUiModal"}var t,n,r;return t=e,(n=[{key:"show",value:function(){var e=this,t='<div title="'+this._title+'"><p>'+this._description+"</p></div>",n=this._buttons.map((function(t){return{text:t.getText(),click:t.getOnClick(),class:e.BUTTON_CLASS_COMMON+" "+(t.isPrimary()?e.BUTTON_CLASS_PRIMARY:e.BUTTON_CLASS_NOT_PRIMARY)}}));pjQuery(t).dialog({modal:!0,appendTo:this._appendTo,closeOnEscape:!1,dialogClass:this.DIALOG_CLASS,width:"439",buttons:n,beforeClose:this._beforeClose,closeText:this._closeText})}}])&&ol(t.prototype,n),r&&ol(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ul=al;function ll(e){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(e)}function sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fl(r.key),r)}}function cl(e,t,n){return(t=fl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fl(e){var t=function(e,t){if("object"!==ll(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ll(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ll(t)?t:String(t)}var pl=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),cl(this,"_encryptedField",void 0),cl(this,"_isMaskedValue",void 0),this._encryptedField=t,this._isMaskedValue=n}var t,n,r;return t=e,(n=[{key:"load",value:function(){this._setAttributesFromRegistrars(),this._setOnClickInputListener(),this._addActionBeforeSubmit(),this._setOnResetFormListener(),this._setEventWhenUnmaskedFieldIsClicked()}},{key:"onFocusIsLost",value:function(e){this._encryptedField.shouldBeMasked(null==e?void 0:e.relatedTarget)&&(this.maskField(),this._encryptedField.dispatchEvent("unmaskedLostFocus"))}},{key:"onClickInputListener",value:function(e){if(this._encryptedField.hasToShowValueMasked())if(this._encryptedField.isMaskedWithoutPermissionsRole()){e.preventDefault();var t=this,n=new nl(this._encryptedField.getDictionary().deleteButton,(function(){pjQuery(this).dialog("close"),t.unmaskField(),t._encryptedField.dispatchEvent("fieldWasUnmasked"),t.focusAfterTasks(),t._encryptedField.setIsMaskedWithoutPermissionsRole(!1)}),!0),r=new nl(this._encryptedField.getDictionary().cancelButton,(function(){pjQuery(this).dialog("close")}),!1);new ul(this._encryptedField.getDictionary().titleDialog,this._encryptedField.getDictionary().descriptionDialog,[n,r],"",null,this._encryptedField.getDictionary().closeText).show()}else this.unmaskField(),this._encryptedField.dispatchEvent("fieldWasUnmasked"),this.focusAfterTasks()}},{key:"unmaskField",value:function(){this._hasUnmaskedFieldCreated()&&(this._encryptedField.setIsMaskedValue(!1),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!0),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!1))}},{key:"maskField",value:function(){var e=!this._encryptedField.getValue().isEmpty();this._hasUnmaskedFieldCreated()&&this._encryptedField.hasToShowValueMasked()&&e&&(this._encryptedField.updateMaskedValue(),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!1),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!0))}},{key:"focusAfterTasks",value:function(){var e=this;setTimeout((function(){return e._encryptedField.getFocusableInput().focus()}))}},{key:"setOnFocusIsLostListener",value:function(){var e=this._encryptedField.getFocusableInput();null==e||e.addEventListener("blur",this.onFocusIsLost.bind(this))}},{key:"_setAttributesFromRegistrars",value:function(){this._encryptedField.setIsMaskedValue(void 0!==this._isMaskedValue?this._isMaskedValue:this._encryptedField.getSetting("isMaskedValue")),this._encryptedField._hasToShowValueMasked=this._encryptedField.getSetting("hasToShowValueMasked"),this._encryptedField.setIsMaskedWithoutPermissionsRole(this._encryptedField.getSetting("maskedWithoutPermissionsRole")),this._encryptedField._dictionary=this._encryptedField.getSetting("dictionary"),this._encryptedField._suffixMaskedField=this._encryptedField.getSetting("suffixMaskedField")}},{key:"_setOnClickInputListener",value:function(){var e=this._encryptedField.getMaskedFieldElement();null==e||e.addEventListener("mousedown",this._encryptedField.caller("onClickInputListener"))}},{key:"_addActionBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addActionBeforeSubmit((function(){e._encryptedField.isMaskedValue()&&e._preventFieldFromBeingSentOnSubmitRequest()}),this._encryptedField.getFormContainer())}},{key:"_preventFieldFromBeingSentOnSubmitRequest",value:function(){var e=this._encryptedField._getFieldElement();e.length&&e.get(0).removeAttribute("name")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this._encryptedField.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._setAttributesFromRegistrars(),t.maskField()}))}},{key:"_setEventWhenUnmaskedFieldIsClicked",value:function(){var e,t=this;null===(e=this._encryptedField.getFieldElement())||void 0===e||e.addEventListener("mousedown",(function(e){return t._encryptedField.dispatchEvent("unmaskedClicked",e)}))}},{key:"_hasUnmaskedFieldCreated",value:function(){return Boolean(this._encryptedField.getMaskedFieldElement())}}])&&sl(t.prototype,n),r&&sl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const dl=pl;function yl(e){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(e)}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sl(r.key),r)}}function vl(){return vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},vl.apply(this,arguments)}function bl(e,t){return bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bl(e,t)}function ml(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_l(e);if(t){var o=_l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gl(e)}(this,n)}}function gl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _l(e){return _l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_l(e)}function wl(e,t,n){return(t=Sl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sl(e){var t=function(e,t){if("object"!==yl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yl(t)?t:String(t)}var Ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bl(e,t)}(i,e);var t,n,r,o=ml(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),wl(gl(r=o.call(this,e,t)),"_suffixMaskedField",void 0),wl(gl(r),"_maskedWithoutPermissionsRole",void 0),wl(gl(r),"_hasToShowValueMasked",void 0),wl(gl(r),"_isMaskedValue",void 0),wl(gl(r),"_dictionary",void 0),wl(gl(r),"_encryptedFieldHandler",void 0),wl(gl(r),"_elementThatKeepsFieldUnmasked",void 0),r._encryptedFieldHandler=new dl(gl(r),n),r._encryptedFieldHandler.load(),r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;vl(_l(i.prototype),"_postRegister",this).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings(),!1)}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldElement().querySelector("option").textContent=i.MASKED_VALUE}}])&&hl(t.prototype,n),r&&hl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ku);wl(Ol,"TYPE","EncryptedSelectField"),wl(Ol,"MASKED_VALUE","********");const El=Ol;function Pl(e){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(e)}function kl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Al(r.key),r)}}function Tl(){return Tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Tl.apply(this,arguments)}function jl(e,t){return jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jl(e,t)}function Il(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rl(e);if(t){var o=Rl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fl(e)}(this,n)}}function Fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rl(e){return Rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rl(e)}function Cl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Dl(e,t,n){return(t=Al(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Al(e){var t=function(e,t){if("object"!==Pl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pl(t)?t:String(t)}var xl=new WeakSet,Nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jl(e,t)}(i,e);var t,n,r,o=Il(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Cl(Fl(a=o.call(this,e,t,n)),xl),Dl(Fl(a),"_suffixMaskedField",void 0),Dl(Fl(a),"_maskedWithoutPermissionsRole",void 0),Dl(Fl(a),"_hasToShowValueMasked",void 0),Dl(Fl(a),"_isMaskedValue",void 0),Dl(Fl(a),"_dictionary",void 0),Dl(Fl(a),"_encryptedFieldHandler",void 0),a._encryptedFieldHandler=new dl(Fl(a),r),a._encryptedFieldHandler.load(),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(Fl(a),xl,Ll).call(Fl(a)),a}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;Tl(Rl(i.prototype),"_postRegister",this).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings(),this.getFieldId(),!1)}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_attachOnChangeListener",value:function(){var e=this;this._getFieldElement().on("change",(function(){J.onFieldValueChange(e.getFieldId()),setTimeout((function(){var t;null===(t=e._getClearButton())||void 0===t||t.addEventListener("blur",(function(t){e.onFocusIsLost(t)}))}))}))}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return pjQuery("#"+i.PREFIX_UI_WIDGET+this._fieldId)}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return document.querySelector(".select2Container"+this._fieldId)}},{key:"shouldBeMasked",value:function(e){var t=this._getClearButton();return e!==this.getFocusableInput()&&(e!==t||null===t)&&null===document.querySelector("#select2-".concat(this._fieldId,"-results"))}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldElement().querySelector("option").textContent=i.MASKED_VALUE}}])&&kl(t.prototype,n),r&&kl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nn);function Ll(){var e=this;this._getFieldElement().on("select2:close",(function(){return e._encryptedFieldHandler.focusAfterTasks()}))}Dl(Nl,"TYPE","EncryptedAutocompleteSelectField"),Dl(Nl,"PREFIX_UI_WIDGET","ui-widget_"),Dl(Nl,"MASKED_VALUE","********");const Ml=Nl;n(83112);function Bl(e){return Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(e)}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zl(r.key),r)}}function Ul(){return Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ul.apply(this,arguments)}function Wl(e,t){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wl(e,t)}function Hl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yl(e);if(t){var o=Yl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yl(e){return Yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yl(e)}function zl(e){var t=function(e,t){if("object"!==Bl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bl(t)?t:String(t)}var Ql=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wl(e,t)}(i,e);var t,n,r,o=Hl(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._tabIndex=n.getSetting("tabIndex"),n._accessibleLabelsDictionary=n.getSetting("accessibleLabelsDictionary"),n._isAccessible=n.getSetting("isAccessible"),n._isRequired=n.getSetting("isRequired"),n._year=n._month=n._day=0,n._yearInput=n._monthInput=n._dayInput=null;var r=n.getSetting("minDate"),a=n.getSetting("maxDate");return n._addMinAndMaxAttributes(r,a,"yyyy-LL-dd"),n}return t=i,n=[{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new A;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new hi(n,r,o)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e||""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")}},{key:"_show",value:function(){if(this._shouldActivate()){var e=this._getFieldContainerElement(),t=this._getFieldElement();e&&t&&this._valueDiffersForElement(t)&&t.val(t.val())}Ul(Yl(i.prototype),"_show",this).call(this)}},{key:"_hide",value:function(){if(this._shouldDeactivate()){var e=this._getFieldElement();this._saveDateValueForField(e)}Ul(Yl(i.prototype),"_hide",this).call(this)}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),this._cloneDatasource("year",e),new i(e,this.getFieldSettings())}},{key:"_valueDiffersForElement",value:function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t}},{key:"_saveDateValueForField",value:function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}}},{key:"_addLeadingZeros",value:function(e){return e.toString().padStart(2,"0")}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._year>0||this._month>0||this._day>0?this._year+"-"+this._normalize(this._month)+"-"+this._normalize(this._day):"",J.onFieldValueChange(this._fieldId)}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility "+h.WIZARD_FIELD_SUBFIELD_LABEL),n.textContent=t,n}},{key:"_resetDayInput",value:function(e){this._day=0;var t=this.monthInput.parentNode;t.removeChild(this._dayInput),this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e),t.appendChild(this._dayInput);var n=this;this._dayInput.onchange=function(){n._day=this.value,n._updateHiddenInputValue()}}}],n&&Vl(t.prototype,n),r&&Vl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ui);!function(e,t,n){(t=zl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ql,"TYPE","FullDateField");const ql=Ql;function Gl(e){return Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(e)}function Jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ns(r.key),r)}}function Zl(){return Zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=es(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Zl.apply(this,arguments)}function Kl(e,t){return Kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kl(e,t)}function $l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=es(e);if(t){var o=es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xl(e)}(this,n)}}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}function ts(e,t,n){return(t=ns(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e){var t=function(e,t){if("object"!==Gl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gl(t)?t:String(t)}var rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kl(e,t)}(i,e);var t,n,r,o=$l(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ts(Xl(r=o.call(this,e,t)),"_suffixMaskedField",void 0),ts(Xl(r),"_maskedWithoutPermissionsRole",void 0),ts(Xl(r),"_hasToShowValueMasked",void 0),ts(Xl(r),"_isMaskedValue",void 0),ts(Xl(r),"_dictionary",void 0),ts(Xl(r),"_encryptedFieldHandler",void 0),ts(Xl(r),"_isYearMasked",void 0),ts(Xl(r),"_isMonthMasked",void 0),ts(Xl(r),"_isDayMasked",void 0),r._isYearMasked=r.getSetting("isYearMasked"),r._isMonthMasked=r.getSetting("isMonthMasked"),r._isDayMasked=r.getSetting("isDayMasked"),r._encryptedFieldHandler=new dl(Xl(r),n),r._encryptedFieldHandler.load(),r._lastUnmaskedValue=r.getFieldElement().value,r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new i(e,this.getFieldSettings(),!1)}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),this._cloneDatasource("year",e),new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"_postRegister",value:function(){var e=this;this.getMaskedFieldElement()&&this._formatMaskedValueToFormatDateLocal(),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()})),Zl(es(i.prototype),"_postRegister",this).call(this)}},{key:"_formatMaskedValueToFormatDateLocal",value:function(){var e=this._getTextFormMaskedValue("yyyy"),t=this._getTextFormMaskedValue("mm"),n=this._getTextFormMaskedValue("dd"),r=LuxonDateTime.local(2e3,12,30).toLocaleString(LuxonDateTime.DATE_SHORT);r=(r=(r=r.replace(12..toString(),t)).replace(30..toString(),n)).replace(2e3.toString(),e),this.getMaskedFieldElement().value=r}},{key:"_getTextFormMaskedValue",value:function(e){var t="yyyy-mm-dd".indexOf(e),n=t+e.length;return this.getMaskedFieldElement().value.substring(t,n)}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){this._lastUnmaskedValue=e;var t=e;this._isYearMasked&&(t=t.replace(/\d{4}/,"****")),this._isMonthMasked&&(t=t.replace(/-\d{2}-/,"-**-")),this._isDayMasked&&(t=t.replace(/-\d{2}$/,"-**")),this.getMaskedFieldElement().value=t,this._formatMaskedValueToFormatDateLocal()}}}])&&Jl(t.prototype,n),r&&Jl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ql);ts(rs,"TYPE","EncryptedFullDateField");const os=rs;n(82481);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ys(r.key),r)}}function us(){return us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},us.apply(this,arguments)}function ls(e,t){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ls(e,t)}function ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fs(e);if(t){var o=fs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cs(e)}(this,n)}}function cs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fs(e){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fs(e)}function ps(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ds(e,t,n){return(t=ys(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e){var t=function(e,t){if("object"!==is(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===is(t)?t:String(t)}var hs=new WeakSet,vs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ls(e,t)}(i,e);var t,n,r,o=ss(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ps(cs(r=o.call(this,e,t)),hs),ds(cs(r),"_suffixMaskedField",void 0),ds(cs(r),"_maskedWithoutPermissionsRole",void 0),ds(cs(r),"_hasToShowValueMasked",void 0),ds(cs(r),"_isMaskedValue",void 0),ds(cs(r),"_dictionary",void 0),ds(cs(r),"_encryptedFieldHandler",void 0),ds(cs(r),"_maskedType",void 0),ds(cs(r),"_amountOfCharactersUnmasked",void 0),ds(cs(r),"_accessibleDescriptionText",void 0),r._maskedType=r.getSetting("maskedType"),r._amountOfCharactersUnmasked=r.getSetting("amountOfCharactersUnmasked"),r._accessibleDescriptionText=r.getSetting("accessibleDescriptionText"),r._encryptedFieldHandler=new dl(cs(r),n),r._encryptedFieldHandler.load(),r._lastUnmaskedValue=r.getFieldElement().value,r}return t=i,(n=[{key:"_postRegister",value:function(){var e=this;us(fs(i.prototype),"_postRegister",this).call(this),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,hs,bs).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return new i(e,this.getFieldSettings(),!1)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){var t;this._lastUnmaskedValue=e;var n="";if(0===this._amountOfCharactersUnmasked)t=i.FULL_MASKED_TEXT;else if(this._maskedType===i.ENCRYPTION_MASK_TYPE_POSITION_FIRST){var r=Math.min(this._amountOfCharactersUnmasked,e.length);t=(n=e.substring(0,r))+i.FULL_MASKED_TEXT}else{var o=Math.max(e.length-this._amountOfCharactersUnmasked,0);n=e.substring(o),t=i.FULL_MASKED_TEXT+n}this.getMaskedFieldElement().value=t,this._updateMaskedValueAriaLabel(n)}}},{key:"_updateMaskedValueAriaLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-aria-description");t&&this._accessibleDescriptionText&&0!==this._amountOfCharactersUnmasked&&(t.textContent=this._accessibleDescriptionText.replace("{$unmaskedCharacters}",e))}}])&&as(t.prototype,n),r&&as(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);function bs(){var e=this;this.getMaskedField().on("keypress",(function(t){t.keyCode!==vs.KEY_CODE_ENTER&&t.keyCode!==vs.KEY_CODE_SPACE||(e._encryptedFieldHandler.onClickInputListener(t),e.getFieldElement().select()),t.preventDefault()})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}ds(vs,"TYPE","EncryptedTextField"),ds(vs,"ENCRYPTION_MASK_TYPE_POSITION_FIRST",2),ds(vs,"ENCRYPTION_MASK_TYPE_POSITION_LAST",1),ds(vs,"FULL_MASKED_TEXT","*".repeat(8)),vs.KEY_CODE_ENTER=13,vs.KEY_CODE_SPACE=32;const ms=vs;function gs(e){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(e)}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Es(r.key),r)}}function ws(e,t){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ws(e,t)}function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Os(e);if(t){var o=Os(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Os(e){return Os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Os(e)}function Es(e){var t=function(e,t){if("object"!==gs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gs(t)?t:String(t)}var Ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ws(e,t)}(i,e);var t,n,r,o=Ss(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!e||0===e.length)throw new Error("invalidValue: value must be a valid input files object");return t._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value[0].name}},{key:"getValue",value:function(){return this._value[0]}}])&&_s(t.prototype,n),r&&_s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Es(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ps,"TYPE","FieldFileValue");const ks=Ps;function Ts(e){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ts(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cs(r.key),r)}}function Is(e,t){return Is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Is(e,t)}function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rs(e);if(t){var o=Rs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rs(e){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rs(e)}function Cs(e){var t=function(e,t){if("object"!==Ts(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ts(t)?t:String(t)}var Ds=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Is(e,t)}(i,e);var t,n,r,o=Fs(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this))._fieldNumber=e,n._uploadedFileName=t,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._uploadedFileName}},{key:"getValue",value:function(){return this._fieldNumber}}])&&js(t.prototype,n),r&&js(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Cs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ds,"TYPE","FieldFileUploadedValue");const As=Ds;function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function Ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ls(r.key),r)}}function Ls(e){var t=function(e,t){if("object"!==xs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xs(t)?t:String(t)}var Ms=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t}var t,n,r;return t=e,(n=[{key:"cleanAll",value:function(){this.emptyFileInput(),this.removeUploadedFileInfo(),this.removeHiddenFileNameForScreenReader(),this.cleanExternalFileInfo()}},{key:"cleanExternalFileInfo",value:function(){this._cleanGoogleDriveFileInfo(),this._cleanDropboxFileInfo()}},{key:"_cleanGoogleDriveFileInfo",value:function(){this._emptyInputValueIfItExists("#driveFileName_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileSize_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileId_"+this._fieldId),this._emptyInputValueIfItExists("#driveAccessToken_"+this._fieldId),this._removeElementIfItExists("#fileInput_"+this._fieldId+" .drivePickerUploadFile")}},{key:"_cleanDropboxFileInfo",value:function(){this._emptyInputValueIfItExists("#dropboxFileName_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxLink_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxFileSize_"+this._fieldId),this._removeElementIfItExists("#dropboxInfo_"+this._fieldId),this._removeElementIfItExists("#dropboxRemove_"+this._fieldId)}},{key:"emptyFileInput",value:function(){this._emptyInputValueIfItExists('input[name="file_'+this._fieldId+'"]')}},{key:"removeUploadedFileInfo",value:function(){this._removeElementIfItExists("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"removeHiddenFileNameForScreenReader",value:function(){this._removeElementIfItExists("#fileName-fileInput_"+this._fieldId)}},{key:"_removeElementIfItExists",value:function(e){var t=document.querySelector(e);t&&t.remove()}},{key:"_emptyInputValueIfItExists",value:function(e){var t=document.querySelector(e);t&&(t.value="")}}])&&Ns(t.prototype,n),r&&Ns(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Bs=Ms;function Vs(e){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(e)}function Us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ws(r.key),r)}}function Ws(e){var t=function(e,t){if("object"!==Vs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vs(t)?t:String(t)}function Hs(e,t){zs(e,t),t.add(e)}function Ys(e,t,n){zs(e,t),t.set(e,n)}function zs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qs(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function qs(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Js(e,t,"get"))}function Gs(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Js(e,t,"set"),n),n}function Js(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Zs=new WeakMap,Ks=new WeakMap,$s=new WeakMap,Xs=new WeakSet,ec=new WeakSet,tc=new WeakSet,nc=new WeakSet,rc=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hs(this,nc),Hs(this,tc),Hs(this,ec),Hs(this,Xs),Ys(this,Zs,{writable:!0,value:void 0}),Ys(this,Ks,{writable:!0,value:void 0}),Ys(this,$s,{writable:!0,value:void 0}),Gs(this,Zs,t),Gs(this,Ks,n),Gs(this,$s,r),this._clickEventListener=o,this._fileInfoCleaner=new Bs(qs(this,Zs))}var t,n,r;return t=e,(n=[{key:"addRemoveButton",value:function(e){e=void 0===e?"":e;var t=Qs(this,Xs,oc).call(this);t.innerText=e,t.appendChild(Qs(this,ec,ic).call(this,e)),this.addClickEventListenerToRemoveButton()}},{key:"isThereRemoveButton",value:function(){return Boolean(document.getElementById("removeFileButton_"+qs(this,Zs)))}},{key:"addClickEventListenerToRemoveButton",value:function(){var e=this;if(this.isThereRemoveButton()){var t=document.getElementById("removeFileButton_"+qs(this,Zs)),n=document.getElementById(qs(this,Zs));t.addEventListener("click",(function(t){Qs(e,tc,ac).call(e),Qs(e,nc,uc).call(e),e._fileInfoCleaner.removeUploadedFileInfo(),e._fileInfoCleaner.removeHiddenFileNameForScreenReader(),n.dispatchEvent(new Event("change")),e._clickEventListener(),t.preventDefault()}))}}}])&&Us(t.prototype,n),r&&Us(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oc(){var e=document.getElementById("fileInput_"+qs(this,Zs)),t=document.querySelector("#fileInput_"+qs(this,Zs)+" > .uploadedFile");return t||((t=document.createElement("div")).className="uploadedFile",e.appendChild(t)),t}function ic(e){var t=document.createElement("button");return t.setAttribute("id","removeFileButton_"+qs(this,Zs)),t.setAttribute("type","button"),t.setAttribute("class","removeFile"),t.setAttribute("aria-label",qs(this,$s).replace("{$fileName}",e)),t.innerText=qs(this,Ks),t}function ac(){var e=document.getElementById("fileInput_"+qs(this,Zs));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","removedFile_"+qs(this,Zs)),e.append(t)}}function uc(){var e=document.querySelector('input[name="file_'+qs(this,Zs)+'_fileNumber"]');e&&(e.value="")}const lc=rc;n(29254);function sc(e){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(e)}function cc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fc(r.key),r)}}function fc(e){var t=function(e,t){if("object"!==sc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sc(t)?t:String(t)}var pc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._allowedFileExtensions=[],this._hasPhotoPreview=!1,this._removeText="",this._removeFileText=""}var t,n,r;return t=e,n=[{key:"allowedFileExtensions",get:function(){return this._allowedFileExtensions},set:function(e){this._allowedFileExtensions=e||[]}},{key:"hasPhotoPreview",get:function(){return this._hasPhotoPreview},set:function(e){this._hasPhotoPreview=Boolean(e)}},{key:"removeText",get:function(){return this._removeText},set:function(e){this._removeText=e||""}},{key:"removeFileText",get:function(){return this._removeFileText},set:function(e){this._removeFileText=e||""}}],n&&cc(t.prototype,n),r&&cc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const dc=pc;function yc(e){return yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(e)}function hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vc(r.key),r)}}function vc(e){var t=function(e,t){if("object"!==yc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yc(t)?t:String(t)}var bc=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n||new dc,this._fileInfoCleaner=new Bs(t)}var t,n,r;return t=e,(n=[{key:"onFileSelected",value:function(e){throw Error("onFileSelected() method unimplemented")}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var t=this,n=document.createElement("button");return n.type="button",n.innerText=this._configuration.removeText,n.setAttribute("aria-label",this._configuration.removeFileText.replace("{$fileName}",e)),n.addEventListener("click",(function(e){e.preventDefault(),t._removeExternalUploadedFile()})),n}},{key:"_removeExternalUploadedFile",value:function(){!0===this._configuration.hasPhotoPreview?Fields.getField(this._fieldId)._resetPreviewAndFileLoaders():this._fileInfoCleaner.cleanExternalFileInfo()}}])&&hc(t.prototype,n),r&&hc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const mc=bc;function gc(e){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(e)}function _c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wc(r.key),r)}}function wc(e){var t=function(e,t){if("object"!==gc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gc(t)?t:String(t)}function Sc(){return Sc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Sc.apply(this,arguments)}function Oc(e,t){return Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oc(e,t)}function Ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pc(e);if(t){var o=Pc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Pc(e){return Pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pc(e)}var kc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oc(e,t)}(i,e);var t,n,r,o=Ec(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"onFileSelected",value:function(e){if(e){var t=this._getPhotoFieldWithPreview();this._fileInfoCleaner.cleanAll(),this._setDropboxFileNameValue(e.name),this._setDropboxFileLinkValue(e.link),this._setDropboxFileSizeValue(e.bytes),this._buildFileNameSpanElement(e.name);var n=this._buildRemoveExternalUploadedFileButton(e.name),r=this._getDropboxButton();r&&r.before(n),t&&(t._setPreview(e.link),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var t=Sc(Pc(i.prototype),"_buildRemoveExternalUploadedFileButton",this).call(this,e);return t.id="dropboxRemove_"+this._fieldId,t}},{key:"_getPhotoFieldWithPreview",value:function(){return!0!==this._hasPhotoPreview?null:J.getField(this._fieldId)}},{key:"_setDropboxFileNameValue",value:function(e){var t=document.getElementById("dropboxFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileSizeValue",value:function(e){var t=document.getElementById("dropboxFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileLinkValue",value:function(e){var t=document.getElementById("dropboxLink_"+this._fieldId);t&&(t.value=e)}},{key:"_buildFileNameSpanElement",value:function(e){var t=document.createElement("span"),n=document.createTextNode(e);t.id="dropboxInfo_"+this._fieldId,t.appendChild(n);var r=this._getDropboxButton();r&&r.before(t)}},{key:"_getDropboxButton",value:function(){var e=document.getElementById("fileInput_"+this._fieldId),t=e?e.getElementsByClassName("dropbox-dropin-btn"):[];return t&&t.length>0?t[0]:null}}],n&&_c(t.prototype,n),r&&_c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mc);const Tc=kc;function jc(e){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(e)}function Ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xc(r.key),r)}}function Fc(){return Fc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fc.apply(this,arguments)}function Rc(e,t){return Rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rc(e,t)}function Cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dc(e);if(t){var o=Dc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dc(e)}function Ac(e,t,n){return(t=xc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xc(e){var t=function(e,t){if("object"!==jc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===jc(t)?t:String(t)}var Nc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rc(e,t)}(i,e);var t,n,r,o=Cc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"onFileSelected",value:function(e){Fc(Dc(i.prototype),"onFileSelected",this).call(this,{name:i.FAKE_FILE_NAME,link:i.FAKE_FILE_LINK,bytes:i.FAKE_FILE_SIZE})}}])&&Ic(t.prototype,n),r&&Ic(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Tc);Ac(Nc,"FAKE_FILE_LINK","https://dl.dropboxusercontent.com/fakeLink"),Ac(Nc,"FAKE_FILE_NAME","dropboxFile.txt"),Ac(Nc,"FAKE_FILE_SIZE","1");const Lc=Nc;var Mc=n(24996);function Bc(e){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(e)}function Vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uc(r.key),r)}}function Uc(e){var t=function(e,t){if("object"!==Bc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bc(t)?t:String(t)}var Wc=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=document.getElementById("fileInput_"+this._fieldId);if(this._isDropboxApiAvailable()&&e){var t=this._useMocks?new Lc(this._fieldId,this._configuration):new Tc(this._fieldId,this._configuration),n={success:function(e){return t.onFileSelected(e&&e.length>0?e[0]:null)},linkType:"direct",extensions:this._configuration.allowedFileExtensions};e.appendChild(this._buildChooseFileButton(n))}}},{key:"_buildChooseFileButton",value:function(e){return this._useMocks?this._mockDropboxButton(e):Dropbox.createChooseButton(e)}},{key:"_mockDropboxButton",value:function(e){var t=document.createElement("a");return t.innerText="Dropbox",t.setAttribute("href","#"),t.className=" dropbox-dropin-btn dropbox-dropin-default",t.addEventListener("click",(function(){return e.success()})),t}},{key:"_isDropboxApiAvailable",value:function(){var e=new Mc.Z;return this._useMocks?!!e.get("enableDropboxDummyApi"):"undefined"!=typeof Dropbox}}])&&Vc(t.prototype,n),r&&Vc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Hc=Wc;function Yc(e){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(e)}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qc(r.key),r)}}function Qc(e){var t=function(e,t){if("object"!==Yc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yc(t)?t:String(t)}function qc(e,t){return qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qc(e,t)}function Gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jc(e);if(t){var o=Jc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jc(e){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jc(e)}var Zc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qc(e,t)}(i,e);var t,n,r,o=Gc(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._chooseFromDriveText="",e._appKey="",e._clientId="",e._exportType="",e}return t=i,n=[{key:"chooseFromDriveText",get:function(){return this._chooseFromDriveText},set:function(e){this._chooseFromDriveText=e||""}},{key:"appKey",get:function(){return this._appKey},set:function(e){this._appKey=e||""}},{key:"clientId",get:function(){return this._clientId},set:function(e){this._clientId=e||""}},{key:"scope",get:function(){return this._scope},set:function(e){this._scope=e}},{key:"exportType",get:function(){return this._exportType},set:function(e){this._exportType=e||""}}],n&&zc(t.prototype,n),r&&zc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(dc);const Kc=Zc;function $c(e){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(e)}function Xc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rf(r.key),r)}}function ef(e,t){return ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ef(e,t)}function tf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nf(e);if(t){var o=nf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nf(e)}function rf(e){var t=function(e,t){if("object"!==$c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$c(t)?t:String(t)}var of=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}(i,e);var t,n,r,o=tf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._shouldHideFileInputByDefault=n.getSetting("shouldHideFileInputByDefault"),n._maxFileSize=n.getSetting("maxFileSize"),n._errorToShowIfSizeExceeded=n.getSetting("errorToShowIfSizeExceeded"),n._initRemoveButtonBuilder(),n._addDropboxExternalChooser(),n._addGoogleDriveExternalChooser(),n._fileInfoCleaner=new Bs(e),n._addReuseUploadedFilesWidget(),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFileNumberInput();if(e&&e.value)return new As(parseInt(e.value,10),this._getUploadedFileName());var t=this._getCurrentFiles();return t&&0!==t.length?new ks(t):new A}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()||this._getUploadedFileName()}},{key:"addRemoveButton",value:function(){var e=document.getElementById(this.getFieldId());e&&e.files.length&&this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton(e.files[0].name)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_onFileChanged",value:function(){if(this._isFileOverSized())alert(this._errorToShowIfSizeExceeded),this._getFieldElement().val("");else{var e=this._getFileNumberInput();e&&(e.value="");var t=this.getValue();t.isEmpty()?this._removeHiddenFileNameForScreenReader():(this._fileInfoCleaner.removeUploadedFileInfo(),this._fileInfoCleaner.removeHiddenFileNameForScreenReader(),this._fileInfoCleaner.cleanExternalFileInfo(),this._addHiddenFileNameForScreenReader(t))}}},{key:"_isFileOverSized",value:function(){var e=0,t=this._getCurrentFiles();return t&&t.length>0&&(e=t[0].size),e>0&&e>this._maxFileSize}},{key:"_attachOnChangeListener",value:function(){var e=this;if(!this._shouldHideFileInputByDefault){var t=document.getElementById(this._fieldId);t&&t.addEventListener("change",(function(){e._onFileChanged(),J.onFieldValueChange(e.getFieldId())}))}}},{key:"_getCurrentFiles",value:function(){return this._getFieldElement().prop("files")}},{key:"_getFileNumberInput",value:function(){return document.querySelector('input[name="file_'+this._fieldId+'_fileNumber"]')}},{key:"_getUploadedFileName",value:function(){var e=this._getUploadedFileDiv();return e&&e.childNodes&&e.childNodes.length>0?e.childNodes[0].textContent:""}},{key:"_getUploadedFileDiv",value:function(){return document.querySelector("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"_addHiddenFileNameForScreenReader",value:function(e){this._removeHiddenFileNameForScreenReader();var t=document.getElementById(this.getFieldId()+"-label");if(t){var n=document.createElement("span");n.setAttribute("id","fileName-fileInput_"+this.getFieldId()),n.setAttribute("class","screenReaderVisibility"),n.innerText=e.toString(),t.insertAdjacentElement("afterend",n)}}},{key:"_removeHiddenFileNameForScreenReader",value:function(){var e=document.getElementById("fileName-fileInput_"+this.getFieldId());e&&e.remove()}},{key:"_preventOpeningFileUploadWindow",value:function(){var e=document.getElementById(this._fieldId);e&&(e.onclick=function(e){e.preventDefault(),e.stopPropagation()})}},{key:"_getRemoveButtonClickEventListener",value:function(){return function(){}}},{key:"_initRemoveButtonBuilder",value:function(){this.getSetting("hasRemoveButton")&&(this._removeButtonBuilder=new lc(this.getFieldId(),this.getSetting("removeButtonText"),this.getSetting("removeButtonAriaText"),this._getRemoveButtonClickEventListener()),this._removeButtonBuilder.addClickEventListenerToRemoveButton())}},{key:"_addDropboxExternalChooser",value:function(){if(this.getSetting("dropbox.isEnabled")){var e=new dc;e.allowedFileExtensions=this.getSetting("dropbox.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),new Hc(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addGoogleDriveExternalChooser",value:function(){if(this.getSetting("googleDrive.isEnabled")){var e=new Kc;e.appKey=this.getSetting("googleDrive.appKey"),e.clientId=this.getSetting("googleDrive.clientId"),e.scope=this.getSetting("googleDrive.scope"),e.chooseFromDriveText=this.getSetting("googleDrive.chooseFromDriveText"),e.exportType=this.getSetting("googleDrive.exportMimeType"),e.allowedFileExtensions=this.getSetting("googleDrive.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),new GoogleDriveChooserLoader(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addReuseUploadedFilesWidget",value:function(){this.getSetting("reuseUploadedFilesWidgetAttachments")&&ReuseUploadedFilesWidget.prepareFileFieldToReuseUploadedFiles(this.getFieldId(),this.getSetting("reuseUploadedFilesWidgetDictionary"),this.getSetting("reuseUploadedFilesWidgetAttachments"))}}],n&&Xc(t.prototype,n),r&&Xc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=rf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(of,"TYPE","FileField");const af=of;function uf(e){return uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(e)}function lf(){lf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==uf(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function sf(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function cf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){sf(i,r,o,a,u,"next",e)}function u(e){sf(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hf(r.key),r)}}function pf(e,t){return pf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pf(e,t)}function df(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yf(e);if(t){var o=yf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===uf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yf(e){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yf(e)}function hf(e){var t=function(e,t){if("object"!==uf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===uf(t)?t:String(t)}var vf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pf(e,t)}(u,e);var t,n,r,o,i,a=df(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this,e,t))._filename=n.getSetting("filename"),n._readyToSubmit=!1,n._setActionBeforeSubmit(),n._preventOpeningFileUploadWindow(),n._initLastPdfSaved(),n._setValidationsBeforeSubmit(),n}return t=u,n=[{key:"getType",value:function(){return u.TYPE}},{key:"onBeforeSubmitAutoPartialSave",value:(i=cf(lf().mark((function e(){var t;return lf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._saveCurrentPdfFile();case 2:(t=e.sent)&&this._hasFileBeenChanged(t)&&(this._setFileValueInFileInput(t),this._lastPdfSaved=t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getPdfDocument",value:function(){var e=this._getPdfViewerApplication();return e?e.pdfDocument:null}},{key:"onPdfDocumentIsReady",value:function(){var e=this;return new Promise((function(t){if(e.getPdfDocument())return t();e._onPdfApplicationIsReady().then((function(){return e._getPdfViewerApplication().initializedPromise})).then((function(){return e._getPdfViewerApplication().pdfLoadingTask.promise})).then(t)}))}},{key:"_onPdfApplicationIsReady",value:function(){var e=this;return new Promise((function(t){if(e._getPdfViewerApplication())return t();document.addEventListener("webviewerloaded",t)}))}},{key:"_setValidationsBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFormContainer())}},{key:"_buildClonedField",value:function(e){return new u(e,this.getFieldSettings())}},{key:"_setActionBeforeSubmit",value:function(){Xn.default.getInstance().addActionBeforeSubmit(this.onBeforeSubmitAutoPartialSave.bind(this),this.getFormContainer())}},{key:"_saveCurrentPdfFile",value:function(){var e=this,t=this.getPdfDocument();return t?t.saveDocument().then((function(t){return e._createFileFromArrayBuffer(t)})):Promise.resolve(null)}},{key:"_getPdfViewerApplication",value:function(){if(!this._pdfViewerApplication){var e=document.getElementById(this.getFieldId()+"-iframe");this._pdfViewerApplication=e?e.contentWindow.PDFViewerApplication:null}return this._pdfViewerApplication}},{key:"_createFileFromArrayBuffer",value:function(e){var t=new Blob([e],{type:"application/pdf"});return new File([t],this._filename,{type:"application/pdf"})}},{key:"_setFileValueInFileInput",value:function(e){var t=new DataTransfer;t.items.add(e);var n=document.getElementById(this.getFieldId());n&&(n.files=t.files)}},{key:"_initLastPdfSaved",value:(o=cf(lf().mark((function e(){return lf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onPdfDocumentIsReady();case 2:return e.next=4,this._saveCurrentPdfFile();case 4:this._lastPdfSaved=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_hasFileBeenChanged",value:function(e){return!this._lastPdfSaved||e.size!==this._lastPdfSaved.size}}],n&&ff(t.prototype,n),r&&ff(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(af);!function(e,t,n){(t=hf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vf,"TYPE","PdfEditor");const bf=vf;n(27207),n(73210);function mf(e){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(e)}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_f(r.key),r)}}function _f(e){var t=function(e,t){if("object"!==mf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mf(t)?t:String(t)}var wf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDatasource",value:function(t,n){e.isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDefaultValueDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e.isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&gf(t.prototype,n),r&&gf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();wf._datasources={};const Sf=wf;function Of(e){return Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(e)}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jf(r.key),r)}}function Pf(e,t){return Pf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pf(e,t)}function kf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tf(e);if(t){var o=Tf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tf(e){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tf(e)}function jf(e){var t=function(e,t){if("object"!==Of(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Of(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Of(t)?t:String(t)}var If=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pf(e,t)}(i,e);var t,n,r,o=kf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._hasInitialValue=n._hasValueOnLoad(),Sf.isDatasourceRegistered(e)&&(n._defaultValueDatasource=Sf.getForField(e),pjQuery.each(n._defaultValueDatasource.getParentDependenciesFieldsIds(),(function(t,n){B.registerFieldDependency(e,n,B.TYPE_VALUES)}))),n}return t=i,(n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"_hasValueOnLoad",value:function(){return this.hasValue()}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._defaultValueDatasource&&this._defaultValueDatasource.isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback())):(this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback()),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_getOnNewDefaultValueCallback",value:function(){var e=this;return function(t){if(t){var n=!1;if(e._shouldUpdateDefaultValue()){var r=e.getValue();e.setValue(new Ot(t[0].name)),n=r!==e.getValue()}e._onFieldUpdated(n)}}}},{key:"_shouldUpdateDefaultValue",value:function(){return!this._hasInitialValue}}])&&Ef(t.prototype,n),r&&Ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=jf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(If,"TYPE","TextField");const Ff=If;function Rf(e){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bf(r.key),r)}}function Df(){return Df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Df.apply(this,arguments)}function Af(e,t){return Af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Af(e,t)}function xf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lf(e);if(t){var o=Lf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nf(e)}(this,n)}}function Nf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lf(e)}function Mf(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Bf(e){var t=function(e,t){if("object"!==Rf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Rf(t)?t:String(t)}function Vf(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Uf=new WeakSet,Wf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Af(e,t)}(i,e);var t,n,r,o=xf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Mf(Nf(n=o.call(this,e,t)),Uf),n._languageFilename=n.getSetting("languageFilename"),n._hasTinyMCEBeingInitialized=!1,n._showImageAndFileButtons=n.getSetting("showImageAndFileButtons"),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;tinymce.init({selector:"#"+e.getFieldId(),menubar:e._getMenuBar(),language:e._getLanguage(),plugins:["link lists hr help"+e._getImagePlugin(),"searchreplace visualblocks visualchars code fullscreen insertdatetime ","directionality"],toolbar:"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | link"+e._getImagePlugin()+" | forecolor backcolor",branding:!1,convert_urls:!1,setup:function(t){t.on("init",(function(t){e._hasTinyMCEBeingInitialized=!0,e._prependLabelToTitle(),Ff.prototype._postRegister.call(e)})),t.on("paste keyUp",(function(){J.onFieldValueChange(e.getFieldId())}))},init_instance_callback:function(){var t=e._getFieldContainerElement().hasClass("fieldSpec--disabled");Vf(e,Uf,Hf).call(e,!t)}})}},{key:"getValue",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"})),t?new Ot(t):new A}},{key:"_prependLabelToTitle",value:function(){var e=this._getTinyMCEContainer();if(e){var t=e.iframeElement,n=t.getAttribute("title");n=this.getLabel()+": "+n,t.setAttribute("title",n)}}},{key:"getValueForCondition",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"}),t=this.sanitizeValue(t)),t}},{key:"sanitizeValue",value:function(e){return(e=e.replaceAll(/(\n\n\n|\n\n)/g,"\n")).trim()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=this._getTinyMCEContainer();if(t)return t.setContent(e.getValue());this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getTinyMCEContainer",value:function(){return tinyMCE.get(this._fieldId)}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return new Promise((function(e){tinyMCE.triggerSave(),e()}))}},{key:"_attachOnChangeListener",value:function(){}},{key:"_hasValueOnLoad",value:function(){return!!this._getFieldElement().val()}},{key:"_getLanguage",value:function(){return this._languageFilename}},{key:"_getImagePlugin",value:function(){return this._showImageAndFileButtons?" image":""}},{key:"_getMenuBar",value:function(){return(this._showImageAndFileButtons?"file ":"")+"edit view insert format tools help"}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){Df(Lf(i.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),Vf(this,Uf,Hf).call(this,e)}}],n&&Cf(t.prototype,n),r&&Cf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ff);function Hf(e){var t;null===(t=this._getTinyMCEContainer().getBody())||void 0===t||t.setAttribute("contenteditable",e)}!function(e,t,n){(t=Bf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wf,"TYPE","FormattedTextField");const Yf=Wf;function zf(e){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zf(r.key),r)}}function qf(e,t){return qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qf(e,t)}function Gf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jf(e);if(t){var o=Jf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jf(e){return Jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jf(e)}function Zf(e){var t=function(e,t){if("object"!==zf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zf(t)?t:String(t)}var Kf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qf(e,t)}(i,e);var t,n,r,o=Gf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).getSetting("hasToShowFieldByField")&&(n._fieldsetStepper=n._buildFieldsetStepper()),n}return t=i,(n=[{key:"_postRegister",value:function(){this._fieldsetStepper&&this._fieldsetStepper.generate()}},{key:"_buildFieldsetStepper",value:function(){return new kr(this.getFieldId(),{nextButtonText:this.getSetting("nextButtonText"),nextButtonAriaLabel:this.getSetting("nextButtonAriaLabel"),prevButtonText:this.getSetting("prevButtonText"),prevButtonAriaLabel:this.getSetting("prevButtonAriaLabel")},this.getSetting("shouldUseBuiltinButtons"),this.getSetting("hasToHideWizardButtons"),this.getSetting("isAllowedNavigateBetweenFields"),this.getSetting("initialFieldIndex"))}},{key:"getFieldsStatus",value:function(){return this._fieldsetStepper||console.error('Method "getFieldsStatus()" is invalid. Form Field ID #'+this.getFieldId()+" is not being show field by field."),this._fieldsetStepper.getFieldsStatus()}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new A}},{key:"getValueForCondition",value:function(){return null}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}])&&Qf(t.prototype,n),r&&Qf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Zf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kf,"TYPE","FormField");const $f=Kf;function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}function ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,op(r.key),r)}}function tp(e,t){return tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tp(e,t)}function np(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rp(e);if(t){var o=rp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rp(e){return rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rp(e)}function op(e){var t=function(e,t){if("object"!==Xf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xf(t)?t:String(t)}var ip=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tp(e,t)}(i,e);var t,n,r,o=np(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&ep(t.prototype,n),r&&ep(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=op(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ip,"TYPE","GenericField");const ap=ip;function up(e){return up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(e)}function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pp(r.key),r)}}function sp(e,t){return sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sp(e,t)}function cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fp(e);if(t){var o=fp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===up(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fp(e){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fp(e)}function pp(e){var t=function(e,t){if("object"!==up(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==up(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===up(t)?t:String(t)}var dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sp(e,t)}(i,e);var t,n,r,o=cp(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._setValidationBeforeSubmit(),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFormContainer())}},{key:"_getFieldLabel",value:function(){return pjQuery("#"+this.getFieldId()+"-label").text()}}])&&lp(t.prototype,n),r&&lp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=pp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dp,"TYPE","KeywordsField");const yp=dp;function hp(e){return hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(e)}function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Op(r.key),r)}}function bp(){return bp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},bp.apply(this,arguments)}function mp(e,t){return mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mp(e,t)}function gp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wp(e);if(t){var o=wp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===hp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _p(e)}(this,n)}}function _p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wp(e)}function Sp(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Op(e){var t=function(e,t){if("object"!==hp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hp(t)?t:String(t)}function Ep(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}var Pp=new WeakMap,kp=new WeakMap,Tp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mp(e,t)}(i,e);var t,n,r,o=gp(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Sp(_p(n=o.call(this,e,t)),Pp,{writable:!0,value:"semantic-suggestions-header"}),Sp(_p(n),kp,{writable:!0,value:"semantic-suggestions-header--noresults"}),n.delayBeforeRequestMs=n.getSetting("delayBeforeRequestMs"),n.minimumLengthToSearch=n.getSetting("minimumLengthToSearch"),n.isSemanticSuggestionsEnabled=n.getSetting("isSemanticSuggestionsEnabled"),n.translations=n.getSetting("translations"),n._datasource=bn.getForField(e),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){this._createWidget(),bp(wp(i.prototype),"_postRegister",this).call(this)}},{key:"_createWidget",value:function(){var e=this;pjQuery("#"+this._fieldId).autocomplete({minLength:this.minimumLengthToSearch,delay:this.delayBeforeRequestMs,source:function(t,n){e._datasource._fetchOptions(e._datasource.buildRequestDataFromParams(1,10,t.term,!1,[],null),(function(t){e.isSemanticSuggestionsEnabled&&!e._isHeaderItemAlreadyPresent(t)&&t.unshift(e._buildHeaderItem(t)),n(t)}))},select:function(t,n){if(9===t.which)return null;setTimeout((function(){e.isSemanticSuggestionsEnabled?(e._getFieldElement().val(n.item.name),e.focus()):window.location.href=n.item.detailUrl}),0)},create:function(){pjQuery(this).data("ui-autocomplete")._renderItem=function(t,n){if(t.attr("id",e._fieldId+"-live-search-results").attr("role","listbox").addClass("live-search"),n)return e._buildItemTemplate(n).appendTo(t)},pjQuery(this).data("ui-autocomplete")._renderMenu=function(t,n){var r=this;n.forEach((function(e){return r._renderItemData(t,e)})),setTimeout((function(){n.length>1&&t.find(".".concat(Ep(e,Pp))).removeClass("ui-menu-item")}),0)}},focus:function(t,n){e._resetActiveItem();var r=e._fieldId+"-"+n.item.id;if(document.getElementById(r).classList.contains(Ep(e,kp)))return!1;pjQuery("#"+e._fieldId).attr("aria-activedescendant",r),pjQuery("#"+r).addClass("live-search__item_active")},open:function(t,n){pjQuery("#"+e._fieldId).addClass("live-search--open").attr("aria-expanded","true")},close:function(t,n){e._resetActiveItem(),pjQuery("#"+e._fieldId).removeClass("live-search--open").attr("aria-expanded","false")}})}},{key:"_buildHeaderItem",value:function(e){var t=0===e.length;return{name:t?this.translations.semanticNoResults:this.translations.semanticResults,extraCssClasses:Ep(this,Pp)+(t?" "+Ep(this,kp):"")}}},{key:"_isHeaderItemAlreadyPresent",value:function(e){return e.length>0&&e[0].name===this.translations.semanticResults}},{key:"_buildItemTemplate",value:function(e){var t=this._fieldId+"-"+e.id,n="live-search__item"+(e.extraCssClasses?" "+e.extraCssClasses:""),r=e.name||"",o=this.getValue().getValue(),i=r.toLowerCase().indexOf(o.toLowerCase()),a=r,u=null;if(e.fieldValues){var l=[];for(var s in e.fieldValues)e.fieldValues.hasOwnProperty(s)&&l.push(e.fieldValues[s]);if(l.length>0){u=pjQuery("<div/>",{class:"live-search__item__details",tabindex:-1});for(var c=0;c<l.length;++c)u.append(pjQuery("<span/>",{class:"live-search__item__details__"+(c+1),text:l[c],"aria-hidden":!0}))}}i>=0&&(a=pjQuery("<span>"+r.substring(0,i)+'<span class="live-search__item__title__match">'+r.substring(i,i+o.length)+"</span>"+r.substring(i+o.length)+"</span>"));var f=pjQuery("<div/>",{class:"live-search__item__title",tabindex:-1}).append(a);return pjQuery("<li/>",{class:n,role:"option",id:t}).append(f).append(u)}},{key:"_resetActiveItem",value:function(){document.getElementById(this._fieldId+"-live-search-results").getElementsByTagName("li").forEach((function(e){e.classList.contains("live-search__item_active")&&e.classList.remove("live-search__item_active")})),pjQuery("#"+this._fieldId).attr("aria-activedescendant","")}}],n&&vp(t.prototype,n),r&&vp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yp);!function(e,t,n){(t=Op(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tp,"TYPE","InstantSearchField");const jp=Tp;function Ip(e){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(e)}function Fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ap(r.key),r)}}function Rp(e,t){return Rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rp(e,t)}function Cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dp(e);if(t){var o=Dp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ip(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dp(e)}function Ap(e){var t=function(e,t){if("object"!==Ip(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ip(t)?t:String(t)}var xp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rp(e,t)}(i,e);var t,n,r,o=Cp(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValueForCondition",value:function(){return JSON.parse(this._getFieldElement().val())}}])&&Fp(t.prototype,n),r&&Fp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=Ap(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xp,"TYPE","JobVariableField");const Np=xp;function Lp(e){return Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(e)}function Mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bp(r.key),r)}}function Bp(e){var t=function(e,t){if("object"!==Lp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Lp(t)?t:String(t)}function Vp(e,t){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vp(e,t)}function Up(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wp(e);if(t){var o=Wp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wp(e)}var Hp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vp(e,t)}(i,e);var t,n,r,o=Up(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._requiredFieldText=n.getSetting("requiredFieldText"),n._radiusDefaultOption=n.getSetting("radiusDefaultOption"),n._setValidationBeforeSubmit(),n}return t=i,n=[{key:"getValueForCondition",value:function(){var e=document.getElementById(this.getRadiusId());return["SELECT"===e.tagName?e.selectedOptions[0].text:e.value]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),J.setFieldValue(this.getRadiusId(),e.getRadius())}},{key:"_postRegister",value:function(){Ro.prototype._postRegister.call(this),J.getField(this.getSearchFieldId()).addListener("selectedAutocompleteValueEvent",this.caller("onSelectedSearchField"))}},{key:"onSelectedSearchField",value:function(){var e=J.getField(this.getRadiusId());e.getValue().isEmpty()&&e.setValue(new Gt(this._radiusDefaultOption))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this.getRadiusId(),this._getRadiusSuffix())]}},{key:"getRadiusId",value:function(){return this.getFieldId()+this._getRadiusSuffix()}},{key:"_getRadiusSuffix",value:function(){return this._getFieldSuffix()+"_radius"}},{key:"_getFieldSuffix",value:function(){throw new Error("notImplementedError")}},{key:"getSearchFieldId",value:function(){return""}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e._validateValuesAndAddValidationErrorIfNeeded()}),this.getFormContainer())}},{key:"_validateValuesAndAddValidationErrorIfNeeded",value:function(){var e=J.getField(this.getSearchFieldId()),t=J.getField(this.getRadiusId()),n=!0;return this._isValidSearchField()?e._removeValidationErrorIfNeeded():(e._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),this._isValidRadius()?t._removeValidationErrorIfNeeded():(t._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),n}},{key:"_isValidSearchField",value:function(){var e=J.getFieldValue(this.getSearchFieldId()),t=J.getFieldValue(this.getRadiusId());return!(e.isEmpty()&&!t.isEmpty())}},{key:"_isValidRadius",value:function(){var e=J.getFieldValue(this.getSearchFieldId()),t=J.getFieldValue(this.getRadiusId());return!(!e.isEmpty()&&t.isEmpty())}}],n&&Mp(t.prototype,n),r&&Mp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);const Yp=Hp;function zp(e){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(e)}function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qp(r.key),r)}}function qp(e){var t=function(e,t){if("object"!==zp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zp(t)?t:String(t)}function Gp(e,t){return Gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gp(e,t)}function Jp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zp(e);if(t){var o=Zp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zp(e)}var Kp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gp(e,t)}(i,e);var t,n,r,o=Jp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._setRadius(e),t}return t=i,(n=[{key:"getRadius",value:function(){return this._radius}},{key:"_setRadius",value:function(e){O.assertIsValid(e),this._radius=e}}])&&Qp(t.prototype,n),r&&Qp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);const $p=Kp;function Xp(e){return Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(e)}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,od(r.key),r)}}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},td(e,t)}function nd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rd(e);if(t){var o=rd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rd(e){return rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rd(e)}function od(e){var t=function(e,t){if("object"!==Xp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xp(t)?t:String(t)}var id=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&td(e,t)}(i,e);var t,n,r,o=nd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t))._setPlace(e),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({place:this._place.toString(),radius:this._radius.toString()})}},{key:"getPlace",value:function(){return this._place}},{key:"_setPlace",value:function(e){O.assertIsValid(e),this._place=e}}])&&ed(t.prototype,n),r&&ed(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}($p);!function(e,t,n){(t=od(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(id,"TYPE","FieldLocationDistanceValue");const ad=id;function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dd(r.key),r)}}function sd(){return sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},sd.apply(this,arguments)}function cd(e,t){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cd(e,t)}function fd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pd(e);if(t){var o=pd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pd(e)}function dd(e){var t=function(e,t){if("object"!==ud(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ud(t)?t:String(t)}var yd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cd(e,t)}(i,e);var t,n,r,o=fd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._coordinates=n.getSetting("coordinates"),n._placeAriaLabel=n.getSetting("placeAriaLabel"),n._includeOptionGetLocationFromBrowser=n.getSetting("includeOptionGetLocationFromBrowser"),n._currentLocationText=n.getSetting("currentLocationText"),n._useMocks=n.getSetting("useMocks"),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[ad.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=J.getFieldValue(this._getPlaceId()),t=J.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new A:new ad(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPlaceId()).selectedOptions[0].text].concat(sd(pd(i.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){sd(pd(i.prototype),"setValue",this).call(this,e),J.setFieldValue(this._getPlaceId(),e.getPlace())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){var e=this;sd(pd(i.prototype),"_postRegister",this).call(this),this._createLocationFromBrowserLinkIfNeeded(),this._createHiddenCoordinatesInput(),document.getElementById(this._getPlaceId()).onchange=function(){var t=bn.getForField(e._getPlaceId()),n=J.getFieldValue(e._getPlaceId());document.getElementById(e._getCoordinatesInputId()).value=n.getType()!==A.TYPE?JSON.stringify(t.getOptionLatAndLonById(n.getOptionId())):null},this._replaceAriaLabelledByAttribute()}},{key:"_createHiddenCoordinatesInput",value:function(){var e=document.createElement("input");e.setAttribute("id",this._getCoordinatesInputId()),e.setAttribute("name",this._getCoordinatesInputId()),e.setAttribute("class","coordinates"),e.setAttribute("hidden",!0),e.value=this._coordinates,document.getElementById(this.getFieldId()).append(e)}},{key:"_createLocationFromBrowserLinkIfNeeded",value:function(){var e;if(this._includeOptionGetLocationFromBrowser){var t=document.createElement("span");t.setAttribute("class","useMyCurrentLocation__icon"),t.setAttribute("aria-hidden","true");var n=document.createElement("span");n.setAttribute("class","useMyCurrentLocation__text"),n.innerText=this.getSetting("locationLinkText");var r=document.createElement("a");r.setAttribute("href","#"),r.addEventListener("click",(function(e){return e.preventDefault()})),r.setAttribute("role","button"),r.setAttribute("class","useMyCurrentLocation"),r.appendChild(t),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","holder holder--useMyCurrentLocation"),o.appendChild(r),this._attachLocationFromBrowserEvent(r),null===(e=document.getElementById(this._getPlaceId()))||void 0===e||e.parentElement.append(o)}}},{key:"_attachLocationFromBrowserEvent",value:function(e){var t=this;e.onclick=function(){t._useMocks?t._mockGeolocation():navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){return t._setCurrentLocation(e)}))}}},{key:"_setCurrentLocation",value:function(e){var t=e.coords.latitude,n=e.coords.longitude;document.getElementById(this._getCoordinatesInputId()).value=JSON.stringify([t,n]),this._addCurrentLocationOptionToPlaceSubfield(),this._setCurrentLocationToPlaceSubfield(),this.onSelectedSearchField()}},{key:"_addCurrentLocationOptionToPlaceSubfield",value:function(){this._removeAllOptions();var e=new Option(this._currentLocationText,this._currentLocationText,!1,!1);document.getElementById(this._getPlaceId()).append(e)}},{key:"_setCurrentLocationToPlaceSubfield",value:function(){document.getElementById(this._getPlaceId()).value=this._currentLocationText;var e=document.getElementById("select2-"+this._getPlaceId()+"-container");e.innerText=this._currentLocationText,e.title=this._currentLocationText}},{key:"_replaceAriaLabelledByAttribute",value:function(){var e=document.getElementsByClassName("select2Container"+this._getPlaceId())[0];e&&(e.removeAttribute("aria-labelledby"),e.setAttribute("aria-label",this._placeAriaLabel))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPlaceId(),this._getPlaceSuffix())].concat(sd(pd(i.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPlaceId",value:function(){return this.getFieldId()+this._getPlaceSuffix()}},{key:"_getPlaceSuffix",value:function(){return this._getFieldSuffix()+"_place"}},{key:"getSearchFieldId",value:function(){return this._getPlaceId()}},{key:"_getCoordinatesInputId",value:function(){return this.getFieldId()+this._getFieldSuffix()+"_coordinates"}},{key:"_getFieldSuffix",value:function(){return"_location"}},{key:"_mockGeolocation",value:function(){this._setCurrentLocation({coords:{latitude:25.987314,longitude:-80.23227}})}},{key:"_removeAllOptions",value:function(){pjQuery("#"+this._getPlaceId()).find("option:gt(0)").remove()}}],n&&ld(t.prototype,n),r&&ld(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yp);!function(e,t,n){(t=dd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yd,"TYPE","LocationDistanceSearchField");const hd=yd;function vd(e){return vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(e)}function bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wd(r.key),r)}}function md(e,t){return md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},md(e,t)}function gd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_d(e);if(t){var o=_d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_d(e)}function wd(e){var t=function(e,t){if("object"!==vd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vd(t)?t:String(t)}var Sd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&md(e,t)}(i,e);var t,n,r,o=gd(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._setCountry(e),r._setState(t),r._setCity(n),r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})}},{key:"getCountry",value:function(){return this._country}},{key:"getState",value:function(){return this._state}},{key:"getCity",value:function(){return this._city}},{key:"_setCountry",value:function(e){O.assertIsValid(e),this._country=e}},{key:"_setState",value:function(e){O.assertIsValid(e),this._state=e}},{key:"_setCity",value:function(e){O.assertIsValid(e),this._city=e}}],n&&bd(t.prototype,n),r&&bd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=wd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sd,"TYPE","FieldLocationValue");const Od=Sd;function Ed(e){return Ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(e)}function Pd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kd(r.key),r)}}function kd(e){var t=function(e,t){if("object"!==Ed(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ed(t)?t:String(t)}var Td=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stateFieldId=t,this._stateFieldPlaceholderText=n,this._stateFieldNotRequiredText=r,this._datasource=o}var t,n,r;return t=e,n=[{key:"attachOnCountryChangeHandler",value:function(e,t){var n=this,r=document.getElementById(e),o=document.getElementById(this._stateFieldId);null!==o&&(this._hasElementValue(o)||this._resetStateInputToNotRequiredState(this._stateFieldId),null!==r?(r.onchange=function(){n._updateStateByCountry(r.value)},this._hasElementValue(r)&&!this._hasCountryValueWithoutState(r,o)||this._updateStateByCountry(this._valueIsValid(r.value)?r.value:r.getAttribute("data-hiddenvalue"))):this._updateStateByCountry(t,o.value))}},{key:"attachOnCountryChangeSearchHandler",value:function(e,t){var n=this,r=document.querySelector('[name="'+e+'"]');null!==r&&(r.onchange=function(){n._updateStateByCountryFromDatasource(r.value)},this._valueIsValid(r.value)&&this._updateStateByCountryFromDatasource(r.value,t))}},{key:"attachOnCountryChangeCreateHandler",value:function(e,t,n){var r=this,o=document.querySelector('.countryFieldSelect[data-country-type="'+e+'"]');if(null!==o){var i=document.getElementById(this._stateFieldId);null!==i&&(this._hasElementValue(i)||this._resetStateInputToNotRequiredState(this._stateFieldId),o.onchange=function(){r._updateStateByCountry(o.value)},this._valueIsValid(o.value)&&this._updateStateByCountry(o.value,t))}else this._updateStateByCountry(n,t)}},{key:"_updateStateByCountry",value:function(e,t){null==e||"0"===e||""===e?this._updateDropdownWithOptions([],t):this._updateStateByCountryFromDatasource(e,t)}},{key:"_updateStateByCountryFromDatasource",value:function(e,t){var n=this;this._datasource.fetchOptionsById([e],(function(e){n._updateDropdownWithOptions(e,t)}))}},{key:"_updateDropdownWithOptions",value:function(e,t){var n=document.getElementById(this._stateFieldId);if(null!==n){this._removeOptions(n);var r=this._createOption("",this._stateFieldPlaceholderText);r.setAttribute("selected","selected"),n.append(r);for(var o=0;o<e.length;o++){var i=this._createOption(e[o].id,e[o].name);e[o].id===parseInt(t,10)&&i.setAttribute("selected","selected"),n.append(i)}this._updateAttributesForValidatingRequiredIfNeeded(n,e),this._updateDisableAttributeIfNeeded(n,e)}}},{key:"_updateDisableAttributeIfNeeded",value:function(e,t){if(t.length>0)e.removeAttribute("disabled");else if(0===t.length){e.setAttribute("disabled",!0),this._removeOptions(e);var n=this._createOption("",this._stateFieldNotRequiredText);n.setAttribute("selected","selected"),e.append(n)}}},{key:"_createOption",value:function(e,t){var n=document.createElement("option");return n.setAttribute("class",h.WIZARD_FIELD_INPUT),n.value=e,n.textContent=t,n}},{key:"_removeOptions",value:function(e){for(;e.firstChild;)e.removeChild(e.lastChild)}},{key:"_updateAttributesForValidatingRequiredIfNeeded",value:function(e,t){this._shouldAddAttributesForValidatingRequired(e,t)?(e.setAttribute("aria-required","true"),e.setAttribute("required","")):this._shouldRemoveAttributesForValidatingRequired(e,t)&&(e.removeAttribute("aria-required"),e.removeAttribute("required"))}},{key:"_shouldAddAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-describedby")&&void 0===e.getAttribute("required")&&t.length>0}},{key:"_shouldRemoveAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-describedby")&&void 0!==e.getAttribute("required")&&0===t.length}},{key:"_resetStateInputToNotRequiredState",value:function(e){var t=document.getElementById(e);this._updateAttributesForValidatingRequiredIfNeeded(t,[]),this._updateDisableAttributeIfNeeded(t,[])}},{key:"_hasCountryValueWithoutState",value:function(e,t){return this._hasElementValue(e)&&!this._hasElementValue(t)}},{key:"_hasElementValue",value:function(e){return this._valueIsValid(e.value)||this._valueIsValid(e.getAttribute("data-hiddenvalue"))}},{key:"_valueIsValid",value:function(e){return null!=e&&"0"!==e&&""!==e}}],n&&Pd(t.prototype,n),r&&Pd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const jd=Td;function Id(e){return Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(e)}function Fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ad(r.key),r)}}function Rd(e,t){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rd(e,t)}function Cd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dd(e);if(t){var o=Dd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Id(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dd(e){return Dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dd(e)}function Ad(e){var t=function(e,t){if("object"!==Id(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Id(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Id(t)?t:String(t)}var xd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rd(e,t)}(i,e);var t,n,r,o=Cd(i);function i(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).getSetting("isStandardized")){var a=new jd(r._getStateId(),r.getSetting("stateFieldPlaceholderText"),r.getSetting("stateFieldNotRequiredText"),bn.getForField(r._getStateId())),u=void 0!==n?n:r.getSetting("savedCountryId");a.attachOnCountryChangeHandler(r._getCountryId(),u)}return r}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Od.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){try{var e=J.getFieldValue(this._getCountryId()),t=J.getFieldValue(this._getStateId()),n=J.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new A:new Od(e,t,n)}catch(e){return new A}}},{key:"getValueForCondition",value:function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),J.setFieldValue(this._getCountryId(),e.getCountry()),J.setFieldValue(this._getStateId(),e.getState()),J.setFieldValue(this._getCityId(),e.getCity())}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return new i(e,this.getFieldSettings(),null)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[];return J.isFieldRegistered(this._getCountryId())&&e.push(this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix())),J.isFieldRegistered(this._getStateId())&&e.push(this._createFieldMetadata(this._getStateId(),this._getStateSuffix())),J.isFieldRegistered(this._getCityId())&&e.push(this._createFieldMetadata(this._getCityId(),this._getCitySuffix())),e}},{key:"_getCountryId",value:function(){return this.getFieldId()+this._getCountrySuffix()}},{key:"_getStateId",value:function(){return this.getFieldId()+this._getStateSuffix()}},{key:"_getCityId",value:function(){return this.getFieldId()+this._getCitySuffix()}},{key:"_getCountrySuffix",value:function(){return"_location_country"}},{key:"_getStateSuffix",value:function(){return"_location_state"}},{key:"_getCitySuffix",value:function(){return"_location_city"}},{key:"_attachOnChangeListener",value:function(){}}],n&&Fd(t.prototype,n),r&&Fd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=Ad(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xd,"TYPE","LocationField");const Nd=xd;function Ld(e){return Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(e)}function Md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wd(r.key),r)}}function Bd(e,t){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bd(e,t)}function Vd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ud(e);if(t){var o=Ud(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ld(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ud(e){return Ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ud(e)}function Wd(e){var t=function(e,t){if("object"!==Ld(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ld(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ld(t)?t:String(t)}var Hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bd(e,t)}(i,e);var t,n,r,o=Vd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),new jd(n.getFieldId(),n.getSetting("stateFieldPlaceholderText"),n.getSetting("stateFieldNotRequiredText"),n._datasource).attachOnCountryChangeCreateHandler(n.getSetting("stateTypeId"),n.getSetting("currentStateSelectedValue"),n.getSetting("savedCountryId")),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}])&&Md(t.prototype,n),r&&Md(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ku);!function(e,t,n){(t=Wd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Hd,"TYPE","LocationStateCreateField");const Yd=Hd;function zd(e){return zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(e)}function Qd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zd(r.key),r)}}function qd(e,t){return qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qd(e,t)}function Gd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jd(e);if(t){var o=Jd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jd(e){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jd(e)}function Zd(e){var t=function(e,t){if("object"!==zd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zd(t)?t:String(t)}var Kd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qd(e,t)}(i,e);var t,n,r,o=Gd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),new jd(n.getFieldId(),n.getSetting("stateFieldSelectAnOptionText"),n.getSetting("stateFieldNotRequiredText"),n._datasource).attachOnCountryChangeSearchHandler(n.getSetting("countryInputName"),n.getSetting("currentStateSelectedValue")),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}])&&Qd(t.prototype,n),r&&Qd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ku);!function(e,t,n){(t=Zd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kd,"TYPE","LocationStateSearchField");const $d=Kd;function Xd(e){return Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(e)}function ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oy(r.key),r)}}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ty(e,t)}function ny(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ry(e);if(t){var o=ry(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ry(e)}function oy(e){var t=function(e,t){if("object"!==Xd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xd(t)?t:String(t)}var iy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ty(e,t)}(i,e);var t,n,r,o=ny(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var r=PortalDate.fromParams(e,t,1);return(n=o.call(this,r))._month=t,n._year=e,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM")}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&ey(t.prototype,n),r&&ey(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bo);!function(e,t,n){(t=oy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(iy,"TYPE","FieldMonthAndYearValue");const ay=iy;function uy(e){return uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(e)}function ly(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dy(r.key),r)}}function sy(){return sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=py(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},sy.apply(this,arguments)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cy(e,t)}function fy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=py(e);if(t){var o=py(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===uy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},py(e)}function dy(e){var t=function(e,t){if("object"!==uy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===uy(t)?t:String(t)}var yy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}(i,e);var t,n,r,o=fy(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fixedDay=n.getSetting("fixedDay"),n._tabIndex=n.getSetting("tabIndex"),n._minDate=n.getSetting("minDate"),n._maxDate=n.getSetting("maxDate"),n._accessibleLabelsDictionary=n.getSetting("accessibleLabelsDictionary"),n._isAccessible=n.getSetting("isAccessible"),n._isRequired=n.getSetting("isRequired"),n._year=null,n._month=null,n._yearInput=null,n._monthInput=null,n}return t=i,n=[{key:"_postRegister",value:function(){this._browserSupportsInputMonth()?this._addMinAndMaxAttributes(this._minDate,this._maxDate,"yyyy-LL"):this._createWidget(),sy(py(i.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new A;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]);return new ay(n,r)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?e+"-"+PortalString.zeroPad(this._fixedDay,2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM")),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("year",e,t),this._cloneDatasourceForNewTableRow("month",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("year",e),this._cloneDatasource("month",e),new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_createWidget",value:function(){var e=this;pjQuery((function(){e._createFallbackWidget()}))}},{key:"_browserSupportsInputMonth",value:function(){return this._inputSupported("month")&&!this._isSafariBrowser()}},{key:"_elementAllowsChangingType",value:function(e){return ht.prototype._elementAllowsChangingType.call(this,e)&&this._browserSupportsInputMonth()}},{key:"_createFallbackWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(this._buildDateTime(this._minDate)).toDate(),n=new PortalDate(this._buildDateTime(this._minDate)).toDate();this._initDefaultValues(e);var r=this._createInput(t,n);e.parentNode.appendChild(r)}}},{key:"_initDefaultValues",value:function(e){this._year=this._month=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1])}}},{key:"_createInput",value:function(e,t){var n,r=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,this._tabIndex,e,t),this._yearInput.onchange=function(){r._year=this.value,r._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,this._tabIndex,e,t),this._monthInput.onchange=function(){r._month=this.value,r._updateHiddenInputValue()},this._isAccessible?(n=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput),this._wrapFieldAsFieldSetWithLegend()):n=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput),n}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._year+"-"+this._normalize(this._month),J.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=h.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS;var r=document.createElement("div");r.className="MonthAndYear_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="MonthAndYear_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e),n.appendChild(o),n.appendChild(r),n}},{key:"_wrapFieldAsFieldSetWithLegend",value:function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;e&&t._isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html());var n=h.WIZARD_FIELD_LABEL+" "+h.WIZARD_FIELD_LABEL_TEMPLATES_CLASS;return pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,class:n,html:e})).html()}))}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(e),n.appendChild(t),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility "+h.WIZARD_FIELD_SUBFIELD_LABEL+" "+h.WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS),n.textContent=t,n}}],n&&ly(t.prototype,n),r&&ly(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ui);!function(e,t,n){(t=dy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yy,"TYPE","MonthAndYearDateField");const hy=yy;function vy(e){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(e)}function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sy(r.key),r)}}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},my(e,t)}function gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wy(e);if(t){var o=wy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _y(e)}(this,n)}}function _y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wy(e)}function Sy(e){var t=function(e,t){if("object"!==vy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vy(t)?t:String(t)}var Oy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}(i,e);var t,n,r,o=gy(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),(new or).addEmptyHiddenInputBeforeSubmit(_y(n),n._getFieldElement()[0]),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Yn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new A;var t=[];return e.each((function(){t.push(pn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new pn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Yn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("option:selected")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>",{class:h.WIZARD_FIELD_INPUT}).attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}}],n&&by(t.prototype,n),r&&by(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=Sy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Oy,"TYPE","MultipleSelectField");const Ey=Oy;function Py(e){return Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(e)}function ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ry(r.key),r)}}function Ty(){return Ty="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ty.apply(this,arguments)}function jy(e,t){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jy(e,t)}function Iy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fy(e);if(t){var o=Fy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Py(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fy(e){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fy(e)}function Ry(e){var t=function(e,t){if("object"!==Py(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Py(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Py(t)?t:String(t)}var Cy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jy(e,t)}(i,e);var t,n,r,o=Iy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){Ty(Fy(i.prototype),"_postRegister",this).call(this),this._updateInputTypeIfFirefox(),this._attachOnKeypressListener()}},{key:"_attachOnKeypressListener",value:function(){var e=this;this._getFieldElement().on("keypress",(function(t){e._preventSettingInvalidCharacters(t)}))}},{key:"_updateInputTypeIfFirefox",value:function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(document.getElementById(this.getFieldId()).type="text")}},{key:"_preventSettingInvalidCharacters",value:function(e){!1===/^-?\d*(\.\d*)?$/.test(this._getFieldElement().val()+e.key)&&e.preventDefault()}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}])&&ky(t.prototype,n),r&&ky(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(So);!function(e,t,n){(t=Ry(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cy,"TYPE","NumberField");const Dy=Cy;function Ay(e){return Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(e)}function xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ny(r.key),r)}}function Ny(e){var t=function(e,t){if("object"!==Ay(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ay(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ay(t)?t:String(t)}function Ly(){return Ly="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ly.apply(this,arguments)}function My(e,t){return My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},My(e,t)}function By(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vy(e);if(t){var o=Vy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ay(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vy(e)}var Uy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&My(e,t)}(i,e);var t,n,r,o=By(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._rangeMinValue=n.getSetting("rangeMinValue"),n._rangeMaxValue=n.getSetting("rangeMaxValue"),n._clearText=n.getSetting("clearText"),n}return t=i,n=[{key:"_postRegister",value:function(){this._createCustomWidgetAndHideNumberInput(),this.getValue()&&!this.getValue().isEmpty()&&this._setValue(this.getValue().getValue()),Ly(Vy(i.prototype),"_postRegister",this).call(this)}},{key:"_createCustomWidgetAndHideNumberInput",value:function(){this._hideInput(pjQuery("#"+this._fieldId)).parent().append(this._createCustomGraphicInput())}},{key:"_createCustomGraphicInput",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setValue(e.getValue())}},{key:"_setValue",value:function(){throw new Error("notImplementedError")}},{key:"_setValueToOriginalInput",value:function(e){Ly(Vy(i.prototype),"setValue",this).call(this,new Rt(e))}},{key:"_hideInput",value:function(e){var t;if(e){t=pjQuery("<input/>");var n=["data-hiddenType","data-required"];pjQuery.each(e[0].attributes,(function(r,o){n.includes(o.name)||t.attr(o.name,e.attr(o.name))})),t.attr("type","hidden"),t.attr("hidden","hidden");var r=e.parent();e.remove(),r.append(t)}return t}},{key:"_createDivElement",value:function(e,t){return pjQuery("<div/>",{class:e,tabindex:t})}},{key:"_attachOnKeypressListener",value:function(){}}],n&&xy(t.prototype,n),r&&xy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dy);const Wy=Uy;function Hy(e){return Hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(e)}function Yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jy(r.key),r)}}function zy(){return zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},zy.apply(this,arguments)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qy(e,t)}function qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gy(e);if(t){var o=Gy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gy(e)}function Jy(e){var t=function(e,t){if("object"!==Hy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hy(t)?t:String(t)}var Zy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}(i,e);var t,n,r,o=qy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(h.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS),t=this._createDivElement("progress-bar "+h.WIZARD_FIELD_INPUT_CONTAINER);return t.append(this._createInput()),t.append(this._createLegendElements()),e.append(t),e.append(this._createClearElement()),e}},{key:"_createInput",value:function(){var e=this,t=pjQuery("<input/>",{id:this._fieldId+"_range",type:"range",class:"progress-bar__selector "+h.WIZARD_FIELD_INPUT,min:this._rangeMinValue,max:this._rangeMaxValue,value:this._isEmpty()?this._rangeMinValue:Math.round(this.getValue().getValue()),"aria-labelledby":this._fieldId+"-label"});return t.on("input",(function(){e._updateLegendValues(pjQuery(this).val())})),t.on("change",(function(){e._setValueFromRangeValue(pjQuery(this).val()),e._updateLegendValues(pjQuery(this).val())})),t}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+h.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_createLegendElements",value:function(){var e={id:this._fieldId+"_legend",class:"progress-bar__indicator",tabindex:0};return this._isEmpty()&&(e.hidden="hidden"),pjQuery("<div/>",e).append(this._createProgressLegend(),this._createTotalLegend())}},{key:"_createProgressLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_progressLegend",class:"progress-bar__indicator__current",text:this.getValue()&&!this.getValue().isEmpty()?this.getValue().getValue()+"%":""})}},{key:"_createTotalLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_totalLegend",class:"progress-bar__indicator__total",text:this._rangeMaxValue})}},{key:"_clearValue",value:function(){this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_range").val(this._rangeMinValue),this._updateLegendValues(null)}},{key:"_setValue",value:function(e){pjQuery("#"+this._fieldId+"_range").val(e),pjQuery("#"+this._fieldId+"_range").change()}},{key:"_setValueFromRangeValue",value:function(e){zy(Gy(i.prototype),"_setValueToOriginalInput",this).call(this,this._roundValue(e))}},{key:"_updateLegendValues",value:function(e){e=this._roundValue(e),pjQuery("#"+this._fieldId+"_progressLegend").text(this._isEmpty()?"":e);var t=document.getElementById(this._fieldId+"_legend");t.style.left=this._isEmpty()?null:"calc("+e+"% + "+(8-.15*e)+"px)",this._isEmpty()?t.setAttribute("hidden","hidden"):t.removeAttribute("hidden")}},{key:"_roundValue",value:function(e){return(e=Math.round(e))<this._rangeMinValue?this._rangeMinValue:e}},{key:"_getPercentageByNumberValue",value:function(e){return Math.round(100*e/this._rangeMaxValue)}},{key:"_isEmpty",value:function(){return!this.getValue()||this.getValue().isEmpty()}}],n&&Yy(t.prototype,n),r&&Yy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Wy);!function(e,t,n){(t=Jy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zy,"TYPE","NumberProgressField");const Ky=Zy;n(56977);function $y(e){return $y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(e)}function Xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oh(r.key),r)}}function eh(){return eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rh(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},eh.apply(this,arguments)}function th(e,t){return th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},th(e,t)}function nh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rh(e);if(t){var o=rh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rh(e)}function oh(e){var t=function(e,t){if("object"!==$y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$y(t)?t:String(t)}var ih=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&th(e,t)}(i,e);var t,n,r,o=nh(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._numRatings=n.getSetting("numRatings"),n._numDecimals=n.getSetting("numDecimals"),n._starsText=n.getSetting("starsText"),n._value=null,n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(this._fieldId+"_graphicContainer "+h.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS);return e.append(this._createIcons()),e.append(this._createClearElement()),e.attr("aria-labelledby",this._fieldId+"-label"),e.attr("tabindex",0),e}},{key:"_createIcons",value:function(){for(var e=this._createDivElement(this._fieldId+"_containerIcons stars-rating",-1),t=this._numRatings;t>=0;t--){var n=this._createIconElement(t);e.append(n.children())}return e}},{key:"_createIconElement",value:function(e){var t=this,n=this._createDivElement("iconContainer"),r=pjQuery("<input/>",{id:this._fieldId+"_icon_"+e,type:"radio",name:this._fieldId+"_radioIconStar",value:e,class:"visibility--hidden--visually",tabindex:0});r.change((function(){this.checked&&t._setValueFromRatingValue(pjQuery(this).val())}));var o=pjQuery("<label/>",{id:this._fieldId+"_iconLabel_"+e,for:this._fieldId+"_icon_"+e,class:e?"stars-rating__star "+h.WIZARD_FIELD_INPUT:"stars-rating__star--zero",tabindex:-1}).append(pjQuery("<span/>",{text:this._getNumberValueFromRating(e)+" "+this._starsText,class:e?"visibility--hidden--visually":"stars-rating__star--zero--hidden"}));return n.append(r,o),n}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+h.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_isEmptyValue",value:function(){return void 0===this._value||null===this._value}},{key:"_setValueFromRatingValue",value:function(e){this._value=this._getNumberValueFromRating(e),eh(rh(i.prototype),"_setValueToOriginalInput",this).call(this,Number(this._value))}},{key:"_setValue",value:function(e){var t=this._getRatingFromNumberValue(e);t>=0&&(pjQuery("#"+this._fieldId+"_icon_"+t).prop("checked",!0),pjQuery("#"+this._fieldId+"_icon_"+t).change())}},{key:"_clearValue",value:function(){this._value=null,this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_icon_0").prop("checked",!0),this._triggerEvent("input")}},{key:"_getNumberValueFromRating",value:function(e){var t=e/this._numRatings*(this._rangeMaxValue-this._rangeMinValue);return null===(t=Number(this._rangeMinValue)+t)?t:this._removeInsignificantTrailingDecimals(Number(t).toFixed(this._numDecimals))}},{key:"_getRatingFromNumberValue",value:function(e){if(null===e)return e;var t=Number(e),n=Number(this._rangeMinValue),r=Number(this._rangeMaxValue),o=Number(this._numRatings);if(t<=n)return n;var i=Math.abs(n-t);return i=i/(r-n)*o,Math.round(i)}},{key:"_removeInsignificantTrailingDecimals",value:function(e){return Number(e).toString()}}],n&&Xy(t.prototype,n),r&&Xy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Wy);!function(e,t,n){(t=oh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ih,"TYPE","NumberStarsField");const ah=ih;function uh(e){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(e)}function lh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dh(r.key),r)}}function sh(){return sh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ph(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},sh.apply(this,arguments)}function ch(e,t){return ch=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ch(e,t)}function fh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ph(e);if(t){var o=ph(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ph(e){return ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ph(e)}function dh(e){var t=function(e,t){if("object"!==uh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===uh(t)?t:String(t)}var yh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ch(e,t)}(i,e);var t,n,r,o=fh(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._hasPhotoPreviewByDefault=n.getSetting("hasPhotoPreviewByDefault"),n._isSocialLoginWithPhoto=n.getSetting("isSocialLoginWithPhoto"),n._cancelPhotoUploadText=n.getSetting("cancelPhotoUploadText"),n}return t=i,(n=[{key:"_postRegister",value:function(){this._hasPhotoPreviewByDefault&&!this._shouldHideFileInputByDefault&&this._addFileInputListeners(),this._isSocialLoginWithPhoto&&this._showPhotoFileInputCancelButton(),this._resetPreviewAndFileLoaders(),sh(ph(i.prototype),"_postRegister",this).call(this)}},{key:"getType",value:function(){return i.TYPE}},{key:"setSocialLoginPhoto",value:function(e){if(this._hasPreviewEnabled()){var t=document.getElementById("fileInputContainer_"+this._fieldId),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("id","photoDefaultPreviewImage_"+this._fieldId),n.setAttribute("value",e);var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("class","photoFieldIsSocialLogin"),r.setAttribute("value","1"),t&&(t.append(n),t.append(r)),this._setPreview(e),this._showPhotoFileInputCancelButton()}}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_hasDefaultPreviewImage",value:function(){return this._getDefaultPreviewImageElement()}},{key:"_getDefaultPreviewImageElement",value:function(){return document.getElementById("photoDefaultPreviewImage_"+this._fieldId)}},{key:"_getDefaultPreviewValue",value:function(){var e=this._getDefaultPreviewImageElement();return e?e.getAttribute("value"):null}},{key:"_getPreviewContainerElement",value:function(){return document.getElementById("photoPreviewContainer_"+this._fieldId)}},{key:"_setPreviewAsUnselected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewSelected"),e.classList.add("photoPreviewUnselected"))}},{key:"_setPreviewAsSelected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewUnselected"),e.classList.add("photoPreviewSelected"))}},{key:"_onFileChanged",value:function(){var e=this,t=0,n=this._getCurrentFiles();if(n&&n.length>0&&(t=n[0].size),t>0&&t>this._maxFileSize&&alert(this._errorToShowIfSizeExceeded),n&&n[0]){this._resetPreviewAndFileLoaders(!1),this._showPhotoFileInputCancelButton(),this._onPhotoFileInputNewPhotoSelected();var r=new FileReader;r.onload=function(t){return e._setPreview(t.target.result)},r.readAsDataURL(n[0])}}},{key:"_resetPreviewAndFileLoaders",value:function(e){void 0===e&&(e=!0),e&&this._removePhotoFileInputUploadedFile(),this._fileInfoCleaner.cleanExternalFileInfo(),this._hasDefaultPreviewImage()?this._setPreview(this._getDefaultPreviewValue()):(this._setPreviewAsUnselected(),this._removePreviewImg())}},{key:"_removePhotoFileInputUploadedFile",value:function(){this._getFieldElement().val(null),this._hidePhotoFileInputCancelButton()}},{key:"_hidePhotoFileInputCancelButton",value:function(){if(!this._existsSocialLoginLoadedPhoto()){var e=this._getCancelButtonElement();e&&(e.style.display="none")}}},{key:"_existsSocialLoginLoadedPhoto",value:function(){return document.querySelector(".photoFieldIsSocialLogin")&&this._hasDefaultPreviewImage()}},{key:"_removePreviewImg",value:function(){var e=this._getPhotoPreviewImgElement();e&&e.remove()}},{key:"_setPreview",value:function(e){this._setPreviewAsSelected(),this._removePreviewImg();var t=document.createElement("img");t.setAttribute("id","photoPreview_"+this._fieldId),t.setAttribute("class","photoInputPreview"),t.setAttribute("src",e),t.setAttribute("alt","User photo preview");var n=this._getPreviewContainerElement();n&&n.append(t)}},{key:"_getCancelButtonElement",value:function(){var e,t=document.getElementById("fileInputCancelButton_"+this._fieldId);return t||this._shouldHideFileInputByDefault||(t=this._buildCancelButtonElement(),null===(e=document.querySelector("#fileInputContainer_".concat(this._fieldId," .photoInputPreviewWrapper")))||void 0===e||e.append(t)),t}},{key:"_buildCancelButtonElement",value:function(){var e=document.createElement("button");return e.id="fileInputCancelButton_"+this._fieldId,e.className="fileInputCancelButton",e.type="button",e.innerText=this._cancelPhotoUploadText,e}},{key:"_showPhotoFileInputCancelButton",value:function(){var e=this._getCancelButtonElement();e&&(e.style.display="")}},{key:"_onPhotoFileInputNewPhotoSelected",value:function(){this._existsSocialLoginLoadedPhoto()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage();var e=this._getUploadedFileDiv();e&&(e.style.display="none")}},{key:"_disableSocialLoginPhotoAutoImportAndRemoveDefaultImage",value:function(){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","photoFieldSocialAutoImportPhotoRemoved"),e.setAttribute("value","1");var t=document.getElementById("fileInputContainer_"+this._fieldId);t&&t.append(e),document.querySelectorAll(".photoFieldIsSocialLogin").forEach((function(e){return e.remove()}));var n=this._getDefaultPreviewImageElement();n&&n.remove()}},{key:"_addFileInputListeners",value:function(){var e=this,t=this._getCancelButtonElement();t&&t.addEventListener("click",(function(){return e._onPhotoFileInputCancelButtonClicked()})),this._getFieldElement().on("click",(function(){return e._resetPreviewAndFileLoaders()}))}},{key:"_getPhotoPreviewValue",value:function(){var e=this._getPhotoPreviewImgElement();return e?e.getAttribute("src"):""}},{key:"_onPhotoFileInputCancelButtonClicked",value:function(){this._existsSocialLoginLoadedPhoto()&&this._currentPhotoPreviewIsTheSameAsTheDefaultOne()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage(),this._resetPreviewAndFileLoaders();var e=this._getUploadedFileDiv();e&&(e.style.display="block")}},{key:"_currentPhotoPreviewIsTheSameAsTheDefaultOne",value:function(){return this._getPhotoPreviewImgElement()&&this._getDefaultPreviewValue()==this._getPhotoPreviewValue()}},{key:"_getPhotoPreviewImgElement",value:function(){return document.getElementById("photoPreview_"+this._fieldId)}},{key:"_hasPreviewEnabled",value:function(){return this._getPreviewContainerElement()}},{key:"_getRemoveButtonClickEventListener",value:function(){var e=this;return function(){var t;e._setPreviewAsUnselected();var n=e._getPreviewContainerElement();null===(t=e._getDefaultPreviewImageElement())||void 0===t||t.remove(),n&&(n.innerHTML="")}}}])&&lh(t.prototype,n),r&&lh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(af);!function(e,t,n){(t=dh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yh,"TYPE","PhotoField");const hh=yh;function vh(e){return vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(e)}function bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wh(r.key),r)}}function mh(e,t){return mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mh(e,t)}function gh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_h(e);if(t){var o=_h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_h(e)}function wh(e){var t=function(e,t){if("object"!==vh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vh(t)?t:String(t)}var Sh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mh(e,t)}(i,e);var t,n,r,o=gh(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"getType",value:function(){return this.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&bh(t.prototype,n),r&&bh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=wh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sh,"TYPE","PlainTextField");const Oh=Sh;function Eh(e){return Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(e)}function Ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ih(r.key),r)}}function kh(e,t){return kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kh(e,t)}function Th(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jh(e);if(t){var o=jh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Eh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jh(e){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jh(e)}function Ih(e){var t=function(e,t){if("object"!==Eh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Eh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Eh(t)?t:String(t)}var Fh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kh(e,t)}(i,e);var t,n,r,o=Th(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t))._setPostalCode(e),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({postalCode:this._postalCode.toString(),radius:this._radius.toString()})}},{key:"getPostalCode",value:function(){return this._postalCode}},{key:"_setPostalCode",value:function(e){O.assertIsValid(e),this._postalCode=e}}])&&Ph(t.prototype,n),r&&Ph(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}($p);!function(e,t,n){(t=Ih(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fh,"TYPE","FieldPostalCodeRadiusValue");const Rh=Fh;function Ch(e){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(e)}function Dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mh(r.key),r)}}function Ah(){return Ah="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lh(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ah.apply(this,arguments)}function xh(e,t){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xh(e,t)}function Nh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lh(e);if(t){var o=Lh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ch(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lh(e)}function Mh(e){var t=function(e,t){if("object"!==Ch(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ch(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ch(t)?t:String(t)}var Bh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xh(e,t)}(i,e);var t,n,r,o=Nh(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Rh.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=J.getFieldValue(this._getPostalCodeId()),t=J.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new A:new Rh(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPostalCodeId()).selectedOptions[0].text].concat(Ah(Lh(i.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){Ah(Lh(i.prototype),"setValue",this).call(this,e),J.setFieldValue(this._getPostalCodeId(),e.getPostalCode())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPostalCodeId(),this._getPostalCodeSuffix())].concat(Ah(Lh(i.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPostalCodeId",value:function(){return this.getFieldId()+this._getPostalCodeSuffix()}},{key:"_getPostalCodeSuffix",value:function(){return this._getFieldSuffix()+"_postalCode"}},{key:"_getFieldSuffix",value:function(){return""}},{key:"getSearchFieldId",value:function(){return this._getPostalCodeId()}}],n&&Dh(t.prototype,n),r&&Dh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yp);!function(e,t,n){(t=Mh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bh,"TYPE","PostalCodeRadiusField");const Vh=Bh;function Uh(e){return Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(e)}function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qh(r.key),r)}}function Hh(e,t){return Hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hh(e,t)}function Yh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zh(e);if(t){var o=zh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zh(e)}function Qh(e){var t=function(e,t){if("object"!==Uh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Uh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uh(t)?t:String(t)}var qh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hh(e,t)}(i,e);var t,n,r,o=Yh(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElement();if(null===e||""===e.value)return new A;var t=e.value,n=e.dataset.optionName.toString();return new nn(t,n)}},{key:"getValueForCondition",value:function(){return this._getSelectedElement().value}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case Gt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElement",value:function(){return document.getElementById(this.getFieldId()).querySelector("input[type=radio]:checked")}},{key:"_getOptionElements",value:function(){return document.getElementById(this.getFieldId()).querySelectorAll("input[type=radio]")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){e._updateAccessibilityAttributesOnSelect(),J.onFieldValueChange(e.getFieldId())}))}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("role","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=this._getOptionElements();1===e.length&&this.setValue(new Gt(e[0].value))}},{key:"_updateAccessibilityAttributesOnSelect",value:function(){var e=this._getOptionElements(),t=this._getSelectedElement();e.forEach((function(e){e.setAttribute("aria-checked","false")})),t.setAttribute("aria-checked","true"),this._getFieldElement()[0].setAttribute("aria-activedescendant",t.id)}}],n&&Wh(t.prototype,n),r&&Wh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=Qh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qh,"TYPE","RadioButtonListField");const Gh=qh;function Jh(e){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(e)}function Zh(){}Zh.prototype.element=function(e,t,n){var r=document.createElement(e);for(var o in t){var i=t[o];if("style"==o&&"object"===Jh(i))for(var a in i){var u=a.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}));r.style[u]=i[a]}else"function"==typeof i&&"on"===o.substr(0,2)?r.addEventListener(o.substr(2),i,!1):r.setAttribute(o,i)}if(n){var l=this;n.map((function(e){r.appendChild(l._getDomNodeFromChild(e))}))}return r},Zh.prototype._getDomNodeFromChild=function(e){return"string"==typeof e?document.createTextNode(e):e.getDomNode?e.getDomNode():e};const Kh=Zh;function $h(e,t,n,r,o){this.callback=e,this.title=t,this.label=n,this.extraCssClass=r,this.useNote=o,this.domNode=this._render(),this.setNote(null)}$h.prototype=new Kh,$h.prototype.getDomNode=function(){return this.domNode},$h.prototype.setTitle=function(e){this._getAnchorElement().innerHTML=e},$h.prototype.setLabel=function(e){this._getAnchorElement().ariaLabel=e},$h.prototype.onClick=function(e){e.preventDefault(),this.callback()},$h.prototype._render=function(){var e=this.element("div",{class:"VideoInputControlsItem "+this.extraCssClass},[this.element("a",{href:"#",onclick:this.onClick.bind(this),class:"VideoInputToolbarBtn",role:"button",ariaLabel:this.label},[this.title])]);return this.useNote&&e.appendChild(this.noteSpan=this.element("span",{class:"tooltip VideoControlNote"})),e},$h.prototype.setNote=function(e){this.noteSpan&&(this.noteSpan.innerHTML=e,this.noteSpan.style.display=e?null:"none")},$h.prototype._getAnchorElement=function(){return this.domNode.firstElementChild};const Xh=$h;function ev(e){this.maxSeconds=e,this.domNode=this._render()}ev.prototype=new Kh,ev.prototype.getDomNode=function(){return this.domNode},ev.prototype.start=function(){this.startTime=(new Date).getTime(),this.endTime=null,this.timerStarted||(this.timerStarted=!0,this.interval=setInterval(this._onInterval.bind(this),100))},ev.prototype.stop=function(){this.endTime=(new Date).getTime(),this.timerStarted=!1,clearInterval(this.interval)},ev.prototype._onInterval=function(){if(this.startTime){var e=this.endTime?this.endTime-this.startTime:(new Date).getTime()-this.startTime,t=Math.floor(e/1e3);this.elapsedText.nodeValue=this._formatDuration(t),this.remainingText.nodeValue=this._formatDuration(Math.max(0,this.maxSeconds-t))}else this.elapsedText.nodeValue="",this.remainingText.nodeValue=""},ev.prototype._render=function(){return this.elapsedText=document.createTextNode(""),this.remainingText=document.createTextNode(""),this.element("div",{class:"VideoInputControlsItem VideoInputTime"},[this.element("div",{class:"VideoInputElapsedTime",role:"timer"},[this.elapsedText]),this.element("div",{class:"VideoRemainingTime",role:"timer"},[this.remainingText])])},ev.prototype._formatDuration=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r};const tv=ev;function nv(e,t,n,r,o,i){this.labels=e,this.maxSeconds=t,this._hasRecording=n,this.onRecClick=r,this.onStopClick=o,this.onPlayClick=i,this.domNode=this._render(),this._updateRecordButtonText()}nv.prototype=new Kh,nv.prototype.getDomNode=function(){return this.domNode},nv.prototype.setHasRecording=function(e){this._hasRecording=e,this._updateRecordButtonText()},nv.prototype.onClick=function(e){e.preventDefault(),this.callback()},nv.prototype._updateRecordButtonText=function(){this.recButton.setTitle(this._getRecordButtonTitle()),this.recButton.setLabel(this._getRecordButtonLabel()),this._hasRecording?this.recButton.setNote(this._getRecordButtonLabel()):this.recButton.setNote(null)},nv.prototype._getRecordButtonTitle=function(){return this._hasRecording?this.labels.recAgainButtonTitle:this.labels.recButtonTitle},nv.prototype._getRecordButtonLabel=function(){return this._hasRecording?this.labels.recAgainButtonLabel:this.labels.recButtonLabel},nv.prototype.startTimer=function(){this.videoTimer.start()},nv.prototype.stopTimer=function(){this.videoTimer.stop()},nv.prototype._render=function(){return this.recButton=new Xh(this.onRecClick,this._getRecordButtonTitle(),this._getRecordButtonLabel(),"VideoInputRec",!0),this.stopButton=new Xh(this.onStopClick,this.labels.stopButtonTitle,this.labels.stopButtonTitle,"VideoInputStop",!1),this.playButton=new Xh(this.onPlayClick,this.labels.playButtonTitle,this.labels.playButtonTitle,"VideoInputPlay",!1),this.videoTimer=new tv(this.maxSeconds),this.element("div",{class:"VideoInputToolbar"},[this.element("div",{class:"VideoInputControlsContainer"},[this.stopButton,this.recButton,this.playButton,this.videoTimer])])};const rv=nv;function ov(e){return ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(e)}function iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,av(r.key),r)}}function av(e){var t=function(e,t){if("object"!==ov(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ov(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ov(t)?t:String(t)}function uv(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function lv(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,cv(e,t,"get"))}function sv(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,cv(e,t,"set"),n),n}function cv(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var fv=new WeakMap,pv=new WeakMap,dv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uv(this,fv,{writable:!0,value:void 0}),uv(this,pv,{writable:!0,value:void 0}),sv(this,fv,t),sv(this,pv,Promise.resolve())}var t,n,r;return t=e,n=[{key:"play",value:function(){var e=this;sv(this,pv,lv(this,pv).then((function(){return lv(e,fv).play()})))}},{key:"pause",value:function(){var e=this;lv(this,pv).then((function(){return lv(e,fv).pause()}))}},{key:"load",value:function(){var e=this;lv(this,pv).then((function(){return lv(e,fv).load()}))}},{key:"setSrcObject",value:function(e){var t=this;lv(this,pv).then((function(){return lv(t,fv).srcObject=e}))}},{key:"setSrc",value:function(e){var t=this;lv(this,pv).then((function(){return lv(t,fv).src=e}))}}],n&&iv(t.prototype,n),r&&iv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const yv=dv;function hv(e){return hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(e)}function vv(){vv=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==hv(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function bv(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function mv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){bv(i,r,o,a,u,"next",e)}function u(e){bv(i,r,o,a,u,"throw",e)}a(void 0)}))}}function gv(e,t,n,r,o){this.labels=e,this.onRecordedDataReady=t,this.maxSeconds=n,this.blobUrl=r,this.downloadUrl=r,this.dontAllowToReRecord=!!o,this.domNode=this._render(),this.webmType="video/webm;codecs=vp8,opus";this.mimeType=MediaRecorder.isTypeSupported(this.webmType)?this.webmType:"video/mp4;codecs:avc1.42E01F",this.shortMimeType=this.mimeType.replace(/;.*/,""),this.mediaReady=null,this._videoInputPlayer=new yv(this.videoElement),r&&(this.paused=!0,this._playRecording(!0)),this._updateClassList()}gv.prototype=new Kh,gv.startedInput=null,gv.prototype._isVisible=function(e){return"none"!==window.getComputedStyle(e).getPropertyValue("display")&&(!e.parentNode||e===document.body||this._isVisible(e.parentNode))},gv.prototype.startWebcamIfInDomAndNobodyElseHasIt=function(){this.downloadUrl||!document.body.contains(this.domNode)||!this._isVisible(this.domNode)||gv.startedInput&&gv.startedInput.videoElement.srcObject||this._startWebcam()},gv.prototype.removeVideo=function(){this.stopRecording(),this._stopWebcam(),this.downloadUrl=null,this.blobUrl=null,this._videoInputPlayer.pause(),this.videoElement.removeAttribute("src"),this._videoInputPlayer.load(),this.toolbar.setHasRecording(!1),this.startWebcamIfInDomAndNobodyElseHasIt(),this._updateClassList()},gv.prototype._stopWebcam=function(){this.videoElement.srcObject&&(this._videoInputPlayer.setSrcObject(null),this.webcamStarted=!1,this.mediaReady=null)},gv.prototype.handleHide=function(){this.stopRecording(),this._stopWebcam(),this._videoInputPlayer.pause()},gv.prototype.handleShow=function(){var e=this;setTimeout((function(){e.startWebcamIfInDomAndNobodyElseHasIt()}),0)},gv.prototype.isRecording=function(){return!!this.mediaRecorder},gv.prototype.getDomNode=function(){return this.domNode},gv.prototype._setCutOffTimeout=function(){this.cutOffTimeout=setTimeout(this._onCutOffTimeout.bind(this),1e3*this.maxSeconds)},gv.prototype._clearCutOffTimeout=function(){this.cutOffTimeout&&(clearTimeout(this.cutOffTimeout),this.cutOffTimeout=null)},gv.prototype._onCutOffTimeout=function(){this.cutOffTimeout=null,this.stopRecording()},gv.prototype._onDataAvailable=function(e){e.data.size>0&&(this.blob=e.data,this.blobUrl=URL.createObjectURL(this.blob),this.onRecordedDataReady(this.blob,this.mimeType===this.webmType?"webm":"mp4",this.shortMimeType),this._updateClassList())},gv.prototype._startRecording=mv(vv().mark((function e(){return vv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasRecording()||!this.dontAllowToReRecord){e.next=2;break}return e.abrupt("return");case 2:if(this.isRecording()){e.next=7;break}return e.next=5,this._startWebcam();case 5:this.mediaReady?this._continueStartingRecording():this.continueRecordingOnMediaReady=!0,this._updateClassList();case 7:this.domNode.dispatchEvent(new Event("startrecording"));case 8:case"end":return e.stop()}}),e,this)}))),gv.prototype._continueStartingRecording=function(){this.continueRecordingOnMediaReady=!1,this.blobUrl&&(URL.revokeObjectURL(this.blobUrl),this.blobUrl=null);var e={audioBitsPerSecond:96e3,videoBitsPerSecond:4e5,mimeType:this.mimeType};this.mediaRecorder=new MediaRecorder(this.stream,e),this.mediaRecorder.ondataavailable=this._onDataAvailable.bind(this),this.mediaRecorder.ignoreMutedMedia=!0,this.mediaRecorder.start(),this.toolbar.startTimer(),this._setCutOffTimeout(),this._updateClassList()},gv.prototype._hasRecording=function(){return!!this.blobUrl},gv.prototype._updateClassList=function(){var e=this._hasRecording(),t=e&&!this.isRecording()&&!this.videoElement.srcObject&&!this.videoElement.ended&&!this.paused,n=this._getVideoInputElement().classList;n.toggle("VideoInputHasRecording",e),n.toggle("VideoInputIsRecording",this.isRecording()),n.toggle("VideoInputIsPlaying",t),n.toggle("VideoInputIsIdle",!t&&!this.isRecording()),n.toggle("VideoInputBusy",!1===this.mediaReady),n.toggle("VideoRecordNotAllowed",e&&this.dontAllowToReRecord)},gv.prototype.stopRecording=function(){this.continueRecordingOnMediaReady=!1,this.isRecording()&&(this._clearCutOffTimeout(),this.toolbar.stopTimer(),this.mediaRecorder.stop(),this.mediaRecorder=null,this.toolbar.setHasRecording(!0),this._updateClassList())},gv.prototype._playRecording=function(e){this.continueRecordingOnMediaReady=!1,this._stopWebcam(),this.videoElement.controls=!0,this._videoInputPlayer.setSrc(this.blobUrl),this.videoElement.muted=!1,e||this._videoInputPlayer.play(),this._updateClassList()},gv.prototype._startWebcam=function(){if(gv.startedInput&&gv.startedInput!==this&&gv.startedInput.videoElement.srcObject&&gv.startedInput._stopWebcam(),gv.startedInput=this,!this.webcamStarted)return this._getVideoInputElement().classList.add("VideoInputBusy"),this.mediaReady=!1,this.webcamStarted=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:{width:640,height:360,facingMode:"user"}}).then(this._onMediaReady.bind(this)).catch(this._onMediaError.bind(this))},gv.prototype.isMediaReady=function(){return this.mediaReady},gv.prototype._onMediaReady=function(e){this.stream=e,this.videoElement.controls=!1,this.videoElement.muted=!0,this._videoInputPlayer.setSrcObject(this.stream),this._videoInputPlayer.play(),this.mediaReady=!0,this._updateClassList(),this.continueRecordingOnMediaReady&&this._continueStartingRecording()},gv.prototype._onMediaError=function(e){console.error(e),alert(this.labels.cannotStartWebcam),this.mediaReady=!1},gv.prototype.addListener=function(e,t){this.domNode.addEventListener(e,t)},gv.prototype._createVideoElement=function(){var e=this;return this.element("video",{playsinline:"",class:"VideoInputVideo",onended:function(){e._updateClassList()},onpause:function(){e.paused=!0,e._updateClassList()},onplay:function(){e.paused=!1,e._updateClassList()}})},gv.prototype._getVideoInputElement=function(){return this.domNode.firstElementChild},gv.prototype._render=function(){return this.videoElement=this._createVideoElement(),this.toolbar=new rv(this.labels,this.maxSeconds,!!this.blobUrl,this._startRecording.bind(this),this.stopRecording.bind(this),this._playRecording.bind(this)),this.element("div",{class:"VideoContainer"},[this.element("div",{class:"VideoInput VideoInputBusy"},[this.videoElement,this.toolbar])])};const _v=gv;var wv=n(76742);function Sv(e){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(e)}function Ov(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ev(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fv(r.key),r)}}function kv(){return kv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},kv.apply(this,arguments)}function Tv(e,t){return Tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tv(e,t)}function jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Iv(e);if(t){var o=Iv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Sv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Iv(e)}function Fv(e){var t=function(e,t){if("object"!==Sv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sv(t)?t:String(t)}var Rv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tv(e,t)}(i,e);var t,n,r,o=jv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._translations=n.getSetting("translations"),n._regularUploadMaxFileSize=n.getSetting("regularUploadMaxFileSize"),n._maxSeconds=n.getSetting("maxSeconds"),n._isLargeFilesUploadAllowed=n.getSetting("isLargeFilesUploadAllowed"),n._savedVideoUrl=n.getSetting("savedVideoUrl"),n._delayedLabelSettings=n.getSetting("delayedLabelSettings"),n._isLabelVisible=!n._delayedLabelSettings,n._file=null,n._videoInput=null,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"addRemoveButton",value:function(){this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton()}},{key:"_getRemoveButtonClickEventListener",value:function(){var e=this;return function(){return e._videoInput.removeVideo()}}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_mustUseStandardFileInput",value:function(){return!window.MediaRecorder||!navigator.mediaDevices}},{key:"_postRegister",value:function(){if(!this._mustUseStandardFileInput()){var e=this._getFileInput();this._videoInput=new _v(this._translations,this._onRecordingAvailable.bind(this),this._maxSeconds,this._savedVideoUrl,!!this._delayedLabelSettings),this._videoInput.addListener("startrecording",this._onStartRecording.bind(this)),e.parentNode.insertBefore(this._videoInput.getDomNode(),e),this._videoInput.startWebcamIfInDomAndNobodyElseHasIt(),this._preventOpeningFileUploadWindow(),this._stopRecordingBeforeSubmit(),kv(Iv(i.prototype),"_postRegister",this).call(this)}}},{key:"_getFileInput",value:function(){return this._getFieldElement()[0]}},{key:"_onRecordingAvailable",value:function(e,t,n){this._file=new File([e],"recording."+t,{type:n,lastModified:(new Date).getTime()});var r=this._getFileInput();if(this._file.size>this._regularUploadMaxFileSize||this._isLargeFilesUploadAllowed)r.uploadThisFileAsBig=this._file;else{var o=new DataTransfer;o.items.add(this._file),r.files=o.files}this._triggerEvent("change")}},{key:"_onStartRecording",value:function(){if(this._delayedLabelSettings&&!this._isLabelVisible){var e=document.getElementById("fieldSpecContainer"+this.getFieldId());e&&(this._setDelayedLabel(e),this._setDelayedDescription(e,["formdescription","description"]),this._isLabelVisible=!0)}}},{key:"_setDelayedLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-label");t&&(e.classList.remove("FileSchemaFieldRecordVideo--waiting"),t.innerText=this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedLabel))}},{key:"_setDelayedDescription",value:function(e,t){var n,r=Ov(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=e.getElementsByClassName(o);if(i.length>0)return i[0].prepend(this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedDescription)),!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"_getCurrentFiles",value:function(){if(this._videoInput&&this._file){var e=[];return this._file&&e.push(this._file),e}return kv(Iv(i.prototype),"_getCurrentFiles",this).call(this)}},{key:"_hide",value:function(){kv(Iv(i.prototype),"_hide",this).call(this),this._videoInput&&this._videoInput.stopRecording()}},{key:"onFormStepVisibilityChange",value:function(e){this._videoInput&&(e?this._videoInput.handleHide():this._videoInput.handleShow())}},{key:"_stopRecordingBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addActionBeforeSubmit((function(){if(!e._videoInput||!e._videoInput.isRecording())return null;var t=e._buildOnStopRecordingPromise();return e._stopRecording(),t}),this.getFormContainer(),wv.Z.PRIORITY_HIGH)}},{key:"_buildOnStopRecordingPromise",value:function(){var e=document.getElementById(this.getFieldId());return e?new Promise((function(t,n){e.onchange=function(e){t()}})):null}},{key:"_stopRecording",value:function(){this._videoInput&&this._videoInput.stopRecording()}},{key:"_b64DecodeUnicode",value:function(e){return decodeURIComponent(atob(e).replace(/0x([0-9A-F]{2})/g,"%$1"))}}])&&Pv(t.prototype,n),r&&Pv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(af);!function(e,t,n){(t=Fv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rv,"TYPE","RecordVideoField");const Cv=Rv;n(85827);var Dv=n(68565);function Av(e){return Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(e)}function xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wv(r.key),r)}}function Nv(){return Nv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Nv.apply(this,arguments)}function Lv(e,t){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lv(e,t)}function Mv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vv(e);if(t){var o=Vv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Av(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bv(e)}(this,n)}}function Bv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vv(e)}function Uv(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Wv(e){var t=function(e,t){if("object"!==Av(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Av(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Av(t)?t:String(t)}var Hv=new WeakSet,Yv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lv(e,t)}(i,e);var t,n,r,o=Mv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Uv(Bv(n=o.call(this,e,t)),Hv),n._fieldId=e,n._datePickerContainerId=n.getSetting("datePickerContainerId"),n._companySelectorId=n.getSetting("companySelectorId"),n._prevMonthText=n.getSetting("prevMonthText"),n._nextMonthText=n.getSetting("nextMonthText"),n._relatedJobId=n.getSetting("relatedJobId"),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(Bv(n),Hv,zv).call(Bv(n)),n._locale=n.getSetting("locale"),n._eventsApiUrl=n.getSetting("eventsApiUrl"),n._isAccessibilityEnabled=n.getSetting("isAccessibilityEnabled"),n._showUserSchedulingTimezoneLabel=n.getSetting("showUserSchedulingTimezoneLabel"),n._showUserSchedulingTimezoneOffset=n.getSetting("showUserSchedulingTimezoneOffset"),n._showTimeSlotOrEventSchedulingTimezoneLabel=n.getSetting("showTimeSlotOrEventSchedulingTimezoneLabel"),n._showTimeSlotOrEventSchedulingTimezoneOffset=n.getSetting("showTimeSlotOrEventSchedulingTimezoneOffset"),n._currentSelectedDateText=n.getSetting("currentSelectedDateText"),n._currentSelectedSlotText=n.getSetting("currentSelectedSlotText"),n._slotDescriptionText=n.getSetting("slotDescriptionText"),n._timeslotsAvailableText=n.getSetting("timeslotsAvailableText"),n._noTimeslotsAvailableText=n.getSetting("noTimeslotsAvailableText"),n._useMilitaryTimeFormat=n.getSetting("useMilitaryTimeFormat"),n._firstDay=n.getSetting("firstDay"),n._dates=[],n._keepCurrentValue=!1,n._widget=null,n._datePicker=null,n._lastSelectedDateText=null,n._lastFetchedMonth=null,n._lastFetchedYear=null,n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;this._locale=this._locale.toLowerCase().replace("_","-"),e._initWidget(),""!==this._companySelectorId&&pjQuery("#"+this._companySelectorId).change((function(){e._applyCompanyFilter()})),this._setOnResetFormListener(),Nv(Vv(i.prototype),"_postRegister",this).call(this)}},{key:"getValue",value:function(){return new Ot("")}},{key:"getValueForCondition",value:function(){return this._isTimeSlotSelected()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e)}},{key:"_isTimeSlotSelected",value:function(){return Boolean(this._getValueId()&&this._getValueTimestamp()&&this._getValueSlotPartitionNumber())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_checkAvailableDays",value:function(e){var t=Dv.ou.fromJSDate(e).toISODate();return[!0,this._getDayAvailabilityCssClass(t)]}},{key:"_getDayAvailabilityCssClass",value:function(e){return this._dates[e]?"selectable-day":"not-selectable-day"}},{key:"_updateAvailabilityForText",value:function(e){var t=Dv.ou.fromFormat(e,"yyyy-MM-dd").setLocale(this._locale).toFormat("DDDD");pjQuery("#"+this._datePickerContainerId).parent().find(".results .currentDay").html(t)}},{key:"_updateResults",value:function(e){this._updateAvailabilityForText(e),this._showLoading(),this._fetchItemsByDay(e)}},{key:"_fetchItemsByDay",value:function(e){var t=e.split("-"),n=t[2],r=t[1];this._widget.find(".results .resultsList").html("");var o=this._widget.find('.schedulerDatePicker td[data-month="'+(r-1)+'"]:contains("'+n+'")').filter((function(){return pjQuery(this).text()==n})),i=this._dates[e]&&this._dates[e].length>0;o.length>0&&!i?this._showNoResults():(this._drawItems(this._dates[e],n,r),this._focusOnResultsList())}},{key:"_showLoading",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events","none"),this._widget.find(".availability").attr("hidden",!0),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").removeAttr("hidden")}},{key:"_showNoResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").removeAttr("hidden"),this._widget.find(".form__loader").attr("hidden",!0),this._resetValue(),this._triggerEvent("change")}},{key:"_showResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").removeAttr("hidden"),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").attr("hidden",!0)}},{key:"_generateRow",value:function(e){var t=pjQuery('<div class="resultItem"/>');if(t.attr("id",this._fieldId+"-"+e.id+"-"+e.timestamp),t.attr("item_id",e.id),t.attr("item_timestamp",e.timestamp),e.availablePartitionNumbers){var n=Object.keys(e.availablePartitionNumbers);n.length>0&&t.attr("item_slotPartitionNumber",n[0])}if(this._keepCurrentValue&&e.id==this._getValueId()&&e.timestamp==this._getValueTimestamp()&&(t.addClass("selected"),this._keepCurrentValue=!1),t.append(pjQuery('<p class="title">'+e.title+"</p>")),e.hasTime){var r="";if(e.timeZone&&(this._showTimeSlotOrEventSchedulingTimezoneLabel||this._showTimeSlotOrEventSchedulingTimezoneOffset)){var o=this._showTimeSlotOrEventSchedulingTimezoneLabel?' <span class="timeZoneLabel">'+e.timeZone+"</span>":"",i=this._showTimeSlotOrEventSchedulingTimezoneOffset?' <span class="timeZoneOffset">'+e.timeZoneGMTMode+"</span>":"";r=pjQuery('<span class="timeZone"> '+e.initTimeWithZone+" - "+e.endTimeWithZone+o+i+"</span>")[0].outerHTML}var a=Dv.ou.fromMillis(1e3*e.initTimestamp).toFormat(this._getTimeFormat()),u=Dv.ou.fromMillis(1e3*e.endTimestamp).toFormat(this._getTimeFormat()),l="";if(this._showUserSchedulingTimezoneLabel||this._showUserSchedulingTimezoneOffset){var s=Dv.ou.now();l='<span class="localTimeZone">'+(this._showUserSchedulingTimezoneLabel?'<span class="localTimeZoneLabel">'+s.toFormat("z").replace("/"," - ")+"</span>":"")+(this._showUserSchedulingTimezoneOffset?'<span class="localTimeZoneOffset"> (GMT '+s.toFormat("ZZ")+")</span>":"")+"</span>"}t.append(pjQuery('<p class="time"><span class="timeLocal">'+a+" - "+u+" "+l+"</span> "+r+"</p>")),e.initTime=a,e.endTime=u}else{var c=pjQuery(this._widget.find(".results .allDay")[0].outerHTML).removeAttr("hidden");t.append(c)}return e.location&&t.append(pjQuery('<p class="location">'+e.location+"</p>")),this._makeResultItemRowAccessibleIfNeeded(t,e),t}},{key:"_drawItems",value:function(e,t,n){this._keepCurrentValue||this._resetValue();var r=this._datePicker.datepicker("getDate");if(r.getDate()==t&&r.getMonth()+1==n)if(e&&0!==e.length){for(var o in e)if(e.hasOwnProperty(o)){var i=this._generateRow(e[o]);this._widget.find(".results .resultsList").append(i)}this._setClicksOnItems(),this._showResults()}else this._showNoResults()}},{key:"_focusOnResultsList",value:function(){this._addAccessibilityAttributes(),this._isAccessibilityEnabled&&(this._widget.find(".results .resultsList").focus(),this._widget.find(".results .resultsList").click()),this._triggerEvent("change")}},{key:"_setClicksOnItems",value:function(){var e=this,t=e._widget.find(".results .resultsList .resultItem");t.click((function(){var n=pjQuery(this);pjQuery(this).hasClass("selected")?(e._unselectItem(t),n.parent().attr("aria-activedescendant",""),e._resetValue()):(e._unselectItem(t),e._setSelectedValue(n.attr("item_id"),n.attr("item_timestamp"),n.attr("item_slotPartitionNumber")),n.addClass("selected"),n.attr("aria-selected","true"),n.parent().attr("aria-activedescendant",n.attr("id"))),e._triggerEvent("change")}))}},{key:"_setSelectedValue",value:function(e,t,n){pjQuery("#"+this._fieldId+"id").val(e),pjQuery("#"+this._fieldId+"timestamp").val(t),pjQuery("#"+this._fieldId+"slotPartitionNumber").val(n)}},{key:"_resetValue",value:function(){pjQuery("#"+this._fieldId+"id").val(""),pjQuery("#"+this._fieldId+"timestamp").val(""),pjQuery("#"+this._fieldId+"slotPartitionNumber").val("")}},{key:"_unselectItem",value:function(e){e.removeClass("selected"),e.attr("aria-selected","false")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._resetValue();var e=t._getFieldElement().find(".selected");t._unselectItem(e),e.parent().attr("aria-activedescendant","")}))}},{key:"_getValueId",value:function(){return pjQuery("#"+this._fieldId+"id").val()}},{key:"_getValueTimestamp",value:function(){var e=pjQuery("#"+this._fieldId+"timestamp").val();return parseInt(e)}},{key:"_getValueSlotPartitionNumber",value:function(){var e=pjQuery("#"+this._fieldId+"slotPartitionNumber").val();return parseInt(e)}},{key:"_fetchItemsByMonth",value:function(e,t,n){this._lastFetchedMonth=e,this._lastFetchedYear=t;var r=this,o=this._buildStartTimestamp(t,e,1),i=this._buildEndTimestamp(t,e,0);pjQuery.ajax(r._buildCalendarApiRequestPayload(o,i)).done((function(e){r._saveMonthItems(e)})).fail((function(){r._saveMonthItems([])})).always((function(){n()}))}},{key:"_saveMonthItems",value:function(e){this._dates=e.reduce((function(e,t){var n=Dv.ou.fromSeconds(t.timestamp).toFormat("yyyy-MM-dd");return void 0===e[n]&&(e[n]=[]),e[n].push(t),e}),[])}},{key:"_setDatePickerLanguage",value:function(){this._setDatePickerLocale(this._locale)}},{key:"_initDatePicker",value:function(e){var t=e.toJSDate();this._setCurrentSelectedDateInTitle(t),this._widget=pjQuery("#"+this._datePickerContainerId).parent(),this._currentMonth=t.getMonth()+1,this._currentYear=t.getFullYear();var n=this;this._setDatePickerLanguage(),this._datePicker=pjQuery("#"+this._datePickerContainerId).datepicker({defaultDate:e.toJSDate(),dateFormat:"yy-mm-dd",nextText:n._nextMonthText,prevText:n._prevMonthText,showOtherMonths:!0,minDate:n._minDateStr,maxDate:n._maxDateStr,firstDay:n._firstDay,onSelect:function(e){n._setCurrentSelectedDateInTitle(new Date(e)),n._lastSelectedDateText=e,n._updateResults(e),setTimeout((function(){n._addAccessibilityAttributes()}),0)},onChangeMonthYear:function(e,t){n._currentMonth=t,n._currentYear=e,n._fetchItemsByMonth(t,e,(function(){n._addAccessibilityAttributes(),setTimeout((function(){pjQuery(".ui-state-hover").removeClass("ui-state-hover")}),0)})),setTimeout((function(){n._addAccessibilityAttributes()}),0)},beforeShowDay:function(e){return n._checkAvailableDays(e)}}),this._addAccessibilityAttributes()}},{key:"_refreshDatePicker",value:function(){pjQuery("#"+this._datePickerContainerId).datepicker("refresh")}},{key:"_initWidget",value:function(){var e,t,n=null,r=this;if(""!=this._getValueId()){var o=this._getValueTimestamp();e=(n=Dv.ou.fromSeconds(o)).month,t=n.year,this._keepCurrentValue=!0}else if(""!=this._initialYear)e=this._initialMonth,t=this._initialYear;else{var i=Dv.ou.now();e=i.month,t=i.year}this._fetchItemsByMonth(e,t,(function(){if(null==n){var e=Object.keys(r._dates);n=0===e.length?r._minDateStr?Dv.ou.fromFormat(r._minDateStr,"yyyy-MM-dd"):Dv.ou.now():Dv.ou.fromFormat(e[0],"yyyy-MM-dd")}r._initDatePicker(n),r._lastSelectedDateText=n.toFormat("yyyy-MM-dd"),r._updateResults(r._lastSelectedDateText)}))}},{key:"_applyCompanyFilter",value:function(){var e=this;e._fetchItemsByMonth(e._lastFetchedMonth,e._lastFetchedYear,(function(){e._refreshDatePicker(),e._updateResults(e._lastSelectedDateText),setTimeout((function(){e._addAccessibilityAttributes()}),0)}))}},{key:"_isRegionLocale",value:function(e){return e.indexOf("-")>=0}},{key:"_getCountryLocale",value:function(e){return e.split("-")[0]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}},{key:"_addAccessibilityAttributes",value:function(){this._isAccessibilityEnabled&&(this._addHeadingRoleToMonthAndYearTitle(),this._makeMonthNavigationAccessible(),this._makeDayNavigationAccessible())}},{key:"_addHeadingRoleToMonthAndYearTitle",value:function(){var e=document.getElementById(this._fieldId+"_datepicker_scheduling").querySelector(".ui-datepicker-title");e&&(e.setAttribute("role","heading"),e.setAttribute("aria-level","2"))}},{key:"_makeMonthNavigationAccessible",value:function(){var e=pjQuery("#"+this._datePickerContainerId),t=["a.ui-datepicker-prev.ui-corner-all","a.ui-datepicker-next.ui-corner-all"],n=Dv.ou.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").plus({months:1}),r=Dv.ou.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").minus({months:1});t.forEach((function(o){var i=e.find(o);"click"===i.attr("data-event")&&(i.attr("tabindex",0),i.attr("role","button"));var a=-1!==o.indexOf("prev")?r.toFormat("LLLL yyyy"):n.toFormat("LLLL yyyy");i.attr("aria-label",i.attr("title")+": "+a),i.keypress((function(n){13===n.keyCode&&(this.click(),setTimeout((function(){var n=e.find(o);if("click"===n.attr("data-event"))n.focus();else{var r=t[0]===o?1:0;e.find(t[r]).focus()}}),0))}))}))}},{key:"_makeDayNavigationAccessible",value:function(){var e=this;pjQuery("#"+this._datePickerContainerId).find(".ui-state-default").each((function(){var t=pjQuery(this),n=t.parent(),r=n.attr("data-month"),o=n.attr("data-year");if(r&&o){r=parseInt(r,10)+1;var i=parseInt(t.text()),a=Dv.ou.fromFormat(o+"-"+r+"-"+i,"yyyy-M-d"),u=a.toFormat("yyyy-MM-dd"),l=e._dates.hasOwnProperty(u),s=l?e._timeslotsAvailableText.replace("{$amount}",e._dates[u].length):e._noTimeslotsAvailableText;t.attr("aria-label",a.toFormat("DDDD")+". "+s),t.attr("aria-disabled",l?"false":"true"),n.addClass(e._getDayAvailabilityCssClass(u))}}))}},{key:"_setCurrentSelectedDateInTitle",value:function(e){var t=pjQuery("#"+this._fieldId+"_schedulingTitle");t.attr("aria-label",t.text()+": "+this._currentSelectedDateText+" "+Dv.ou.fromJSDate(e).toFormat("DDDD"))}},{key:"_makeResultItemRowAccessibleIfNeeded",value:function(e,t){this._isAccessibilityEnabled&&(e.attr("tabindex",0),e.attr("role","option"),e.attr("aria-selected","false"),e.attr("aria-label",this._formatAriaLabelDescriptionForSlotData(t)),e.keypress((function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.click())})))}},{key:"_formatAriaLabelDescriptionForSlotData",value:function(e){var t=this._slotDescriptionText.replace("{$title}",e.title);return t=e.location?(t=(t=t.replace("{$location}",e.location)).replace("[#location]","")).replace("[#endLocation]",""):t.replace(/\[#location\].*\[#endLocation\]/,""),e.hasTime?(t=(t=(t=(t=(t=t.replace(/\[#allDay\].*\[#endAllDay\]/,"")).replace("{$startTime}",e.initTime)).replace("{$endTime}",e.endTime)).replace("[#time]","")).replace("[#endTime]",""),t=e.timeZone?(t=(t=(t=(t=t.replace("{$startTimeCustomTimeZone}",e.initTimeWithZone)).replace("{$endTimeCustomTimeZone}",e.endTimeWithZone)).replace("{$customTimeZone}",e.timeZone+" "+e.timeZoneGMTMode)).replace("[#customTimeZone]","")).replace("[#endCustomTimeZone]",""):t.replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")):t=(t=(t=(t=t.replace(/\[#time\].*\[#endTime\]/,"")).replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")).replace("[#allDay]","")).replace("[#endAllDay]",""),t}},{key:"_getTimeFormat",value:function(){return this._useMilitaryTimeFormat?"HH:mm":"h:mm a"}},{key:"_buildStartTimestamp",value:function(e,t,n){var r=new Date(e,t-1,n);return Math.floor(r.getTime()/1e3)}},{key:"_buildEndTimestamp",value:function(e,t,n){var r=new Date(e,t,n,23,59,59);return Math.floor(r.getTime()/1e3)}},{key:"_buildCalendarApiRequestPayload",value:function(e,t){var n=new Date,r=this._buildCompanyFilter();return{contentType:"application/json",data:'{ "id": '+this._fieldId+', "jobId": '+this._relatedJobId+', "from": '+e+', "to": '+t+', "timezoneOffset": '+n.getTimezoneOffset()+r+"}",dataType:"json",type:"POST",url:this._eventsApiUrl}}},{key:"_buildCompanyFilter",value:function(){var e="";return""!==this._companySelectorId&&(e=', "companyFilter": '+pjQuery("#"+this._companySelectorId).val()),e}}],n&&xv(t.prototype,n),r&&xv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);function zv(){var e=this.getSetting("minimumDateToDisplay"),t=this.getSetting("maximumDateToDisplay"),n=Dv.ou.fromSeconds(e.timestamp,{zone:e.timezone});this._minDateStr=n.toISODate(),this._maxDateStr=t?Dv.ou.fromSeconds(t.timestamp,{zone:t.timezone}).toISODate():null;var r=this.getSetting("initialMonth");this._initialMonth=n&&r<n.month?n.month:r,this._initialYear=this.getSetting("initialYear")}!function(e,t,n){(t=Wv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yv,"TYPE","SchedulingField");const Qv=Yv;function qv(e){return qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(e)}function Gv(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Jv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tb(r.key),r)}}function Kv(e,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kv(e,t)}function $v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xv(e);if(t){var o=Xv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xv(e)}function eb(e,t,n){return(t=tb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tb(e){var t=function(e,t){if("object"!==qv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qv(t)?t:String(t)}var nb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}(i,e);var t,n,r,o=$v(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._collapseButtonLabel=n.getSetting("collapseButtonLabel"),n._expandButtonLabel=n.getSetting("expandButtonLabel"),n._collapseExpandButtonLocation=n.getSetting("collapseExpandButtonLocation");var r=document.getElementById(e);return null!==r&&(n._section=r.closest(".Section"),n._addCollapseExpandButtonIfNeeded(),n.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,n.caller("_addEventListenerToCollapsibleFields")),n.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,n.caller("_openSectionIfFieldHasErrors"))),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new A}},{key:"getValueForCondition",value:function(){return null}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_addCollapseExpandButtonIfNeeded",value:function(){this._isSectionCollapsible()&&(this._button=this._getButton(),null!==this._button&&this._attachCollapseExpandEvent(this._button))}},{key:"_getButton",value:function(){return this._section.querySelector(".Section__toggle")}},{key:"_attachCollapseExpandEvent",value:function(e){var t=this;e.onclick=function(){var n;t._expandOrCollapseSection(),t._showOrHideFields(),t._updateButtonText(e),t._isButtonLocationBottom()&&(null===(n=t._getFirstFocusableElement())||void 0===n||n.focus())}}},{key:"_showOrHideFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=J.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.setVisibilityStatusByType(Le.SECTION_COLLAPSIBLE,e._isSectionExpanded())}))}},{key:"_isButtonLocationBottom",value:function(){return this._collapseExpandButtonLocation===i.COLLAPSE_BUTTON_LOCATION_BOTTOM}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}},{key:"_updateButtonText",value:function(e){var t=e.querySelector(".toggle__text");null!==t&&(t.textContent=this._getButtonText())}},{key:"_getCollapsibleFields",value:function(){return this._section.getElementsByClassName("fieldSpec--collapsible")}},{key:"_getFirstFocusableElement",value:function(){var e,t=Gv(this._getCollapsibleFields());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this._getAllFocusableElements(n);if(r.length>0)return r[0]}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"_getAllFocusableElements",value:function(e){return e?e.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)'):[]}},{key:"_expandOrCollapseSection",value:function(){this._toggleClass("Section--collapsible--open"),this._toggleAriaExpandedAttribute()}},{key:"_addEventListenerToCollapsibleFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=J.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.addListener(ht.EVENT_ON_VALIDATION_FAIL,e.caller("_openSection"))}))}},{key:"_openSectionIfFieldHasErrors",value:function(){this._sectionHasFieldWithError()&&this._openSection()}},{key:"_openSection",value:function(){this._isSectionExpanded()||this._button.click()}},{key:"_sectionHasFieldWithError",value:function(){return this._section.hasAttribute("data-hasFieldWithError")&&"1"===this._section.getAttribute("data-hasFieldWithError")}},{key:"_isSectionExpanded",value:function(){return this._section.classList.contains("Section--collapsible--open")}},{key:"_isSectionCollapsible",value:function(){return this._section.classList.contains("Section--collapsible")}},{key:"_getButtonText",value:function(){return this._isSectionExpanded()?this._collapseButtonLabel:this._expandButtonLabel}},{key:"_toggleClass",value:function(e){this._section.classList.contains(e)?this._section.classList.remove(e):this._section.classList.add(e)}},{key:"_toggleAriaExpandedAttribute",value:function(){var e=this._section.querySelector(".toggle");null!==e&&("true"===e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true"))}}])&&Zv(t.prototype,n),r&&Zv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);eb(nb,"TYPE","SeparatorField"),eb(nb,"COLLAPSE_BUTTON_LOCATION_TOP","top"),eb(nb,"COLLAPSE_BUTTON_LOCATION_BOTTOM","bottom");const rb=nb;function ob(e){return ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(e)}function ib(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sb(r.key),r)}}function ab(e,t){return ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ab(e,t)}function ub(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lb(e);if(t){var o=lb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ob(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lb(e)}function sb(e){var t=function(e,t){if("object"!==ob(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ob(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ob(t)?t:String(t)}var cb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ab(e,t)}(i,e);var t,n,r,o=ub(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._setHours(e),r._setMinutes(t),r._setSeconds(n),r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)}},{key:"getHours",value:function(){return this._hours}},{key:"getMinutes",value:function(){return this._minutes}},{key:"getSeconds",value:function(){return this._seconds}},{key:"_setHours",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e}},{key:"_setMinutes",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e}},{key:"_setSeconds",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e}}],n&&ib(t.prototype,n),r&&ib(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=sb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cb,"TYPE","FieldTimeValue");const fb=cb;function pb(e){return pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(e)}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bb(r.key),r)}}function yb(e,t){return yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yb(e,t)}function hb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vb(e);if(t){var o=vb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vb(e){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vb(e)}function bb(e){var t=function(e,t){if("object"!==pb(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pb(t)?t:String(t)}var mb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yb(e,t)}(i,e);var t,n,r,o=hb(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new A:new fb(PortalString.toInt(e),0,0)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}],n&&db(t.prototype,n),r&&db(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ku);!function(e,t,n){(t=bb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mb,"TYPE","SimpleTimeField");const gb=mb;function _b(e){return _b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(e)}function wb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pb(r.key),r)}}function Sb(e,t){return Sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sb(e,t)}function Ob(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eb(e);if(t){var o=Eb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eb(e){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eb(e)}function Pb(e){var t=function(e,t){if("object"!==_b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_b(t)?t:String(t)}var kb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sb(e,t)}(i,e);var t,n,r,o=Ob(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._baseFieldId=i._extractBaseIdFromCompoundFieldId(e),B.registerFieldDependency(n._baseFieldId,n._baseFieldId+i._getCategoryFieldSuffix(),B.TYPE_VALUES),n}return t=i,r=[{key:"_extractBaseIdFromCompoundFieldId",value:function(e){return e.replace("_sourceAndCategory","")}},{key:"_getCategoryFieldSuffix",value:function(){return"_category"}}],(n=[{key:"getValue",value:function(){return new A}},{key:"getValueForCondition",value:function(){return null}},{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._baseFieldId,""),this._createFieldMetadata(this._baseFieldId,i._getCategoryFieldSuffix())]}},{key:"_attachOnChangeListener",value:function(){}}])&&wb(t.prototype,n),r&&wb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=Pb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kb,"TYPE","SourceAndCategoryField");const Tb=kb;function jb(e){return jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(e)}function Ib(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fb(r.key),r)}}function Fb(e){var t=function(e,t){if("object"!==jb(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===jb(t)?t:String(t)}var Rb=function(){function e(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldId=t,this.dropdownCssClass=n,this.placeholderText=r,this.minimumInputLength=o,this.isMultiple=i,this.ajaxDelayMs=a,this.visibleOptionsLimit=u,this.optionsSearchApiUrl=l,this.dictionary=s,this.label=c,this.isRequired=f,this.isAccessible=p,this.requestedDataFieldId=d,this.jobId=y,this.contactOrJobIdEdit=h,this.wizardId=v,this.wizardFormId=b,this.schemaFieldId=m,this.optionFormatJson=g,this.alphabeticalOrder=_||!1}var t,n,r;return t=e,(n=[{key:"attachToFieldAndRefreshOptions",value:function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")}},{key:"_buildAjaxRequestData",value:function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)}},{key:"_processAjaxResponseData",value:function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}}}])&&Ib(t.prototype,n),r&&Ib(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Cb=Rb;function Db(e){return Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(e)}function Ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xb(r.key),r)}}function xb(e){var t=function(e,t){if("object"!==Db(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Db(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Db(t)?t:String(t)}var Nb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerJobTemplateAutocompletableWidgetLazyPicker",value:function(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){e._lazyPickers[t]=new Cb(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_)}},{key:"refreshLazyPickerOptions",value:function(t){e.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(t,t)}},{key:"refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource",value:function(t,n){var r=e._getLazyPicker(t);null!==r&&r.attachToFieldAndRefreshOptions(n)}},{key:"_getLazyPicker",value:function(t){return e._isLazyPickerRegistered(t)?e._lazyPickers[t]:null}},{key:"_isLazyPickerRegistered",value:function(t){return t in e._lazyPickers}}],(n=null)&&Ab(t.prototype,n),r&&Ab(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Nb._lazyPickers={};const Lb=Nb;function Mb(e){return Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(e)}function Bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hb(r.key),r)}}function Vb(e,t){Wb(e,t),t.add(e)}function Ub(e,t,n){Wb(e,t),t.set(e,n)}function Wb(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hb(e){var t=function(e,t){if("object"!==Mb(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mb(t)?t:String(t)}function Yb(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function zb(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Gb(e,t,"get"))}function Qb(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}function qb(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Gb(e,t,"set"),n),n}function Gb(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Jb=new WeakMap,Zb=new WeakMap,Kb=new WeakMap,$b=new WeakSet,Xb=new WeakSet,em=new WeakSet,tm=new WeakSet,nm=new WeakSet,rm=new WeakSet,om=new WeakSet,im=new WeakSet,am=new WeakSet,um=new WeakSet,lm=new WeakSet,sm=new WeakSet,cm=new WeakSet,fm=new WeakSet,pm=new WeakSet,dm=new WeakSet,ym=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vb(this,dm),Vb(this,pm),Vb(this,fm),Vb(this,cm),Vb(this,sm),Vb(this,lm),Vb(this,um),Vb(this,am),Vb(this,im),Vb(this,om),Vb(this,rm),Vb(this,nm),Vb(this,tm),Vb(this,em),Vb(this,Xb),Vb(this,$b),Ub(this,Jb,{writable:!0,value:void 0}),Ub(this,Zb,{writable:!0,value:void 0}),Ub(this,Kb,{writable:!0,value:void 0}),qb(this,Jb,t),qb(this,Zb,JSON.parse(n)),qb(this,Kb,JSON.parse(r))}var t,n,r;return t=e,r=[{key:"prepareFileFieldToReuseUploadedFiles",value:function(t,n,r){new e(t,n,r).addOldFilesSelectorToFileInput(),Qb(e,e,hm).call(e,t,n,r)}}],(n=[{key:"addOldFilesSelectorToFileInput",value:function(){var e=document.getElementById("fileInput_"+zb(this,Jb));if(e){var t=Yb(this,lm,Tm).call(this),n=Yb(this,sm,jm).call(this);t.appendChild(n),e.prepend(t),Yb(this,$b,bm).call(this)}}}])&&Bb(t.prototype,n),r&&Bb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hm(e,t,n){var r=Qb(ym,ym,vm).call(ym,e);r&&(ym.tableFieldsDataReference[r]={dictionaryJSON:t,uploadedFilesJSON:n})}function vm(e){var t=e.split("-sample");return 2===t.length?t[0]:null}function bm(){var e=this,t=document.getElementById("fileInput_"+zb(this,Jb)+"_oldFilesSelector");t&&t.addEventListener("change",(function(){Yb(e,im,Em).call(e)?Yb(e,Xb,mm).call(e):(Yb(e,am,Pm).call(e),Yb(e,em,gm).call(e,Yb(e,om,Om).call(e)))}))}function mm(){Yb(this,um,km).call(this),Yb(this,nm,wm).call(this),Yb(this,rm,Sm).call(this,"")}function gm(e){Yb(this,rm,Sm).call(this,zb(this,Kb)[e-1]["data-hiddenValue"]),Yb(this,tm,_m).call(this)}function _m(){var e=document.getElementById("fileInput_"+zb(this,Jb));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","file_"+zb(this,Jb)+"_reuse"),t.setAttribute("value","1"),e.append(t)}}function wm(){var e=document.querySelector("input[name=file_"+zb(this,Jb)+"_reuse]");e&&e.remove()}function Sm(e){var t=document.querySelector("input[name=file_"+zb(this,Jb)+"_fileNumber]");t&&(t.value=e)}function Om(){var e=document.getElementById("fileInput_"+zb(this,Jb)+"_oldFilesSelector");return e?e.value:""}function Em(){return"0"===Yb(this,om,Om).call(this)}function Pm(){var e=document.getElementById(zb(this,Jb));e&&(e.hidden=!0)}function km(){var e=document.getElementById(zb(this,Jb));e&&(e.hidden=!1)}function Tm(){var e=document.createElement("div");return e.setAttribute("id","fileInput_"+zb(this,Jb)+"_oldFilesSelectorContainer"),e.dataset.oldFilesSelectorSampleReference=zb(this,Jb),e}function jm(){var e=document.createElement("select");return e.setAttribute("id","fileInput_"+zb(this,Jb)+"_oldFilesSelector"),e.setAttribute("aria-labelledby",zb(this,Jb)+"-label"),e.appendChild(Yb(this,cm,Im).call(this)),e.appendChild(Yb(this,fm,Fm).call(this)),e}function Im(){var e=document.createElement("option");return e.setAttribute("value","0"),e.innerText=zb(this,Zb).uploadNewFile,e}function Fm(){var e=document.createElement("optgroup");return e.setAttribute("label",zb(this,Zb).previouslySavedFiles),Yb(this,pm,Rm).call(this,e),e}function Rm(e){for(var t=0;t<zb(this,Kb).length;++t){var n=zb(this,Kb)[t],r=document.createElement("option");r.setAttribute("value",(t+1).toString()),r.innerText=n.name+Yb(this,dm,Cm).call(this,n.timestamp),e.appendChild(r)}}function Cm(e){return e?" - "+Dv.ou.fromMillis(1e3*e).toFormat("dd LLL yyyy"):""}!function(e,t,n){(t=Hb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ym,"tableFieldsDataReference",{});const Dm=ym;function Am(e){return Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(e)}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nm(r.key),r)}}function Nm(e){var t=function(e,t){if("object"!==Am(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Am(t)?t:String(t)}var Lm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._patternSampleContainerName=/^(multipleDatasetEntry_.*)_sample$/,this._sampleContainerId="multipleDatasetEntry_"+this._fieldId+"_sample",this._rowsContainerId="multipleDatasetRowsContainer_"+this._fieldId,this._rowContainerWithoutRowIndexId="multipleDatasetEntry_"+this._fieldId+"_",this._offsetValueId="multipleDatasetEntry_"+this._fieldId+"_rowOffset",this._classSpecInDataSet=".datasetfieldSpec",this._classRemove=".removeDatasetRow",this._fieldsContainers="datasetfieldSpec"}var t,n,r;return t=e,n=[{key:"unWrapJQuery",value:function(e){return e[0]}},{key:"wrapJQuery",value:function(e){return pjQuery(e)}},{key:"getPatternNameSampleContainer",value:function(){return this._patternSampleContainerName}},{key:"getSampleContainer",value:function(){return this.wrapJQuery(document.getElementById(this._sampleContainerId))}},{key:"getRowsContainer",value:function(){return this.wrapJQuery(document.getElementById(this._rowsContainerId))}},{key:"getJQueryRowContainer",value:function(e){return this.wrapJQuery(this.getRowContainer(e))}},{key:"getRowContainer",value:function(e){return document.getElementById(this._rowContainerWithoutRowIndexId+e)}},{key:"setOffsetValue",value:function(e){this.wrapJQuery(document.getElementById(this._offsetValueId)).val(e)}},{key:"getFieldsInsideTableRow",value:function(e){var t=this,n=[];return this.getRowContainer(e).getElementsByClassName(this._fieldsContainers).forEach((function(e){n.push(J.getField(t._getFieldIdFromFieldContainerId(e.id)))})),n}},{key:"getClassSpecInDataset",value:function(){return this._classSpecInDataSet}},{key:"getClassRemove",value:function(){return this._classRemove}},{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).classList.remove("TableSampleRow")}},{key:"isAddAnotherButton",value:function(e){return this.unWrapJQuery(e).classList.contains("addDatasetRow")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._rowsContainerId)).append(e)}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}}],n&&xm(t.prototype,n),r&&xm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Mm=Lm;function Bm(e){return Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(e)}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Um(r.key),r)}}function Um(e){var t=function(e,t){if("object"!==Bm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bm(t)?t:String(t)}function Wm(e,t){return Wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wm(e,t)}function Hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ym(e);if(t){var o=Ym(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ym(e)}var zm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wm(e,t)}(i,e);var t,n,r,o=Hm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._patternSampleContainerName=/^(datasetField__row--.*)-sample$/,t._sampleContainerId="datasetField__row--"+t._fieldId+"-sample",t._rowsContainerId=t._fieldId,t._rowContainerWithoutRowIndexId="datasetField__row--"+t._fieldId+"_",t._classSpecInDataSet=".fieldSpec--in-dataset",t._classRemove=".action--remove",t._fieldsContainers="fieldSpec",t}return t=i,(n=[{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).removeAttribute("hidden"),this.unWrapJQuery(e).classList.remove("datasetField__row--sample")}},{key:"isAddAnotherButton",value:function(e){return void 0!==e&&this.unWrapJQuery(e).classList.contains("datasetField__button--add")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._fieldId).querySelector(".datasetcontent > .datasetField__button--add")).before(e)}}])&&Vm(t.prototype,n),r&&Vm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Mm);const Qm=zm;function qm(e){return qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(e)}function Gm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$m(r.key),r)}}function Jm(e,t){return Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jm(e,t)}function Zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Km(e);if(t){var o=Km(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Km(e)}function $m(e){var t=function(e,t){if("object"!==qm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qm(t)?t:String(t)}var Xm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jm(e,t)}(i,e);var t,n,r,o=Zm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._lastRowIndex=n.getSetting("lastRowIndex"),n._isAccessibilityEnabled=n.getSetting("isAccessibilityEnabled"),n.getSetting("hasLegacyFormat")?n._structure=new Mm(e):n._structure=new Qm(e),n}return t=i,n=[{key:"_postRegister",value:function(){this._fixSampleRowRequiredAttributesForAccessibility(),this._attachOnClickListenersToAddNewRowLink(),this._attachOnClickListenersToRowsRemovalLinksInElement(this._getFieldElement()),this._attachOnChangeListener(),this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,this.caller("_executeOnFieldValueChange"))}},{key:"_executeOnFieldValueChange",value:function(){if(this.hasValue()){var e=this._fieldId;pjQuery((function(){J.onFieldValueChange(e)}))}}},{key:"_attachOnChangeListener",value:function(){}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new A}},{key:"hasValue",value:function(){for(var e=!1,t=this._getFirstRowIndex();t<=this._lastRowIndex;t++)this._structure.getFieldsInsideTableRow(t).forEach((function(t){t&&t.hasValue()&&(e=!0)}));return e}},{key:"_getFirstRowIndex",value:function(){return this._structure.getRowsContainer().find(this._structure.getClassRemove()+'[data-row-index!="sample"]').attr("data-row-index")}},{key:"getValueForCondition",value:function(){return null}},{key:"focus",value:function(){pjQuery("#"+this._fieldId+"-1-"+this._getFirstRowIndex()).focus()}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_removeRow",value:function(e){var t=pjQuery(e).data("row-index"),n=this._getElementToFocusAfterRemove(t);this._structure.getJQueryRowContainer(t).remove(),n.focus(),this._hasNoRows()&&this._setRowsCounterElementValue("allRemoved")}},{key:"_getElementToFocusAfterRemove",value:function(e){var t=this._structure.getJQueryRowContainer(e);return 1!==t.next().length||this._structure.isAddAnotherButton(t.next())?t.prev().attr("id").includes("sample")?this._getAddNewRowLinkElement():t.prev().find(":input:visible:first"):t.next().find(":input:visible:first")}},{key:"_addNewRow",value:function(){var e=this._lastRowIndex+1,t=this._buildClonedRowElement();this._attachOnClickListenersToRowsRemovalLinksInElement(t),this._structure.cleanAttributesOfSample(t),this._fixFileFields(t,e),this._fixLabels(t,e),this._fixArrayedInputs(t,e),this._fixSingleElement("input",t,e),this._fixSingleElement("select",t,e),this._fixSingleElement("textarea",t,e),this._fixSingleElement("span",t,e),this._fixSingleElement("option",t,e),this._fixContainerId(t,e),this._fixRemoveLink(t,e),this._fixDateFallbacks(t,e),this._fixTime(t,e),this._addClonedRowToRowsContainer(t),this._fixParagraphWithFormat(t,e),this._fixAutocomplete(t),this._setRowsCounterElementValue(e),this._fixReuseUploadedFilesWidget(t,e),this._registerJsFields(t,e),this._focusFirstInputInNewRow(t),this._lastRowIndex=e}},{key:"_focusFirstInputInNewRow",value:function(e){e.find(":input:visible:first").focus()}},{key:"_fixSampleRowRequiredAttributesForAccessibility",value:function(){if(this._isAccessibilityEnabled)for(var e=document.querySelectorAll("[data-samplerow]"),t=e.length-1;t>=0;t--){var n=e[t].querySelectorAll("[data-required]")[0];n&&(n.removeAttribute("aria-required"),n.removeAttribute("required"))}}},{key:"_getAddNewRowLinkElement",value:function(){return pjQuery("#addRowFor_"+this._fieldId)}},{key:"_setRowsCounterElementValue",value:function(e){this._structure.setOffsetValue(e)}},{key:"_hasNoRows",value:function(){return 1===pjQuery('[name="removeRowFor_'+this._fieldId+'"]').length}},{key:"_buildClonedRowElement",value:function(){var e=this._structure.getSampleContainer().clone();if(!e)throw new Error("Error when adding new row for table: "+this._fieldId);return e}},{key:"_attachOnClickListenersToRowsRemovalLinksInElement",value:function(e){var t=this;pjQuery(e).find('[name="removeRowFor_'+this._fieldId+'"]').each((function(){var e=pjQuery(this);e.click((function(){return t._removeRow(e),!1}))}))}},{key:"_attachOnClickListenersToAddNewRowLink",value:function(){var e=this;this._getAddNewRowLinkElement().click((function(){return e._addNewRow(),!1}))}},{key:"_fixLabels",value:function(e,t){pjQuery(e).find("label").each((function(){var n=/^((\d+-)+)sample(\[.*\]|_.*)*$/,r=pjQuery(this).attr("for");if(r&&n.test(r)){var o=r.replace(n,"$1"+t+"$3");pjQuery(this).attr("for",o)}n=/^((\d+-)+)sample(\[.*\]|_.*|-label)*$/;var i=pjQuery(this).attr("id");if(i&&n.test(i)){var a=i.replace(n,"$1"+t+"$3");pjQuery(this).attr("id",a),pjQuery(e).find("[aria-labelledby="+i+"]").each((function(){pjQuery(this).attr("aria-labelledby",a)}))}}))}},{key:"_fixArrayedInputs",value:function(e,t){var n=this,r=[];pjQuery(e).find("input").each((function(){var e=/^((\d+-)+)sample_(\d+)$/,o=pjQuery(this).attr("id");if(o&&e.test(o)){var i=o.replace(e,"$1");i=i.substring(0,i.length-1);var a=o.replace(e,"$3");r[i]?r[i].push(a):r[i]=[a];var u=o.replace(e,"$1"+t+"_$3");pjQuery(this).attr("id",u);var l=/^((\d+-)+)sample(\[\])?$/,s=pjQuery(this).attr("name");if(s&&l.test(s)){var c=s.replace(l,"$1"+t+"$3");pjQuery(this).attr("name",c)}n._fixRequiredAttributes(this)}}))}},{key:"_fixRequiredAttributes",value:function(e){var t=pjQuery(e).attr("data-required");t&&(pjQuery(e).attr("required",t),pjQuery(e).attr("aria-required",t))}},{key:"_fixSingleElement",value:function(e,t,n){var r=this;pjQuery(t).find(e).each((function(){var e=/^((\d+-)+)sample(\[.*\]|_.*)*$/,t=pjQuery(this).attr("id");if(t&&e.test(t)){var o=t.replace(e,"$1"+n+"$3");pjQuery(this).attr("id",o);var i=pjQuery(this).attr("name");if(i){var a=/^((\d+-)+)sample(\[.*\]|_.*)*$/;a.test(i)&&(i=i.replace(a,"$1"+n+"$3")),pjQuery(this).attr("name",i)}r._fixRequiredAttributes(this)}var u=pjQuery(this).data("parentid");if(u){var l=/^((\d+-)+)sample(\[.*\]|_.*)*$/;l.test(u)&&(u=u.replace(l,"$1"+n+"$3")),pjQuery(this).attr("data-parentId",u)}}))}},{key:"_fixFileFields",value:function(e,t){pjQuery(e).has('.FileSchemaField :input[type="file"]')&&pjQuery(e).find('input[type="hidden"], input[type="file"], div').each((function(){this.name&&(this.name=this.name.replace(/sample/i,t)),this.id=this.id.replace(/sample/i,t)}))}},{key:"_getFileIdFromFileSchemaFieldElement",value:function(e){var t=pjQuery(e).find('.FileSchemaField :input[type="file"]').prop("id");return void 0!==t&&0!==t.length||(t=pjQuery(e).find('.FileSchemaField :input[type="hidden"][name^="file_"]:not([id=""])').prop("id")),t}},{key:"_fixParagraphWithFormat",value:function(e,t){var n=e.find(".mce-tinymce.mce-container");0!=n.length&&(n.remove(),e.find("textarea").show())}},{key:"_fixContainerId",value:function(e,t){pjQuery(e).attr("id",pjQuery(e).attr("id").replace(this._structure.getPatternNameSampleContainer(),"$1_"+t)),pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){pjQuery(this).attr("id",pjQuery(this).attr("id").replace(/(fieldSpecContainer.*-)sample/,"$1"+t))}))}},{key:"_fixRemoveLink",value:function(e,t){pjQuery(this._structure.getClassRemove(),e).attr("data-row-index",t)}},{key:"_addClonedRowToRowsContainer",value:function(e){this._structure.addClonedRowToRowsContainer(e)}},{key:"_fixDateFallbacks",value:function(e,t){pjQuery(e).find("div.DateFormField").each((function(){var e=pjQuery(this).find("script");if(pjQuery(e).html()){var n=pjQuery(e).html().replace(/(.*)sample(.*)/,"$1"+t+"$2");pjQuery(this).find("script").remove(),pjQuery(this).find("select").remove();var r=document.createElement("script");pjQuery(r).attr("type","text/javascript"),r.text=n,this.appendChild(r)}var o=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),i=o.split("-"),a=i.splice(0,i.length-1).join("-")+"-sample",u=pjQuery(document).find("input#"+a+'[type="hidden"]');u.length&&pjQuery(this).find("input#"+o+'[type="hidden"]').val(u[0].value);var l=pjQuery(document).find("input#"+a);l.length&&pjQuery(this).find("input#"+o).val(l[0].value)}))}},{key:"_fixAutocomplete",value:function(e){pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),t=e.split("-"),n=t.splice(0,t.length-1).join("-")+"-0";void 0!==Lb&&(n!==e&&Lb.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(n,e),pjQuery("#"+e).change((function(){J.onFieldValueChange(e)})))}))}},{key:"_registerJsFields",value:function(e,t){var n=e.find("[data-formula]").attr("id");if(n){var r=n.split("-"),o=r.splice(0,r.length-1).join("-");J.cloneForNewTableRow(o,t)}pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),n=e.split("-"),r=n.splice(0,n.length-1).join("-");J.cloneForNewTableRow(r,t);var o=e+"_sourceAndCategory";PortalHtml.elementExists(o)&&J.cloneForNewTableRow(r,t,"_sourceAndCategory");var i=e+"_category";PortalHtml.elementExists(i)&&J.cloneForNewTableRow(r,t,"_category")}))}},{key:"_fixReuseUploadedFilesWidget",value:function(e,t){e.find("[data-old-files-selector-sample-reference]").each((function(){var e=pjQuery(this).attr("data-old-files-selector-sample-reference").split("-"),n=e.splice(0,e.length-1).join("-");pjQuery(this).remove(),new Dm(n+"-"+t,Dm.tableFieldsDataReference[n].dictionaryJSON,Dm.tableFieldsDataReference[n].uploadedFilesJSON).addOldFilesSelectorToFileInput()}))}},{key:"_fixTime",value:function(e,t){e.find(".TimeFieldsWrapper").each((function(){var e=pjQuery(this).html();e=e.replace(/sample/g,t),pjQuery(this).html(pjQuery.parseHTML(e))}))}}],n&&Gm(t.prototype,n),r&&Gm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=$m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Xm,"TYPE","TableField");const eg=Xm;function tg(e){return tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(e)}function ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ag(r.key),r)}}function rg(e,t){return rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rg(e,t)}function og(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ig(e);if(t){var o=ig(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ig(e){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ig(e)}function ag(e){var t=function(e,t){if("object"!==tg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tg(t)?t:String(t)}var ug=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rg(e,t)}(i,e);var t,n,r,o=og(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._shouldUseMilitaryTimeFormat=n.getSetting("shouldUseMilitaryTimeFormat"),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[fb.TYPE]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this._shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),J.setFieldValue(this._getHoursId(),new Gt(t.toString())),J.setFieldValue(this._getMinutesId(),new Gt(e.getMinutes().toString())),n&&J.setFieldValue(this._getAMPMId(),new Ot(n))}},{key:"getValue",value:function(){return J.hasValue(this._getHoursId())&&J.hasValue(this._getMinutesId())?new fb(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new A}},{key:"getValueForCondition",value:function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]}},{key:"_getHoursFieldValue",value:function(){var e=J.getFieldValueByType(this._getHoursId(),FieldOptionValue.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this._shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))}},{key:"_adaptHoursToAMPMFormat",value:function(e){var t=J.getFieldValueByType(this._getAMPMId(),FieldOptionValue.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e}},{key:"_getMinutesFieldValue",value:function(){var e=J.getFieldValueByType(this._getMinutesId(),FieldOptionValue.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this._shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e}},{key:"_getHoursId",value:function(){return this.getFieldId()+this._getHoursSuffix()}},{key:"_getMinutesId",value:function(){return this.getFieldId()+this._getMinutesSuffix()}},{key:"_getAMPMId",value:function(){return this.getFieldId()+this._getAMPMSuffix()}},{key:"_getHoursSuffix",value:function(){return"_hours"}},{key:"_getMinutesSuffix",value:function(){return"_minutes"}},{key:"_getAMPMSuffix",value:function(){return"_ampm"}}],n&&ng(t.prototype,n),r&&ng(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=ag(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ug,"TYPE","TimeField");const lg=ug;function sg(e){return sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(e)}function cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hg(r.key),r)}}function fg(){return fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fg.apply(this,arguments)}function pg(e,t){return pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pg(e,t)}function dg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yg(e);if(t){var o=yg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yg(e){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yg(e)}function hg(e){var t=function(e,t){if("object"!==sg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sg(t)?t:String(t)}var vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pg(e,t)}(i,e);var t,n,r,o=dg(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._customEmail=n.getSetting("customEmail")||"",n._customEmailLabel=n.getSetting("customEmailLabel"),n._isCustomInputEnabled=n.getSetting("isCustomInputEnabled"),n}return t=i,n=[{key:"getValueForCondition",value:function(){var e=this._getCustomInput();if(e)return e.value;var t=this._getSelectedOptionId();return t?document.getElementById(this.getFieldId()+"_"+t).text:null}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){Ku.prototype._postRegister.call(this),(this._customEmail||"custom"===this._getSelectedOptionId())&&this.setValue(new Gt("custom"))}},{key:"_activate",value:function(e){fg(yg(i.prototype),"_activate",this).call(this,e),this._customEmail&&"custom"!==this._getSelectedOptionId()&&(document.getElementById(this.getFieldId()).value="custom")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this.getFieldId()).on("change",(function(){e._handleCustomInput(),J.onFieldValueChange(e.getFieldId())}))}},{key:"_handleCustomInput",value:function(){var e=this.getValue();if(e.isEmpty()||"custom"!==e.getOptionId()){var t=this._getCustomInput();t&&t.remove()}else{document.getElementById(this.getFieldId()).parentNode.append(this._buildCustomInput()),this._getCustomInput().focus();var n=this;pjQuery("#"+this.getFieldId()+"_customEmail").on("input",(function(){this.onkeyup=null,J.onFieldValueChange(n.getFieldId())}))}}},{key:"_buildCustomInput",value:function(){var e=document.createElement("input");return e.setAttribute("id",this.getFieldId()+"_customEmail"),e.setAttribute("name",this.getFieldId()+"_customEmail"),e.setAttribute("type","email"),e.setAttribute("class","EmailField NotificationEmailField"),e.setAttribute("value",this._customEmail),e.setAttribute("tabindex",0),e.setAttribute("autocomplete","email"),e.setAttribute("aria-label",this._customEmailLabel),this._isCustomInputEnabled||e.setAttribute("disabled",""),e}},{key:"_getCustomInput",value:function(){return document.getElementById(this.getFieldId()+"_customEmail")}},{key:"_getSelectedOptionId",value:function(){return this._getFieldElement().val()}}],n&&cg(t.prototype,n),r&&cg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ku);!function(e,t,n){(t=hg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vg,"TYPE","UserNotificationsEmailField");const bg=vg;function mg(e){return mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(e)}function gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eg(r.key),r)}}function _g(){return _g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Og(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_g.apply(this,arguments)}function wg(e,t){return wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wg(e,t)}function Sg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Og(e);if(t){var o=Og(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Og(e){return Og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Og(e)}function Eg(e){var t=function(e,t){if("object"!==mg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mg(t)?t:String(t)}var Pg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wg(e,t)}(i,e);var t,n,r,o=Sg(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._shouldUseBrowserTimeZone=r.getSetting("shouldUseBrowserTimeZone"),r._useMocks=r.getSetting("useMocks"),r._timeZoneHelper=new Go,r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_postRegister",value:function(){_g(Og(i.prototype),"_postRegister",this).call(this),this._shouldUseBrowserTimeZone&&this.setValue(new Gt(this._getBrowserTimeZone())),J.getField(this.getFieldId()).addListener("selectingAutocompleteValueEvent",this.caller("_onSelectedOption"))}},{key:"_onSelectedOption",value:function(e){var t=e.params.args.data.id,n=document.getElementById(this._fieldId),r=n.querySelector('option[value="'+t+'"]');r&&n.removeChild(r)}},{key:"_getBrowserTimeZone",value:function(){return this._useMocks?"Europe/London":this._timeZoneHelper.getBrowserTimeZone()}}])&&gg(t.prototype,n),r&&gg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nn);!function(e,t,n){(t=Eg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pg,"TYPE","UserTimeZoneField");const kg=Pg;function Tg(e){return Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(e)}function jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ig(r.key),r)}}function Ig(e){var t=function(e,t){if("object"!==Tg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tg(t)?t:String(t)}var Fg=null,Rg=!1,Cg=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!Rg)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildField",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the field."),null;switch(t){case Vt.TYPE:return new Vt(e,n);case dr.TYPE:return new dr(e,n);case Nn.TYPE:return new Nn(e,n);case mP.TYPE:return new mP(e,n);case Jr.TYPE:return new Jr(e,n);case io.TYPE:return new io(e,n);case Au.TYPE:return new Au(e,n);case So.TYPE:return new So(e,n);case Ei.TYPE:return new Ei(e,n);case Hu.TYPE:return new Hu(e,n);case ms.TYPE:return new ms(e,n);case El.TYPE:return new El(e,n);case Ml.TYPE:return new Ml(e,n);case os.TYPE:return new os(e,n);case af.TYPE:return new af(e,n);case Yf.TYPE:return new Yf(e,n);case $f.TYPE:return new $f(e,n);case ql.TYPE:return new ql(e,n);case ap.TYPE:return new ap(e,n);case yo.TYPE:return new yo(e,n);case jp.TYPE:return new jp(e,n);case Np.TYPE:return new Np(e,n);case yp.TYPE:return new yp(e,n);case hd.TYPE:return new hd(e,n);case Nd.TYPE:return new Nd(e,n);case Yd.TYPE:return new Yd(e,n);case $d.TYPE:return new $d(e,n);case hy.TYPE:return new hy(e,n);case Ey.TYPE:return new Ey(e,n);case Dy.TYPE:return new Dy(e,n);case Ky.TYPE:return new Ky(e,n);case ah.TYPE:return new ah(e,n);case bf.TYPE:return new bf(e,n);case hh.TYPE:return new hh(e,n);case Oh.TYPE:return new Oh(e,n);case Vh.TYPE:return new Vh(e,n);case Gh.TYPE:return new Gh(e,n);case Cv.TYPE:return new Cv(e,n);case Qv.TYPE:return new Qv(e,n);case Ku.TYPE:return new Ku(e,n);case rb.TYPE:return new rb(e,n);case gb.TYPE:return new gb(e,n);case Tb.TYPE:return new Tb(e,n);case eg.TYPE:return new eg(e,n);case Ff.TYPE:return new Ff(e,n);case lg.TYPE:return new lg(e,n);case bg.TYPE:return new bg(e,n);case kg.TYPE:return new kg(e,n);default:return console.error("Can not register Field ID #"+e+' - Field registrar name "'+t+'" is not valid.'),null}}}])&&jg(t.prototype,n),r&&jg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=Ig(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cg,"getInstance",(function(){return Fg||(Rg=!0,Fg=new Cg,Rg=!1),Fg}));const Dg=Cg;n(86535),n(99244);const Ag=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=l.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function xg(e){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(e)}function Ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lg(r.key),r)}}function Lg(e){var t=function(e,t){if("object"!==xg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xg(t)?t:String(t)}var Mg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._datasourceSettings=n||{},this._portalUrlPath=this.getSetting("portalUrlPath"),this._datasourcesCallRunner=new Ag}var t,n,r;return t=e,(n=[{key:"registerDatasourceValues",value:function(){Datasources.registerDatasource(this._fieldId,this)}},{key:"registerDatasourceDefaultValues",value:function(){DefaultValueDatasources.registerDatasource(this._fieldId,this)}},{key:"isLocalDatasource",value:function(){return!1}},{key:"getOptions",value:function(){return[]}},{key:"fetchNewOptions",value:function(e,t,n,r){throw new Error("notImplementedError")}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notImplementedError")}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notImplementedError")}},{key:"getParentDependenciesFieldsIds",value:function(){throw new Error("notImplementedError")}},{key:"isParentDependentField",value:function(e){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){return this.clone(e)}},{key:"clone",value:function(e){throw new Error("notImplementedError")}},{key:"getOptionsSearchApiUrl",value:function(){throw new Error("notImplementedError")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){throw new Error("notImplementedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notImplementedError")}},{key:"_fetchOptions",value:function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}}},{key:"_getFieldId",value:function(){return this._fieldId}},{key:"getDatasourceSettings",value:function(){return this._datasourceSettings}},{key:"getSetting",value:function(e){return this._datasourceSettings.hasOwnProperty(e)?this._datasourceSettings[e]:null}}])&&Ng(t.prototype,n),r&&Ng(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Bg=Mg;function Vg(e){return Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(e)}function Ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yg(r.key),r)}}function Wg(e,t,n){return t&&Ug(e.prototype,t),n&&Ug(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hg(e,t,n){return(t=Yg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yg(e){var t=function(e,t){if("object"!==Vg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vg(t)?t:String(t)}var zg=Wg((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Hg(zg,"SELF_RECORD","selfRecord"),Hg(zg,"RECORD_PICKER","recordPicker");const Qg=zg;function qg(e){return qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(e)}function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kg(r.key),r)}}function Jg(e,t,n){return t&&Gg(e.prototype,t),n&&Gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zg(e,t,n){return(t=Kg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kg(e){var t=function(e,t){if("object"!==qg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qg(t)?t:String(t)}var $g=Jg((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Zg($g,"FIXED","fixed"),Zg($g,"FIELD","field");const Xg=$g;function e_(e){return e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e_(e)}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n_(r.key),r)}}function n_(e){var t=function(e,t){if("object"!==e_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e_(t)?t:String(t)}function r_(e,t){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r_(e,t)}function o_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i_(e);if(t){var o=i_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===e_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i_(e)}var a_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}(i,e);var t,n,r,o=o_(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasetFilters=n||r.getSetting("datasetFilters")||[],r._optionFormatComponents=r.getSetting("optionFormatComponents")||[],r._schemaFieldIdToUseForIndirectFiltering=r.getSetting("schemaFieldIdToUseForIndirectFiltering"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){throw new Error("notImplemented")}},{key:"getParentDependenciesFieldsIds",value:function(){return this._datasetFilters.flatMap((function(e){return e.type===Xg.FIELD?[e.parentDependencyFieldId.toString()]:[]}))}},{key:"isParentDependentField",value:function(e){return null!=e&&this.getParentDependenciesFieldsIds().includes(e.toString())}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])}},{key:"_buildClonedFiltersForNewTableRow",value:function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if(i.type===Xg.FIELD&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n}},{key:"_buildFiltersWithCurrentFieldsValues",value:function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);n.type===Xg.FIELD&&this._updateFieldFilter(n),e.push(n)}return e}},{key:"_prepareFilterToSend",value:function(e){return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:e.value||null,sourceType:e.sourceType,entityId:e.entityId||null,type:e.type}}},{key:"_prepareOptionFormatComponentToSend",value:function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}},{key:"_updateFieldFilter",value:function(e){e.sourceType===Qg.SELF_RECORD?this._updateFieldFilterWithSelfWizardSource(e):e.sourceType===Qg.RECORD_PICKER&&this._updateFieldFilterWithRecordPickerSource(e)}},{key:"_updateFieldFilterWithSelfWizardSource",value:function(e){var t=e.parentDependencyFieldId;if(J.isFieldRegistered(t)){var n=J.getFieldValue(t);if(!this._shouldIgnoreFilterIfNoValueIsSelected()||!n.isEmpty()){switch(n.getType()){case A.TYPE:e.value=[];break;case nn.TYPE:e.value=PortalString.toInt(n.getOptionId());break;case pn.TYPE:e.value=n.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;case Rt.TYPE:e.value=n.getValue();break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}e.type=Xg.FIXED}}}},{key:"_updateFieldFilterWithRecordPickerSource",value:function(e){var t=e.parentDependencyFieldId;if(J.isFieldRegistered(t)){var n=J.getFieldValue(t);n.isEmpty()||(e.entityId=n.getOptionId())}}}])&&t_(t.prototype,n),r&&t_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);const u_=a_;function l_(e){return l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(e)}function s_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d_(r.key),r)}}function c_(e,t){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c_(e,t)}function f_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p_(e);if(t){var o=p_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p_(e){return p_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p_(e)}function d_(e){var t=function(e,t){if("object"!==l_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l_(t)?t:String(t)}var y_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c_(e,t)}(i,e);var t,n,r,o=f_(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaSpecId=r.getSetting("datasetSchemaSpecId"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&s_(t.prototype,n),r&&s_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u_);!function(e,t,n){(t=d_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(y_,"TYPE","DatasetFieldOptionsDatasource");const h_=y_;function v_(e){return v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v_(e)}function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w_(r.key),r)}}function m_(e,t){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m_(e,t)}function g_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=__(e);if(t){var o=__(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function __(e){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},__(e)}function w_(e){var t=function(e,t){if("object"!==v_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v_(t)?t:String(t)}var S_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m_(e,t)}(i,e);var t,n,r,o=g_(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaFieldId=r.getSetting("datasetSchemaFieldId"),r._ignoreFilterIfNoValueIsSelected=r.getSetting("ignoreFilterIfNoValueIsSelected"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return this._ignoreFilterIfNoValueIsSelected}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetSingleColumnOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&b_(t.prototype,n),r&&b_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u_);!function(e,t,n){(t=w_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(S_,"TYPE","DatasetSingleColumnFieldOptionsDatasource");const O_=S_;function E_(e){return E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(e)}function P_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I_(r.key),r)}}function k_(e,t){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k_(e,t)}function T_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j_(e);if(t){var o=j_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function j_(e){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j_(e)}function I_(e){var t=function(e,t){if("object"!==E_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E_(t)?t:String(t)}var F_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k_(e,t)}(i,e);var t,n,r,o=T_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._setOptions(n.getSetting("options")),n}return t=i,(n=[{key:"isLocalDatasource",value:function(){return!0}},{key:"getOptions",value:function(){return this._options}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"_setOptions",value:function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)}}])&&P_(t.prototype,n),r&&P_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=I_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(F_,"TYPE","LocalDatasource");const R_=F_;function C_(e){return C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C_(e)}function D_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L_(r.key),r)}}function A_(e,t){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A_(e,t)}function x_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N_(e);if(t){var o=N_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===C_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N_(e)}function L_(e){var t=function(e,t){if("object"!==C_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==C_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===C_(t)?t:String(t)}var M_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A_(e,t)}(i,e);var t,n,r,o=x_(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}}])&&D_(t.prototype,n),r&&D_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(R_);!function(e,t,n){(t=L_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(M_,"TYPE","DummyDatasource");const B_=M_;function V_(e){return V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(e)}function U_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z_(r.key),r)}}function W_(e,t){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W_(e,t)}function H_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y_(e);if(t){var o=Y_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===V_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Y_(e){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y_(e)}function z_(e){var t=function(e,t){if("object"!==V_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==V_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===V_(t)?t:String(t)}var Q_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}(i,e);var t,n,r,o=H_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._jobId=n.getSetting("jobId"),n._contactOrJobIdEdit=n.getSetting("contactOrJobIdEdit"),n._wizardId=n.getSetting("wizardId"),n._schemaFieldId=n.getSetting("schemaFieldId"),n._optionFormatJson=n.getSetting("optionFormatJson"),n}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalOptionSearchApi"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}}},{key:"_buildApiAdaptedResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t}}],n&&U_(t.prototype,n),r&&U_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=z_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Q_,"TYPE","GeneralOptionsDatasource");const q_=Q_;function G_(e){return G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(e)}function J_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X_(r.key),r)}}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z_(e,t)}function K_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$_(e);if(t){var o=$_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===G_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $_(e){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$_(e)}function X_(e){var t=function(e,t){if("object"!==G_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==G_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===G_(t)?t:String(t)}var ew=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}(i,e);var t,n,r,o=K_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._listSpecId=n.getSetting("listSpecId"),n._requestType=n.getSetting("requestType"),n._searchIndexId=n.getSetting("searchIndexId"),n}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_instantSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({requestType:this._requestType,listSpecId:this._listSpecId,richFieldId:this._fieldId,searchTerm:n||"",searchIndexId:this._searchIndexId})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name||"",fields:e.fieldValues||[],detailUrl:e.detailUrl||null}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.id,name:n.name})})),t}}],n&&J_(t.prototype,n),r&&J_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=X_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ew,"TYPE","InstantSearchDatasource");const tw=ew;function nw(e){return nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nw(e)}function rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lw(r.key),r)}}function ow(e,t){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ow(e,t)}function iw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aw(e);if(t){var o=aw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aw(e)}function uw(e,t,n){return(t=lw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lw(e){var t=function(e,t){if("object"!==nw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nw(t)?t:String(t)}var sw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t)}(i,e);var t,n,r,o=iw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_jobSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,a){return JSON.stringify({richFieldId:this._getFieldId(),richFieldType:pjQuery("#"+this._getFieldId()).data("field-type"),searchText:n||"",limit:i.PAGE_SIZE,page:e})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],n&&rw(t.prototype,n),r&&rw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);uw(sw,"TYPE","JobSuggestionsDatasource"),uw(sw,"PAGE_SIZE",10);const cw=sw;function fw(e){return fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fw(e)}function pw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vw(r.key),r)}}function dw(e,t){return dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dw(e,t)}function yw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hw(e);if(t){var o=hw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hw(e){return hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hw(e)}function vw(e){var t=function(e,t){if("object"!==fw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fw(t)?t:String(t)}var bw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dw(e,t)}(i,e);var t,n,r,o=yw(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._schemaFieldId=n.getSetting("schemaFieldId"),n._isSearchMode=n.getSetting("isSearchMode")||!1,n}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalUserSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode,page:e||1,limit:t};return JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&pw(t.prototype,n),r&&pw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=vw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bw,"TYPE","UsersDatasource");const mw=bw;function gw(e){return gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gw(e)}function _w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ew(r.key),r)}}function ww(e,t){return ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ww(e,t)}function Sw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ow(e);if(t){var o=Ow(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ow(e)}function Ew(e){var t=function(e,t){if("object"!==gw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gw(t)?t:String(t)}var Pw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ww(e,t)}(i,e);var t,n,r,o=Sw(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._richFieldId=n.getSetting("richFieldId"),n}return t=i,(n=[{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLinkToPersonSearch"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={richFieldId:this._richFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[]};return JSON.stringify(a)}}])&&_w(t.prototype,n),r&&_w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mw);!function(e,t,n){(t=Ew(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pw,"TYPE","LinkToPersonDatasource");const kw=Pw;function Tw(e){return Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tw(e)}function jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cw(r.key),r)}}function Iw(e,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iw(e,t)}function Fw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rw(e);if(t){var o=Rw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Tw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rw(e)}function Cw(e){var t=function(e,t){if("object"!==Tw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tw(t)?t:String(t)}var Dw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}(i,e);var t,n,r,o=Fw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_workflowStepSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||"",page:e,limit:t,richFieldId:this._getFieldId()})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].id,name:e[n].text});return t}}],n&&jw(t.prototype,n),r&&jw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=Cw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Dw,"TYPE","WorkflowStepDatasource");const Aw=Dw;function xw(e){return xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xw(e)}function Nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vw(r.key),r)}}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lw(e,t)}function Mw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bw(e);if(t){var o=Bw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bw(e)}function Vw(e){var t=function(e,t){if("object"!==xw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xw(t)?t:String(t)}var Uw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}(i,e);var t,n,r,o=Mw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_linkedJobStepSuggestions"}}])&&Nw(t.prototype,n),r&&Nw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Aw);!function(e,t,n){(t=Vw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Uw,"TYPE","LinkedJobStepDatasource");const Ww=Uw;function Hw(e){return Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hw(e)}function Yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gw(r.key),r)}}function zw(e,t){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zw(e,t)}function Qw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qw(e);if(t){var o=qw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qw(e)}function Gw(e){var t=function(e,t){if("object"!==Hw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hw(t)?t:String(t)}var Jw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zw(e,t)}(i,e);var t,n,r,o=Qw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_locationSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||""})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._results=e.results.map((function(e){return{id:e.value,text:e.text,lat:e.lat,lon:e.lon}})),pagination:{more:e.more||!1}}}},{key:"getOptionLatAndLonById",value:function(e){var t=[];return this._results.forEach((function(n){n.id===e&&(t=[n.lat,n.lon])})),t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].value,name:e[n].text});return t}}],n&&Yw(t.prototype,n),r&&Yw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=Gw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jw,"TYPE","LocationDatasource");const Zw=Jw;function Kw(e){return Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kw(e)}function $w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xw(r.key),r)}}function Xw(e){var t=function(e,t){if("object"!==Kw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Kw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Kw(t)?t:String(t)}function eS(e,t){return eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eS(e,t)}function tS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nS(e);if(t){var o=nS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nS(e){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nS(e)}var rS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eS(e,t)}(i,e);var t,n,r,o=tS(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLocationsSearchApi/"+this._getSearchMode()}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notSupportedError")}},{key:"_getSearchMode",value:function(){throw new Error("notImplementedError")}}])&&$w(t.prototype,n),r&&$w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);const oS=rS;function iS(e){return iS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iS(e)}function aS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cS(r.key),r)}}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uS(e,t)}function lS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sS(e);if(t){var o=sS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sS(e)}function cS(e){var t=function(e,t){if("object"!==iS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==iS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===iS(t)?t:String(t)}var fS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uS(e,t)}(i,e);var t,n,r,o=lS(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:""}})}},{key:"_getSearchMode",value:function(){return"byCountry"}}])&&aS(t.prototype,n),r&&aS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(oS);!function(e,t,n){(t=cS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fS,"TYPE","LocationStandardizedStateDatasource");const pS=fS;function dS(e){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dS(e)}function yS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mS(r.key),r)}}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hS(e,t)}function vS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bS(e);if(t){var o=bS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bS(e)}function mS(e){var t=function(e,t){if("object"!==dS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dS(t)?t:String(t)}var gS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}(i,e);var t,n,r,o=vS(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._listSpecId=n.getSetting("listSpecId"),n._extraJobLocationFieldNumbers=n.getSetting("extraJobLocationFieldNumbers"),n}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:"",listSpecId:this._listSpecId,extraJobLocationFieldNumbers:this._extraJobLocationFieldNumbers}})}},{key:"_getSearchMode",value:function(){return"byCountryAndList"}}])&&yS(t.prototype,n),r&&yS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(oS);!function(e,t,n){(t=mS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gS,"TYPE","LocationStandardizedStateSearchDatasource");const _S=gS;function wS(e){return wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wS(e)}function SS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kS(r.key),r)}}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},OS(e,t)}function ES(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=PS(e);if(t){var o=PS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function PS(e){return PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PS(e)}function kS(e){var t=function(e,t){if("object"!==wS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wS(t)?t:String(t)}var TS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}(i,e);var t,n,r,o=ES(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_postalCode"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({richFieldId:this._getRichFieldId(),searchPostalCode:n||""})}},{key:"_getRichFieldId",value:function(){var e=this._fieldId.match(/^([0-9]+)_postalCode$/);if(!e)throw new Error("invalidFieldId");return e[1]}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],n&&SS(t.prototype,n),r&&SS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);!function(e,t,n){(t=kS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(TS,"TYPE","PostalCodeDatasource");const jS=TS;function IS(e){return IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IS(e)}function FS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xS(r.key),r)}}function RS(){return RS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},RS.apply(this,arguments)}function CS(e,t){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},CS(e,t)}function DS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=AS(e);if(t){var o=AS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===IS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function AS(e){return AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AS(e)}function xS(e){var t=function(e,t){if("object"!==IS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==IS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===IS(t)?t:String(t)}var NS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CS(e,t)}(i,e);var t,n,r,o=DS(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._categoryFilterFieldId=n||r.getSetting("categoryFilterFieldId"),r._sourcesByCategory=r.getSetting("sourcesByCategory"),r._currentCategoryFilter=null,r._setOptions([]),r}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[this._categoryFilterFieldId]}},{key:"isParentDependentField",value:function(e){return e===this._categoryFilterFieldId}},{key:"fetchNewOptions",value:function(e,t,n,r){this._updateAvailableOptions(),RS(AS(i.prototype),"fetchNewOptions",this).call(this,e,t,n,r)}},{key:"fetchOptionsById",value:function(e,t){this._updateAvailableOptions(),RS(AS(i.prototype),"fetchOptionsById",this).call(this,e,t)}},{key:"fetchOptionsByValue",value:function(e,t){this._updateAvailableOptions(),RS(AS(i.prototype),"fetchOptionsByValue",this).call(this,e,t)}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._categoryFilterFieldId.replace(/^([^_]*-)[\d]+(_category)$/,"$1"+t+"$2");return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"_updateAvailableOptions",value:function(){var e=this._getCurrentCategoryFilterValue();this._currentCategoryFilter!==e&&(this._currentCategoryFilter=e,this._sourcesByCategory.hasOwnProperty(this._currentCategoryFilter)?this._setOptions(this._sourcesByCategory[this._currentCategoryFilter]):this._setOptions([]))}},{key:"_getCurrentCategoryFilterValue",value:function(){var e=Fields.getFieldValueByType(this._categoryFilterFieldId,FieldOptionValue.TYPE);return e.isEmpty()?null:e.getOptionId()}}])&&FS(t.prototype,n),r&&FS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(R_);!function(e,t,n){(t=xS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(NS,"TYPE","SourcesDatasource");const LS=NS;function MS(e){return MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MS(e)}function BS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YS(r.key),r)}}function VS(e,t){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},VS(e,t)}function US(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=WS(e);if(t){var o=WS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===MS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WS(e)}function HS(e,t,n){return(t=YS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YS(e){var t=function(e,t){if("object"!==MS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==MS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===MS(t)?t:String(t)}var zS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VS(e,t)}(i,e);var t,n,r,o=US(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_timeZone"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(null,e,t):t([])}},{key:"fetchOptionsByValue",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(e[0],null,t):t([])}},{key:"_fetchOptionsByValueOrId",value:function(e,t,n){var r=this,o=this.buildRequestDataFromParams(null,null,e,!0,t);this._fetchOptions(o,(function(e){var t=r._adaptApiOptionsResults(e);n(t)}))}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,a){return JSON.stringify({searchText:n||"",page:e||1,limit:i.PAGE_SIZE,searchIds:o||null})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e){var r=e[n].children;for(var o in r)t.push({id:r[o].id,name:r[o].text})}return t}}],n&&BS(t.prototype,n),r&&BS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bg);HS(zS,"TYPE","TimeZoneDatasource"),HS(zS,"PAGE_SIZE",10);const QS=zS;function qS(e){return qS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qS(e)}function GS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JS(r.key),r)}}function JS(e){var t=function(e,t){if("object"!==qS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qS(t)?t:String(t)}var ZS=null,KS=!1,$S=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!KS)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the values datasource."),null;switch(t){case h_.TYPE:return new h_(e,n);case O_.TYPE:return new O_(e,n);case B_.TYPE:return new B_(e,n);case q_.TYPE:return new q_(e,n);case tw.TYPE:return new tw(e,n);case cw.TYPE:return new cw(e,n);case kw.TYPE:return new kw(e,n);case Ww.TYPE:return new Ww(e,n);case R_.TYPE:return new R_(e,n);case Zw.TYPE:return new Zw(e,n);case pS.TYPE:return new pS(e,n);case _S.TYPE:return new _S(e,n);case jS.TYPE:return new jS(e,n);case LS.TYPE:return new LS(e,n);case QS.TYPE:return new QS(e,n);case mw.TYPE:return new mw(e,n);case Aw.TYPE:return new Aw(e,n);default:return console.error("Can not register ValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&GS(t.prototype,n),r&&GS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=JS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($S,"getInstance",(function(){return ZS||(KS=!0,ZS=new $S,KS=!1),ZS}));const XS=$S;function eO(e){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eO(e)}function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iO(r.key),r)}}function nO(e,t){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nO(e,t)}function rO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oO(e);if(t){var o=oO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oO(e){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oO(e)}function iO(e){var t=function(e,t){if("object"!==eO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eO(t)?t:String(t)}var aO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nO(e,t)}(i,e);var t,n,r,o=rO(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaSpecId=r.getSetting("datasetSchemaSpecId"),r._datasetFieldNumber=r.getSetting("datasetFieldNumber"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDynamicDefaultDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,datasetFieldNumber:this._datasetFieldNumber,filters:u})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[];e(n)}}}])&&tO(t.prototype,n),r&&tO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u_);!function(e,t,n){(t=iO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(aO,"TYPE","DynamicDefaultValueDatasetFieldOptionsDatasource");const uO=aO;function lO(e){return lO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lO(e)}function sO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cO(r.key),r)}}function cO(e){var t=function(e,t){if("object"!==lO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lO(t)?t:String(t)}var fO=null,pO=!1,dO=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!pO)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the default values datasource."),null;switch(t){case uO.TYPE:return new uO(e,n);case InstantSearchDatasource.TYPE:return new InstantSearchDatasource(e,n);default:return console.error("Can not register DefaultValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&sO(t.prototype,n),r&&sO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=cO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dO,"getInstance",(function(){return fO||(pO=!0,fO=new dO,pO=!1),fO}));const yO=dO;function hO(e){return hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hO(e)}function vO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bO(r.key),r)}}function bO(e){var t=function(e,t){if("object"!==hO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hO(t)?t:String(t)}var mO=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._validatorSettings=n||{},this._validationErrorText=this.getSetting("errorMessage")||"Error"}var t,n,r;return t=e,(n=[{key:"register",value:function(){Fe.registerValidator(this._fieldId,this)}},{key:"isValid",value:function(){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"getValidationErrorText",value:function(){return this._validationErrorText}},{key:"getValidatorSettings",value:function(){return this._validatorSettings}},{key:"getSetting",value:function(e){return this._validatorSettings.hasOwnProperty(e)?this._validatorSettings[e]:null}},{key:"_getField",value:function(){return J.getField(this._fieldId)}},{key:"_getFieldId",value:function(){return this._fieldId}}])&&vO(t.prototype,n),r&&vO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const gO=mO;function _O(e){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_O(e)}function wO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PO(r.key),r)}}function SO(e,t){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SO(e,t)}function OO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EO(e);if(t){var o=EO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function EO(e){return EO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EO(e)}function PO(e){var t=function(e,t){if("object"!==_O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_O(t)?t:String(t)}var kO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SO(e,t)}(i,e);var t,n,r,o=OO(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"isValid",value:function(){return this._getField().hasValue()}},{key:"cloneForNewTableRow",value:function(e,t){return new i(e,this.getValidatorSettings())}}])&&wO(t.prototype,n),r&&wO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(gO);!function(e,t,n){(t=PO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kO,"TYPE","RequiredValidator");const TO=kO;function jO(e){return jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jO(e)}function IO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DO(r.key),r)}}function FO(e,t){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},FO(e,t)}function RO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=CO(e);if(t){var o=CO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function CO(e){return CO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CO(e)}function DO(e){var t=function(e,t){if("object"!==jO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===jO(t)?t:String(t)}var AO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FO(e,t)}(i,e);var t,n,r,o=RO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._minLength=n.getSetting("minLength"),n}return t=i,n=[{key:"isValid",value:function(){var e=document.getElementById(this._getFieldId()).value;return e.length>=this._minLength||0===e.length}},{key:"cloneForNewTableRow",value:function(e,t){return new i(e,this.getValidatorSettings())}}],n&&IO(t.prototype,n),r&&IO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(gO);!function(e,t,n){(t=DO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(AO,"TYPE","MinLengthValidator");const xO=AO;function NO(e){return NO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NO(e)}function LO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return MO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function MO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BO(){BO=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==NO(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function VO(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function UO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){VO(i,r,o,a,u,"next",e)}function u(e){VO(i,r,o,a,u,"throw",e)}a(void 0)}))}}function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QO(r.key),r)}}function HO(e,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HO(e,t)}function YO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zO(e);if(t){var o=zO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===NO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zO(e){return zO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zO(e)}function QO(e){var t=function(e,t){if("object"!==NO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==NO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NO(t)?t:String(t)}var qO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}(u,e);var t,n,r,o,i,a=YO(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.apply(this,arguments)}return t=u,n=[{key:"isValid",value:function(){return this._areAllMandatoryFieldsFilled()}},{key:"cloneForNewTableRow",value:function(e,t){return new u(e,this.getValidatorSettings())}},{key:"_areAllMandatoryFieldsFilled",value:(i=UO(BO().mark((function e(){var t,n,r,o,i;return BO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J.getField(this._getFieldId()),e.next=3,t.onPdfDocumentIsReady();case 3:n=t.getPdfDocument(),r=n.numPages,o=n.annotationStorage.getAll(),i=1;case 7:if(!(i<=r)){e.next=16;break}return e.next=10,this._areMandatoryFieldsInPageFilled(n,i,o);case 10:if(e.sent){e.next=13;break}return e.abrupt("return",!1);case 13:i++,e.next=7;break;case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_areMandatoryFieldsInPageFilled",value:(o=UO(BO().mark((function e(t,n,r){var o,i,a,u,l;return BO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPage(n);case 2:return o=e.sent,e.next=5,o.getAnnotations();case 5:i=e.sent,a=LO(i),e.prev=7,a.s();case 9:if((u=a.n()).done){e.next=15;break}if(l=u.value,!(this._isMandatory(l)&&this._isEmpty(l,r)&&this._isTextField(l))){e.next=13;break}return e.abrupt("return",!1);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[7,17,20,23]])}))),function(e,t,n){return o.apply(this,arguments)})},{key:"_isMandatory",value:function(e){return e.fieldFlags&&Boolean(2&e.fieldFlags)}},{key:"_isEmpty",value:function(e,t){var n=t?t[e.id]:null,r=n?n.value:e.fieldValue;return!r||""===r.trim()}},{key:"_isTextField",value:function(e){return"Tx"===e.fieldType}}],n&&WO(t.prototype,n),r&&WO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(gO);!function(e,t,n){(t=QO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qO,"TYPE","PdfRequiredFieldValidator");const GO=qO;function JO(e){return JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JO(e)}function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KO(r.key),r)}}function KO(e){var t=function(e,t){if("object"!==JO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==JO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===JO(t)?t:String(t)}var $O=null,XO=!1,eE=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!XO)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return $O||(XO=!0,$O=new e,XO=!1),$O}}],(n=[{key:"buildValidator",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the validator."),null;switch(t){case TO.TYPE:return new TO(e,n);case xO.TYPE:return new xO(e,n);case GO.TYPE:return new GO(e,n);default:return console.error("Can not register Validator for Field ID #"+e+' - Validator registrar name "'+t+'" is not valid.'),null}}}])&&ZO(t.prototype,n),r&&ZO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const tE=eE;n(17727);function nE(e){return nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nE(e)}function rE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oE(r.key),r)}}function oE(e){var t=function(e,t){if("object"!==nE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nE(t)?t:String(t)}function iE(e,t){uE(e,t),t.add(e)}function aE(e,t,n){uE(e,t),t.set(e,n)}function uE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lE(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function sE(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,fE(e,t,"get"))}function cE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,fE(e,t,"set"),n),n}function fE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var pE=new WeakMap,dE=new WeakMap,yE=new WeakMap,hE=new WeakMap,vE=new WeakMap,bE=new WeakSet,mE=new WeakSet,gE=new WeakSet,_E=new WeakSet,wE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),iE(this,_E),iE(this,gE),iE(this,mE),iE(this,bE),aE(this,pE,{writable:!0,value:void 0}),aE(this,dE,{writable:!0,value:void 0}),aE(this,yE,{writable:!0,value:void 0}),aE(this,hE,{writable:!0,value:void 0}),aE(this,vE,{writable:!0,value:void 0})}var t,n,r;return t=e,(n=[{key:"init",value:function(e){cE(this,hE,e),cE(this,vE,!1)}},{key:"finish",value:function(){cE(this,vE,!0),cE(this,pE,null),cE(this,dE,null)}},{key:"setFileKey",value:function(e){cE(this,yE,e)}},{key:"pause",value:function(){var e,t=this;sE(this,pE)||(null!==(e=sE(this,dE))&&void 0!==e?e:Promise.resolve()).then((function(){return lE(t,bE,SE).call(t)}))}},{key:"resume",value:function(){var e,t=this;sE(this,dE)||(null!==(e=sE(this,pE))&&void 0!==e?e:Promise.resolve()).then((function(){return lE(t,mE,OE).call(t)}))}},{key:"cancel",value:function(){var e=this;sE(this,hE)&&sE(this,yE)?sE(this,hE).cancel(sE(this,yE)).finally((function(){return cE(e,vE,!0)})):setTimeout((function(){return e.cancel()}),50)}}])&&rE(t.prototype,n),r&&rE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SE(){var e=this;cE(this,pE,new Promise((function(t){return lE(e,gE,EE).call(e,t)}))),cE(this,pE,sE(this,pE).then((function(){return cE(e,pE,null)})))}function OE(){var e=this;cE(this,dE,new Promise((function(t){return lE(e,_E,PE).call(e,t)}))),cE(this,dE,sE(this,dE).then((function(){return cE(e,dE,null)})))}function EE(e){var t=this;sE(this,vE)||(sE(this,hE)&&sE(this,yE)?sE(this,hE).pause(sE(this,yE),{force:!0}).finally(e):setTimeout((function(){return lE(t,gE,EE).call(t,e)}),50))}function PE(e){var t=this;sE(this,vE)||(sE(this,hE)&&sE(this,yE)?sE(this,hE).resume(sE(this,yE)).finally(e):setTimeout((function(){return lE(t,_E,PE).call(t,e)}),50))}const kE=wE;function TE(e){return TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TE(e)}function jE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IE(r.key),r)}}function IE(e){var t=function(e,t){if("object"!==TE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==TE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===TE(t)?t:String(t)}function FE(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function RE(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,DE(e,t,"get"))}function CE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,DE(e,t,"set"),n),n}function DE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var AE=new WeakMap,xE=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),FE(this,AE,{writable:!0,value:void 0}),CE(this,AE,new kE),this.config=this._getConfig(t),this.dictionary=this._getDictionary(n),this.regularUploadMaxFileSize=o,this._appendLargeFileUploadDialog(r),this._disableClosingDialog(this._getTextByDictionaryKey("confirmLeave")),this._setActionBeforeSubmit()}var t,n,r;return t=e,n=[{key:"_setActionBeforeSubmit",value:function(){var e=this;ze.getInstance().getAll().forEach((function(t){Xn.default.getInstance().addActionBeforeSubmit((function(t){var n=pjQuery(t.target),r=e._getOversizeNotProcessedWizardFileInputsInForm(n);if(r.length)return e._processLargeFilesUpload(n,r)}),t.getForm(),wv.Z.PRIORITY_LOW)}))}},{key:"_disableUploadedFileInputs",value:function(e){var t=this;e.find(":file").each((function(e,n){t._isInputFileCompleted(n.id)&&pjQuery("#"+n.id).prop("disabled",!0)}))}},{key:"_disableClosingDialog",value:function(e){window.onbeforeunload=function(t){if(!pjQuery("#fileUploadDialogOverlay").is(":hidden"))return t||(t=window.event),t.cancelBubble=!0,t.returnValue=e,t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),e}}},{key:"_getTextByDictionaryKey",value:function(e){return this.dictionary[e]}},{key:"_getConfig",value:function(e){var t=JSON.parse(e);return{aws_url:t.aws_url,signerUrl:t.portalUrl+"/_remoteUploadSigner",timeUrl:t.portalUrl+"/_remoteUploadTime",aws_key:t.aws_key,awsRegion:t.aws_region,bucket:t.bucket,partSize:t.partSize,awsSignatureVersion:t.awsSignatureVersion,computeContentMd5:!0,cryptoMd5Method:function(e){return CryptoJS.MD5(CryptoJS.lib.WordArray.create(e)).toString(CryptoJS.enc.Base64)},cryptoHexEncodedHash256:function(e){return CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)},veryLargeFilesBucketTemporaryFolder:t.veryLargeFilesBucketTemporaryFolder}}},{key:"_getDictionary",value:function(e){return JSON.parse(e)}},{key:"_getOversizeNotProcessedWizardFileInputsInForm",value:function(e){var t=[],n=this;return e.find(":file").each((function(e,r){if(n._shouldCheckOversize(r.id)&&!n._isUploaded(r.id)&&n._isFileOversizedOrForced(r)){var o=n._addFileUploadInfo(r);o&&(n._controlFileInputChange(r.id),t.push({input:r,file:o}),n._removeUploadFailedNotice(r.id))}})),t}},{key:"_getFileFromInput",value:function(e){return e.uploadThisFileAsBig?e.uploadThisFileAsBig:e.files&&e.files.length>0?e.files[0]:null}},{key:"_isFileOversizedOrForced",value:function(e){if(e.uploadThisFileAsBig)return!0;var t=this._getFileFromInput(e);return!!t&&t.size>this.regularUploadMaxFileSize}},{key:"_controlFileInputChange",value:function(e){var t=this;pjQuery("#"+e).change((function(){t._removeInputFileCompleted(e),t._removeHiddenInputs(e)}))}},{key:"_shouldCheckOversize",value:function(e){return pjQuery("#"+e).data("check-oversize")}},{key:"_isUploaded",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_appendLargeFileUploadDialog",value:function(e){pjQuery("body").append(e);var t=this;pjQuery("#fileUploadDialogCancelButton, #fileUploadDialogCloseThick").click((function(){t._fileUploadDialogCancel()}))}},{key:"_processLargeFilesUpload",value:function(t,n){var r=this;return this._openUploadDialog(),this.hasErrors=!1,this.cancelled=!1,this.totalCompleted=0,this.largeFilesUploaded=pjQuery.Deferred(),setTimeout((function(){return r._doUpload(t,n,0)}),e._uploadDelayTime),this.largeFilesUploaded.promise()}},{key:"_fileUploadDialogCancel",value:function(){var e=this;RE(this,AE).pause();var t=new nl(this.dictionary.leave,(function(){e._cancelUploadAndCloseDialog(),pjQuery(this).dialog("close"),e.largeFilesUploaded.reject()}),!0),n=new nl(this.dictionary.cancel,(function(){RE(e,AE).resume(),pjQuery(this).dialog("close")}),!1);new ul(this.dictionary.leavePage,this.dictionary.confirmLeave,[t,n],"#fileUploadDialogContent",(function(t,n){e._hasBeenClickedDialogCloseIcon(t)&&RE(e,AE).resume()})).show()}},{key:"_hasBeenClickedDialogCloseIcon",value:function(e){return e.originalEvent&&pjQuery(e.originalEvent.target).closest(".ui-dialog-titlebar-close").length}},{key:"_guessContentTypeFromFileName",value:function(e){return/\.webm$/.exec(e)?"video/webm":/\.mp4$/.exec(e)?"video/mp4":null}},{key:"_doUpload",value:function(e,t,n){if(n>=t.length)return this._closeUploadDialog(),this._disableUploadedFileInputs(e),void this.largeFilesUploaded.resolve();var r=this,o=t[n].input,i=o.id,a=t[n].file,u=a.name,l=this._getTempFileName(a),s=this._guessContentTypeFromFileName(u),c=!1,f=0;Evaporate.create(this.config).then((function(p){r.evaporate=p,RE(r,AE).init(p),p.add({name:r.config.veryLargeFilesBucketTemporaryFolder+"/"+l,contentType:s,file:a,xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},progress:function(e,n){if(!c){var o=Math.floor(100*e);c=100===o,o>=f&&(r._updateTotalUploadProgress(Math.floor(o/t.length),t.length),r._updateFileUploadProgress(i,o),f=o)}},error:function(e){console.error("Error while uploading file "+u+": "+e)},started:function(e){r.fileKey=e,RE(r,AE).setFileKey(e)}}).then((function(i){r.totalCompleted++,r._setUploadCompleted(o,i,u),r._doUpload(e,t,n+1)}),(function(o){var a,l=null!==(a=o.message)&&void 0!==a?a:o;("Invalid time value"===l||l.match("File upload aborted"))&&r._cancelUploadAndCloseDialog(),r._handleUploadError(e,i,u,t,n+1)}))}))}},{key:"_handleUploadError",value:function(e,t,n,r,o){this._setUploadFailed(t,n),this.cancelled?this._setAllPendingUploadsFailed(r,o):this._doUpload(e,r,o)}},{key:"_setAllPendingUploadsFailed",value:function(e,t){for(;t<e.length;)this._setUploadFailed(e[t].input.id,e[t].file.name),++t}},{key:"_cancelUploadAndCloseDialog",value:function(){this.cancelled=!0,RE(this,AE).cancel(),this._closeUploadDialog()}},{key:"_getTempFileName",value:function(e){return CryptoJS.SHA256("tmp-"+Dv.ou.fromJSDate(this._getNowDate()).toMillis()+"-"+e.name).toString(CryptoJS.enc.Hex)}},{key:"_getNowDate",value:function(){return new Date}},{key:"_addFileUploadInfo",value:function(e){var t=this._getFileFromInput(e);if(!t)return null;var n='<li id="progressDetailContainer'+e.id+'" class="upload-large-files__item upload-large-files__item--particular" ><div class="upload-large-files__itemHeader"><h3 class="upload-large-files__itemTitle" id="fileName'+e.id+'">'+t.name+'</h3><span id="itemWarning'+e.id+'" class="upload-large-files__itemWarning">'+this.dictionary.uploadFailed+'</span></div><progress class="upload-large-files__itemProgressBar" id="progressBar'+e.id+'" value="0" max="100" ></progress><p class="upload-large-files__itemDetail" id="progressDetail'+e.id+'" ><span class="upload-large-files__progressPercentage" id="progressPercentage'+e.id+'">0</span>% '+this.dictionary.uploaded+"</p></li>";return pjQuery("#uploads").append(n),pjQuery("#itemWarning"+e.id).hide(),t}},{key:"_addHiddenInputs",value:function(e,t,n){var r='<input type="hidden" id="file_'+e+'_remoteFileName" name="file_'+e+'_remoteFileName" value="'+t+'" /><input type="hidden" id="file_'+e+'_userSetFileName" name="file_'+e+'_userSetFileName" value="'+n+'" />';pjQuery("#fileInput_"+e).append(r)}},{key:"_removeHiddenInputs",value:function(e){pjQuery("#file_"+e+"_remoteFileName").remove(),pjQuery("#file_"+e+"_userSetFileName").remove()}},{key:"_addUploadFailedNotice",value:function(e){var t='<p id="file_'+e+'_uploadFailed" class="upload-large-files__formError">'+this.dictionary.uploadFailed+"</p>";pjQuery("#fileInput_"+e).append(t),pjQuery("#fieldSpecContainer"+e).addClass("upload-large-files__formError")}},{key:"_removeUploadFailedNotice",value:function(e){pjQuery("#file_"+e+"_uploadFailed").remove(),pjQuery("#fieldSpecContainer"+e).removeClass("upload-large-files__formError")}},{key:"_setUploadCompleted",value:function(e,t,n){this._updateFileUploadProgress(e.id,100),this._setUploadCompletedText(e.id),this._setInputFileCompleted(e.id),this._addHiddenInputs(e.id,t,n),RE(this,AE).finish()}},{key:"_setInputFileCompleted",value:function(e){pjQuery("#"+e).data("uploaded",!0)}},{key:"_removeInputFileCompleted",value:function(e){pjQuery("#"+e).removeData("uploaded")}},{key:"_isInputFileCompleted",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_setUploadFailed",value:function(e,t){this.hasErrors=!0,this._setUploadFailedText(e,t)}},{key:"_setUploadFailedText",value:function(e){pjQuery("#itemWarning"+e).show(),pjQuery("#progressDetailContainer"+e).addClass("upload-large-files__error"),this._addUploadFailedNotice(e)}},{key:"_setUploadCompletedText",value:function(e){pjQuery("#progressDetail"+e).text(this.dictionary.complete)}},{key:"_updateTotalUploadProgress",value:function(e,t){var n=Math.floor(this.totalCompleted*(100/t));this._updateProgressBar("#progressBar",n+e),this._updatePercentage("#progressPercentage",n+e)}},{key:"_emptyTotalUploadProgress",value:function(){this._updateProgressBar("#progressBar",0),this._updatePercentage("#progressPercentage",0)}},{key:"_updateFileUploadProgress",value:function(e,t){this._updateProgressBar("#progressBar"+e,t),this._updatePercentage("#progressPercentage"+e,t)}},{key:"_updatePercentage",value:function(e,t){pjQuery(e).text(t)}},{key:"_updateProgressBar",value:function(e,t){pjQuery(e).val(t)}},{key:"_openUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").removeClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").removeClass("largeFileDialogClosed")}},{key:"_closeUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").addClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").addClass("largeFileDialogClosed"),pjQuery("#uploads").empty(),this._emptyTotalUploadProgress()}}],r=[{key:"prepareFormToProcessLargeFilesUpload",value:function(t,n,r,o){new e(t,n,r,o)}}],n&&jE(t.prototype,n),r&&jE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=IE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xE,"_uploadDelayTime",0);const NE=xE;var LE=n(54248);const ME=function(){function e(){}return e.prototype.generateKey=function(){var e=(0,LE.Z)();return window.location.pathname.replace("/"+e,"")},e}();const BE=function(){function e(){this.keyGenerator=new ME,this.wizardSessions=this.init(),this.saveAll()}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getKey=function(){return this.wizardSessions.key},e.prototype.getWizardSession=function(e){var t=this.wizardSessions.store[e];return t||(t={},this.wizardSessions.store[e]=t,t)},e.prototype.removeAll=function(){sessionStorage.removeItem("wizardSessions"),this.wizardSessions=this.getDefaultWizardSessions()},e.prototype.saveAll=function(){sessionStorage.setItem("wizardSessions",JSON.stringify(this.wizardSessions))},e.prototype.init=function(){var e=JSON.parse(sessionStorage.getItem("wizardSessions"));return e||this.getDefaultWizardSessions()},e.prototype.getDefaultWizardSessions=function(){return{key:this.keyGenerator.generateKey(),store:{}}},e}();function VE(e){return VE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VE(e)}function UE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WE(r.key),r)}}function WE(e){var t=function(e,t){if("object"!==VE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==VE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===VE(t)?t:String(t)}function HE(e,t,n){YE(e,t),t.set(e,n)}function YE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zE(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,qE(e,t,"get"))}function QE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,qE(e,t,"set"),n),n}function qE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var GE=new WeakMap,JE=new WeakMap,ZE=new WeakMap,KE=new WeakSet,$E=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){YE(e,t),t.add(e)}(this,KE),HE(this,GE,{writable:!0,value:void 0}),HE(this,JE,{writable:!0,value:void 0}),HE(this,ZE,{writable:!0,value:void 0}),QE(this,GE,t),QE(this,JE,n),QE(this,ZE,r)}var t,n,r;return t=e,(n=[{key:"handle",value:function(){var e=zE(this,JE).uploadedResumeId;zE(this,ZE)&&!e&&(zE(this,JE).uploadedResumeId=zE(this,ZE),BE.getInstance().saveAll()),zE(this,JE).uploadedResumeId&&function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,KE,XE).call(this,zE(this,JE).uploadedResumeId)}}])&&UE(t.prototype,n),r&&UE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XE(e){var t=document.querySelector("#wizard-id-".concat(zE(this,GE))),n=document.createElement("input");n.name="uploadedResumeId",n.value=e,n.type="hidden",t.append(n)}const eP=$E;function tP(e){return tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(e)}function nP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uP(r.key),r)}}function rP(e,t){return rP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rP(e,t)}function oP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iP(e);if(t){var o=iP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iP(e){return iP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iP(e)}function aP(e,t,n){return(t=uP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uP(e){var t=function(e,t){if("object"!==tP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tP(t)?t:String(t)}var lP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rP(e,t)}(i,e);var t,n,r,o=oP(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._id=e,r._settings=t,r._fields=n,r._registeredFields=[],r._allFieldsRegistered=!1,r._wizardSession=BE.getInstance().getWizardSession(r._id),r._uploadedResumeIdHandler=new eP(r._id,r._wizardSession,r._settings.uploadedResumeId),r._checkMissingContainer(),r}return t=i,(n=[{key:"register",value:function(){this.dispatchEvent(i.EVENT_BEFORE_WIZARD_REGISTER,this._getWizardEventData()),this._uploadedResumeIdHandler.handle(),this._registerWizardFields(),this._attachResetEventHandler(),this._registerFieldConditions(),this._processWizard(),this.dispatchEvent(i.EVENT_AFTER_WIZARD_REGISTER,this._getWizardEventData())}},{key:"getSetting",value:function(e){return this._settings.hasOwnProperty(e)?this._settings[e]:null}},{key:"getId",value:function(){return this._id}},{key:"_checkMissingContainer",value:function(){!this._getWizardContainer()&&0===this._id&&this._fields.length>0&&(this._id=parseInt(this._fields[0].fieldId),this.getForm().innerHTML="<div id='wizard-id-"+this._id+"' class='wizard' data-id='"+this._id+"'>"+this.getForm().innerHTML+"</div>")}},{key:"_registerWizardFields",value:function(){this.dispatchEvent(i.EVENT_BEFORE_FIELDS_REGISTER,this._getWizardEventData());var e=this._getRegistrarTypesBuildOrder();for(var t in e){var n=e[t];for(var r in this._fields){var o=this._fields[r];for(var a in o.registrars)n===o.registrars[a].type&&this._register(o.fieldId,o.registrars[a])}}this._allFieldsRegistered=!0,this.dispatchEvent(i.EVENT_AFTER_FIELDS_REGISTER,this._getWizardEventData())}},{key:"_registerFieldConditions",value:function(){for(var e in this._fields){var t=this._fields[e];if(t.hasOwnProperty("visibilityConditions"))for(var n in t.visibilityConditions){var r=t.visibilityConditions[n];J.setFieldVisibilityConditionFromParams(t.fieldId,r.dependencyFieldId,r.conditionOperator,r.conditionValue)}if(t.hasOwnProperty("editConditions"))for(var o in t.editConditions){var i=t.editConditions[o];J.setFieldEditConditionFromParams(t.fieldId,i.dependencyFieldId,i.conditionOperator,i.conditionValue)}}}},{key:"_register",value:function(e,t){var n,r,o;switch(t.type){case Dr.FIELD:this._buildAndRegisterWizardField(e,t);break;case Dr.VALUES_DATASOURCE:null===(n=XS.getInstance().buildDatasource(e,t.name,t.settings))||void 0===n||n.registerDatasourceValues();break;case Dr.DEFAULT_VALUES_DATASOURCE:null===(r=yO.getInstance().buildDatasource(e,t.name,t.settings))||void 0===r||r.registerDatasourceDefaultValues();break;case Dr.VALIDATOR:null===(o=tE.getInstance().buildValidator(e,t.name,t.settings))||void 0===o||o.register()}}},{key:"_buildAndRegisterWizardField",value:function(e,t){var n=Dg.getInstance().buildField(e,t.name,t.settings);n&&(n.register(),this._registeredFields.push(n))}},{key:"_getRegistrarTypesBuildOrder",value:function(){return[Dr.VALUES_DATASOURCE,Dr.DEFAULT_VALUES_DATASOURCE,Dr.FIELD,Dr.VALIDATOR]}},{key:"_processWizard",value:function(){this._shouldShowFieldByField()?new kr(this._getWizardContainerId(),null,!1,!0,!0,0).generate():(this._removeButtonsIfNecessary(),this._showFieldSetIfNecessary()),this._setupLargeFilesUploadIfNeeded(),this._restrictEditingIfNeeded()}},{key:"_shouldShowFieldByField",value:function(){var e=new URL(window.location.href);return this._settings.shouldShowFieldByField&&null===e.searchParams.get("listFilterMode")}},{key:"_removeButtonsIfNecessary",value:function(){wr.getInstance().getAllFieldsetSteppers().some((function(e){return!e.hasBuiltinButtonBar()}))||this._getWizardContainer().querySelectorAll(".button-bar__wrap .formPreviousButton, .button-bar__wrap .formNextButton").forEach((function(e){e.hidden=!0}))}},{key:"_showFieldSetIfNecessary",value:function(){var e;this._getWizardContainer().removeAttribute("hidden"),null===(e=this._getWizardContainer().parentElement.querySelector(".wizard--loading .form__loader"))||void 0===e||e.remove()}},{key:"_getWizardContainerId",value:function(){return i.WIZARD_CONTAINER_PREFIX+this._id}},{key:"_getWizardContainer",value:function(){return document.getElementById(this._getWizardContainerId())}},{key:"_getWizardEventData",value:function(){return new Ze({wizardId:this._id})}},{key:"_setupLargeFilesUploadIfNeeded",value:function(){this._settings.largeFilesUploadParams&&0!==Object.keys(this._settings.largeFilesUploadParams).length&&NE.prepareFormToProcessLargeFilesUpload(this._settings.largeFilesUploadParams.bucketConfig,this._settings.largeFilesUploadParams.dictionary,this._settings.largeFilesUploadParams.html,this._settings.largeFilesUploadParams.regularMaxSize)}},{key:"_restrictEditingIfNeeded",value:function(){for(var e in this._fields){var t=this._fields[e];J.evaluateEditRestrictions(t.fieldId)}}},{key:"_attachResetEventHandler",value:function(){var e,t=this;null===(e=this.getForm())||void 0===e||e.addEventListener("reset",(function(){setTimeout((function(){return t._registeredFields.forEach((function(e){J.onFieldValueChange(e._fieldId)}))}),0)}))}},{key:"getForm",value:function(){if(this._fields.length){var e=document.getElementById(this._fields[0].fieldId);if(e)return e.closest("form")}}},{key:"areAllFieldsRegistered",value:function(){return this._allFieldsRegistered}}])&&nP(t.prototype,n),r&&nP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(tt);aP(lP,"WIZARD_CONTAINER_PREFIX","wizard-id-"),aP(lP,"EVENT_BEFORE_WIZARD_REGISTER","beforeWizardRegister"),aP(lP,"EVENT_AFTER_WIZARD_REGISTER","afterWizardRegister"),aP(lP,"EVENT_BEFORE_FIELDS_REGISTER","beforeFieldsRegister"),aP(lP,"EVENT_AFTER_FIELDS_REGISTER","afterFieldsRegister");const sP=lP;function cP(e){return cP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cP(e)}function fP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vP(r.key),r)}}function pP(){return pP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pP.apply(this,arguments)}function dP(e,t){return dP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dP(e,t)}function yP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hP(e);if(t){var o=hP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hP(e){return hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hP(e)}function vP(e){var t=function(e,t){if("object"!==cP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cP(t)?t:String(t)}var bP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dP(e,t)}(i,e);var t,n,r,o=yP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._disableButtonConditions=new Map,n._disableButtonConditionsEvaluator=new ue,n._buttonsData=n.getSetting("buttonsData"),n._addEventToFormPrevious(),n._addEventToFormNext(),n._configureButtons(),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new A}},{key:"getValueForCondition",value:function(){return null}},{key:"_updateFieldAfterParentFieldValueChange",value:function(){var e=this;pP(hP(i.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this),this._buttonsData.forEach((function(t){return e._evaluateButtonConditions(t.buttonId)}))}},{key:"_addEventToFormPrevious",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formPrevious").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToPreviousField()}))}))}},{key:"_addEventToFormNext",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formNext").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToNextField()}))}))}},{key:"_getFieldsetSteppersToMove",value:function(){return wr.getInstance().getAllFieldsetSteppers().filter((function(e){return!e.hasBuiltinButtonBar()}))}},{key:"_configureButtons",value:function(){if(this._buttonsData)for(var e=0;e<this._buttonsData.length;e++){var t=this._buttonsData[e];this._addWorkflowStepIdsIfNeeded(t),this._removeRequiredIfHidden(t),this._addAutomaticActionIfNeeded(t),this._prepareDisableButtonConditions(t),this._removeValidationsIfNeeded(t)}}},{key:"_addWorkflowStepIdsIfNeeded",value:function(e){if(e.workflowStepUpdateIds)for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(t){var n=document.getElementsByName("workflowStatusId");if(n.length<1)for(var r=document.getElementsByTagName("form"),o=0;o<r.length;o++){var i=r[o],a=document.createElement("input");a.type="hidden",a.id="workflowStatusId",a.name="workflowStatusId",a.value=e.workflowStepUpdateIds,i.append(a)}else n[0].value=e.workflowStepUpdateIds}))}}},{key:"_removeRequiredIfHidden",value:function(e){for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(e){for(var t=document.querySelector("body").querySelectorAll('[type="hidden"]:not(script)[required]'),n=0;n<t.length;n++)t[n].removeAttribute("required")}))}}},{key:"_addAutomaticActionIfNeeded",value:function(e){if(e.isAutomaticAction){var t=document.querySelectorAll("."+e.buttonType+'[data-buttonid="'+e.buttonId+'"]');t&&t.length&&t[0].click()}}},{key:"_prepareDisableButtonConditions",value:function(e){var t=this;this.getWizard().addListener(sP.EVENT_AFTER_FIELDS_REGISTER,(function(){t._registerDisableButtonConditions(e),t._evaluateButtonConditions(e.buttonId)}))}},{key:"_registerDisableButtonConditions",value:function(e){var t=this,n=[];e.disableButtonConditions.forEach((function(e){var r=new Y(e.richFieldId,e.operator,e.value);B.registerFieldDependency(t._fieldId,r.getParentDependencyFieldId(),B.TYPE_VALUES),n.push(r)})),this._disableButtonConditions.set(e.buttonId,n)}},{key:"_evaluateButtonConditions",value:function(e){var t=this._disableButtonConditions.get(e),n=t.length>0&&this._disableButtonConditionsEvaluator.areFieldConditionsSatisfied(t),r=document.querySelector('[data-buttonid="'+e+'"]');r&&(r.disabled=n,r.classList.toggle("button--disabled",n))}},{key:"_removeValidationsIfNeeded",value:function(e){this._shouldRemoveValidations(e.buttonType)&&this._removeValidationsForButton(e.buttonId)}},{key:"_removeValidationsForButton",value:function(e){var t=this,n=document.querySelector('[data-buttonid="'+e+'"]');null==n||n.addEventListener("click",(function(){Xn.default.getInstance().removeValidationsBeforeSubmit(t.getFormContainer())}))}},{key:"_shouldRemoveValidations",value:function(e){return["clearButton","partialSaveButton","previousButton"].includes(e)}}])&&fP(t.prototype,n),r&&fP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=vP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bP,"TYPE","ButtonBarField");const mP=bP;function gP(e){return gP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gP(e)}function _P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wP(r.key),r)}}function wP(e){var t=function(e,t){if("object"!==gP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gP(t)?t:String(t)}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SP(e,t)}function OP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EP(e);if(t){var o=EP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function EP(e){return EP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EP(e)}var PP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}(i,e);var t,n,r,o=OP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._configuration=t||new Kc,n}return t=i,n=[{key:"onFileSelected",value:function(e){if(e){var t=J.getField(this._fieldId);!0===this._configuration.hasPhotoPreview&&t._resetPreviewAndFileLoaders();var n=e.title;this._fileInfoCleaner.cleanAll(),this._addFileDataToDownload(e),this._setFileNameHiddenInputValue(n),this._setFileSizeHiddenInputValue(e.fileSize?e.fileSize:"0"),this._addUploadedFileElement(n),!0===this._configuration.hasPhotoPreview&&(t._setPreview(e.thumbnailLink),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_getAccessToken",value:function(){return gapi.auth.getToken().access_token}},{key:"_setFileNameHiddenInputValue",value:function(e){var t=document.getElementById("driveFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setFileSizeHiddenInputValue",value:function(e){var t=document.getElementById("driveFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_addUploadedFileElement",value:function(e){var t=document.querySelector("#fileInput_"+this._fieldId+" .drivePickerButton");t&&t.before(this._createUploadedFileElement(e))}},{key:"_addFileDataToDownload",value:function(e){if(e&&e.id){var t=document.getElementById(this._fieldId),n=t?t.closest("form"):null;n&&(n.appendChild(this._createDriveFileIdHiddenInput(e.id)),n.appendChild(this._createDriveAccessTokenHiddenInput()))}}},{key:"_createDriveFileIdHiddenInput",value:function(e){var t=document.createElement("input");return t.name="driveFileId_"+this._fieldId,t.id="driveFileId_"+this._fieldId,t.value=e,t.type="hidden",t}},{key:"_createDriveAccessTokenHiddenInput",value:function(){var e=document.createElement("input");return e.name="driveAccessToken_"+this._fieldId,e.id="driveAccessToken_"+this._fieldId,e.value=this._getAccessToken(),e.type="hidden",e}},{key:"_createUploadedFileElement",value:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.classList.add("drivePickerUploadFile"),t.appendChild(this._buildRemoveExternalUploadedFileButton(e)),t}}],n&&_P(t.prototype,n),r&&_P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mc);const kP=PP;function TP(e){return TP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TP(e)}function jP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AP(r.key),r)}}function IP(){return IP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},IP.apply(this,arguments)}function FP(e,t){return FP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},FP(e,t)}function RP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=CP(e);if(t){var o=CP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===TP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function CP(e){return CP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CP(e)}function DP(e,t,n){return(t=AP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AP(e){var t=function(e,t){if("object"!==TP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==TP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===TP(t)?t:String(t)}var xP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FP(e,t)}(i,e);var t,n,r,o=RP(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"onFileSelected",value:function(e){IP(CP(i.prototype),"onFileSelected",this).call(this,{id:i.FAKE_FILE_ID,title:i.FAKE_FILE_NAME,fileSize:i.FAKE_FILE_SIZE})}},{key:"_getAccessToken",value:function(){return i.FAKE_ACCESS_TOKEN}}])&&jP(t.prototype,n),r&&jP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kP);DP(xP,"FAKE_FILE_NAME","googleDriveFile.txt"),DP(xP,"FAKE_FILE_SIZE","1"),DP(xP,"FAKE_FILE_ID","fileId"),DP(xP,"FAKE_ACCESS_TOKEN","accessToken");const NP=xP;var LP=n(48723),MP=n.n(LP);function BP(e){return BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BP(e)}function VP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UP(r.key),r)}}function UP(e){var t=function(e,t){if("object"!==BP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==BP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===BP(t)?t:String(t)}var WP=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r}var t,n,r;return t=e,(n=[{key:"load",value:function(){if(this._isGoogleDriveApiAvailable()){var e=this._buildGoogleDrivePickerButton(),t=document.getElementById("fileInput_"+this._fieldId);t&&t.appendChild(e)}}},{key:"_buildGoogleDrivePickerButton",value:function(){var e=this,t=document.createElement("a");return t.innerText=this._configuration.chooseFromDriveText,t.setAttribute("id","drivePicker"),t.setAttribute("href","#"),t.className="drivePickerButton",t.addEventListener("click",(function(t){t.preventDefault(),e._googleDrivePickerClickEventListener()})),t}},{key:"_googleDrivePickerClickEventListener",value:function(){if(this._useMocks)new NP(this._fieldId,this._configuration).onFileSelected(null);else{var e=new kP(this._fieldId,this._configuration);new(MP())({apiKey:this._configuration.appKey,clientId:this._configuration.clientId,scope:this._configuration.scope,buttonEl:document.getElementById("drivePicker"),onSelect:e.onFileSelected.bind(e),extensions:this._configuration.allowedFileExtensions})}}},{key:"_isGoogleDriveApiAvailable",value:function(){var e=new Mc.Z;return this._useMocks?!!e.get("enableGoogleDriveDummyApi"):"undefined"!=typeof gapi&&"undefined"!=typeof google}}])&&VP(t.prototype,n),r&&VP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const HP=WP;function YP(e){return YP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YP(e)}function zP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JP(r.key),r)}}function QP(e,t){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QP(e,t)}function qP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=GP(e);if(t){var o=GP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===YP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function GP(e){return GP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GP(e)}function JP(e){var t=function(e,t){if("object"!==YP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==YP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===YP(t)?t:String(t)}var ZP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QP(e,t)}(i,e);var t,n,r,o=qP(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(t))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: month must be a valid integer");var r=PortalDate.fromParams(1904,e,t);return(n=o.call(this,r))._day=t,n._month=e,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}}])&&zP(t.prototype,n),r&&zP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bo);!function(e,t,n){(t=JP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ZP,"TYPE","FieldDayAndMonthValue");const KP=ZP;var $P=n(68806),XP=n.n($P);const ek=function(){function e(){this.keyGenerator=new ME}return e.prototype.cleanIfNeeded=function(e){var t=BE.getInstance();e&&t.getKey()===this.keyGenerator.generateKey()||t.removeAll()},e}();function tk(e){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(e)}function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rk(r.key),r)}}function rk(e){var t=function(e,t){if("object"!==tk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tk(t)?t:String(t)}var ok=null,ik=!1,ak=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!ik)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return ok||(ik=!0,ok=new e,ik=!1),ok}}],(n=[{key:"init",value:function(){var e=ze.getInstance(),t=this._getWizardsRegistrars();(new ek).cleanIfNeeded(t.length>0),t.forEach((function(t){if(t.hasOwnProperty("wizardId")&&t.hasOwnProperty("settings")&&t.hasOwnProperty("fields")){var n=new sP(t.wizardId,t.settings,t.fields);e.addWizard(t.wizardId,n),n.register()}}))}},{key:"_getWizardsRegistrars",value:function(){try{var e=new Tn.Z;return JSON.parse(e.get("avature.wizard.registrars"))||[]}catch(e){return e instanceof SyntaxError?console.error("WizardsRegister - Error while parsing Wizard registrars: "+e.message):console.error("WizardsRegister - "+e.message),[]}}}])&&nk(t.prototype,n),r&&nk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const uk=ak;function lk(e){return lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lk(e)}function sk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ck(r.key),r)}}function ck(e){var t=function(e,t){if("object"!==lk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lk(t)?t:String(t)}var fk=null,pk=!1,dk=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!pk)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,n=[{key:"init",value:function(e,t){var n=this;t&&(t.entityData=pjQuery('input[name ="entityData"]').val()),pjQuery.post("_linkedinWizardMappingApi/"+e,JSON.stringify(t),(function(e){n._fillWizard(e.mapping,e.entityData)}))}},{key:"_fillWizard",value:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(this._areFieldsBeingMappedInATableRow(e[n])?this._mapFieldsInATableRow(n,e[n]):this._mapField(n,e[n].value,e[n].builtinFieldTypeCode));this._setAutofilledWithLinkedinProfileDataInput(),this._setEntityDataInput(t)}},{key:"_areFieldsBeingMappedInATableRow",value:function(e){return e.constructor===Array}},{key:"_mapField",value:function(e,t,n){"photo"===n?Fields.getField(e).setSocialLoginPhoto(t):this._setFieldValue(e,t)}},{key:"_mapFieldsInATableRow",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){this._addRowIfRequired(e,n);var r=t[n].value;for(var o in r)if(r.hasOwnProperty(o)){var i=this._getTableFieldId(e,o,n);this._setFieldValue(i,r[o])}}}},{key:"_getTableFieldId",value:function(e,t,n){var r=this._getElement("[id$="+e+"_"+n+' ] [data-schema-field-id="'+t+'"]'),o=this._getFieldInContainer(r);return o?o.prop("id"):null}},{key:"_setFieldValue",value:function(e,t){if(t)try{var n=this._buildFieldValueObject(e,t);Fields.setFieldValue(e,n)}catch(e){console.warn(e)}}},{key:"_getFieldInContainer",value:function(e){return e&&e.length?this._getElement("select",e).length?this._getElement("select",e):this._getElement('input[type="radio"]',e).length?this._getElement('input[type="radio"]',e):this._getElement("input",e).length?this._getElement("input",e):this._getElement("textarea",e).length?this._getElement("textarea",e):null:null}},{key:"_setAutofilledWithLinkedinProfileDataInput",value:function(){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).append(pjQuery("<input/>",{type:"hidden",name:"autofilledWithSocialProfileData",value:"linkedin"}))}))}},{key:"_setEntityDataInput",value:function(e){pjQuery('input[name ="entityData"]').val(e)}},{key:"_buildFieldValueObject",value:function(e,t){return this._isDateValue(t)?this._buildFieldValueObjectForDates(e,t):Array.isArray(t)?new FieldMultipleTextsValue(t):new FieldTextValue(t)}},{key:"_buildFieldValueObjectForDates",value:function(e,t){var n=PortalDate.fromParams(t.year,("0"+(t.month||1)).slice(-2),("0"+(t.day||1)).slice(-2));return Fields.fieldAcceptsValueType(e,FieldDateValue.TYPE)?new FieldDateValue(n):new FieldTextValue(n.format("dd-MMM-yyyy"))}},{key:"_isDateValue",value:function(e){return"object"===lk(e)&&"year"in e}},{key:"_getElement",value:function(e,t){return t&&t.length>0?pjQuery(e,t):pjQuery(e)}},{key:"_addRowIfRequired",value:function(e,t){pjQuery("[id$="+e+"_"+t+" ]").length||this._addRow(e)}},{key:"_addRow",value:function(e){pjQuery("#addRowFor_"+e).trigger("click")}}],r=[{key:"getInstance",value:function(){return fk||(pk=!0,fk=new e,pk=!1),fk}}],n&&sk(t.prototype,n),r&&sk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const yk=dk;function hk(e){return hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hk(e)}function vk(e){return function(e){if(Array.isArray(e))return mk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bk(e,t){if(e){if("string"==typeof e)return mk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mk(e,t):void 0}}function mk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gk(){gk=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=c(e[r],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==hk(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=c(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function _k(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function wk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sk(r.key),r)}}function Sk(e){var t=function(e,t){if("object"!==hk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hk(t)?t:String(t)}var Ok=null,Ek=!1,Pk=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!Ek)throw new Error("Constructor is private. Use getInstance() instead");this._autoSaveField=document.getElementById("wizardAutoSave"),this._isAutoSaveEnabled()&&(this._form=this._autoSaveField.closest("form"),this._revision=parseInt(this._autoSaveField.dataset.baseRevision),this._actionInterval=parseInt(this._autoSaveField.dataset.actionInterval),this._actionName=this._autoSaveField.dataset.action,this._setFormDataSaved(new FormData(this._form)))}var t,n,r,o,i;return t=e,n=[{key:"init",value:function(){var e=this;this._isAutoSaveEnabled()&&(this._timer=setInterval((function(){return e._triggerSave()}),this._actionInterval))}},{key:"_isAutoSaveEnabled",value:function(){return this._autoSaveField}},{key:"_triggerSave",value:(o=gk().mark((function e(){var t,n,r=this;return gk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getFormValue();case 2:if(t=e.sent,this._hasDataFormChanged(t)){e.next=5;break}return e.abrupt("return");case 5:n=this._form.action||window.location.href,fetch(n,{method:"POST",body:this._prepareFormDataForSave(t)}).then((function(e){return e.json()})).then((function(e){if(!e||!0!==e.success)throw new Error;r._onAutoSaveSuccess(e.data,t)})).catch((function(){return r._onAutoSaveError()}));case 7:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){_k(i,n,r,a,u,"next",e)}function u(e){_k(i,n,r,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"_onAutoSaveSuccess",value:function(e,t){this._updateFileFieldsInFormAndFormData(e,t),this._setFormDataSaved(t),this._revision=this._revision+1,this._dispatchAutoSaveEvent(XP().STATUS_SUCCESS)}},{key:"_updateFileFieldsInFormAndFormData",value:function(e,t){for(var n in e){var r="file_"+n,o=r+"_fileNumber",i=r+"_fileState";this._isFilePresentInThisStep(r)?(this._addRemoveButton(n),this._clearFileInput(r,t)):this._replaceSerializedFileWithFileNumber(n,o,t),this._updateFileNumberInput(o,e[n],t),this._removeFileStateInput(i,t)}}},{key:"_isFilePresentInThisStep",value:function(e){return document.getElementsByName(e).length>0}},{key:"_addRemoveButton",value:function(e){var t=J.getField(e);t&&t.addRemoveButton()}},{key:"_replaceSerializedFileWithFileNumber",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).name=t,r.value="",n.delete(e),n.append(t,""))}},{key:"_clearFileInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).value="",t.set(e,new File([""],"",{type:"application/octet-stream"})))}},{key:"_updateFileNumberInput",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).value=t,n.set(e,t))}},{key:"_removeFileStateInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).remove(),t.delete(e))}},{key:"_onAutoSaveError",value:function(){clearInterval(this._timer),this._dispatchAutoSaveEvent(XP().STATUS_ERROR)}},{key:"_dispatchAutoSaveEvent",value:function(e){XP().getInstance().dispatchEvent(XP().EVENT_AUTO_SAVE_NAME,{status:e,autoSaveActionName:this._actionName})}},{key:"_prepareFormDataForSave",value:function(e){var t=this._cloneFormData(e);return t.append(this._actionName,"automatic"),t.append("revision",this._revision+1),t}},{key:"_cloneFormData",value:function(e){var t=new FormData;return e.forEach((function(e,n){t.append(n,e)})),t}},{key:"_getFormValue",value:function(){var e=this;return J.dispatchBeforeSubmitAutoPartialSave().then((function(){return new FormData(e._form)}))}},{key:"_hasDataFormChanged",value:function(e){var t,n=0,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bk(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;n++;var i=e.getAll(o),a=this._formDataSaved.getAll(o);if(!this._areFormValuesEqual(i,a))return!0}}catch(e){r.e(e)}finally{r.f()}return this._hasNumberOfKeysInTheFormDataChanged(n)}},{key:"_hasNumberOfKeysInTheFormDataChanged",value:function(e){return e!==this._formDataSavedLength}},{key:"_areFormValuesEqual",value:function(e,t){var n=this;return!(!Array.isArray(e)||!Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)&&e.every((function(e,r){return!(e instanceof File)||n._areFileEquals(e,t[r])}))}},{key:"_areFileEquals",value:function(e,t){return e instanceof File&&t instanceof File&&e.size===t.size&&e.name===t.name&&e.type===t.type}},{key:"_setFormDataSaved",value:function(e){this._formDataSaved=e,this._formDataSavedLength=vk(this._formDataSaved.entries()).length}}],r=[{key:"getInstance",value:function(){return Ok||(Ek=!0,Ok=new e,Ek=!1),Ok}}],n&&wk(t.prototype,n),r&&wk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const kk=Pk;function Tk(e){return Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tk(e)}function jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ik(r.key),r)}}function Ik(e){var t=function(e,t){if("object"!==Tk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tk(t)?t:String(t)}var Fk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this,t=XP().getInstance();t.addEventHandler(XP().EVENT_LOAD_NAME,(function(){return e._initWizardsManager()}),XP().PRIORITY_HIGH),t.addEventHandler(XP().EVENT_LOAD_NAME,(function(){return e._initProfileDataWizardMapper()}),XP().PRIORITY_MEDIUM),t.addEventHandler(XP().EVENT_LOAD_NAME,(function(){return e._initAutoPartialSave()}),XP().PRIORITY_LOWEST)}},{key:"_initWizardsManager",value:function(){uk.getInstance().init()}},{key:"_initAutoPartialSave",value:function(){kk.getInstance().init()}},{key:"_initProfileDataWizardMapper",value:function(){if((new Mc.Z).get("linkedinDataCallbackNeeded")){var e=new Tn.Z,t=window.sessionStorage.getItem("linkedinProfileData"),n=e.get("avature.wizard.currentStepId");n&&t&&yk.getInstance().init(n,JSON.parse(t))}else window.sessionStorage.setItem("linkedinProfileData",null)}}])&&jk(t.prototype,n),r&&jk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();(new Fk).init(),n.g.ApiCache=l,n.g.AccessibleErrorValidationHandler=g,n.g.ArithmeticField=Vt,n.g.AutocompleteMultipleSelectField=dr,n.g.AutocompleteSelectField=Nn,n.g.ButtonBarField=mP,n.g.CheckboxField=Jr,n.g.CheckboxListField=io,n.g.ConfirmationField=Au,n.g.CurrencyField=So,n.g.CustomFormatDateField=Ei,n.g.DayAndMonthDateField=Hu,n.g.EncryptedFullDateField=os,n.g.EncryptedSelectField=El,n.g.EncryptedAutocompleteSelectField=Ml,n.g.EncryptedTextField=ms,n.g.Fields=J,n.g.FileField=af,n.g.FormattedTextField=Yf,n.g.FormField=$f,n.g.FullDateField=ql,n.g.GenericField=ap,n.g.InputField=yo,n.g.InstantSearchField=jp,n.g.JobVariableField=Np,n.g.KeywordsField=yp,n.g.LocationDistanceSearchField=hd,n.g.LocationField=Nd,n.g.LocationStateCreateField=Yd,n.g.LocationStateSearchField=$d,n.g.MonthAndYearDateField=hy,n.g.MultipleSelectField=Ey,n.g.NumberField=Dy,n.g.NumberProgressField=Ky,n.g.NumberStarsField=ah,n.g.PdfEditor=bf,n.g.PhotoField=hh,n.g.PlainTextField=Oh,n.g.PostalCodeRadiusField=Vh,n.g.RadioButtonListField=Gh,n.g.RecordVideoField=Cv,n.g.SchedulingField=Qv,n.g.SelectField=Ku,n.g.SeparatorField=rb,n.g.SimpleTimeField=gb,n.g.SourceAndCategoryField=Tb,n.g.TableField=eg,n.g.TextField=Ff,n.g.TimeField=lg,n.g.UserNotificationsEmailField=bg,n.g.UserTimeZoneField=kg,n.g.ReuseUploadedFilesWidget=Dm,n.g.LargeFileUploadDialog=NE,n.g.GoogleDriveChooserLoader=HP,n.g.DropboxChooserLoader=Hc,n.g.FieldBooleanValue=Ur,n.g.FieldDateValue=Bo,n.g.FieldDayAndMonthValue=KP,n.g.FieldEmptyValue=A,n.g.FieldFileUploadedValue=As,n.g.FieldFileValue=ks,n.g.FieldFullDateValue=hi,n.g.FieldIdValue=Gt,n.g.FieldLocationDistanceValue=ad,n.g.FieldLocationValue=Od,n.g.FieldMonthAndYearValue=ay,n.g.FieldMultipleIdsValue=Yn,n.g.FieldMultipleOptionsValue=pn,n.g.FieldMultipleTextsValue=$n,n.g.FieldNumberValue=Rt,n.g.FieldOptionValue=nn,n.g.FieldPostalCodeRadiusValue=Rh,n.g.FieldRadiusValue=$p,n.g.FieldTextValue=Ot,n.g.FieldTimeValue=fb,n.g.ValueBase=O,n.g.DatasetFieldOptionsDatasource=h_,n.g.DatasetSingleColumnFieldOptionsDatasource=O_,n.g.Datasources=bn,n.g.DefaultValueDatasources=Sf,n.g.DummyDatasource=B_,n.g.DynamicDefaultValueDatasetFieldOptionsDatasource=uO,n.g.GeneralOptionsDatasource=q_,n.g.InstantSearchDatasource=tw,n.g.JobSuggestionsDatasource=cw,n.g.LinkToPersonDatasource=kw,n.g.LocalDatasource=R_,n.g.LocationDatasource=Zw,n.g.LocationStandardizedStateDatasource=pS,n.g.LocationStandardizedStateSearchDatasource=_S,n.g.PostalCodeDatasource=jS,n.g.SourcesDatasource=LS,n.g.TimeZoneDatasource=QS,n.g.UsersDatasource=mw,n.g.RequiredValidator=TO,n.g.MinLengthValidator=xO},86472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(89554),n(41539),n(54747);const r=function(){function e(){this.dispatchedEvents=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.dispatch=function(t,n){var r=new CustomEvent(e.EVENT_NAME,{detail:{widgetId:t,dynamicJsxContainer:n}});this.dispatchedEvents.push(r),document.dispatchEvent(r)},e.prototype.addListener=function(t,n){var r=function(e){e.detail.widgetId===t&&n(e.detail.dynamicJsxContainer)};return document.addEventListener(e.EVENT_NAME,r),this.dispatchedEvents.forEach((function(e){return r(e)})),r},e.prototype.removeListener=function(t){document.removeEventListener(e.EVENT_NAME,t)},e.EVENT_NAME="DynamicJsxChanged",e}()},54248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){var e=document.querySelector('meta[name="avature.portal.lang"]');return null==e?void 0:e.content}},92384:(e,t,n)=>{"use strict";n(65743);var r=n(86472);const o=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.inject=function(e,t){r.Z.getInstance().dispatch(e,t)},e}();var i=n(67294);globalThis.JsxInjector=o,globalThis._PortalReact={createElement:i.createElement,Fragment:i.Fragment}},53493:(e,t,n)=>{"use strict";n.r(t)},93064:(e,t,n)=>{"use strict";n.r(t)},7556:(e,t,n)=>{"use strict";n.r(t)}},e=>{var t=t=>e(e.s=t);e.O(0,[200,324,770,515,971,894],(()=>(t(75799),t(38781),t(86698),t(36406),t(83433),t(92384))));e.O()}]);
